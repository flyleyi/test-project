"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getENV=exports.getUA=exports.ENV_ENUM_SUB=exports.APP_TYPE=exports.ENV_ENUM=void 0;var sdk_1=require("./sdk"),sdk_2=require("./sdk");Object.defineProperty(exports,"ENV_ENUM",{enumerable:!0,get:function(){return sdk_2.ENV_ENUM}}),Object.defineProperty(exports,"APP_TYPE",{enumerable:!0,get:function(){return sdk_2.APP_TYPE}}),Object.defineProperty(exports,"ENV_ENUM_SUB",{enumerable:!0,get:function(){return sdk_2.ENV_ENUM_SUB}});var dingtalk_javascript_env_1=require("./packages/dingtalk-javascript-env"),getTopBridge=function(){try{if("undefined"!=typeof window&&void 0!==window.top){return window.top.__dingtalk_jsapi_top_platfrom_config__}}catch(e){return}},EDdWeexEnv;!function(e){e.singlePage="singlePage",e.miniApp="miniApp",e.miniWidget="miniWidget"}(EDdWeexEnv||(EDdWeexEnv={}));var getUA=function(){var e="";try{"undefined"!=typeof navigator&&(e=navigator&&(navigator.userAgent||navigator.swuserAgent)||"")}catch(t){e=""}return e};exports.getUA=getUA;var getENV=function(){var e=exports.getUA(),t=/iPhone|iPad|iPod|iOS/i.test(e),i=/Android/i.test(e),n=/Nebula/i.test(e),a=/DingTalk/i.test(e),r=/dd-web/i.test(e),d="object"==typeof nuva,_="object"==typeof dd&&"function"==typeof dd.dtBridge,s=_&&t||d&&t,o=a||dingtalk_javascript_env_1.default.isDingTalk,E=t&&o||dingtalk_javascript_env_1.default.isWeexiOS||s,g=i&&o||dingtalk_javascript_env_1.default.isWeexAndroid,p=n&&o||_,v=r,l=sdk_1.APP_TYPE.WEB;if(v)l=sdk_1.APP_TYPE.WEBVIEW_IN_MINIAPP;else if(p)l=sdk_1.APP_TYPE.MINI_APP;else if(dingtalk_javascript_env_1.default.isWeexiOS||dingtalk_javascript_env_1.default.isWeexAndroid)try{var f=weex.config.ddWeexEnv;l=f===EDdWeexEnv.miniWidget?sdk_1.APP_TYPE.WEEX_WIDGET:sdk_1.APP_TYPE.WEEX}catch(e){l=sdk_1.APP_TYPE.WEEX}var u,c="*",P=e.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===P&&(P=e.match(/DingTalk\/([a-zA-Z0-9.-]+)/));var N;P&&P[1]&&(N=P[1]);var k="";if("undefined"!=typeof name&&(k=name),k)try{var A=JSON.parse(k);A.hostVersion&&(N=A.hostVersion),c=A.language||navigator.language||"*",u=A.containerId}catch(e){}var U=!!u;U&&!N&&(P=e.match(/DingTalk\(([a-zA-Z0-9\.-]+)\)/))&&P[1]&&(N=P[1]);var x,V=sdk_1.ENV_ENUM_SUB.noSub;if(E)x=sdk_1.ENV_ENUM.ios;else if(g)x=sdk_1.ENV_ENUM.android;else if(U){var m=e.indexOf("Macintosh; Intel Mac OS")>-1;V=m?sdk_1.ENV_ENUM_SUB.mac:sdk_1.ENV_ENUM_SUB.win,x=sdk_1.ENV_ENUM.pc}else{var W=getTopBridge();x=W&&W.platform?W.platform:sdk_1.ENV_ENUM.notInDingTalk}return{platform:x,platformSub:V,version:N,appType:l,language:c}};exports.getENV=getENV;