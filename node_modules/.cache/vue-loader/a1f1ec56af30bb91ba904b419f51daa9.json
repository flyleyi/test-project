{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/student/components/ReportDialog/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/student/components/ReportDialog/index.vue","mtime":1627979214291},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdAL3BsdWdpbnMvYXhpb3MnOwppbXBvcnQgeyBCdXR0b24sIERpYWxvZywgVXBsb2FkIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCB7IGFqYXhVcGxvYWRTaW5nbGUgfSBmcm9tICdAL3BhZ2VzL2NoYXJpdHktZm91bmRhdGlvbi9hcGkvZmlsZS9pbmRleCc7CmltcG9ydCB7CiAgdXBkYXRlU3R1ZGVudEJ5SWQsCiAgZG93bmxvYWRGaWxlCn0gZnJvbSAnQC9wYWdlcy9jaGFyaXR5LWZvdW5kYXRpb24vYXBpL3N1dGRlbnQvaW5kZXgnOwppbXBvcnQgcGRmIGZyb20gJ3Z1ZS1wZGYnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JlcG9ydERpYWxvZycsCiAgY29tcG9uZW50czogewogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgW0RpYWxvZy5uYW1lXTogRGlhbG9nLAogICAgW1VwbG9hZC5uYW1lXTogVXBsb2FkLAogICAgcGRmCiAgfSwKICBwcm9wczogewogICAgLyoqCiAgICAgKiDmiJDlip/lm57osIMKICAgICAqLwogICAgb25TdWNjZXNzOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuaooeaAgeahhgogICAgICBwcmVzZXJ2YXRpb25CdG46IHRydWUsCiAgICAgIHRpdGxlOiAnJywKICAgICAgZWRpdEl0ZW06IG51bGwsCiAgICAgIGltZ1VybDogJycsCiAgICAgIGltZ05hbWU6ICcnLAogICAgICBwZGZVcmw6ICcnLAogICAgICBpbWdUeXBlOiAnJywKICAgICAgY3VycmVudFBhZ2U6IDAsIC8vIHBkZuaWh+S7tumhteeggQogICAgICBwYWdlQ291bnQ6IDAsIC8vIHBkZuaWh+S7tuaAu+mhteaVsAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOaYvuekuuaooeaAgeahhuWKqOeUu+e7k+adnwogICAgICogIEBwYXJhbSB7T2JqZWN0fX0gZWRpdEl0ZW0g5L+u5pS56aG5CiAgICAgKiAgQHBhcmFtIHtTdHJpbmd9fSBpbWdVcmxLZXkg5Zu+54mHVVJs6ZSu5YC8CiAgICAgKiAgQHBhcmFtIHtTdHJpbmd9fSBpbWdOYW1lS2V5IOWbvueJh+WQjeensOmUruWAvAogICAgICovCiAgICBzaG93KGVkaXRJdGVtLCBpbWdVcmxLZXksIGltZ05hbWVLZXkpIHsKICAgICAgdGhpcy5lZGl0SXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWRpdEl0ZW0pKTsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5pbWdVcmwgPSB0aGlzLmVkaXRJdGVtW2ltZ1VybEtleV0gPyB0aGlzLmVkaXRJdGVtW2ltZ1VybEtleV0gOiAnJzsKICAgICAgdGhpcy5pbWdOYW1lID0gdGhpcy5lZGl0SXRlbVtpbWdOYW1lS2V5XSA/IHRoaXMuZWRpdEl0ZW1baW1nTmFtZUtleV0gOiAnJzsKICAgICAgbGV0IHR5cGUgPSB0aGlzLmltZ1VybC5zcGxpdCgnLicpOwogICAgICB0aGlzLmltZ1R5cGUgPSB0eXBlW3R5cGUubGVuZ3RoIC0gMV07CiAgICAgIC8vIHBkZuWBmueJueauiuWkhOeQhgogICAgICBpZiAodGhpcy5pbWdUeXBlID09PSAnUERGJyB8fCB0aGlzLmltZ1R5cGUgPT09ICdwZGYnKSB7CiAgICAgICAgbGV0IHN0ciA9IHRoaXMuaW1nVXJsLmluZGV4T2YoJy8nKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICAgICAgc3RyID0gdGhpcy5pbWdVcmwuaW5kZXhPZignLycsIHN0ciArIDEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBkZlVybCA9IGAvcGRmJHt0aGlzLmltZ1VybC5zdWJzdHJpbmcoc3RyKX1gOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKGVkaXRJdGVtLCB0aGlzLmltZ1VybC5sZW5ndGgsIHRoaXMuaW1nVXJsLCB0aGlzLmltZ05hbWUpOwogICAgfSwKICAgIC8v5Yid5aeL5YyW5paw5bu66KGo5Y2V55qE5pWw5o2u6buY6K6k5YC8CiAgICBpbml0RGlhbG9nRm9ybURhdGEoKSB7CiAgICAgIHRoaXMuZWRpdEl0ZW0gPSBudWxsOwogICAgICB0aGlzLmltZ1VybCA9ICcnOwogICAgICB0aGlzLmltZ05hbWUgPSAnJzsKICAgICAgdGhpcy5pbWdUeXBlID0gJyc7CiAgICAgIHRoaXMucGRmVXJsID0gJyc7CiAgICB9LAogICAgLyoqCiAgICAgKiDlhbPpl63mqKHmgIHmoYbliqjnlLvnu5PmnZ8KICAgICAqLwogICAgb25DbG9zZWQoKSB7CiAgICAgIHRoaXMuaW5pdERpYWxvZ0Zvcm1EYXRhKCk7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgfSwKICAgIGNsb3NlZCgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgcHJlc2VydmF0aW9uKCkgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIGlkOiB0aGlzLmVkaXRJdGVtLmlkLAogICAgICAgIGhlYWx0aFJlcG9ydDogdGhpcy5pbWdVcmwsCiAgICAgICAgaGVhbHRoTmFtZTogdGhpcy5pbWdOYW1lCiAgICAgIH07CiAgICAgIHVwZGF0ZVN0dWRlbnRCeUlkKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S4iuS8oOaIkOWKnycKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0QnRuKCkgewogICAgICAvLyB3aW5kb3cub3Blbih0aGlzLmltZ1VybCk7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgZmlsZU5hbWU6IHRoaXMuaW1nTmFtZSwKICAgICAgICBmaWxlUGF0aDogdGhpcy5pbWdVcmwKICAgICAgfTsKICAgICAgZG93bmxvYWRGaWxlKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzXSwgewogICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcKICAgICAgICB9KTsKICAgICAgICBsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGAke3RoaXMuaW1nTmFtZX1gKTsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgbGluayA9IG51bGw7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIvovb3miJDlip8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkuIrkvKDlm77niYfpmZDliLYKICAgICAqLwogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNMaW10ID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQ7CiAgICAgIGlmICghaXNMaW10KSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5paH5Lu25LiN6IO96LaF6L+HMU0hJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzTGltdDsKICAgIH0sCiAgICBhamF4VXBsb2FkU2luZ2xlKGZpbGUpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUuZmlsZSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXBwaWQnLCAnb3NzNTR5N2l1Jyk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXBwc2VjcmV0JywgJzFrNThxNml3Jyk7CiAgICAgIGFqYXhVcGxvYWRTaW5nbGUoZm9ybURhdGEpLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgICBpZiAoTnVtYmVyKHJlcy5jb2RlKSA9PT0gODIwMCkgewogICAgICAgICAgdGhpcy5pbWdVcmwgPSByZXMuZGF0YVswXS51cmw7CiAgICAgICAgICB0aGlzLmltZ05hbWUgPSByZXMuZGF0YVswXS5vcmlnaW5hbE5hbWU7CiAgICAgICAgICBsZXQgdHlwZSA9IHRoaXMuaW1nVXJsLnNwbGl0KCcuJyk7CiAgICAgICAgICB0aGlzLmltZ1R5cGUgPSB0eXBlW3R5cGUubGVuZ3RoIC0gMV07CiAgICAgICAgICAvLyBwZGblgZrnibnmrorlpITnkIYKICAgICAgICAgIGlmICh0aGlzLmltZ1R5cGUgPT09ICdQREYnIHx8IHRoaXMuaW1nVHlwZSA9PT0gJ3BkZicpIHsKICAgICAgICAgICAgbGV0IHN0ciA9IHRoaXMuaW1nVXJsLmluZGV4T2YoJy8nKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICAgICAgICBzdHIgPSB0aGlzLmltZ1VybC5pbmRleE9mKCcvJywgc3RyICsgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5wZGZVcmwgPSBgL3BkZiR7dGhpcy5pbWdVcmwuc3Vic3RyaW5nKHN0cil9YDsKICAgICAgICAgIH0KICAgICAgICAgIGF3YWl0IHRoaXMucHJlc2VydmF0aW9uKCk7CiAgICAgICAgICAvLyB0aGlzLnByZXNlcnZhdGlvbkJ0biA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5pS55Y+YUERG6aG156CBLHZhbOS8oOi/h+adpeWMuuWIhuS4iuS4gOmhteS4i+S4gOmhteeahOWAvCww5LiK5LiA6aG1LDHkuIvkuIDpobUKICAgIGNoYW5nZVBkZlBhZ2UodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCkKICAgICAgaWYgKHZhbCA9PT0gMCAmJiB0aGlzLmN1cnJlbnRQYWdlID4gMSkgewogICAgICAgIHRoaXMuY3VycmVudFBhZ2UtLTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRQYWdlKQogICAgICB9CiAgICAgIGlmICh2YWwgPT09IDEgJiYgdGhpcy5jdXJyZW50UGFnZSA8IHRoaXMucGFnZUNvdW50KSB7CiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFBhZ2UpCiAgICAgIH0KICAgIH0sCgogICAgLy8gcGRm5Yqg6L295pe2CiAgICBsb2FkUGRmSGFuZGxlcihlKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOyAvLyDliqDovb3nmoTml7blgJnlhYjliqDovb3nrKzkuIDpobUKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/student/components/ReportDialog","sourcesContent":["<template>\n  <el-dialog\n    :visible.sync=\"visible\"\n    :title=\"title || ''\"\n    center\n    :close-on-click-modal=\"false\"\n    :close-on-press-escape=\"false\"\n    v-on=\"$listeners\"\n    @closed=\"onClosed\"\n    width=\"60%\"\n  >\n    <div class=\"import-data-content\">\n      <div\n        class=\"reportbox\"\n        v-if=\"\n          imgUrl &&\n            (imgType === 'jpg' ||\n              imgType === 'JPG' ||\n              imgType === 'png' ||\n              imgType === 'PNG' ||\n              imgType === 'gif' ||\n              imgType === 'GIF' ||\n              imgType === 'jpeg' ||\n              imgType === 'JPEG' ||\n              imgType === 'bmp' ||\n              imgType === 'BMP')\n        \"\n      >\n        <img :src=\"imgUrl ? imgUrl : ''\" alt=\"\" />\n      </div>\n      <div v-else-if=\"pdfUrl && (imgType === 'pdf' || imgType === 'PDF')\">\n        <p class=\"arrow\">\n          <span\n            @click=\"changePdfPage(0)\"\n            class=\"turn\"\n            :class=\"{ grey: currentPage == 1 }\"\n            >上一页</span\n          >\n          {{ currentPage }} / {{ pageCount }}\n          <span\n            @click=\"changePdfPage(1)\"\n            class=\"turn\"\n            :class=\"{ grey: currentPage == pageCount }\"\n            >下一页</span\n          >\n        </p>\n        <pdf\n          :src=\"pdfUrl\"\n          :page=\"currentPage\"\n          @num-pages=\"pageCount = $event\"\n          @page-loaded=\"currentPage = $event\"\n          @loaded=\"loadPdfHandler\"\n        ></pdf>\n      </div>\n      <div\n        class=\"reportbox\"\n        v-else-if=\"\n          imgUrl &&\n            (imgType === 'xls' ||\n              imgType === 'xlsx' ||\n              imgType === 'doc' ||\n              imgType === 'docx' ||\n              imgType === 'XLS' ||\n              imgType === 'XLSX' ||\n              imgType === 'DOC' ||\n              imgType === 'DOCX')\n        \"\n      >\n        文件\"{{ imgName }}\"不支持在线查看，请\n        <p\n          style=\"color: #409EFF;cursor: pointer;padding:0 5px\"\n          @click=\"exportBtn\"\n        >\n          下载\n        </p>\n        后观看\n      </div>\n      <div v-else class=\"nothavImg\">暂无数据，请导入后查看</div>\n      <!-- <div v-else class=\"nothavImg\">暂无图片</div> -->\n      <div class=\"btnbox\">\n        <el-upload\n          class=\"avatar-uploader\"\n          action=\"\"\n          :show-file-list=\"false\"\n          :multiple=\"false\"\n          :before-upload=\"beforeAvatarUpload\"\n          :http-request=\"ajaxUploadSingle\"\n          accept=\".jpg,.jpeg,.png,.bmp,.doc,.docx,.xls,.xlsx,.wps,.pdf,.JPG,.JPEG,.PBG,.BMP,.DOC,.DOCX,.XLS,.XLSX,.WPS,.PDF\"\n        >\n          <el-button type=\"primary\">导入</el-button>\n        </el-upload>\n        <el-button\n          type=\"primary\"\n          @click=\"exportBtn\"\n          :disabled=\"imgUrl.length <= 0\"\n          >导出</el-button\n        >\n      </div>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport axios from '@/plugins/axios';\nimport { Button, Dialog, Upload } from 'element-ui';\nimport { ajaxUploadSingle } from '@/pages/charity-foundation/api/file/index';\nimport {\n  updateStudentById,\n  downloadFile\n} from '@/pages/charity-foundation/api/sutdent/index';\nimport pdf from 'vue-pdf';\nexport default {\n  name: 'ReportDialog',\n  components: {\n    [Button.name]: Button,\n    [Dialog.name]: Dialog,\n    [Upload.name]: Upload,\n    pdf\n  },\n  props: {\n    /**\n     * 成功回调\n     */\n    onSuccess: {\n      type: Function\n    }\n  },\n  data() {\n    return {\n      visible: false, // 是否显示模态框\n      preservationBtn: true,\n      title: '',\n      editItem: null,\n      imgUrl: '',\n      imgName: '',\n      pdfUrl: '',\n      imgType: '',\n      currentPage: 0, // pdf文件页码\n      pageCount: 0, // pdf文件总页数\n      loading: false\n    };\n  },\n  watch: {},\n  methods: {\n    /**\n     * 显示模态框动画结束\n     *  @param {Object}} editItem 修改项\n     *  @param {String}} imgUrlKey 图片URl键值\n     *  @param {String}} imgNameKey 图片名称键值\n     */\n    show(editItem, imgUrlKey, imgNameKey) {\n      this.editItem = JSON.parse(JSON.stringify(editItem));\n      this.visible = true;\n      this.imgUrl = this.editItem[imgUrlKey] ? this.editItem[imgUrlKey] : '';\n      this.imgName = this.editItem[imgNameKey] ? this.editItem[imgNameKey] : '';\n      let type = this.imgUrl.split('.');\n      this.imgType = type[type.length - 1];\n      // pdf做特殊处理\n      if (this.imgType === 'PDF' || this.imgType === 'pdf') {\n        let str = this.imgUrl.indexOf('/');\n        for (let i = 0; i < 2; i++) {\n          str = this.imgUrl.indexOf('/', str + 1);\n        }\n        this.pdfUrl = `/pdf${this.imgUrl.substring(str)}`;\n      }\n      console.log(editItem, this.imgUrl.length, this.imgUrl, this.imgName);\n    },\n    //初始化新建表单的数据默认值\n    initDialogFormData() {\n      this.editItem = null;\n      this.imgUrl = '';\n      this.imgName = '';\n      this.imgType = '';\n      this.pdfUrl = '';\n    },\n    /**\n     * 关闭模态框动画结束\n     */\n    onClosed() {\n      this.initDialogFormData();\n      this.visible = false;\n      this.$emit('close');\n    },\n    closed() {\n      this.visible = false;\n    },\n    preservation() {\n      let params = {\n        id: this.editItem.id,\n        healthReport: this.imgUrl,\n        healthName: this.imgName\n      };\n      updateStudentById(params).then(res => {\n        this.$message({\n          type: 'success',\n          message: '上传成功'\n        });\n      });\n    },\n    exportBtn() {\n      // window.open(this.imgUrl);\n      let params = {\n        fileName: this.imgName,\n        filePath: this.imgUrl\n      };\n      downloadFile(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', `${this.imgName}`);\n        link.click();\n        link = null;\n        this.$message.success('下载成功');\n      });\n    },\n    /**\n     * 上传图片限制\n     */\n    beforeAvatarUpload(file) {\n      const isLimt = file.size / 1024 / 1024;\n      if (!isLimt) {\n        this.$message.error('上传文件不能超过1M!');\n      }\n      return isLimt;\n    },\n    ajaxUploadSingle(file) {\n      let formData = new FormData();\n      formData.append('file', file.file);\n      formData.append('appid', 'oss54y7iu');\n      formData.append('appsecret', '1k58q6iw');\n      ajaxUploadSingle(formData).then(async res => {\n        if (Number(res.code) === 8200) {\n          this.imgUrl = res.data[0].url;\n          this.imgName = res.data[0].originalName;\n          let type = this.imgUrl.split('.');\n          this.imgType = type[type.length - 1];\n          // pdf做特殊处理\n          if (this.imgType === 'PDF' || this.imgType === 'pdf') {\n            let str = this.imgUrl.indexOf('/');\n            for (let i = 0; i < 2; i++) {\n              str = this.imgUrl.indexOf('/', str + 1);\n            }\n            this.pdfUrl = `/pdf${this.imgUrl.substring(str)}`;\n          }\n          await this.preservation();\n          // this.preservationBtn = false;\n        }\n      });\n    },\n    // 改变PDF页码,val传过来区分上一页下一页的值,0上一页,1下一页\n    changePdfPage(val) {\n      // console.log(val)\n      if (val === 0 && this.currentPage > 1) {\n        this.currentPage--;\n        // console.log(this.currentPage)\n      }\n      if (val === 1 && this.currentPage < this.pageCount) {\n        this.currentPage++;\n        // console.log(this.currentPage)\n      }\n    },\n\n    // pdf加载时\n    loadPdfHandler(e) {\n      this.loading = true;\n      this.currentPage = 1; // 加载的时候先加载第一页\n      this.loading = false;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.import-data-content {\n  .reportbox {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    img {\n      width: 100%;\n    }\n  }\n  .arrow span {\n    cursor: pointer;\n  }\n  .nothavImg {\n    color: #909399;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 80px;\n    font-size: 14px;\n  }\n  .btnbox {\n    margin-top: 20px;\n    display: flex;\n    justify-content: center;\n    .avatar-uploader {\n      margin: 0 20px;\n    }\n  }\n}\n</style>\n"]}]}