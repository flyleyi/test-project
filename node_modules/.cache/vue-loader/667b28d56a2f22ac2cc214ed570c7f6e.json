{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/Permission/User/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/Permission/User/index.vue","mtime":1627979214288},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgQ2FyZCwKICBGb3JtLAogIEZvcm1JdGVtLAogIElucHV0LAogIFNlbGVjdCwKICBPcHRpb24sCiAgQnV0dG9uLAogIFRhYmxlLAogIFRhYmxlQ29sdW1uLAogIFBhZ2luYXRpb24KfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IFBlcm1pc3Npb25FZGl0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvcGVybWlzc2lvbkVkaXQvaW5kZXgnOwppbXBvcnQgewogIGdldFVzZXJMaXN0LAogIHVwZGF0ZVBhc3N3b3JkLAogIGRlbGV0ZUJ5SWQKfSBmcm9tICcuLi8uLi8uLi9hcGkvdXNlci9pbmRleCc7CmltcG9ydCB7IGdldE1lbnVMaXN0LCBnZXRSb2xlTGlzdCB9IGZyb20gJy4uLy4uLy4uL2FwaS9hdXRoL2luZGV4JzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Blcm1pc3Npb25Vc2VyJywKICBjb21wb25lbnRzOiB7CiAgICBbQ2FyZC5uYW1lXTogQ2FyZCwKICAgIFtGb3JtLm5hbWVdOiBGb3JtLAogICAgW0Zvcm1JdGVtLm5hbWVdOiBGb3JtSXRlbSwKICAgIFtJbnB1dC5uYW1lXTogSW5wdXQsCiAgICBbU2VsZWN0Lm5hbWVdOiBTZWxlY3QsCiAgICBbT3B0aW9uLm5hbWVdOiBPcHRpb24sCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sCiAgICBbVGFibGUubmFtZV06IFRhYmxlLAogICAgW1RhYmxlQ29sdW1uLm5hbWVdOiBUYWJsZUNvbHVtbiwKICAgIFtQYWdpbmF0aW9uLm5hbWVdOiBQYWdpbmF0aW9uLAogICAgUGVybWlzc2lvbkVkaXQKICB9LAogIGRhdGEoKSB7CiAgICAvLyBsZXQgcGFzc3dvcmRSdWxlcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgIC8vICAgY29uc29sZS5sb2codGhpcy5wYXNzd29yZFN1Y2Nlc3MsICdzdWNjZXNzJyk7CiAgICAvLyAgIGlmICh0aGlzLnBhc3N3b3JkU3VjY2VzcykgewogICAgLy8gICAgIHJldHVybiBjYWxsYmFjaygpOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy5wYXNzd29yZE1lc3NhZ2UpKTsKICAgIC8vICAgfQogICAgLy8gfTsKICAgIHJldHVybiB7CiAgICAgIEZvcm1EYXRhOiB7CiAgICAgICAgYWNjb3VudDogJycsIC8vIOi0puWPtwogICAgICAgIHR5cGU6ICcnIC8vIOexu+WeiyAxIOi/kOiQpSAy6LSi5YqhCiAgICAgIH0sCiAgICAgIG1lbnVMaXN0OiBbXSwgLy8g5p2D6ZmQ6I+c5Y2VCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsOiAwLCAvLyDmgLvmlbDph48KICAgICAgcGFzc3dvcmRTdWNjZXNzOiB0cnVlLAogICAgICBwYXNzd29yZE1lc3NhZ2U6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICAvLyBhY2NvdW50OiBbCiAgICAgICAgLy8gICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgLy8gICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgIC8vIF0KICAgICAgICAvLyAgIHBhc3N3b3JkOiBbCiAgICAgICAgLy8gICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAvLyAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICAvLyAgIF0KICAgICAgfSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLCAvL+mAieaLqQogICAgICByb2xlTGlzdDogW10gLy8g57G75Z6LCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOi3s+i9rOWIsOWNleeCueeZu+W9lemhtemdogogICAgY29uc29sZS5sb2coJ2FhYScpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERhdGEoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnc3RhZmZDb2RlJywgJ3N0YWZmTmFtZSddKQogIH0sCiAgZmlsdGVyczogewogICAgdGltZUZvbXRlcih2YWwpIHsKICAgICAgbGV0IHN0ciA9ICcnOwogICAgICBpZiAodmFsKSB7CiAgICAgICAgc3RyID0gdmFsLnJlcGxhY2UoJ1QnLCAnICcpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0ciA9ICctLSc7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXREYXRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBvZmZzZXQ6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgbGltaXQ6IHRoaXMucGFnZVNpemUsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMuRm9ybURhdGEuYWNjb3VudCA/IHRoaXMuRm9ybURhdGEuYWNjb3VudCA6ICcnLAogICAgICAgIHJvbGVJZDogdGhpcy5Gb3JtRGF0YS50eXBlID8gdGhpcy5Gb3JtRGF0YS50eXBlIDogJycKICAgICAgfTsKICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsKICAgICAgZ2V0VXNlckxpc3QocGFyYW1zKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnRhYmxlRGF0YSkgJiYgdGhpcy50YWJsZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICBnZXRNZW51TGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGxldCBtZW51TGlzdCA9IFtdOwogICAgICAgICAgICAgIGNvbnN0IHRyZWVDb252ZXJ0TGlzdCA9ICh0cmVlLCBjaGlsZHJlbktleSA9ICdjaGlsZHJlbicpID0+IHsKICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0cmVlKSkgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGxldCBmbiA9IGRhdGEgPT4gewogICAgICAgICAgICAgICAgICBsaXN0ID0gbGlzdC5jb25jYXQoZGF0YS5zbGljZSgwKSk7CiAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBpdGVtW2NoaWxkcmVuS2V5XTsKICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJiBmbihjaGlsZHJlbik7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGZuKHRyZWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBtZW51TGlzdCA9IHRyZWVDb252ZXJ0TGlzdChyZXNwb25zZS5kYXRhKTsgLy8g5omT5bmz5p2D6ZmQ5YiX6KGo5pWw5o2uCiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGxldCBtZW51SWRzID0gaXRlbS5tZW51SWRzID8gaXRlbS5tZW51SWRzLnNwbGl0KCcsJykgOiBbXTsgLy8g5bCG5q+P5Lq655qE6I+c5Y2VaWTlj5jkuLrmlbDnu4QKICAgICAgICAgICAgICAgIGxldCBtZW51U3RyID0gJyc7IC8vIOWwhuavj+S6uueahOiPnOWNlWlk5Y+Y5Li65a2X56ym5LiyCiAgICAgICAgICAgICAgICBtZW51SWRzLmZvckVhY2gobWVudWlkID0+IHsKICAgICAgICAgICAgICAgICAgbWVudVN0ciArPSBgJHttZW51TGlzdC5maW5kKG1ldW4gPT4gbWVudWlkID09IG1ldW4ubWVudUlkKQogICAgICAgICAgICAgICAgICAgIC5uYW1lIHx8ICcnfeOAgWA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgICAgICAgICAgaXRlbSwKICAgICAgICAgICAgICAgICAgJ21lbnVTdHInLAogICAgICAgICAgICAgICAgICBtZW51U3RyLnNsaWNlKDAsIG1lbnVTdHIubGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgICk7IC8vIOWOu+aOieacgOWQjuS4gOS4quWtl+espuS4sgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gZ2V0Um9sZUxpc3QoKS50aGVuKHJvbGUgPT4gewogICAgICAgICAgICAvLyAgIGRlYnVnZ2VyOwogICAgICAgICAgICAvLyAgIHRoaXMudGFibGVEYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIC8vICAgICBsZXQgcm9sZVN0ciA9ICcnOyAvLyDlsIbmr4/kurrnmoToj5zljZVpZOWPmOS4uuWtl+espuS4sgogICAgICAgICAgICAvLyAgICAgcm9sZS5kYXRhLmZvckVhY2gocm9sZWlkID0+IHsKICAgICAgICAgICAgLy8gICAgICAgcm9sZVN0ciA9CiAgICAgICAgICAgIC8vICAgICAgICAgcm9sZWlkLnJvbGVJZCA9PT0gaXRlbS5yb2xlSWQgPyByb2xlaWQucm9sZU5hbWUgOiAnJzsKICAgICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgICAvLyAgICAgdGhpcy4kc2V0KGl0ZW0sICdyb2xlTmFtZVN0cicsIHJvbGVTdHIpOyAvLyDljrvmjonmnIDlkI7kuIDkuKrlrZfnrKbkuLIKICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUuZG9MYXlvdXQoKTsgLy/op6PlhrPooajmoLzplJnkvY0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W57G75Z6L5pWw5o2uCiAgICBnZXRSb2xlTGlzdCgpIHsKICAgICAgZ2V0Um9sZUxpc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnrZvpgIkKICAgIHNjcmVlbigpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICB0aGlzLmluaXREYXRhKCk7CiAgICB9LAogICAgLy8g5o2i6aG1CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdmFsOwogICAgICB0aGlzLmluaXREYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDph43nva7ooajljZUKICAgICAqLwogICAgYXN5bmMgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgICBhd2FpdCB0aGlzLmluaXREYXRhKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlpJrpgInpobnmlLnlj5gKICAgICAqLwogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsOwogICAgfSwKICAgIC8qKgogICAgICog5Yig6ZmkCiAgICAgKi8KICAgIGRlbGV0ZVJvdyhpdGVtKSB7CiAgICAgIGlmIChpdGVtID09PSAnYWxsJyAmJiB0aGlzLm11bHRpcGxlU2VsZWN0aW9uLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup6KaB5Yig6Zmk55qE55So5oi3Jyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruWumuWIoOmZpOivpeeUqOaItz8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLAogICAgICAgIGNsb3NlT25QcmVzc0VzY2FwZTogZmFsc2UKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBsZXQgdXNlcklkID0gJyc7CiAgICAgICAgICBpZiAoaXRlbSA9PT0gJ2FsbCcpIHsKICAgICAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5mb3JFYWNoKHVzZXIgPT4gewogICAgICAgICAgICAgIHVzZXJJZCArPSB1c2VyLnVzZXJJZCA/IGAke3VzZXIudXNlcklkfSxgIDogJyc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1c2VySWQgPSB1c2VySWQuc2xpY2UoMCwgdXNlcklkLmxlbmd0aCAtIDEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdXNlcklkID0gaXRlbS51c2VySWQ7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGVCeUlkKHsgdXNlcklkOiB1c2VySWQgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmluaXREYXRhKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvL+WPlua2iAogICAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog6YeN572uCiAgICAgKi8KICAgIHJlc2V0Um93KGl0ZW0sIGluZGV4KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruWumumHjee9ruivpeeUqOaIt+eahOWvhuegge+8n+WIneWni+WvhueggeS4uiAxMjM0NTYnLCAn6YeN572u5a+G56CBJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLAogICAgICAgIGNsb3NlT25QcmVzc0VzY2FwZTogZmFsc2UKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB1cGRhdGVQYXNzd29yZCh7IHVzZXJJZDogaXRlbS51c2VySWQgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WvhueggemHjee9ruaIkOWKnyEnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy8g5Y+W5raICiAgICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDkv67mlLnmlrDlop4KICAgICAqIEBwYXJhbSB7TnVtYmVyfX0gdHlwZSAxIOaWsOWiniAy5L+u5pS5CiAgICAgKi8KICAgIGVkaXRSb3codHlwZSwgaXRlbSkgewogICAgICBpdGVtWydpc2VkaXQnXSA9IHR5cGUgPT09IDEgPyBmYWxzZSA6IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuYkltcG9ydERhdGEuc2hvdyhpdGVtKTsKICAgIH0sCiAgICAvKioKICAgICAqIOWFs+mXreaWsOWinuaIluS/ruaUuQogICAgICovCiAgICBjbG9zZWQoKSB7CiAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/Permission/User","sourcesContent":["<template>\n  <div class=\"PermissionBox\" v-loading=\"loading\">\n    <el-card class=\"topbar\">\n      <el-form\n        ref=\"FormData\"\n        :rules=\"rules\"\n        :model=\"FormData\"\n        class=\"form\"\n        size=\"mini\"\n      >\n        <el-form-item label=\"账号:\" prop=\"account\">\n          <el-input\n            v-model.trim=\"FormData.account\"\n            @keyup.enter.native=\"screen\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"类型:\" prop=\"type\">\n          <el-select\n            v-model=\"FormData.type\"\n            placeholder=\"请选择类型\"\n            @focus=\"getRoleList\"\n            @change=\"screen\"\n          >\n            <el-option label=\"全选\" value=\"\"></el-option>\n            <el-option\n              v-for=\"(item, index) in roleList\"\n              :key=\"index\"\n              :label=\"item.roleName\"\n              :value=\"item.roleId\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item size=\"small\">\n          <el-button type=\"primary\" class=\"btn\" @click=\"screen\">筛选</el-button>\n          <el-button type=\"primary\" class=\"btn\" @click=\"resetForm('FormData')\"\n            >重置</el-button\n          >\n          <el-button type=\"primary\" class=\"btn\" @click=\"editRow(1, {})\"\n            >新增</el-button\n          >\n          <el-button type=\"danger\" class=\"btn\" @click=\"deleteRow('all')\"\n            >删除</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-card class=\"table-card\">\n      <el-table\n        ref=\"multipleTable\"\n        :data=\"tableData\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n        border\n        @selection-change=\"handleSelectionChange\"\n        type=\"selection\"\n        :reserve-selection=\"true\"\n        :row-key=\"row => row.userId\"\n        highlight-current-row\n      >\n        <el-table-column type=\"selection\" width=\"40\" :reserve-selection=\"true\">\n        </el-table-column>\n        <el-table-column label=\"序号\" width=\"60\">\n          <template slot-scope=\"scope\">{{\n            scope.$index + (currentPage - 1) * pageSize + 1 > 9\n              ? scope.$index + (currentPage - 1) * pageSize + 1\n              : `0${scope.$index + (currentPage - 1) * pageSize + 1}`\n          }}</template>\n        </el-table-column>\n        <el-table-column\n          prop=\"username\"\n          label=\"账号\"\n          width=\"120\"\n          show-overflow-tooltip\n        >\n        </el-table-column>\n        <el-table-column\n          prop=\"type\"\n          width=\"120\"\n          label=\"类型\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.roleName || '--' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"menuStr\" label=\"权限\" show-overflow-tooltip>\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.menuStr || '--' }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"updateTime\"\n          label=\"操作时间\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.updateTime | timeFomter }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button\n              @click.native.prevent=\"editRow(2, scope.row)\"\n              type=\"text\"\n              size=\"small\"\n              class=\"tableBtn\"\n            >\n              编辑\n            </el-button>\n            <el-button\n              @click.native.prevent=\"deleteRow(scope.row)\"\n              type=\"text\"\n              size=\"small\"\n              class=\"tableBtn\"\n            >\n              删除\n            </el-button>\n            <el-button\n              @click.native.prevent=\"resetRow(scope.row, scope.$index)\"\n              type=\"text\"\n              size=\"small\"\n              class=\"tableBtn\"\n            >\n              重置密码\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--分页-->\n      <div class=\"block\">\n        <el-pagination\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next, jumper\"\n          :total=\"total\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n    </el-card>\n    <permission-edit ref=\"bImportData\" @close=\"closed\"></permission-edit>\n  </div>\n</template>\n\n<script>\nimport {\n  Card,\n  Form,\n  FormItem,\n  Input,\n  Select,\n  Option,\n  Button,\n  Table,\n  TableColumn,\n  Pagination\n} from 'element-ui';\nimport PermissionEdit from '../../components/permissionEdit/index';\nimport {\n  getUserList,\n  updatePassword,\n  deleteById\n} from '../../../api/user/index';\nimport { getMenuList, getRoleList } from '../../../api/auth/index';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'PermissionUser',\n  components: {\n    [Card.name]: Card,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    [Button.name]: Button,\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n    [Pagination.name]: Pagination,\n    PermissionEdit\n  },\n  data() {\n    // let passwordRules = (rule, value, callback) => {\n    //   console.log(this.passwordSuccess, 'success');\n    //   if (this.passwordSuccess) {\n    //     return callback();\n    //   } else {\n    //     return callback(new Error(this.passwordMessage));\n    //   }\n    // };\n    return {\n      FormData: {\n        account: '', // 账号\n        type: '' // 类型 1 运营 2财务\n      },\n      menuList: [], // 权限菜单\n      currentPage: 1,\n      pageSize: 10,\n      total: 0, // 总数量\n      passwordSuccess: true,\n      passwordMessage: '',\n      loading: false,\n      rules: {\n        // account: [\n        //   { required: true, message: '请输入用户名', trigger: 'blur' },\n        //   { required: true, message: '请输入用户名', trigger: 'change' }\n        // ]\n        //   password: [\n        //     { required: true, message: '请输入密码', trigger: 'blur' },\n        //     { required: true, message: '请输入密码', trigger: 'change' }\n        //   ]\n      },\n      tableData: [],\n      multipleSelection: [], //选择\n      roleList: [] // 类型\n    };\n  },\n  created() {\n    // 跳转到单点登录页面\n    console.log('aaa');\n  },\n  mounted() {\n    this.initData();\n  },\n  computed: {\n    ...mapGetters(['staffCode', 'staffName'])\n  },\n  filters: {\n    timeFomter(val) {\n      let str = '';\n      if (val) {\n        str = val.replace('T', ' ');\n      } else {\n        str = '--';\n      }\n      return str;\n    }\n  },\n  methods: {\n    initData() {\n      this.loading = true;\n      this.$refs.multipleTable.clearSelection();\n      let params = {\n        offset: this.currentPage,\n        limit: this.pageSize,\n        username: this.FormData.account ? this.FormData.account : '',\n        roleId: this.FormData.type ? this.FormData.type : ''\n      };\n      this.tableData = [];\n      getUserList(params)\n        .then(res => {\n          this.total = res.data.total;\n          this.tableData = res.data.records;\n          if (Array.isArray(this.tableData) && this.tableData.length > 0) {\n            getMenuList().then(response => {\n              let menuList = [];\n              const treeConvertList = (tree, childrenKey = 'children') => {\n                if (!Array.isArray(tree)) return [];\n                let list = [];\n                let fn = data => {\n                  list = list.concat(data.slice(0));\n                  data.forEach(item => {\n                    let children = item[childrenKey];\n                    Array.isArray(children) && fn(children);\n                  });\n                };\n                fn(tree);\n                return list;\n              };\n              menuList = treeConvertList(response.data); // 打平权限列表数据\n              this.tableData.forEach(item => {\n                let menuIds = item.menuIds ? item.menuIds.split(',') : []; // 将每人的菜单id变为数组\n                let menuStr = ''; // 将每人的菜单id变为字符串\n                menuIds.forEach(menuid => {\n                  menuStr += `${menuList.find(meun => menuid == meun.menuId)\n                    .name || ''}、`;\n                });\n                this.$set(\n                  item,\n                  'menuStr',\n                  menuStr.slice(0, menuStr.length - 1)\n                ); // 去掉最后一个字符串\n              });\n            });\n            // getRoleList().then(role => {\n            //   debugger;\n            //   this.tableData.forEach(item => {\n            //     let roleStr = ''; // 将每人的菜单id变为字符串\n            //     role.data.forEach(roleid => {\n            //       roleStr =\n            //         roleid.roleId === item.roleId ? roleid.roleName : '';\n            //     });\n            //     this.$set(item, 'roleNameStr', roleStr); // 去掉最后一个字符串\n            //   });\n            // });\n            this.$nextTick(() => {\n              this.$refs.multipleTable.doLayout(); //解决表格错位\n            });\n            this.loading = false;\n          } else {\n            this.loading = false;\n          }\n        })\n        .catch(() => {\n          this.loading = false;\n        });\n    },\n    // 获取类型数据\n    getRoleList() {\n      getRoleList().then(res => {\n        this.roleList = res.data;\n      });\n    },\n    // 筛选\n    screen() {\n      this.currentPage = 1;\n      this.total = 0;\n      this.initData();\n    },\n    // 换页\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.initData();\n    },\n    /**\n     * 重置表单\n     */\n    async resetForm(formName) {\n      this.currentPage = 1;\n      this.$refs[formName].resetFields();\n      await this.initData();\n    },\n    /**\n     * 多选项改变\n     */\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    /**\n     * 删除\n     */\n    deleteRow(item) {\n      if (item === 'all' && this.multipleSelection.length <= 0) {\n        this.$message.error('请选择要删除的用户');\n        return false;\n      }\n      this.$confirm('是否确定删除该用户?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        closeOnClickModal: false,\n        closeOnPressEscape: false\n      })\n        .then(() => {\n          let userId = '';\n          if (item === 'all') {\n            this.multipleSelection.forEach(user => {\n              userId += user.userId ? `${user.userId},` : '';\n            });\n            userId = userId.slice(0, userId.length - 1);\n          } else {\n            userId = item.userId;\n          }\n          deleteById({ userId: userId }).then(res => {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n            this.initData();\n          });\n        })\n        .catch(() => {\n          //取消\n        });\n    },\n    /**\n     * 重置\n     */\n    resetRow(item, index) {\n      this.$confirm('是否确定重置该用户的密码？初始密码为 123456', '重置密码', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        closeOnClickModal: false,\n        closeOnPressEscape: false\n      })\n        .then(() => {\n          updatePassword({ userId: item.userId }).then(res => {\n            this.$message({\n              type: 'success',\n              message: '密码重置成功!'\n            });\n          });\n        })\n        .catch(() => {\n          // 取消\n        });\n    },\n    /**\n     * 修改新增\n     * @param {Number}} type 1 新增 2修改\n     */\n    editRow(type, item) {\n      item['isedit'] = type === 1 ? false : true;\n      this.$refs.bImportData.show(item);\n    },\n    /**\n     * 关闭新增或修改\n     */\n    closed() {\n      this.initData();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.PermissionBox {\n  .topbar {\n    width: 100%;\n    .form {\n      display: flex;\n      /deep/.el-form-item {\n        display: flex;\n        align-items: center;\n        margin-right: 20px;\n        margin-bottom: 0;\n      }\n      .btn {\n        padding: 6px 15px;\n        border-radius: 5px;\n      }\n    }\n  }\n  .table-card {\n    margin-top: 20px;\n    .tableBtn {\n      font-size: 14px;\n    }\n  }\n}\n</style>\n"]}]}