{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/receive-goods/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/receive-goods/index.vue","mtime":1627979214272},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJlY2VpdmluZ0dvb2RzT3JkZXJMaXN0IH0gZnJvbSAnLi4vLi4vYXBpL1JlY2VpdmVHb29kcy9pbmRleC5qcyc7CmltcG9ydCB7IGZvcm1hdGVEYXRlIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9jb21tb24vdXRpbHMuanMnOwpjb25zdCBvcmRlclR5cGUgPSB7CiAgJzEnOiAn5bi46KeEJywKICAnMic6ICfntKfmgKUnLAogICczJzogJ+ihpeWNlScKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlclR5cGUsCiAgICAgIGFjdGl2ZTogMSwKICAgICAgdGFiczogWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6IDEsCiAgICAgICAgICB0aXRsZTogJ+W+heaUtui0pycsCiAgICAgICAgICBsaXN0OiBbXSwgLy/liJfooajmlbDmja4KICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLCAvL+WKoOi9veeKtuaAgQogICAgICAgICAgZmluaXNoZWQ6IGZhbHNlLCAvL+aYr+WQpuWKoOi9veWujOaIkAogICAgICAgICAgZG93bkxvYWRpbmc6IGZhbHNlLCAvL+S4i+aLieeKtuaAgQogICAgICAgICAgdG90YWw6IDAsIC8v5oC75pWwCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAvL+afpeivouadoeS7tgogICAgICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgICAgIHF1ZXJ5VHlwZTogMSwKICAgICAgICAgICAgbGltaXQ6IDEwIC8v5q+P6aG15p2h5pWwCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAyLAogICAgICAgICAgdGl0bGU6ICflt7LmlLbotKcnLAogICAgICAgICAgbGlzdDogW10sIC8v5YiX6KGo5pWw5o2uCiAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwgLy/liqDovb3nirbmgIEKICAgICAgICAgIGZpbmlzaGVkOiBmYWxzZSwgLy/mmK/lkKbliqDovb3lrozmiJAKICAgICAgICAgIGRvd25Mb2FkaW5nOiBmYWxzZSwgLy/kuIvmi4nnirbmgIEKICAgICAgICAgIHRvdGFsOiAwLCAvL+aAu+aVsAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgLy/mn6Xor6LmnaHku7YKICAgICAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgICAgICBsaW1pdDogMTAsIC8v5q+P6aG15p2h5pWwCiAgICAgICAgICAgIHF1ZXJ5VHlwZTogMgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICByb2xlVHlwZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3VzZXIvcm9sZVR5cGUnXTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZm9ybWF0ZURhdGUsCiAgICBvbkRvd25SZWZyZXNoKCkgewogICAgICAvL+S4i+aLieWIt+aWsAogICAgICB0aGlzLnJlc2V0SW5mbygpOwogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOyAvLyDliqDovb3mlbDmja4KICAgIH0sCiAgICBnZXRHb29kc0xpc3QoYXBwZW5kKSB7CiAgICAgIGxldCB0eXBlID0gdGhpcy5hY3RpdmU7CiAgICAgIGxldCBpID0gdHlwZSA9PSAxID8gMCA6IDE7CiAgICAgIHRoaXMudGFic1tpXS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMucm9sZVR5cGUgJiYgdGhpcy5yb2xlVHlwZS5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3QgcXVlcnkgPSB7CiAgICAgICAgICAuLi50aGlzLnRhYnNbaV0ucXVlcnksCiAgICAgICAgICByb2xlVHlwZTogdGhpcy5yb2xlVHlwZS5qb2luKCcsJykKICAgICAgICB9OwogICAgICAgIGdldFJlY2VpdmluZ0dvb2RzT3JkZXJMaXN0KHF1ZXJ5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAoYXBwZW5kKSB7CiAgICAgICAgICAgIHRoaXMudGFic1tpXS5saXN0ID0gdGhpcy50YWJzW2ldLmxpc3QuY29uY2F0KAogICAgICAgICAgICAgIHJlcy5kYXRhLnJlY29yZHMgfHwgW10KICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudGFic1tpXS5saXN0ID0gcmVzLmRhdGEucmVjb3JkcyB8fCBbXTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMudGFic1tpXS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnRhYnNbaV0uZG93bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuZGF0YS5yZWNvcmRzLmxlbmd0aCA8IHRoaXMudGFic1tpXS5xdWVyeS5saW1pdCkgewogICAgICAgICAgICB0aGlzLnRhYnNbaV0uZmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGFic1tpXS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kdG9hc3QoJ+ivt+mHjeaWsOeZu+W9le+8gScpOwogICAgICB9CiAgICB9LAogICAgb25Mb2FkTGlzdCgpIHsKICAgICAgbGV0IGkgPSB0aGlzLmFjdGl2ZSA9PSAxID8gMCA6IDE7CiAgICAgIHRoaXMudGFic1tpXS5xdWVyeS5vZmZzZXQgPQogICAgICAgIHRoaXMudGFic1tpXS5xdWVyeS5saW1pdCArIHRoaXMudGFic1tpXS5xdWVyeS5vZmZzZXQ7CiAgICAgIHRoaXMuZ2V0R29vZHNMaXN0KDEpOwogICAgfSwKICAgIGdvRGV0YWlsKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvcmVjZWl2ZS1nb29kcy1kZXRhaWwtbGlzdCcsCiAgICAgICAgcXVlcnk6IHsgaWQ6IGl0ZW0ub3JkZXJJZCB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0SW5mbygpIHsKICAgICAgbGV0IGkgPSB0aGlzLmFjdGl2ZSA9PSAxID8gMCA6IDE7CiAgICAgIHRoaXMudGFic1tpXS5xdWVyeS5vZmZzZXQgPSAwOwogICAgICB0aGlzLnRhYnNbaV0uZG93bkxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnRhYnNbaV0uZmluaXNoZWQgPSBmYWxzZTsKICAgIH0sCiAgICBvbkNsaWNrKG5hbWUpIHsKICAgICAgdGhpcy5hY3RpdmUgPSBuYW1lOwogICAgICB0aGlzLnJlc2V0SW5mbygpOwogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/catering-h5/views/receive-goods","sourcesContent":["<template>\n  <div class=\"app-wrapper\">\n    <van-tabs\n      sticky\n      v-model=\"active\"\n      title-active-color=\"#51D0BC\"\n      @click=\"onClick\"\n    >\n      <van-tab\n        v-for=\"tab in tabs\"\n        :key=\"tab.type\"\n        :title=\"tab.title\"\n        :name=\"tab.type\"\n      >\n        <van-pull-refresh\n          class=\"app-main\"\n          v-model=\"tab.downLoading\"\n          @refresh=\"onDownRefresh\"\n        >\n          <div\n            v-if=\"tab.finished && tab.list.length < 1\"\n            class=\"common-no-data\"\n          >\n            {{ tab.type == 1 ? '无待收货列表' : '无已收货列表' }}\n          </div>\n          <van-list\n            v-else\n            class=\"section\"\n            :immediate-check=\"false\"\n            :offset=\"10\"\n            v-model=\"tab.loading\"\n            :finished=\"tab.finished\"\n            finished-text=\"没有更多了\"\n            @load=\"onLoadList\"\n          >\n            <van-cell\n              v-for=\"item in tab.list\"\n              :key=\"item.orderId\"\n              @click=\"goDetail(item)\"\n              class=\"order-item\"\n            >\n              <div>\n                <div class=\"item-head\">\n                  <span :class=\"item.type == 1 ? 'normal' : 'urgency'\">{{\n                    orderType[item.type]\n                  }}</span>\n                  <div>{{ item.orderNo }}</div>\n                </div>\n                <div class=\"item-center\">\n                  <p>\n                    {{ item.provinceName }}{{ item.cityName\n                    }}{{ item.districtName }}{{ item.parentDeptName\n                    }}{{ item.deptName }}的订单\n                  </p>\n                  <p>到货日期：{{ formateDate(item.arrivalTime, 4) }}</p>\n                </div>\n                <div class=\"item-bottom\">\n                  <div>\n                    <img src=\"../../assets/images/clock.png\" alt=\"\" />\n                    <div class=\"bottom-txt\">\n                      {{ formateDate(item.auditTime, 2) }}\n                    </div>\n                  </div>\n                  <div>\n                    <img src=\"../../assets/images/person.png\" alt=\"\" />\n                    <div class=\"bottom-txt\">{{ item.creatorName }}</div>\n                  </div>\n                </div>\n              </div>\n            </van-cell>\n          </van-list>\n        </van-pull-refresh>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport { getReceivingGoodsOrderList } from '../../api/ReceiveGoods/index.js';\nimport { formateDate } from '../../plugins/common/utils.js';\nconst orderType = {\n  '1': '常规',\n  '2': '紧急',\n  '3': '补单'\n};\nexport default {\n  data() {\n    return {\n      orderType,\n      active: 1,\n      tabs: [\n        {\n          type: 1,\n          title: '待收货',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            queryType: 1,\n            limit: 10 //每页条数\n          }\n        },\n        {\n          type: 2,\n          title: '已收货',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            limit: 10, //每页条数\n            queryType: 2\n          }\n        }\n      ]\n    };\n  },\n  computed: {\n    roleType() {\n      return this.$store.getters['user/roleType'];\n    }\n  },\n  created() {\n    this.getGoodsList();\n  },\n  methods: {\n    formateDate,\n    onDownRefresh() {\n      //下拉刷新\n      this.resetInfo();\n      this.getGoodsList(); // 加载数据\n    },\n    getGoodsList(append) {\n      let type = this.active;\n      let i = type == 1 ? 0 : 1;\n      this.tabs[i].loading = true;\n      if (this.roleType && this.roleType.length > 0) {\n        const query = {\n          ...this.tabs[i].query,\n          roleType: this.roleType.join(',')\n        };\n        getReceivingGoodsOrderList(query).then(res => {\n          if (append) {\n            this.tabs[i].list = this.tabs[i].list.concat(\n              res.data.records || []\n            );\n          } else {\n            this.tabs[i].list = res.data.records || [];\n          }\n          this.tabs[i].loading = false;\n          this.tabs[i].downLoading = false;\n          if (res.data.records.length < this.tabs[i].query.limit) {\n            this.tabs[i].finished = true;\n          }\n        });\n      } else {\n        this.tabs[i].loading = false;\n        this.$toast('请重新登录！');\n      }\n    },\n    onLoadList() {\n      let i = this.active == 1 ? 0 : 1;\n      this.tabs[i].query.offset =\n        this.tabs[i].query.limit + this.tabs[i].query.offset;\n      this.getGoodsList(1);\n    },\n    goDetail(item) {\n      this.$router.push({\n        path: '/receive-goods-detail-list',\n        query: { id: item.orderId }\n      });\n    },\n    resetInfo() {\n      let i = this.active == 1 ? 0 : 1;\n      this.tabs[i].query.offset = 0;\n      this.tabs[i].downLoading = true;\n      this.tabs[i].finished = false;\n    },\n    onClick(name) {\n      this.active = name;\n      this.resetInfo();\n      this.getGoodsList();\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n/deep/.van-tabs__line {\n  background-color: #51d0bc;\n}\n.app-main {\n  background: #f5f5f5;\n  padding: 12px;\n  .order-item {\n    background: #fff;\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.08);\n    border-radius: 6px;\n    margin-bottom: 10px;\n    font-size: 13px;\n    .item-head {\n      display: flex;\n      line-height: 20px;\n      margin-bottom: 20px;\n      span {\n        width: 44px;\n        height: 20px;\n        border-radius: 2.5px;\n        display: inline-block;\n        color: #fff;\n        text-align: center;\n        font-family: PingFangSC-Regular, PingFang SC;\n        font-weight: 400;\n        letter-spacing: 1px;\n        margin-right: 4px;\n        font-size: 13px;\n        &.normal {\n          background: #51d0bc;\n        }\n        &.urgency {\n          background: #ff6312;\n        }\n      }\n      div {\n        color: rgba(0, 0, 0, 0.65);\n      }\n    }\n    .item-center {\n      p {\n        font-size: 14px;\n        font-family: PingFangSC-Regular, PingFang SC;\n        font-weight: 400;\n        color: rgba(0, 0, 0, 0.85);\n        line-height: 19px;\n        letter-spacing: 1px;\n        margin-bottom: 20px;\n      }\n    }\n    .item-bottom {\n      display: flex;\n      justify-content: space-between;\n      line-height: 22px;\n      img {\n        width: 18px;\n        height: 18px;\n        vertical-align: sub;\n      }\n      .bottom-txt {\n        display: inline-block;\n        margin-left: 4px;\n      }\n    }\n  }\n}\n\n.common-no-data {\n  font-size: 16px;\n  color: #d9d9d9;\n  padding-top: 170px;\n  text-align: center;\n}\n</style>\n"]}]}