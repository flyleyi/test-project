{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/weekly/weeklyFoodslist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/weekly/weeklyFoodslist.vue","mtime":1645178321124},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG9yZGVyQ29udGVudEZvclBhZ2UgfSBmcm9tICcuLi8uLi9hcGkvd2Vla2x5L2luZGV4LmpzJzsKaW1wb3J0IHsgZm9ybWF0ZURhdGUgfSBmcm9tICcuLi8uLi9wbHVnaW5zL2NvbW1vbi91dGlscy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnd2Vla2x5TGlzdCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdGVEYXRlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBkb3duTG9hZGluZzogZmFsc2UsCiAgICAgIGxpc3Q6IFtdLAogICAgICBxdWVyeTogewogICAgICAgIG9mZnNldDogMCwKICAgICAgICBncmFkZUlkOiAnJywKICAgICAgICBsaW1pdDogMTAgLy/mr4/pobXmnaHmlbAKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXJ5LmdyYWRlSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5ncmFkZUlkOwogICAgaWYgKHRoaXMucXVlcnkuZ3JhZGVJZCkgewogICAgICB0aGlzLmdldEZvb2RzTGlzdCgpOwogICAgICB0aGlzLmRvd25Mb2FkaW5nID0gdHJ1ZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvRGV0YWlsKGl0ZW0pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICd3ZWVrbHlGb29kRGV0YWlsJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGl0ZW0ubWVudUlkLAogICAgICAgICAgdGltZTogaXRlbS5zZW5kVGltZSwKICAgICAgICAgIHNjaG9vbE5hbWU6IGl0ZW0uc2Nob29sTmFtZSwKICAgICAgICAgIG1lbnVOYW1lOiBpdGVtLm1lbnVOYW1lCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRGb29kc0xpc3QoYXBwZW5kKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGNvbnN0IHF1ZXJ5ID0gewogICAgICAgIC4uLnRoaXMucXVlcnkKICAgICAgfTsKICAgICAgb3JkZXJDb250ZW50Rm9yUGFnZShxdWVyeSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ+WIl+ihqCcsIHJlcy5kYXRhLnJlY29yZHMpOwogICAgICAgICAgaWYgKGFwcGVuZCkgewogICAgICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3QuY29uY2F0KHJlcy5kYXRhLnJlY29yZHMgfHwgW10pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEucmVjb3JkcyB8fCBbXTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5kb3duTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlcy5kYXRhLnJlY29yZHMubGVuZ3RoIDwgdGhpcy5xdWVyeS5saW1pdCkgewogICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5kb3duTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kdG9hc3QoZS5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvblJlZnJlc2goKSB7CiAgICAgIHRoaXMucmVzZXRJbmZvKCk7CiAgICAgIHRoaXMuZ2V0Rm9vZHNMaXN0KCk7CiAgICB9LAogICAgcmVzZXRJbmZvKCkgewogICAgICB0aGlzLnF1ZXJ5Lm9mZnNldCA9IDA7CiAgICAgIHRoaXMuZG93bkxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7CiAgICB9LAogICAgb25Mb2FkTGlzdCgpIHsKICAgICAgdGhpcy5xdWVyeS5vZmZzZXQgPSB0aGlzLnF1ZXJ5LmxpbWl0ICsgdGhpcy5xdWVyeS5vZmZzZXQ7CiAgICAgIHRoaXMuZ2V0Rm9vZHNMaXN0KDEpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["weeklyFoodslist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"weeklyFoodslist.vue","sourceRoot":"src/pages/catering-h5/views/weekly","sourcesContent":["<template>\n  <div class=\"weekly-foods\">\n    <van-pull-refresh v-model=\"downLoading\" @refresh=\"onRefresh\">\n      <van-list\n        class=\"section\"\n        :immediate-check=\"false\"\n        :offset=\"10\"\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoadList\"\n      >\n        <div\n          class=\"foods-box\"\n          v-for=\"item in list\"\n          :key=\"item.id\"\n          @click=\"goDetail(item)\"\n        >\n          <div class=\"foods-box-one\">\n            <p>{{ item.sendTime.slice(0, -3) }}</p>\n            <p>查看详情<van-icon name=\"arrow\" /></p>\n          </div>\n          <div class=\"foods-box-two\">\n            <p>{{ item.menuName }}</p>\n            <p>{{ item.schoolName }}</p>\n          </div>\n        </div>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport { orderContentForPage } from '../../api/weekly/index.js';\nimport { formateDate } from '../../plugins/common/utils.js';\nexport default {\n  name: 'weeklyList',\n  data() {\n    return {\n      formateDate,\n      loading: false,\n      finished: false,\n      downLoading: false,\n      list: [],\n      query: {\n        offset: 0,\n        gradeId: '',\n        limit: 10 //每页条数\n      }\n    };\n  },\n  created() {\n    this.query.gradeId = this.$route.query.gradeId;\n    if (this.query.gradeId) {\n      this.getFoodsList();\n      this.downLoading = true;\n    }\n  },\n  methods: {\n    goDetail(item) {\n      this.$router.push({\n        name: 'weeklyFoodDetail',\n        query: {\n          id: item.menuId,\n          time: item.sendTime,\n          schoolName: item.schoolName,\n          menuName: item.menuName\n        }\n      });\n    },\n    getFoodsList(append) {\n      this.loading = true;\n      const query = {\n        ...this.query\n      };\n      orderContentForPage(query)\n        .then(res => {\n          console.log('列表', res.data.records);\n          if (append) {\n            this.list = this.list.concat(res.data.records || []);\n          } else {\n            this.list = res.data.records || [];\n          }\n          this.loading = false;\n          this.downLoading = false;\n          this.finished = false;\n          if (res.data.records.length < this.query.limit) {\n            this.finished = true;\n          }\n        })\n        .catch(e => {\n          this.loading = false;\n          this.downLoading = false;\n          this.finished = false;\n          this.$toast(e.message);\n        });\n    },\n    onRefresh() {\n      this.resetInfo();\n      this.getFoodsList();\n    },\n    resetInfo() {\n      this.query.offset = 0;\n      this.downLoading = true;\n      this.finished = false;\n    },\n    onLoadList() {\n      this.query.offset = this.query.limit + this.query.offset;\n      this.getFoodsList(1);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.weekly-foods {\n  background: #f5f5f5;\n  padding: 15px;\n}\n.foods-box {\n  border-radius: 5px;\n  background: #fafafa;\n  box-shadow: 0px 1px 5px 0px rgba(217, 217, 217, 0.5);\n  overflow: hidden;\n  border-radius: 5px;\n  margin-bottom: 15px;\n  .foods-box-one {\n    display: flex;\n    padding: 14px 15px;\n    font-size: 15px;\n    background-color: #ffffff;\n    justify-content: space-between;\n    > p:nth-child(2) {\n      color: #49c5c9;\n    }\n    /deep/ .van-icon {\n      font-weight: 500;\n      color: #49c5c9;\n      margin-left: 9px;\n    }\n  }\n  .foods-box-two {\n    padding: 15px;\n    > p:nth-child(1) {\n      margin-bottom: 8px;\n      font-size: 15px;\n      color: rgba(0, 0, 0, 0.85);\n    }\n    > p:nth-child(2) {\n      font-size: 13px;\n      color: rgba(0, 0, 0, 0.65);\n    }\n  }\n}\n</style>\n"]}]}