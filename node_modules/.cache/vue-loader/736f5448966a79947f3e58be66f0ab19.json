{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/sims/enrollFill/FamilyInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/sims/enrollFill/FamilyInfo.vue","mtime":1627979214303},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgRm9ybSwKICBGaWVsZCwKICBQaWNrZXIsCiAgUG9wdXAsCiAgRGF0ZXRpbWVQaWNrZXIsCiAgUmFkaW9Hcm91cCwKICBSYWRpbywKICBBcmVhLAogIFVwbG9hZGVyLAogIEJ1dHRvbgp9IGZyb20gJ3ZhbnQnOwppbXBvcnQgeyBhcmVhTGlzdCB9IGZyb20gJ0AvcGx1Z2lucy9jb21tb24vYXJlYSc7CmltcG9ydCBDU2VsZWN0UGlja2VyIGZyb20gJ0AvcGFnZXMvaDUvY29tcG9uZW50cy9jb21tb24vQ1NlbGVjdFBpY2tlci52dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vLi4vc3RvcmUvaW5kZXgnOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnOwppbXBvcnQgbWl4aW5zIGZyb20gJy4vbWl4aW5zJzsKaW1wb3J0IHsgc2F2ZU9yVXBkYXRlRW5yb2xsRmFtaWx5SDUgfSBmcm9tICdAL3BhZ2VzL2g1L2FwaS9zaW1zL2Vucm9sbEZpbGwnOwppbXBvcnQgeyBMb2FkaW5nIH0gZnJvbSAnZWxlbWVudC11aSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRmFtaWx5SW5mbycsCiAgbWl4aW5zOiBbbWl4aW5zXSwKICBjb21wb25lbnRzOiB7CiAgICBbRm9ybS5uYW1lXTogRm9ybSwKICAgIFtGaWVsZC5uYW1lXTogRmllbGQsCiAgICBbUGlja2VyLm5hbWVdOiBQaWNrZXIsCiAgICBbUG9wdXAubmFtZV06IFBvcHVwLAogICAgW0RhdGV0aW1lUGlja2VyLm5hbWVdOiBEYXRldGltZVBpY2tlciwKICAgIFtSYWRpb0dyb3VwLm5hbWVdOiBSYWRpb0dyb3VwLAogICAgW1JhZGlvLm5hbWVdOiBSYWRpbywKICAgIFtBcmVhLm5hbWVdOiBBcmVhLAogICAgW1VwbG9hZGVyLm5hbWVdOiBVcGxvYWRlciwKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwKICAgIENTZWxlY3RQaWNrZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcmVhTGlzdCwgLy8g5Zyw5Z2A5L+h5oGvCiAgICAgIGNvbHVtbnM6IFsn5p2t5beeJywgJ+WugeazoicsICfmuKnlt54nLCAn57uN5YW0JywgJ+a5luW3nicsICflmInlhbQnLCAn6YeR5Y2OJywgJ+ihouW3niddLAogICAgICBzaG93UG9zdGFsQWRkcmVzc1BpY2tlcjogZmFsc2UsIC8vIOmAmuiur+WcsOWdgOaYvumakAogICAgICBmb3JtRGF0YTogewogICAgICAgIHBvc3RhbEFkZHJlc3M6ICcnLAogICAgICAgIGNvbW11bmljYXRpb25Qcm92aW5jZTogJycsCiAgICAgICAgY29tbXVuaWNhdGlvbkNpdHk6ICcnLAogICAgICAgIGNvbW11bmljYXRpb25BcmVhOiAnJywKICAgICAgICBjb21tdW5pY2F0aW9uQWRkcjogJycsCiAgICAgICAgYnJva2VuSG9tZTogbnVsbCwKICAgICAgICBmYW1pbHlJbmNvZGU6ICcnLAogICAgICAgIHN0dUZhbWlseU1vZGVsTGlzdDogW10KICAgICAgfSwKICAgICAgZmF0aGVySW5mbzoge30sCiAgICAgIG1vdGhlckluZm86IHt9LAogICAgICBndWFyZGlhbkluZm86IHt9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICdwYWdlRGF0YS5lbnJvbGxGYW1pbHlNb2RlbCc6IHsKICAgICAgaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICB0aGlzLmluaXREYXRhKG5ld1ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWbnumAgAogICAgb25CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogJy9zaW1zL2VudHJvbGxGaWxsL2lkZW50aXR5SW5mbycsCiAgICAgICAgcXVlcnk6IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOihqOWNleaPkOS6pAogICAgb25TdWJtaXQodmFscykgewogICAgICBsZXQgbG9hZGluZyA9IFRvYXN0LmxvYWRpbmcoKTsKICAgICAgLy/kv53lrZjouqvku73kv6Hmga8KICAgICAgc2F2ZU9yVXBkYXRlRW5yb2xsRmFtaWx5SDUoewogICAgICAgIC4uLnRoaXMuZm9ybURhdGEsCiAgICAgICAgc3RhZmZDb2RlOiB0aGlzLiRyb3V0ZS5xdWVyeS5zdGFmZkNvZGUKICAgICAgfSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAnL3NpbXMvZW50cm9sbEZpbGwvZW5yb2xsSW5mbycsCiAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLiRyb3V0ZS5xdWVyeQogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICBUb2FzdC5mYWlsKGUubWVzc2FnZSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDogYzkuJrjgIHlrabljobpgInmi6nliIfmjaIKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIOebkeaKpOS6uuWvueixoQogICAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDopoHkv67mlLnnmoRrZXkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwg6YCJ5Lit6aG5CiAgICAgKi8KICAgIG9uU2VsZWN0Q2hhbmdlKGl0ZW0sIGtleSwgdmFsKSB7CiAgICAgIGl0ZW1ba2V5XSA9IHZhbC5sYWJlbDsKICAgIH0sCiAgICAvKioKICAgICAqIOmAmuiur+WcsOWdgAogICAgICovCiAgICBvbkNvbmZpcm1Qb3N0YWxBZGRyZXNzKHZhbCkgewogICAgICB0aGlzLmZvcm1EYXRhLmNvbW11bmljYXRpb25Qcm92aW5jZSA9IHZhbFswXS5jb2RlOwogICAgICB0aGlzLmZvcm1EYXRhLmNvbW11bmljYXRpb25DaXR5ID0gdmFsWzFdLmNvZGU7CiAgICAgIHRoaXMuZm9ybURhdGEuY29tbXVuaWNhdGlvbkFyZWEgPSB2YWxbMl0uY29kZTsKICAgICAgdGhpcy5mb3JtRGF0YS5wb3N0YWxBZGRyZXNzID0gdGhpcy5nZXRBZGRyZXNzKAogICAgICAgIHZhbFswXS5jb2RlLAogICAgICAgIHZhbFsxXS5jb2RlLAogICAgICAgIHZhbFsyXS5jb2RlCiAgICAgICk7CiAgICAgIHRoaXMuc2hvd1Bvc3RhbEFkZHJlc3NQaWNrZXIgPSBmYWxzZTsKICAgIH0sCiAgICAvL+WIneWni+WMluaVsOaNrgogICAgaW5pdERhdGEobmV3VmFsKSB7CiAgICAgIGxldCB7CiAgICAgICAgY29tbXVuaWNhdGlvblByb3ZpbmNlLAogICAgICAgIGNvbW11bmljYXRpb25DaXR5LAogICAgICAgIGNvbW11bmljYXRpb25BcmVhCiAgICAgIH0gPSBuZXdWYWw7CiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtRGF0YSwgbmV3VmFsKTsKICAgICAgLy/mm7TmlrDmiLfnsY3lnLDlnYAKICAgICAgaWYgKGNvbW11bmljYXRpb25Qcm92aW5jZSkgewogICAgICAgIHRoaXMuZm9ybURhdGEucG9zdGFsQWRkcmVzcyA9IHRoaXMuZ2V0QWRkcmVzcygKICAgICAgICAgIGNvbW11bmljYXRpb25Qcm92aW5jZSwKICAgICAgICAgIGNvbW11bmljYXRpb25DaXR5LAogICAgICAgICAgY29tbXVuaWNhdGlvbkFyZWEKICAgICAgICApOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDojrflj5blnLDlnYAKICAgICAqLwogICAgZ2V0QWRkcmVzcyhwcm92aW5jZUNvZGUsIGNpdHlDb2RlLCBjb3VudHlDb2RlKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5hcmVhTGlzdC5wcm92aW5jZV9saXN0W3Byb3ZpbmNlQ29kZV0gKwogICAgICAgICcvJyArCiAgICAgICAgdGhpcy5hcmVhTGlzdC5jaXR5X2xpc3RbY2l0eUNvZGVdICsKICAgICAgICAnLycgKwogICAgICAgIHRoaXMuYXJlYUxpc3QuY291bnR5X2xpc3RbY291bnR5Q29kZV0KICAgICAgKTsKICAgIH0sCiAgICAvLyDplb/luqbmoKHpqowKICAgIGxlbmd0aFBhdHRlcm4oc3RyKSB7CiAgICAgIGlmICghc3RyKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIC9eLnsyLDIwfSQvLnRlc3Qoc3RyKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["FamilyInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FamilyInfo.vue","sourceRoot":"src/pages/executive-serveh5/views/sims/enrollFill","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <p class=\"title\">家庭信息</p>\n    <van-form>\n      <van-field\n        v-model=\"formData.postalAddress\"\n        readonly\n        clickable\n        name=\"area\"\n        label=\"通讯地址\"\n        placeholder=\"请选择\"\n        @click=\"showPostalAddressPicker = true\"\n      />\n      <van-popup v-model=\"showPostalAddressPicker\" position=\"bottom\">\n        <van-area\n          :value=\"formData.communicationArea\"\n          :area-list=\"areaList\"\n          @confirm=\"onConfirmPostalAddress\"\n          @cancel=\"showPostalAddressPicker = false\"\n        />\n      </van-popup>\n      <van-field\n        v-model=\"formData.communicationAddr\"\n        name=\"详细地址\"\n        label=\"详细地址\"\n        maxlength=\"50\"\n        placeholder=\"\"\n      />\n      <van-field name=\"radio\" label=\"是否离异\">\n        <template #input>\n          <van-radio-group v-model=\"formData.brokenHome\" direction=\"horizontal\">\n            <van-radio :name=\"true\">是</van-radio>\n            <van-radio :name=\"false\">否</van-radio>\n          </van-radio-group>\n        </template>\n      </van-field>\n      <c-select-picker\n        v-model=\"formData.familyIncode\"\n        label=\"家庭年收入\"\n        value-key=\"value\"\n        text-key=\"label\"\n        :options=\"$D('JTNSR')\"\n      ></c-select-picker>\n      <div v-for=\"(item, index) in formData.stuFamilyModelList\" :key=\"index\">\n        <p>{{ item.relationName }}</p>\n        <van-field\n          v-model=\"item.fullName\"\n          placeholder=\"\"\n          label=\"姓名\"\n          maxlength=\"30\"\n        />\n        <van-field\n          v-model=\"item.telephone\"\n          label=\"联系电话\"\n          placeholder=\"\"\n          maxlength=\"30\"\n        />\n        <c-select-picker\n          v-model=\"item.education\"\n          label=\"学历\"\n          value-key=\"value\"\n          text-key=\"label\"\n          @change=\"val => onSelectChange(item, 'educationName', val)\"\n          :options=\"$D('XLM')\"\n        ></c-select-picker>\n        <c-select-picker\n          v-model=\"item.employed\"\n          label=\"职业类别\"\n          value-key=\"value\"\n          text-key=\"label\"\n          @change=\"val => onSelectChange(item, 'employedName', val)\"\n          :options=\"$D('ZYLB')\"\n        ></c-select-picker>\n      </div>\n      <div class=\"footer\" style=\"margin: 16px;\">\n        <van-button round plain type=\"info\" native-type=\"back\" @click=\"onBack\"\n          >上一步</van-button\n        >\n        <van-button round type=\"info\" native-type=\"submit\" @click=\"onSubmit\"\n          >保存并下一步</van-button\n        >\n      </div>\n    </van-form>\n  </div>\n</template>\n<script>\nimport {\n  Form,\n  Field,\n  Picker,\n  Popup,\n  DatetimePicker,\n  RadioGroup,\n  Radio,\n  Area,\n  Uploader,\n  Button\n} from 'vant';\nimport { areaList } from '@/plugins/common/area';\nimport CSelectPicker from '@/pages/h5/components/common/CSelectPicker.vue';\nimport store from '../../../store/index';\nimport { Toast } from 'vant';\nimport mixins from './mixins';\nimport { saveOrUpdateEnrollFamilyH5 } from '@/pages/h5/api/sims/enrollFill';\nimport { Loading } from 'element-ui';\nexport default {\n  name: 'FamilyInfo',\n  mixins: [mixins],\n  components: {\n    [Form.name]: Form,\n    [Field.name]: Field,\n    [Picker.name]: Picker,\n    [Popup.name]: Popup,\n    [DatetimePicker.name]: DatetimePicker,\n    [RadioGroup.name]: RadioGroup,\n    [Radio.name]: Radio,\n    [Area.name]: Area,\n    [Uploader.name]: Uploader,\n    [Button.name]: Button,\n    CSelectPicker\n  },\n  data() {\n    return {\n      areaList, // 地址信息\n      columns: ['杭州', '宁波', '温州', '绍兴', '湖州', '嘉兴', '金华', '衢州'],\n      showPostalAddressPicker: false, // 通讯地址显隐\n      formData: {\n        postalAddress: '',\n        communicationProvince: '',\n        communicationCity: '',\n        communicationArea: '',\n        communicationAddr: '',\n        brokenHome: null,\n        familyIncode: '',\n        stuFamilyModelList: []\n      },\n      fatherInfo: {},\n      motherInfo: {},\n      guardianInfo: {}\n    };\n  },\n  watch: {\n    'pageData.enrollFamilyModel': {\n      handler(newVal) {\n        this.initData(newVal);\n      }\n    }\n  },\n  methods: {\n    // 回退\n    onBack() {\n      this.$router.replace({\n        path: '/sims/entrollFill/identityInfo',\n        query: this.$route.query\n      });\n    },\n    // 表单提交\n    onSubmit(vals) {\n      let loading = Toast.loading();\n      //保存身份信息\n      saveOrUpdateEnrollFamilyH5({\n        ...this.formData,\n        staffCode: this.$route.query.staffCode\n      })\n        .then(res => {\n          loading.close();\n          this.$router.replace({\n            path: '/sims/entrollFill/enrollInfo',\n            query: this.$route.query\n          });\n        })\n        .catch(e => {\n          loading.close();\n          Toast.fail(e.message);\n        });\n    },\n    /**\n     * 职业、学历选择切换\n     * @param {Object} item 监护人对象\n     * @param {String} key 要修改的key\n     * @param {Object} val 选中项\n     */\n    onSelectChange(item, key, val) {\n      item[key] = val.label;\n    },\n    /**\n     * 通讯地址\n     */\n    onConfirmPostalAddress(val) {\n      this.formData.communicationProvince = val[0].code;\n      this.formData.communicationCity = val[1].code;\n      this.formData.communicationArea = val[2].code;\n      this.formData.postalAddress = this.getAddress(\n        val[0].code,\n        val[1].code,\n        val[2].code\n      );\n      this.showPostalAddressPicker = false;\n    },\n    //初始化数据\n    initData(newVal) {\n      let {\n        communicationProvince,\n        communicationCity,\n        communicationArea\n      } = newVal;\n      Object.assign(this.formData, newVal);\n      //更新户籍地址\n      if (communicationProvince) {\n        this.formData.postalAddress = this.getAddress(\n          communicationProvince,\n          communicationCity,\n          communicationArea\n        );\n      }\n    },\n    /**\n     * 获取地址\n     */\n    getAddress(provinceCode, cityCode, countyCode) {\n      return (\n        this.areaList.province_list[provinceCode] +\n        '/' +\n        this.areaList.city_list[cityCode] +\n        '/' +\n        this.areaList.county_list[countyCode]\n      );\n    },\n    // 长度校验\n    lengthPattern(str) {\n      if (!str) return true;\n      return /^.{2,20}$/.test(str);\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.title {\n  font-weight: bold;\n}\n.footer {\n  display: flex;\n  justify-content: space-between;\n  /deep/ button {\n    width: 40%;\n  }\n}\n</style>\n"]}]}