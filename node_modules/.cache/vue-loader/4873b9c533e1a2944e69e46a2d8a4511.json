{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/account/personal/index.vue?vue&type=style&index=0&id=46f7d884&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/account/personal/index.vue","mtime":1645176309821},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZHJhd2VyLWhlYWRlciB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHBhZGRpbmc6IDA7CiAgYm9yZGVyOiAwOwp9Ci5kcmF3ZXItY29udGVudCB7CiAgbWluLXdpZHRoOiA0MDBweDsKICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9Ci5lbC1yb3cgewogIHBhZGRpbmc6IDEwcHggMTBweCAwIDEwcHg7CiAgJjpsYXN0LWNoaWxkIHsKICAgIG1hcmdpbi1ib3R0b206IDA7CiAgfQp9Ci5lbC1jb2wgewogIGJvcmRlci1yYWRpdXM6IDhweDsKfQouYmctcHVycGxlLWRhcmsgewogIGJhY2tncm91bmQ6ICNmZmY7Cn0KLmJnLXB1cnBsZSB7CiAgYmFja2dyb3VuZDogI2ZmZjsKfQouYmctcHVycGxlLWxpZ2h0IHsKICBiYWNrZ3JvdW5kOiAjZTVlOWYyOwp9Ci5ncmlkLWNvbnRlbnQgewogIGJvcmRlci1yYWRpdXM6IDhweDsKICBtaW4taGVpZ2h0OiAzNnB4Owp9Ci5yb3ctYmcgewogIHBhZGRpbmc6IDEwcHggMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmYWZjOwp9Ci5ib3gtY2FyZCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgbWFyZ2luOiAwOwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGxlZnQ7Cn0KLmJveC1jYXJkLWl0ZW0gewogIHdpZHRoOiAxMDAlOwp9Ci5ib3gtY2FyZC10b3AgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwogIGZsZXgtd3JhcDogd3JhcDsKICBtYXJnaW46IDA7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQouYm94LWNhcmQtY29udGVudCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsKICBmbGV4LXdyYXA6IHdyYXA7CiAgbWFyZ2luOiAwOwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGxlZnQ7Cn0KLnRpdHRsZS1zdHlsZSB7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBmb250LXNpemU6IDE1cHg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgcGFkZGluZzogMTBweDsKICBtYXJnaW4tbGVmdDogNSU7Cn0KLmxvb2tfY2FyZCB7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIG1hcmdpbjogMCAxMHB4OwogIHRleHQtYWxpZ246IGxlZnQ7Cn0KLnAtY29udGVudCB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgZm9udC1zaXplOiAyMHB4Owp9CnNwYW4gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwYWRkaW5nLXRvcDogNXB4OwogIGZvbnQtc2l6ZTogMTBweDsKICBmb250LXdlaWdodDogMTAwOwogIGNvbG9yOiByZ2IoMTMzLCAxMzEsIDEzMSk7Cn0KLnNwYW4tdGl0dGxlLAouc3Bhbi1jb250ZW50IHsKICBkaXNwbGF5OiBibG9jazsKICBwYWRkaW5nLXRvcDogNXB4Owp9Ci5zcGFuLXRpdHRsZSB7CiAgY29sb3I6ICMwMDA7Cn0KLml0ZW0tY29udGVudCB7CiAgcGFkZGluZy1ib3R0b206IDE1cHg7CiAgd2lkdGg6IDEwMHB4Owp9Ci5sYXN0LW9uZSB7CiAgd2lkdGg6IDIwMHB4OwogIG1hcmdpbi1sZWZ0OiAyMHB4Owp9Ci5pdGVtLWNvbnRlbnQtdG9wIHsKICBwYWRkaW5nLWxlZnQ6IDE1cHg7CiAgcGFkZGluZy10b3A6IDEwcHg7CiAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgbWFyZ2luLWxlZnQ6IDUlOwp9Ci5lbC1kaXZpZGVyLS12ZXJ0aWNhbCB7CiAgaGVpZ2h0OiA0MHB4OwogIHZlcnRpY2FsLWFsaWduOiB0ZXh0LXRvcDsKfQouaXRlbS1jb250ZW50LWluZm8gewogIGRpc3BsYXk6IGlubGluZS1ncmlkOwp9Ci5zcGFuLWJveCB7CiAgZGlzcGxheTogaW5saW5lLWdyaWQ7CiAgcGFkZGluZzogNXB4Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-admin/views/account/personal","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <b-table\n      ref=\"bTable\"\n      loading\n      empty-text=\"暂无数据\"\n      :headers=\"headers\"\n      :form-items=\"formItems\"\n      :ajax-get-data=\"getPersonalList\"\n      :show-column=\"false\"\n      :show-refresh=\"false\"\n      :pageLimit=\"10\"\n    >\n      <template slot=\"column|status\" slot-scope=\"{ row }\">\n        <p :style=\"{ color: typeColors[row.status] }\">\n          {{ row.status == '0' ? '正常' : '已禁用' }}\n        </p>\n      </template>\n    </b-table>\n    <!-- 禁用账号弹窗 -->\n    <el-dialog\n      width=\"560px\"\n      center\n      :visible.sync=\"forbiddenDialog.visible\"\n      title=\"禁用\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"beforeCloseFbDialog\"\n    >\n      <el-form\n        ref=\"fbDialogForm\"\n        :model=\"forbiddenDialog\"\n        :rules=\"forbiddenDialog.rules\"\n      >\n        <el-form-item label=\"确定禁用该账号？\" prop=\"reason\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请填写禁用原因（50字以内）\"\n            v-model=\"forbiddenDialog.reason\"\n            maxlength=\"50\"\n            show-word-limit\n          >\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseFbDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"forbiddenDialog.loading\"\n          @click.stop.prevent=\"onSubmitFbDialog\"\n          >确定</el-button\n        >\n      </span>\n    </el-dialog>\n    <!--查看-->\n    <el-drawer\n      class=\"drawer-header\"\n      title=\"个人账号详情\"\n      :visible.sync=\"lookOver\"\n      direction=\"rtl\"\n      size=\"45%\"\n    >\n      <div class=\"drawer-content\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"8\"\n            ><div class=\"grid-content bg-purple\">\n              <div class=\"box-card-top\">\n                <div class=\"item-content-top\">\n                  <div class=\"item-content-info\">\n                    <p class=\"p-content\">{{ personalInfo.score }}</p>\n                    <span>当前积分</span>\n                  </div>\n                </div>\n              </div>\n            </div></el-col\n          >\n          <el-col :span=\"16\"\n            ><div class=\"grid-content bg-purple\">\n              <div class=\"box-card-top\">\n                <div class=\"item-content-top\">\n                  <div class=\"item-content-info\">\n                    <p class=\"p-content\">{{ personalInfo.sendCount }}</p>\n                    <span>累计发起请求</span>\n                  </div>\n                </div>\n                <div class=\"item-content-top\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"item-content-info\">\n                    <p class=\"p-content\">{{ personalInfo.acceptCount }}</p>\n                    <span>累计接收请求</span>\n                  </div>\n                </div>\n              </div>\n            </div></el-col\n          >\n        </el-row>\n        <div>\n          <p class=\"tittle-style\">基本信息</p>\n          <el-card shadow=\"naver\" class=\"look_card\">\n            <el-row type=\"flex\">\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">姓名</span\n                    ><span class=\"span-content\">{{\n                      personalInfo.staffName\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">工号</span\n                    ><span class=\"span-content\">{{\n                      personalInfo.staffCode\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">联系方式</span\n                    ><span class=\"span-content\">{{ personalInfo.mobile }}</span>\n                  </div>\n                </div>\n              </el-col>\n            </el-row>\n            <el-row type=\"flex\">\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">账号状态</span\n                    ><span class=\"span-content\">{{\n                      personalInfo.status == '0' ? '正常' : '禁用'\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n              <el-col :span=\"16\">\n                <div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">最近登录时间</span\n                    ><span class=\"span-content\">{{\n                      personalInfo.loginTime\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n            </el-row>\n            <el-row type=\"flex\">\n              <el-col :span=\"24\"\n                ><div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">所属部门</span\n                    ><span class=\"span-content\">{{\n                      personalInfo.deptName\n                    }}</span>\n                  </div>\n                </div></el-col\n              >\n            </el-row>\n          </el-card>\n        </div>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\"\n            ><div class=\"grid-content bg-purple\">\n              <p class=\"tittle-style\">展示资源</p>\n              <el-table\n                :data=\"perSourceTable\"\n                tooltip-effect=\"light\"\n                style=\"font-size: 13px; width: 100%\"\n              >\n                <el-table-column prop=\"\" width=\"30\" label=\"\"></el-table-column>\n                <el-table-column\n                  width=\"100\"\n                  prop=\"firstResourceName\"\n                  label=\"一级资源标签\"\n                >\n                </el-table-column>\n                <el-table-column\n                  prop=\"secondResourceName\"\n                  width=\"230\"\n                  label=\"二级资源标签\"\n                >\n                </el-table-column>\n                <el-table-column\n                  prop=\"resourceDetails\"\n                  label=\"资源细节\"\n                  show-overflow-tooltip\n                >\n                  <template slot-scope=\"prop\">\n                    <p>{{ prop.row.resourceDetails }}</p>\n                  </template></el-table-column\n                >\n              </el-table>\n            </div></el-col\n          >\n        </el-row>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\"\n            ><div class=\"grid-content bg-purple\">\n              <p class=\"tittle-style\">日志</p>\n              <el-table\n                :data=\"perLogTable\"\n                style=\"font-size: 13px; width: 100%\"\n                tooltip-effect=\"light\"\n              >\n                <el-table-column prop=\"\" width=\"30\" label=\"\"></el-table-column>\n                <el-table-column prop=\"logTime\" width=\"200\" label=\"操作时间\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"reason\"\n                  label=\"操作内容\"\n                  show-overflow-tooltip\n                  ><template slot-scope=\"props\">\n                    <p>{{ props.row.reason }}</p>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </div></el-col\n          >\n        </el-row>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n<script>\nimport { Input, Dialog, Form, FormItem, MessageBox } from 'element-ui';\nimport BTable from '@/components/business/BTable';\nimport {\n  getPersonalList,\n  getPersonalInfo,\n  getPersonalResources,\n  getPersonalLog,\n  ajaxDisableAccount\n} from '@/pages/share-platform-admin/api/account';\nexport default {\n  name: 'Personal',\n  components: {\n    [Input.name]: Input,\n    [Dialog.name]: Dialog,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    BTable\n  },\n  data() {\n    return {\n      lookOver: false,\n      typeColors: {\n        1: 'red'\n      },\n      //table表头\n      headers: [\n        {\n          label: '序号',\n          type: 'index'\n        },\n        {\n          label: '工号',\n          prop: 'staffCode'\n        },\n        {\n          label: '姓名',\n          prop: 'staffName'\n        },\n        {\n          label: '联系方式',\n          prop: 'mobile'\n        },\n        {\n          label: '积分',\n          prop: 'score'\n        },\n        {\n          label: '账号状态',\n          prop: 'status',\n          colType: 'column',\n          slotName: 'status',\n          formatter: (r, c, v) => {\n            if (v == 0) return '正常';\n            else return '已禁用';\n          }\n        },\n        {\n          label: '最近登录时间',\n          prop: 'loginTime',\n          formatter: (r, c, v) =>\n            this.$util.dateConverter('yyyy-MM-dd hh:mm', v)\n        },\n        {\n          label: '操作',\n          colType: 'btns',\n          width: '150px',\n          btns: [\n            {\n              label: '查看',\n              type: 'text',\n              size: 'mini',\n              click: this.onLook\n            },\n            {\n              label: '启用',\n              type: 'text',\n              size: 'mini',\n              hidden: row => row.status == '0',\n              click: this.onEnable\n            },\n            {\n              label: '禁用',\n              type: 'text',\n              size: 'mini',\n              hidden: row => row.status == '1',\n              click: this.onForbidden\n            }\n          ]\n        }\n      ],\n      //表单查询项\n      formItems: [\n        {\n          type: 'input',\n          label: '工号',\n          prop: 'staffCode',\n          attrs: {\n            placeholder: '请输入工号',\n            clearable: true\n          }\n        },\n        {\n          type: 'input',\n          label: '姓名',\n          prop: 'staffName',\n          attrs: {\n            placeholder: '请输入姓名',\n            clearable: true\n          }\n        },\n        {\n          type: 'input',\n          label: '联系方式',\n          prop: 'mobile',\n          attrs: {\n            placeholder: '请输入手机号',\n            clearable: true\n          } //默认文字\n        },\n        {\n          type: 'select',\n          label: '账号状态',\n          prop: 'isShow',\n          options: [\n            {\n              label: '正常',\n              value: 0\n            },\n            {\n              label: '已禁用',\n              value: 1\n            }\n          ]\n        }\n      ],\n      //禁用账号弹窗配置\n      forbiddenDialog: {\n        row: null, //弹窗对应的table 行数据\n        visible: false, //弹窗是否可见\n        reason: '', //禁用理由\n        loading: false, //是否在请求中\n        staffCode: '',\n        rules: {\n          reason: {\n            required: true,\n            trigger: 'blur',\n            message: '禁用原因未填写'\n          }\n        }\n      },\n      //个人资料详情\n      personalInfo: {},\n      perSourceTable: [],\n      perLogTable: []\n    };\n  },\n  methods: {\n    //获取个人号数据\n    getPersonalList,\n    refreshTable() {\n      this.$nextTick(() => {\n        this.$refs.bTable.onRefreshTable();\n      });\n    },\n    ajaxGetTableDataByPage() {\n      this.$nextTick(() => {\n        this.$refs.bTable.ajaxGetTableDataByPage();\n      });\n    },\n    //点击查看按钮\n    onLook(row) {\n      getPersonalInfo(row.staffCode)\n        .then(res => {\n          if (res.data == '') {\n            this.personalInfo = [];\n          } else this.personalInfo = res.data[0];\n        })\n        .catch(res => {\n          this.personalInfo = [];\n          this.$message({\n            type: 'error',\n            message: '基本信息获取失败！'\n          });\n        });\n      getPersonalResources(row.staffCode)\n        .then(res => {\n          if (res.data == '') this.perSourceTable = [];\n          else this.perSourceTable = res.data;\n        })\n        .catch(res => {\n          this.perSourceTable = [];\n          this.$message({\n            type: 'error',\n            message: '资源列表获取失败！'\n          });\n        });\n      getPersonalLog(row.staffCode)\n        .then(res => {\n          if (res.data == '') {\n            this.perLogTable = [];\n          } else {\n            this.perLogTable = res.data;\n            if (res.data.length > 0) {\n              const lastOne = res.data.length;\n              this.perLogTable[lastOne - 1].reason = '该账号已启用';\n            }\n          }\n        })\n        .catch(res => {\n          this.perLogTable = [];\n          this.$message({\n            type: 'error',\n            message: '日志获取失败！'\n          });\n        });\n      this.lookOver = true;\n    },\n    //点击启用按钮\n    onEnable(row) {\n      let queryParams = {\n        status: '0',\n        staffCode: row.staffCode\n      };\n      MessageBox.confirm('确定启用该账号', '启用', {\n        center: true\n      }).then(() => {\n        ajaxDisableAccount(queryParams)\n          .then(res => {\n            this.refreshTable();\n            this.$message({\n              type: 'success',\n              message: '启用成功'\n            });\n          })\n          .catch(rers => {\n            this.$message({\n              type: 'error',\n              message: '启用失败'\n            });\n          });\n      });\n    },\n    //点击禁用按钮\n    onForbidden(row) {\n      this.forbiddenDialog.row = row;\n      this.forbiddenDialog.reason = '';\n      this.forbiddenDialog.staffCode = row.staffCode;\n      this.forbiddenDialog.visible = true;\n    },\n    //点击提交禁用账号操作\n    onSubmitFbDialog() {\n      let queryParams = {\n        status: '1',\n        staffCode: this.forbiddenDialog.staffCode,\n        reason: this.forbiddenDialog.reason\n      };\n      this.$refs['fbDialogForm'].validate((valid, obj) => {\n        if (!valid) return; // 校验未通过\n        //this.forbiddenDialog.loading = true;\n        ajaxDisableAccount(queryParams)\n          .then(res => {\n            this.refreshTable();\n            this.$message({\n              type: 'success',\n              message: '禁用成功'\n            });\n          })\n          .catch(rers => {\n            this.$message({\n              type: 'error',\n              message: '禁用失败'\n            });\n          });\n        //ajax test\n        setTimeout(() => {\n          this.getPersonalList();\n          this.forbiddenDialog.loading = false;\n          this.onCloseFbDialog(); //处理后关闭弹窗\n        }, 500);\n      });\n    },\n    //关闭窗口前处理\n    beforeCloseFbDialog(done) {\n      this.getPersonalList();\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      done();\n    },\n    //点击关闭禁用账号操作\n    onCloseFbDialog() {\n      //if (this.forbiddenDialog.loading) return;\n      this.forbiddenDialog.visible = false;\n      this.$refs['fbDialogForm'].resetFields();\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.drawer-header {\n  text-align: center;\n  padding: 0;\n  border: 0;\n}\n.drawer-content {\n  min-width: 400px;\n  margin-bottom: 10px;\n}\n.el-row {\n  padding: 10px 10px 0 10px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n.el-col {\n  border-radius: 8px;\n}\n.bg-purple-dark {\n  background: #fff;\n}\n.bg-purple {\n  background: #fff;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 8px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.box-card {\n  display: flex;\n  justify-content: space-between;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.box-card-item {\n  width: 100%;\n}\n.box-card-top {\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.box-card-content {\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.tittle-style {\n  text-align: left;\n  font-size: 15px;\n  font-weight: bold;\n  padding: 10px;\n  margin-left: 5%;\n}\n.look_card {\n  border-radius: 8px;\n  margin: 0 10px;\n  text-align: left;\n}\n.p-content {\n  font-weight: bold;\n  font-size: 20px;\n}\nspan {\n  display: inline-block;\n  padding-top: 5px;\n  font-size: 10px;\n  font-weight: 100;\n  color: rgb(133, 131, 131);\n}\n.span-tittle,\n.span-content {\n  display: block;\n  padding-top: 5px;\n}\n.span-tittle {\n  color: #000;\n}\n.item-content {\n  padding-bottom: 15px;\n  width: 100px;\n}\n.last-one {\n  width: 200px;\n  margin-left: 20px;\n}\n.item-content-top {\n  padding-left: 15px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  margin-left: 5%;\n}\n.el-divider--vertical {\n  height: 40px;\n  vertical-align: text-top;\n}\n.item-content-info {\n  display: inline-grid;\n}\n.span-box {\n  display: inline-grid;\n  padding: 5px;\n}\n</style>\n<style>\n.el-drawer__body {\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: rgb(243, 242, 242);\n}\n.el-drawer__header {\n  margin-bottom: 10px;\n  font-size: 15px;\n  font-weight: bolder;\n}\n</style>\n"]}]}