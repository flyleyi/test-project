{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/personal/index.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/personal/index.vue","mtime":1645176309828},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC10YWJsZSAud2FybmluZy1yb3cgewogIGNvbG9yOiByZ2IoMjAxLCAxOTcsIDE5Nyk7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6iCA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-front/views/personal","sourcesContent":["<template>\n  <div class=\"loginRole\">\n    <div class=\"head-background\">\n      <div class=\"logo-img\">\n        <a href=\"#\">\n          <img :src=\"imagelogo\" alt=\"\" @click=\"goPage('1')\" />\n        </a>\n      </div>\n      <div class=\"nav\">\n        <a href=\"#\">\n          <img\n            :src=\"imgSrcHome\"\n            alt=\"返回首页\"\n            title=\"返回首页\"\n            @click=\"goPage('1')\"\n          />\n        </a>\n        <a href=\"#\">\n          <img\n            :src=\"imgSrcOne\"\n            alt=\"我的需求\"\n            title=\"我的需求\"\n            @click=\"goPage('2')\"\n          />\n        </a>\n        <el-badge :is-dot=\"ismessageDot\">\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcTwo\"\n              alt=\"我的消息\"\n              title=\"我的消息\"\n              @click=\"goPage('3')\"\n            />\n          </a>\n        </el-badge>\n        <el-badge :is-dot=\"isDot\">\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcThree\"\n              alt=\"个人中心\"\n              title=\"个人中心\"\n              @click=\"goPage('4')\"\n            />\n          </a>\n        </el-badge>\n        <el-button type=\"primary\" size=\"mini\" @click.native=\"logOut\"\n          >退出</el-button\n        >\n      </div>\n    </div>\n    <div class=\"menu\">\n      <el-card>\n        <el-tabs v-model=\"activeName\" @change=\"handleChange\">\n          <el-tab-pane label=\"个人信息\" name=\"personalInfo\">\n            <div class=\"record\">\n              <span>{{ personalInfo.score }}</span>\n              <span>当前积分</span>\n              <span>{{ personalInfo.sendCount }}</span>\n              <span>累计发起需求</span>\n              <span>{{ personalInfo.acceptCount }}</span>\n              <span>累计接收需求</span>\n              <el-card class=\"card-left\">\n                <img :src=\"imgjf\" alt=\"\" />\n              </el-card>\n              <el-card class=\"card-right\">\n                <img :src=\"imgfq\" alt=\"\" class=\"imga\" />\n                <img :src=\"imgjs\" alt=\"\" class=\"imgb\" />\n              </el-card>\n            </div>\n            <el-card class=\"el-card2\">\n              <el-form ref=\"form\" label-width=\"180px\" label-position=\"left\">\n                <p class=\"el-p\">HELLO,{{ personalInfo.staffName }}!</p>\n                <el-divider></el-divider>\n                <el-form-item label=\"当前是否企业号\" class=\"lable-a\">\n                  <el-form-item\n                    label-width=\"100%\"\n                    :label=\"personalInfo.isBusinessAccount == '1' ? '是' : '否'\"\n                  >\n                  </el-form-item>\n                </el-form-item>\n                <el-divider></el-divider>\n                <el-form-item label=\"联系方式\" class=\"lable-a\">\n                  <el-form-item :label=\"personalInfo.mobile\" label-width=\"100%\">\n                  </el-form-item>\n                </el-form-item>\n                <el-divider></el-divider>\n                <el-form-item label=\"所属部门\" class=\"lable-a\">\n                  <el-form-item\n                    :label=\"personalInfo.deptName\"\n                    label-width=\"100%\"\n                  >\n                  </el-form-item>\n                </el-form-item>\n                <el-divider></el-divider>\n                <div v-if=\"personalInfo.isBusinessAccount == '1'\">\n                  <el-form-item label=\"绑定企业名称\" class=\"lable-a\">\n                    <el-form-item\n                      :label=\"\n                        personalInfo.businessName == ''\n                          ? '暂无'\n                          : personalInfo.businessName\n                      \"\n                      label-width=\"100%\"\n                    >\n                    </el-form-item>\n                  </el-form-item>\n                  <el-divider></el-divider>\n                  <el-form-item label=\"绑定企业号\" class=\"lable-a\">\n                    <el-form-item\n                      :label=\"\n                        personalInfo.businessCode == ''\n                          ? '暂无'\n                          : personalInfo.businessCode\n                      \"\n                      label-width=\"100%\"\n                    >\n                    </el-form-item>\n                  </el-form-item>\n                  <el-divider></el-divider>\n                </div>\n              </el-form>\n            </el-card>\n          </el-tab-pane>\n          <el-tab-pane label=\"我的资源\" name=\"mySource\"\n            ><el-card class=\"el-card2\">\n              <el-form label-width=\"180px\" label-position=\"left\">\n                <span class=\"el-span\">我的资源</span>\n                <el-button size=\"small\" class=\"el-btnn\" @click=\"addSourceLable\"\n                  >添加资源</el-button\n                >\n                <el-divider></el-divider\n              ></el-form>\n              <el-table\n                :data=\"mySourceDataTable.records\"\n                style=\"width: 100%\"\n                tooltip-effect=\"light\"\n                :row-class-name=\"tableRowClassName\"\n              >\n                <el-table-column prop=\"firstResourceName\" label=\"一级资源标签\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"secondResourceName\"\n                  :formatter=\"stateData\"\n                  label=\"二级资源标签\"\n                >\n                </el-table-column>\n                <el-table-column\n                  prop=\"thirdResourceName\"\n                  label=\"资源细节\"\n                  show-overflow-tooltip\n                >\n                  <template slot-scope=\"props\">\n                    <span>{{ props.row.thirdResourceName }}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column fixed=\"right\" label=\"操作\" width=\"100\">\n                  <template slot-scope=\"props\">\n                    <el-button\n                      type=\"text\"\n                      @click=\"addChangeLable(props.row)\"\n                      size=\"small\"\n                      >编辑</el-button\n                    >\n                    <el-button\n                      type=\"text\"\n                      size=\"small\"\n                      @click=\"deleteSourceData(props.row)\"\n                    >\n                      删除\n                    </el-button>\n                  </template>\n                </el-table-column>\n              </el-table>\n              <el-pagination\n                style=\"text-align:right;margin-top:10px;\"\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentPage\"\n                :page-sizes=\"[10, 20, 50, 100]\"\n                :page-size=\"pagesize\"\n                background\n                layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"mySourceDataTable.total\"\n              >\n              </el-pagination> </el-card\n          ></el-tab-pane>\n        </el-tabs>\n      </el-card>\n    </div>\n    <!-- 新增资源弹窗begin -->\n    <el-dialog\n      width=\"55%\"\n      center\n      :visible.sync=\"forbiddenDialog.visible\"\n      :title=\"dialogTitle\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"beforeCloseFbDialog\"\n    >\n      <el-form\n        ref=\"fbDialogForm\"\n        :model=\"forbiddenDialog\"\n        :rules=\"forbiddenDialog.rules\"\n      >\n        <el-form-item prop=\"firstLableValue\" style=\"margin-bottom: 20px;\">\n          <el-select\n            v-model=\"forbiddenDialog.firstLableValue\"\n            @change=\"lableChange\"\n            placeholder=\"一级资源标签\"\n          >\n            <el-option\n              v-for=\"item in firstLableOptions\"\n              :key=\"item.id\"\n              :label=\"item.resourcesName\"\n              :value=\"item.id\"\n            >\n            </el-option>\n          </el-select>\n          <div\n            v-if=\"isOtherFirstLable\"\n            style=\"display:inline-block;width:500px;\"\n          >\n            <el-input\n              style=\"position: relative;width:38%;margin-right:5px;margin-top:5px;\"\n              v-model.trim=\"forbiddenDialog.otherFistLable\"\n              :onkeyup=\"\n                (forbiddenDialog.otherFistLable = forbiddenDialog.otherFistLable.replace(\n                  /\\s+/g,\n                  ''\n                ))\n              \"\n              placeholder=\"自定义一级资源标签名\"\n              maxlength=\"5\"\n              show-word-limit\n            ></el-input>\n            <el-input\n              style=\"position: relative;width:60%;margin-right:5px;margin-top:5px;\"\n              v-model.trim=\"forbiddenDialog.otherSecondLable\"\n              :onkeyup=\"\n                (forbiddenDialog.otherSecondLable = forbiddenDialog.otherSecondLable.replace(\n                  /\\s+/g,\n                  ''\n                ))\n              \"\n              placeholder=\"自定义二级资源标签名\"\n              maxlength=\"15\"\n              show-word-limit\n              @change=\"isShelfLable('secondA')\"\n            ></el-input>\n          </div>\n          <el-select\n            v-model=\"forbiddenDialog.secondLableValue\"\n            v-if=\"isOtherSecondLable\"\n            @change=\"lableSecondChange\"\n            placeholder=\"二级资源标签\"\n          >\n            <el-option\n              v-for=\"item in secondLableOptions\"\n              :key=\"item.id\"\n              :label=\"item.resourcesName\"\n              :value=\"item.id\"\n            >\n            </el-option>\n          </el-select>\n          <div\n            v-if=\"isOtherSecondLableInput\"\n            style=\"display:inline-block;width:300px;\"\n          >\n            <el-input\n              style=\"margin-right:5px;margin-top:5px;\"\n              v-model.trim=\"forbiddenDialog.otherSecondLable\"\n              :onkeyup=\"\n                (forbiddenDialog.otherSecondLable = forbiddenDialog.otherSecondLable.replace(\n                  /\\s+/g,\n                  ''\n                ))\n              \"\n              placeholder=\"自定义二级资源标签名\"\n              maxlength=\"15\"\n              show-word-limit\n              @click:change=\"isShelfLable('secondB')\"\n            ></el-input>\n          </div>\n        </el-form-item>\n        <el-form-item prop=\"reason\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请填写资源相关细节内容介绍，请勿直接提供联系方式（50字以内）\"\n            v-model=\"forbiddenDialog.reason\"\n            maxlength=\"50\"\n            show-word-limit\n          >\n          </el-input>\n          <el-checkbox\n            v-model=\"forbiddenDialog.checked\"\n            v-if=\"isNewAdd\"\n            class=\"checkBox\"\n            >继续新增下一个</el-checkbox\n          >\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseFbDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"forbiddenDialog.loading\"\n          @click.stop.prevent=\"onSubmitFbDialog\"\n          >确定</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 新增资源弹窗end -->\n  </div>\n</template>\n\n<script>\nimport {\n  Input,\n  Select,\n  Pagination,\n  Dialog,\n  Collapse,\n  CollapseItem,\n  TimePicker,\n  Option,\n  Badge\n} from 'element-ui';\nimport {\n  getStaffInfo,\n  getStaffSourceList,\n  deleteSource,\n  getAllLableList,\n  getSecondLableList,\n  postNewSourceInfo,\n  postUpdateSourceInfo,\n  getOtherSourceIsShelf,\n  getLabelAdjusted,\n  getReadMessage\n} from '@/pages/share-platform-front/api/user';\nexport default {\n  name: 'Personal',\n  components: {\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    [Pagination.name]: Pagination,\n    [Collapse.name]: Collapse,\n    [CollapseItem.name]: CollapseItem,\n    [TimePicker.name]: TimePicker,\n    [Dialog.name]: Dialog,\n    [Badge.name]: Badge\n  },\n  data() {\n    return {\n      imagelogo: require('../../assets/images/newlogo.png'),\n      imgSrcHome: require('../../assets/images/home.webp'),\n      imgSrcOne: require('../../assets/images/need.webp'),\n      imgSrcTwo: require('../../assets/images/message.webp'),\n      imgSrcThree: require('../../assets/images/personal.webp'),\n      imgjf: require('../../assets/images/sorce.webp'),\n      imgfq: require('../../assets/images/demand.webp'),\n      imgjs: require('../../assets/images/recdemand.webp'),\n      accountType: '1',\n      isDot: false,\n      ismessageDot: false,\n      drawer: false, //查看抽屉关闭\n      currentPage: 1,\n      pagesize: 10,\n      personalInfo: {}, //个人信息\n      mySourceDataTable: [], //资源列表\n      activeName: 'personalInfo', //tag切换\n      dialogTitle: '', //弹窗标题\n      isNewAdd: true, //复选框显示\n      firstLableOptions: [], //一级标签列表\n      secondLableOptions: [], //二级标签列表\n      isOtherFirstLable: false, //一级标签选其他时显示\n      isOtherSecondLable: true, //一级标签选其他时隐藏\n      isOtherSecondLableInput: false, //二级标签选其他时显示\n      firstLable: '', //一级标签选择框选取的lable\n      secondLable: '', //一级标签选择框选取的lable\n      thirdDetailId: '',\n      firstOteherId: '',\n      secondOteherId: '',\n      tableStyle: {\n        cellBackground: 'rgb(184, 173, 152)',\n        cellColor: 'gray'\n      },\n      firstUpdateId: '',\n      secondUpdateId: '',\n      //新增资源标签弹窗配置\n      forbiddenDialog: {\n        //row: null, //弹窗对应的table 行数据\n        visible: false, //弹窗是否可见\n        reason: '', //资源细节的描述\n        loading: false, //是否在请求中\n        checked: false, //是否继续新增下一个\n        firstLableValue: '',\n        secondLableValue: '',\n        otherFistLable: '',\n        otherSecondLable: '',\n        rules: {\n          //校验效果\n          reason: {\n            required: true,\n            trigger: 'blur',\n            message: '资源细节内容未填写'\n          },\n          firstLableValue: {\n            required: true,\n            trigger: 'blur',\n            message: '请填写完整标签内容'\n          }\n        }\n      }\n    };\n  },\n  created() {\n    this.accountType = window.sessionStorage.getItem('accountType');\n    if (window.sessionStorage.getItem('isMySource') == '1') {\n      this.activeName = 'mySource';\n      window.sessionStorage.removeItem('isMySource');\n    }\n    this.getPersonalInfo();\n    this.getPersonalSource();\n    this.getAllFirstLable();\n    this.getSignTip();\n  },\n  methods: {\n    //退出登录\n    async logOut() {\n      window.localStorage.clear();\n      window.sessionStorage.clear();\n      await this.$store.dispatch('user/logout');\n      this.$router.push(`/login?redirect=${this.$route.fullPath}`);\n    },\n    //点击图标跳转页面\n    goPage(key) {\n      switch (key) {\n        case '1':\n          this.$router.push('/Search');\n          break;\n        case '2':\n          this.$router.push('/Demand');\n          break;\n        case '3':\n          this.$router.push('/Message');\n          break;\n        case '4':\n          this.$router.push('/Personal');\n          break;\n      }\n    },\n    //获取个人信息详情\n    getPersonalInfo() {\n      getStaffInfo(this.accountType).then(res => {\n        this.personalInfo = res.data;\n      });\n    },\n    handleChange() {\n      this.getPersonalSource();\n    },\n    //获取个人资源列表\n    getPersonalSource() {\n      const queryData = {\n        offset: this.currentPage,\n        limit: this.pagesize,\n        accountType: this.accountType\n      };\n      getStaffSourceList(queryData)\n        .then(res => {\n          this.mySourceDataTable = res.data;\n        })\n        .catch(res => {\n          this.$message({\n            type: 'error',\n            message: '资源获取失败!'\n          });\n        });\n    },\n    //获取个人中心是否有待办事项\n    getSignTip() {\n      getLabelAdjusted(this.accountType)\n        .then(res => {\n          if (res.data == '0') {\n            this.isDot = false;\n          } else {\n            this.isDot = true;\n          }\n        })\n        .catch(res => {\n          this.isDot = false;\n        });\n      getReadMessage(this.accountType)\n        .then(res => {\n          if (res.data.length) {\n            this.ismessageDot = true;\n          } else {\n            this.ismessageDot = false;\n          }\n        })\n        .catch(res => {\n          this.ismessageDot = false;\n        });\n    },\n    //分页切换每页总条数\n    handleSizeChange(pagesize) {\n      this.pagesize = pagesize;\n      this.currentPage = 1;\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage,\n        accountType: this.accountType\n      };\n      getStaffSourceList(params).then(res => {\n        this.mySourceDataTable = res.data;\n      });\n    },\n    //分页切换页码\n    handleCurrentChange(currentPage) {\n      this.currentPage = currentPage;\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage, //(this.currentPage - 1) * this.pagesize,\n        accountType: this.accountType\n      };\n      getStaffSourceList(params).then(res => {\n        this.mySourceDataTable = res.data;\n      });\n    },\n    //已下架资源行样式切换\n    tableRowClassName({ row, rowIndex }) {\n      if (row.isOffShelf == '1') {\n        return 'warning-row';\n      }\n      return '';\n    },\n    //已下架状态展示\n    stateData(row) {\n      if (row.isOffShelf == '1') return row.secondResourceName + '(已下架)';\n      else return row.secondResourceName;\n    },\n    //删除资源项\n    deleteSourceData(row) {\n      this.$confirm('确认删除此消息?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          const quueryData = {\n            firstResourceId: row.firstResourceId,\n            secondResourceId: row.secondResourceId,\n            thirdResourceId: row.thirdResourceId,\n            firstResourceName: row.firstResourceName,\n            secondResourceName: row.secondResourceName,\n            thirdResourceName: row.thirdResourceName\n          };\n          deleteSource(quueryData).then(res => {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n            this.getPersonalSource();\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n    },\n    //新增资源按钮\n    addSourceLable() {\n      this.dialogTitle = '新增资源';\n      this.isNewAdd = true; //继续新增复选框显示\n      this.forbiddenDialog.visible = true;\n    },\n    //获取所有一级标签列表\n    getAllFirstLable() {\n      const queryFirst = '1'; //入参:1、一级，2、二级\n      getAllLableList(queryFirst).then(res => {\n        this.firstLableOptions = res.data;\n        this.firstLableOptions.push({\n          id: '-100',\n          resourcesName: '+其他'\n        }); //拼接一级‘其他’选项\n      });\n    },\n    //选择一类标签触发事件\n    lableChange(data) {\n      let obj = {};\n      obj = this.firstLableOptions.find(item => {\n        //遍历数据源\n        return item.id === data; //筛选出匹配数据\n      });\n      this.firstLable = obj.resourcesName; //得到value对应的lable值\n      //根据一级标签获取二级列表\n      getSecondLableList(data).then(res => {\n        this.secondLableOptions = res.data;\n        this.secondLableOptions.push({\n          id: '-200',\n          resourcesName: '+其他'\n        }); //拼接二级‘其他’选项\n      });\n      //控制input框和二级选择框的显示隐藏\n      if (data == '-100') {\n        this.isOtherFirstLable = true;\n        this.isOtherSecondLable = false;\n        this.isOtherSecondLableInput = false;\n        this.forbiddenDialog.secondLableValue = '';\n        this.forbiddenDialog.otherSecondLable = '';\n        this.forbiddenDialog.otherFistLable = '';\n      } else {\n        this.isOtherFirstLable = false;\n        this.isOtherSecondLable = true;\n        this.isOtherSecondLableInput = false;\n        this.forbiddenDialog.secondLableValue = '';\n        this.forbiddenDialog.otherSecondLable = '';\n        this.forbiddenDialog.otherFistLable = '';\n      }\n    },\n    //选择二级标签触发事件\n    lableSecondChange(data) {\n      console.log(data);\n      let obj = {};\n      obj = this.secondLableOptions.find(item => {\n        return item.id === data;\n      });\n      this.secondLable = obj.resourcesName;\n      //控制二级Input框显示隐藏\n      if (data == '-200') {\n        this.isOtherSecondLableInput = true;\n        this.forbiddenDialog.otherSecondLable = '';\n      } else {\n        this.isOtherSecondLableInput = false;\n        this.forbiddenDialog.otherSecondLable = '';\n      }\n    },\n    //点击提交保存的处理\n    onSubmitFbDialog() {\n      this.$refs['fbDialogForm'].validate((valid, obj) => {\n        if (!valid) return; // 部分输入框校验未通过\n        this.forbiddenDialog.loading = true;\n\n        let secondValue = '',\n          secondId = '',\n          firstName = '',\n          secondName = '';\n        //校验部分输入框是否为空，控制部分入参内容\n        if (this.forbiddenDialog.firstLableValue == '-100') {\n          secondValue = '1';\n          if (\n            this.forbiddenDialog.otherFistLable == '' ||\n            this.forbiddenDialog.otherSecondLable == ''\n          ) {\n            this.$message({\n              type: 'error',\n              message: '请填写完整标签名称!'\n            });\n            this.forbiddenDialog.loading = false;\n            return false;\n          }\n        } else {\n          secondValue = this.forbiddenDialog.secondLableValue == '-200' ? 1 : 0;\n          if (this.forbiddenDialog.secondLableValue == '') {\n            this.$message({\n              type: 'error',\n              message: '请选择二级标签!'\n            });\n            this.forbiddenDialog.loading = false;\n            return false;\n          }\n        }\n        if (this.forbiddenDialog.firstLableValue == '-100')\n          secondId = this.firstOteherId;\n        else\n          secondId =\n            this.forbiddenDialog.secondLableValue == '-200'\n              ? this.secondOteherId\n              : this.forbiddenDialog.secondLableValue;\n        if (this.forbiddenDialog.firstLableValue == '-100') {\n          firstName = this.forbiddenDialog.otherFistLable;\n          secondName = this.forbiddenDialog.otherSecondLable;\n        } else if (this.forbiddenDialog.secondLableValue == '-200') {\n          if (this.forbiddenDialog.otherSecondLable == '') {\n            this.$message({\n              type: 'error',\n              message: '请填写二级标签名称!'\n            });\n            this.forbiddenDialog.loading = false;\n            return false;\n          }\n          firstName = this.firstLable;\n          secondName = this.forbiddenDialog.otherSecondLable;\n        } else {\n          firstName = this.firstLable;\n          secondName = this.secondLable;\n        }\n        //修改资源提交事件\n        if (this.dialogTitle == '修改资源') {\n          //入参对象\n          let queryData = {\n            accountType: Number(this.accountType),\n            isFirstLabel: this.isUpFirstLabel,\n            //this.forbiddenDialog.firstLableValue == '-100' ? 1 : 0,\n            isSecondLabel: this.isUpSecondLable, //Number(secondValue),\n            firstResourceId:\n              this.forbiddenDialog.firstLableValue == '-100' || ''\n                ? Number('0') //this.firstUpdateId\n                : Number(this.forbiddenDialog.firstLableValue),\n            secondResourceId:\n              this.forbiddenDialog.secondLableValue == '-200' || ''\n                ? Number('0')\n                : Number(this.forbiddenDialog.secondLableValue),\n            // this.forbiddenDialog.secondLableValue != ''\n            //   ? this.forbiddenDialog.secondLableValue != '-200'\n            //     ? this.this.forbiddenDialog.secondLableValue\n            //     : this.secondUpdateId\n            //   : this.secondUpdateId,\n            firstOldResourceId: Number(this.firstUpdateId),\n            secondOldResourceId: Number(this.secondUpdateId),\n            firstResourceName: firstName,\n            secondResourceName: secondName,\n            thirdResourceName: this.forbiddenDialog.reason,\n            thirdResourceId: Number(this.thirdDetailId)\n          };\n          postUpdateSourceInfo(queryData)\n            .then(res => {\n              if (res.success && res.errType == '1') {\n                this.$message({\n                  type: 'success',\n                  message: '修改成功!'\n                });\n                //ajax test\n                setTimeout(() => {\n                  this.getPersonalSource(); //提交一次即刷新列表\n                  this.onEndCloseDialog(); //处理后是否关闭弹窗\n                }, 1000);\n              }\n            })\n            .catch(res => {\n              this.$message({\n                type: 'error',\n                message: res.message\n              });\n            });\n        } else {\n          //新增资源提交事件\n          //入参对象\n          let queryInfo = {\n            accountType: this.accountType,\n            isFirstLabel:\n              this.forbiddenDialog.firstLableValue == '-100' ? 1 : 0,\n            isSecondLabel: Number(secondValue),\n            firstResourceId:\n              this.forbiddenDialog.firstLableValue == '-100'\n                ? this.firstOteherId\n                : this.forbiddenDialog.firstLableValue,\n            secondResourceId: secondId,\n            firstResourceName: firstName,\n            secondResourceName: secondName,\n            thirdResourceName: this.forbiddenDialog.reason\n          };\n          postNewSourceInfo(queryInfo)\n            .then(res => {\n              if (res.success && res.errType == '1') {\n                this.$message({\n                  type: 'success',\n                  message: '新增成功!'\n                });\n                //ajax test\n                setTimeout(() => {\n                  this.getPersonalSource(); //提交一次即刷新列表\n                  this.onEndCloseDialog(); //处理后是否关闭弹窗\n                }, 1000);\n              }\n            })\n            .catch(res => {\n              this.$message({\n                type: 'error',\n                message: res.message\n              });\n            });\n        }\n        this.forbiddenDialog.loading = false;\n      });\n    },\n    //判断自定义标签是否重复\n    isShelfLable(data) {\n      let shelfQuery = {\n        accountType: this.accountType,\n        resourcesName: '',\n        layer: ''\n      };\n      if (data == 'secondA') {\n        shelfQuery.resourcesName = this.forbiddenDialog.otherSecondLable;\n        shelfQuery.layer = 2;\n        getOtherSourceIsShelf(shelfQuery).then(res => {\n          if (res.data) {\n            this.$message({\n              type: 'error',\n              message: '该名称已存在二级标签库中!'\n            });\n          }\n        });\n      } else {\n        shelfQuery.resourcesName = this.forbiddenDialog.otherSecondLable;\n        shelfQuery.layer = 3;\n        getOtherSourceIsShelf(shelfQuery).then(res => {\n          if (res.data) {\n            this.$message({\n              type: 'error',\n              message: '该名称已存在二级标签库中!'\n            });\n          }\n        });\n      }\n    },\n    //关闭窗口前处理\n    beforeCloseFbDialog(done) {\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      //重置数据\n      this.secondLableOptions = [];\n      this.forbiddenDialog.otherFistLable = '';\n      this.forbiddenDialog.otherSecondLable = '';\n      this.forbiddenDialog.secondLableValue = '';\n      this.forbiddenDialog.firstLableValue = '';\n      this.forbiddenDialog.reason = '';\n      this.forbiddenDialog.checked = false;\n      this.isOtherFirstLable = false;\n      this.isOtherSecondLable = true;\n      this.isOtherSecondLableInput = false;\n      done();\n    },\n    //点击取消关闭新增操作\n    onCloseFbDialog() {\n      this.forbiddenDialog.visible = false;\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      //重置数据\n      this.secondLableOptions = [];\n      this.forbiddenDialog.otherFistLable = '';\n      this.forbiddenDialog.otherSecondLable = '';\n      this.forbiddenDialog.secondLableValue = '';\n      this.forbiddenDialog.firstLableValue = '';\n      this.forbiddenDialog.reason = '';\n      this.forbiddenDialog.checked = false;\n      this.isOtherFirstLable = false;\n      this.isOtherSecondLable = true;\n      this.isOtherSecondLableInput = false;\n    },\n    //操作完成后调用操作\n    onEndCloseDialog() {\n      if (this.forbiddenDialog.checked) this.forbiddenDialog.visible = true;\n      else this.forbiddenDialog.visible = false;\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      //重置数据\n      this.secondLableOptions = [];\n      this.forbiddenDialog.otherFistLable = '';\n      this.forbiddenDialog.otherSecondLable = '';\n      this.forbiddenDialog.secondLableValue = '';\n      this.forbiddenDialog.firstLableValue = '';\n      this.forbiddenDialog.reason = '';\n      //this.forbiddenDialog.checked = false;\n      this.isOtherFirstLable = false;\n      this.isOtherSecondLable = true;\n      this.isOtherSecondLableInput = false;\n    },\n    //编辑资源按钮\n    addChangeLable(row) {\n      this.dialogTitle = '修改资源';\n      this.isNewAdd = false; //隐藏复选框\n      this.forbiddenDialog.checked = false;\n      this.forbiddenDialog.visible = true;\n      this.forbiddenDialog.reason = row.thirdResourceName;\n      this.isUpFirstLabel = row.isFirstLabel;\n      this.isUpSecondLable = row.isSecondLabel;\n      this.thirdDetailId = row.thirdResourceId;\n      this.secondUpdateId = row.secondResourceId;\n      if (row.isFirstLabel == '0') {\n        this.forbiddenDialog.firstLableValue = row.firstResourceId;\n        //获取并渲染二级标签框内容\n        this.lableChange(this.forbiddenDialog.firstLableValue);\n        this.firstUpdateId = row.firstResourceId;\n        if (row.isSecondLabel == '0')\n          this.forbiddenDialog.secondLableValue = row.secondResourceId;\n        else {\n          this.forbiddenDialog.secondLableValue = '-200';\n          this.isOtherSecondLableInput = true;\n          this.forbiddenDialog.otherSecondLable = row.secondResourceName;\n        }\n      } else {\n        this.forbiddenDialog.firstLableValue = '-100';\n        this.firstUpdateId = row.firstResourceId;\n        //获取并渲染二级标签框内容\n        this.lableChange(this.forbiddenDialog.firstLableValue);\n        this.forbiddenDialog.otherFistLable = row.firstResourceName;\n        this.forbiddenDialog.otherSecondLable = row.secondResourceName;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.loginRole {\n  margin: 0;\n  padding: 0;\n}\n.head-background {\n  min-width: 800px;\n  background: url('../../assets/images/navbg.webp') no-repeat;\n  background-size: cover;\n}\n.logo-img {\n  display: inline-block;\n  margin-left: 20px;\n  padding: 10px 0;\n}\n.nav {\n  width: 350px;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: 15px;\n  float: right;\n}\n.nav img {\n  width: 25px;\n  height: 25px;\n}\n.menu {\n  padding-top: 20px;\n  width: 80vw;\n  min-width: 800px;\n  margin: auto;\n}\n.record {\n  width: 100%;\n  height: 125px;\n  display: flex;\n  justify-content: space-around;\n  margin-top: 0px;\n  position: relative;\n  margin-bottom: 15px;\n  .card-left {\n    width: 33%;\n    height: 125px;\n\n    img {\n      width: 33px;\n      height: 35px;\n      position: absolute;\n      left: 13%;\n      top: 45px;\n    }\n  }\n\n  .card-right {\n    width: 64%;\n    height: 125px;\n\n    img {\n      width: 40px;\n      height: 40px;\n    }\n    .imga {\n      position: absolute;\n      top: 45px;\n      left: 45%;\n    }\n    .imgb {\n      position: absolute;\n      top: 45px;\n      left: 75%;\n    }\n  }\n}\n.record > span:nth-of-type(1) {\n  font-size: 25px;\n  position: absolute;\n  top: 25px;\n  left: 19%;\n}\n.record > span:nth-of-type(2) {\n  font-size: 14px;\n  position: absolute;\n  top: 70px;\n  left: 19%;\n  color: rgba(0, 0, 0, 0.65);\n}\n.record > span:nth-of-type(3) {\n  font-size: 25px;\n  position: absolute;\n  top: 25px;\n  left: 52%;\n}\n.record > span:nth-of-type(4) {\n  font-size: 14px;\n  position: absolute;\n  top: 70px;\n  left: 52%;\n  color: rgba(0, 0, 0, 0.65);\n}\n.record > span:nth-of-type(5) {\n  font-size: 25px;\n  position: absolute;\n  top: 25px;\n  left: 82%;\n}\n.record > span:nth-of-type(6) {\n  font-size: 14px;\n  position: absolute;\n  top: 70px;\n  left: 82%;\n  color: rgba(0, 0, 0, 0.65);\n}\n.el-divider {\n  margin: 0;\n  padding: 0;\n}\n.el-card2 {\n  width: 98%;\n  height: 97%;\n  margin: auto;\n  .el-p {\n    height: 50px;\n    line-height: 50px;\n\n    font-size: 24px;\n    font-weight: 500;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  .lable-a {\n    height: 50px;\n    line-height: 50px;\n    font-size: 14px;\n  }\n}\n.el-form-item {\n  margin-bottom: -10px;\n}\n.el-span {\n  display: inline-block;\n  font-size: 1rem;\n  font-weight: bold;\n  margin-top: 15px;\n  margin-bottom: 20px;\n}\n.el-btnn {\n  position: absolute;\n  right: 4%;\n  top: 25px;\n}\n.checkBox {\n  margin-top: 10px;\n}\n.dialog-footer {\n  text-align: center;\n}\n.el-select {\n  margin-right: 5px;\n}\n</style>\n<style>\n.el-table .warning-row {\n  color: rgb(201, 197, 197);\n}\n</style>\n"]}]}