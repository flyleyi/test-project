{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/supervisor/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/supervisor/index.vue","mtime":1627979214304},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFNlcnZlTGlzdCwgZ2V0RGljdCB9IGZyb20gJy4vLi4vLi4vYXBpL3NlcnZlLmpzJzsKaW1wb3J0IEZpbGxUYWJsZSBmcm9tICcuLi9maWxsZXIvRmlsbFRhYmxlLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZmlsbGVyJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWRlbnRpdHk6ICdzdXBlcnZpc29yJywKICAgICAgYWN0aXZlTmFtZTogJ2NoZWNrJywKICAgICAgc2VjdGlvbjogJycsCiAgICAgIHNlY3Rpb25MaXN0OiBbeyB0ZXh0OiAn5YWo6YOo5p2/5Z2XJywgdmFsdWU6ICcnIH1dLAogICAgICBzdGF0dTogJycsCiAgICAgIHN0YXR1TGlzdDogW3sgdGV4dDogJ+WFqOmDqOeKtuaAgScsIHZhbHVlOiAnJyB9XSwKICAgICAgaGFuZGxlcjogJycsCiAgICAgIGhhbmRsZXJMaXN0OiBbeyB0ZXh0OiAn5YWo6YOo5oqi5Y2V5Lq6JywgdmFsdWU6ICcnIH1dLAogICAgICBoYW5kbGVEYXRhTGlzdDogW10sCiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgcm9sZXM6IFtdLAogICAgICBjaGVja2VkOiBmYWxzZSwKICAgICAgZGVmYXVsdFN0YXR1czogWzIsIDMsIDQsIDZdLAogICAgICBpc0VtcHR5OiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB1c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpOwogICAgdGhpcy51c2VySW5mbyA9IHVzZXJJbmZvOwogICAgdGhpcy5yb2xlcyA9IHVzZXJJbmZvLnJvbGVzIHx8IFtdOwogICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgIHRoaXMuZ2V0RGljdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlU2VsZWN0KCkgewogICAgICB0aGlzLmdldFRhYmxlRGF0YSgxKTsKICAgIH0sCiAgICBnZXRUYWJsZURhdGEoY3VycmVudCA9IDEpIHsKICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnQnLCBjdXJyZW50KTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBvZmZzZXQ6IGN1cnJlbnQsCiAgICAgICAgcGFnZVR5cGU6IDMsCiAgICAgICAgbGltaXQ6IDEwMDAwLAogICAgICAgIHNlcnZlU3RhdHVzOiAhdGhpcy5zdGF0dSA/IHRoaXMuZGVmYXVsdFN0YXR1cyA6IFt0aGlzLnN0YXR1XSwKICAgICAgICBjeWJrTm86IHRoaXMuc2VjdGlvbiA/IHRoaXMuc2VjdGlvbiA6IG51bGwsCiAgICAgICAgaGFuZGxlcjogdGhpcy5oYW5kbGVyID8gdGhpcy5oYW5kbGVyIDogbnVsbCwKICAgICAgICB1c2FibGU6IHRoaXMuY2hlY2tlZCA/ICcxJyA6IG51bGwKICAgICAgfTsKICAgICAgZ2V0U2VydmVMaXN0KHBhcmFtcykKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhIHx8IHt9OwogICAgICAgICAgdGhpcy5oYW5kbGVEYXRhTGlzdCA9IGRhdGEucmVjb3JkcyB8fCBbXTsKICAgICAgICAgIHRoaXMuaGFuZGxlRGF0YVRvdGFsID0gZGF0YS50b3RhbDsKICAgICAgICAgIGlmICghdGhpcy5oYW5kbGVEYXRhTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuaXNFbXB0eSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgdGhpcy5oYW5kbGVEYXRhTGlzdCA9IFtdOwogICAgICAgICAgdGhpcy5oYW5kbGVEYXRhVG90YWwgPSAwOwogICAgICAgICAgdGhpcy5pc0VtcHR5ID0gdHJ1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXREaWN0KCkgewogICAgICBnZXREaWN0KCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdkaWNhUmVzOicsIHJlcyk7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhIHx8IHt9OwogICAgICAgIHRoaXMuc2VjdGlvbkxpc3QgPSB0aGlzLm9ialRvTGlzdChkYXRhLnBsYXRlLCB0aGlzLnNlY3Rpb25MaXN0KSB8fCBbXTsKICAgICAgICB0aGlzLnN0YXR1TGlzdCA9IHRoaXMub2JqVG9MaXN0KGRhdGEuc2VydmVTdGF0dXMsIHRoaXMuc3RhdHVMaXN0KSB8fCBbXTsKICAgICAgICB0aGlzLmhhbmRsZXJMaXN0ID0gdGhpcy5vYmpUb0xpc3QoZGF0YS5oYW5kbGVyLCB0aGlzLmhhbmRsZXJMaXN0KSB8fCBbXTsKICAgICAgICB0aGlzLnN0YXR1TGlzdCA9IHRoaXMuc3RhdHVMaXN0LmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFN0YXR1cy5pbmNsdWRlcyhwYXJzZUludChpdGVtLnZhbHVlKSkgfHwgIWl0ZW0udmFsdWUKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9ialRvTGlzdChvYmosIGxpc3QpIHsKICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0LnB1c2goewogICAgICAgICAgdGV4dDogb2JqW2tleXNbaV1dLAogICAgICAgICAgdmFsdWU6IGtleXNbaV0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gbGlzdDsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEZpbGxUYWJsZQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/executive-serveh5/views/supervisor","sourcesContent":["<template>\n  <div class=\"fill-warpper\">\n    <van-dropdown-menu :overlay=\"false\" active-color=\"#ff9800\">\n      <van-dropdown-item\n        v-model=\"section\"\n        :options=\"sectionList\"\n        @change=\"changeSelect\"\n      />\n      <van-dropdown-item\n        v-model=\"statu\"\n        :options=\"statuList\"\n        @change=\"changeSelect\"\n      />\n      <van-dropdown-item\n        v-model=\"handler\"\n        :options=\"handlerList\"\n        @change=\"changeSelect\"\n      />\n    </van-dropdown-menu>\n    <div class=\"tab-check\" v-if=\"roles.includes('处理人')\">\n      <van-checkbox v-model=\"checked\" @change=\"changeSelect\"\n        >只显示可抢订单</van-checkbox\n      >\n    </div>\n\n    <div\n      class=\"tab-content \"\n      :class=\"{\n        noCheck: !roles.includes('处理人'),\n        noBottom: roles.length == 1 && !roles.includes('处理人')\n      }\"\n    >\n      <fill-table\n        :tableData=\"handleDataList\"\n        :isEmpty=\"isEmpty\"\n        :identity=\"identity\"\n      ></fill-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getServeList, getDict } from './../../api/serve.js';\nimport FillTable from '../filler/FillTable.vue';\nexport default {\n  name: 'filler',\n  data() {\n    return {\n      identity: 'supervisor',\n      activeName: 'check',\n      section: '',\n      sectionList: [{ text: '全部板块', value: '' }],\n      statu: '',\n      statuList: [{ text: '全部状态', value: '' }],\n      handler: '',\n      handlerList: [{ text: '全部抢单人', value: '' }],\n      handleDataList: [],\n      userInfo: {},\n      roles: [],\n      checked: false,\n      defaultStatus: [2, 3, 4, 6],\n      isEmpty: false\n    };\n  },\n  created() {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'));\n    this.userInfo = userInfo;\n    this.roles = userInfo.roles || [];\n    this.getTableData();\n    this.getDict();\n  },\n  methods: {\n    changeSelect() {\n      this.getTableData(1);\n    },\n    getTableData(current = 1) {\n      console.log('current', current);\n      let params = {\n        offset: current,\n        pageType: 3,\n        limit: 10000,\n        serveStatus: !this.statu ? this.defaultStatus : [this.statu],\n        cybkNo: this.section ? this.section : null,\n        handler: this.handler ? this.handler : null,\n        usable: this.checked ? '1' : null\n      };\n      getServeList(params)\n        .then(res => {\n          const data = res.data || {};\n          this.handleDataList = data.records || [];\n          this.handleDataTotal = data.total;\n          if (!this.handleDataList.length) {\n            this.isEmpty = true;\n          } else {\n            this.isEmpty = false;\n          }\n          return;\n        })\n        .catch(e => {\n          this.handleDataList = [];\n          this.handleDataTotal = 0;\n          this.isEmpty = true;\n          return;\n        });\n    },\n    getDict() {\n      getDict().then(res => {\n        console.log('dicaRes:', res);\n        const data = res.data || {};\n        this.sectionList = this.objToList(data.plate, this.sectionList) || [];\n        this.statuList = this.objToList(data.serveStatus, this.statuList) || [];\n        this.handlerList = this.objToList(data.handler, this.handlerList) || [];\n        this.statuList = this.statuList.filter(item => {\n          return (\n            this.defaultStatus.includes(parseInt(item.value)) || !item.value\n          );\n        });\n      });\n    },\n    objToList(obj, list) {\n      let keys = Object.keys(obj);\n      for (let i = 0; i < keys.length; i++) {\n        list.push({\n          text: obj[keys[i]],\n          value: keys[i]\n        });\n      }\n      return list;\n    }\n  },\n  components: {\n    FillTable\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.fill-warpper {\n  position: fixed;\n  width: 100%;\n  height: calc(100% - 50px);\n  overflow-y: auto;\n}\n.tab-check {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  padding: 0 0.3rem;\n}\n.tab-content {\n  position: fixed;\n  padding: 0.2rem 0 0 0;\n  top: 88px;\n  background: #f6f6f6;\n  width: 100%;\n  height: calc(100% - 142px);\n  overflow-y: auto;\n  box-sizing: border-box;\n}\n.noBottom {\n  height: calc(100% - 92px);\n}\n.noCheck {\n  top: 48px;\n  height: calc(100% - 98px);\n}\n.noCheck.noBottom {\n  height: calc(100% - 48px);\n  top: 48px;\n}\n/deep/.van-dropdown-menu__title::after {\n  border-color: transparent transparent #000 #000;\n}\n/deep/.van-checkbox__icon--checked .van-icon {\n  background-color: #ff9800;\n  border-color: #ff9800;\n}\n</style>\n"]}]}