{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/CostStatistics/index.vue?vue&type=style&index=0&id=2db463db&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/CostStatistics/index.vue","mtime":1627979214288},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGVvcGxlLW51bS1ib3ggewogIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA1MHB4KTsKICB3aWR0aDogMTAwJTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBtYXJnaW46IDI1cHggNTBweDsKICAuYmFyQ2hhcnQgewogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIC5ib3gtY2FyZCB7CiAgICAgIHdpZHRoOiA5NiU7CiAgICAgIG1hcmdpbjogMCAyJTsKICAgICAgLmhlYWRlci10aXAgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBwIHsKICAgICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODUpOwogICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CiAgICAgICAgc3BhbiB7CiAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICB3aWR0aDogNThweDsKICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMzYjc4ZTM7CiAgICAgICAgICBjb2xvcjogIzNiNzhlMzsKICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB9CiAgICAgICAgc3Bhbi5kaXNhYmxlZCB7CiAgICAgICAgICBib3JkZXItY29sb3I6ICNjMGM0Y2M7CiAgICAgICAgICBjb2xvcjogI2MwYzRjYzsKICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC5tb250aFRhYiB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgZmxleC13cmFwOiB3cmFwOwogICAgICAgIHAgewogICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNDUpOwogICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICB9CiAgICAgICAgcC5hY3RpdmVkU3R5bGUgewogICAgICAgICAgY29sb3I6ICMzYjc4ZTM7CiAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KICAgICAgICBwLmFjdGl2ZWRTdHlsZTo6YWZ0ZXIgewogICAgICAgICAgY29udGVudDogJyc7CiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICB3aWR0aDogMTRweDsKICAgICAgICAgIGhlaWdodDogMXB4OwogICAgICAgICAgYm90dG9tOiAtNXB4OwogICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgbWFyZ2luLWxlZnQ6IC03cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2I3OGUzOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAubWFwQ2hhcnQgewogICAgbWFyZ2luLXRvcDogMTVweDsKICB9Cn0KL2RlZXAvLmVsLWNhcmRfX2JvZHkgewogIHBhZGRpbmc6IDE1cHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/StatisticalChart/CostStatistics","sourcesContent":["<template>\n  <div class=\"people-num-box\">\n    <div class=\"barChart\">\n      <el-col\n        :span=\"12\"\n        v-for=\"(item, index) in projectList\"\n        :key=\"index\"\n        v-loading=\"item.loading\"\n      >\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>{{ item.label }}费用汇总情况</p>\n            <span\n              @click=\"exportData(item)\"\n              :class=\"\n                item.dataList && item.dataList.length > 0 ? '' : 'disabled'\n              \"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"monthTab\">\n            <p\n              v-for=\"(month, monthIndex) in item.monthList\"\n              :key=\"monthIndex\"\n              @click=\"changeMonth(item, monthIndex)\"\n              :class=\"item.actived === monthIndex ? 'activedStyle' : ''\"\n            >\n              {{ month }}\n            </p>\n          </div>\n          <div class=\"barchart-box\">\n            <pie-charts\n              :chartData=\"item.dataList\"\n              name=\"name\"\n              value=\"value\"\n              :total=\"item.total\"\n              txtName=\"总费用\"\n            ></pie-charts>\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Col, Card } from 'element-ui';\nimport PieCharts from '../components/PieCharts/index';\nimport { totalFee, feeStatisticsExport } from '../../../api/statistics/index';\nimport { getProjectList } from '../../../api/auth/index';\nexport default {\n  name: 'CostStatistics',\n  components: {\n    [Col.name]: Col,\n    [Card.name]: Card,\n    PieCharts\n  },\n  data() {\n    return {\n      projectList: [], // 工程列表\n      monthList: [],\n      activeOrphan: 0, // 雏鹰高飞孤儿培养展示类型\n      activePoor: 0, // 贫困少年英才培养展示类型\n      yincaiGradeCount: []\n    };\n  },\n  mounted() {\n    this.initData();\n  },\n  methods: {\n    initData() {\n      getProjectList().then(res => {\n        this.projectList = res.data;\n        this.projectList.forEach(item => {\n          this.$set(item, 'actived', 0);\n          let monthList = [];\n          let date = new Date();\n          let monthOfYear = [\n            '一月',\n            '二月',\n            '三月',\n            '四月',\n            '五月',\n            '六月',\n            '七月',\n            '八月',\n            '九月',\n            '十月',\n            '十一月',\n            '十二月'\n          ];\n          for (var i = 0; i <= date.getMonth(); i++) {\n            monthList.push(monthOfYear[i]);\n          }\n          monthList.unshift('汇总');\n          this.$set(item, 'monthList', monthList);\n          this.$set(item, 'loading', false);\n          this.getList(item);\n        });\n      });\n    },\n    getList(item) {\n      item.loading = true;\n      let params = {\n        projectType: item.id,\n        month: item.actived === 0 ? '' : item.actived\n      };\n      totalFee(params).then(res => {\n        item.loading = false;\n        let dataList = [];\n        if (item.id === 22) {\n          dataList = [\n            // 雏鹰数据处理\n            {\n              name: '就医费用',\n              value: res.data && res.data.medicalFee ? res.data.medicalFee : 0\n            },\n            {\n              name: '学费',\n              value:\n                res.data && res.data.studyHotelFee ? res.data.studyHotelFee : 0\n            },\n            {\n              name: '补课费',\n              value:\n                res.data && res.data && res.data.lessonsFee\n                  ? res.data.lessonsFee\n                  : 0\n            },\n            {\n              name: '零用钱',\n              value: res.data && res.data.pocketMoney ? res.data.pocketMoney : 0\n            },\n            {\n              name: '探亲路费',\n              value:\n                res.data && res.data.visitingRelativesFee\n                  ? res.data.visitingRelativesFee\n                  : 0\n            },\n            {\n              name: '理发费',\n              value: res.data && res.data.haircutFee ? res.data.haircutFee : 0\n            },\n            {\n              name: '其他费用',\n              value: res.data && res.data.otherFee ? res.data.otherFee : 0\n            }\n          ];\n        } else {\n          dataList = [\n            // 英才数据处理\n            {\n              name: '学费',\n              value: res.data && res.data.studyFee ? res.data.studyFee : 0\n            },\n            {\n              name: '招募差旅费',\n              value:\n                res.data && res.data.recruitmentFee\n                  ? res.data.recruitmentFee\n                  : 0\n            },\n            {\n              name: '交通费',\n              value: res.data && res.data.trafficFee ? res.data.trafficFee : 0\n            },\n            {\n              name: '家属住宿费及餐费',\n              value: res.data && res.data.familyFee ? res.data.familyFee : 0\n            },\n            {\n              name: '其他费用',\n              value: res.data && res.data.otherFee ? res.data.otherFee : 0\n            }\n          ];\n        }\n        this.$set(item, 'dataList', dataList);\n        this.$set(\n          item,\n          'total',\n          res.data && res.data.totalFee ? res.data.totalFee : 0\n        );\n      });\n    },\n    changeMonth(item, index) {\n      item.actived = index;\n      this.getList(item);\n    },\n    // 数据导出\n    exportData(item) {\n      if (!item.dataList || item.dataList.length <= 0) {\n        return false;\n      }\n      let params = {\n        projectType: item.id,\n        year: new Date().getFullYear()\n      };\n      feeStatisticsExport(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', `${item.label}费用汇总情况.xls`);\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.people-num-box {\n  min-height: calc(100vh - 50px);\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  margin: 25px 50px;\n  .barChart {\n    overflow: hidden;\n    .box-card {\n      width: 96%;\n      margin: 0 2%;\n      .header-tip {\n        display: flex;\n        align-items: center;\n        p {\n          color: rgba(0, 0, 0, 0.85);\n          font-weight: 400;\n          font-size: 16px;\n        }\n        span {\n          margin-left: 10px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 58px;\n          height: 16px;\n          border-radius: 2px;\n          border: 1px solid #3b78e3;\n          color: #3b78e3;\n          cursor: pointer;\n        }\n        span.disabled {\n          border-color: #c0c4cc;\n          color: #c0c4cc;\n          cursor: not-allowed;\n        }\n      }\n      .monthTab {\n        display: flex;\n        align-items: center;\n        margin-top: 20px;\n        flex-wrap: wrap;\n        p {\n          margin-right: 20px;\n          font-weight: 400;\n          color: rgba(0, 0, 0, 0.45);\n          cursor: pointer;\n          position: relative;\n          margin-bottom: 10px;\n        }\n        p.activedStyle {\n          color: #3b78e3;\n          font-weight: 600;\n        }\n        p.activedStyle::after {\n          content: '';\n          position: absolute;\n          width: 14px;\n          height: 1px;\n          bottom: -5px;\n          left: 50%;\n          margin-left: -7px;\n          border-radius: 3px;\n          background-color: #3b78e3;\n        }\n      }\n    }\n  }\n  .mapChart {\n    margin-top: 15px;\n  }\n}\n/deep/.el-card__body {\n  padding: 15px;\n}\n</style>\n"]}]}