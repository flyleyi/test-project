{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/components/business/BAllotUser/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/components/business/BAllotUser/index.vue","mtime":1627979214235},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ0AvcGx1Z2lucy9heGlvcyc7CmltcG9ydCB7CiAgQ2FyZCwKICBUcmVlLAogIFJvdywKICBJbnB1dCwKICBTZWxlY3QsCiAgRm9ybSwKICBGb3JtSXRlbSwKICBDb2wsCiAgVGFibGUsCiAgVGFibGVDb2x1bW4sCiAgU2Nyb2xsYmFyLAogIFRhZywKICBMb2FkaW5nCn0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBDU3ZnSWNvbiBmcm9tICcuLi8uLi9jb21tb24vQ1N2Z0ljb24nOwoKbGV0IGNvdW50ID0gMDsKCmZ1bmN0aW9uIGRlbGV0ZU9yRmluZEFycihhcnJEYXRhLCBvYmosIGNoaWxkcmVuLCBfYWxsLCBmaW5kLCByZXBsYWNlQXJyKSB7CiAgLy/liKDpmaTmiJbmn6Xmib7mlbDnu4TkuK3mnInmn5DkuKrlr7nosaHnmoTlhYPntKAuIF9hbGzku6PooajmmK/lkKblhajpg6jliKDpmaQKICBjaGlsZHJlbiA9IGNoaWxkcmVuIHx8ICdjaGlsZHJlbic7IC8vb2Jq5Y+v5Lul5piv5Z+65pys5pWw5o2u57G75Z6LLnJlcGxhY2VBcnLlnKjliKDpmaTnmoTkvY3nva7mt7vliqDnmoTmlbDmja4KICBpZiAoIU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmaW5kKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgZmluZCA9IGZpbmQgPyBbXSA6IGZpbmQ7CiAgfQogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyRGF0YSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyRGF0YS5sZW5ndGg7IGkrKykgewogICAgICB2YXIgbSA9IGFyckRhdGFbaV0sCiAgICAgICAgZmxnID0gMTsKICAgICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09ICdvYmplY3QnKSB7CiAgICAgICAgZm9yICh2YXIgaiBpbiBvYmopIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdHlwZW9mIG9ialtqXSA9PSAnZnVuY3Rpb24nCiAgICAgICAgICAgICAgPyAhb2JqW2pdKGosIG1bal0sIG0sIGFyckRhdGEsIGkpCiAgICAgICAgICAgICAgOiBtW2pdICE9IG9ialtqXQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGZsZyA9IDA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobSAhPSBvYmopIHsKICAgICAgICAgIGZsZyA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChmbGcpIHsKICAgICAgICBpZiAoZmluZCkgewogICAgICAgICAgZmluZC5wdXNoKG0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VBcnIgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICByZXBsYWNlQXJyID0gcmVwbGFjZUFycihpLCBtLCBhcnJEYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlcGxhY2VBcnIgPQogICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocmVwbGFjZUFycikgPT0gJ1tvYmplY3QgQXJyYXldJwogICAgICAgICAgICAgID8gcmVwbGFjZUFycgogICAgICAgICAgICAgIDogcmVwbGFjZUFyciB8fCBbXTsKICAgICAgICAgIGFyckRhdGEuc3BsaWNlLmFwcGx5KGFyckRhdGEsIFtpLCAxXS5jb25jYXQocmVwbGFjZUFycikpOwogICAgICAgICAgaS0tOwogICAgICAgICAgX2FsbCAmJiAoaSA9IGkgKyByZXBsYWNlQXJyLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIGlmICghX2FsbCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIG9iaiAmJgogICAgICAgIHR5cGVvZiBvYmogPT0gJ29iamVjdCcgJiYKICAgICAgICBkZWxldGVPckZpbmRBcnIobSwgb2JqLCBjaGlsZHJlbiwgX2FsbCwgZmluZCwgcmVwbGFjZUFycik7CiAgICB9CiAgfSBlbHNlIGlmIChhcnJEYXRhICYmIHR5cGVvZiBhcnJEYXRhID09ICdvYmplY3QnKSB7CiAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyRGF0YVtjaGlsZHJlbl0pID09PSAnW29iamVjdCBBcnJheV0nICYmCiAgICAgIGRlbGV0ZU9yRmluZEFycihhcnJEYXRhW2NoaWxkcmVuXSwgb2JqLCBjaGlsZHJlbiwgX2FsbCwgZmluZCwgcmVwbGFjZUFycik7CiAgfQogIHJldHVybiBmaW5kOwp9CgpWdWUudXNlKExvYWRpbmcpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0JBbGxvdFVzZXInLAogIGNvbXBvbmVudHM6IHsKICAgIFtDYXJkLm5hbWVdOiBDYXJkLAogICAgW1RyZWUubmFtZV06IFRyZWUsCiAgICBbUm93Lm5hbWVdOiBSb3csCiAgICBbQ29sLm5hbWVdOiBDb2wsCiAgICBbSW5wdXQubmFtZV06IElucHV0LAogICAgW1NlbGVjdC5uYW1lXTogU2VsZWN0LAogICAgW09wdGlvbi5uYW1lXTogT3B0aW9uLAogICAgW0Zvcm0ubmFtZV06IEZvcm0sCiAgICBbRm9ybUl0ZW0ubmFtZV06IEZvcm1JdGVtLAogICAgW0NTdmdJY29uLm5hbWVdOiBDU3ZnSWNvbiwKICAgIFtUYWJsZS5uYW1lXTogVGFibGUsCiAgICBbVGFibGVDb2x1bW4ubmFtZV06IFRhYmxlQ29sdW1uLAogICAgW1Njcm9sbGJhci5uYW1lXTogU2Nyb2xsYmFyLAogICAgW1RhZy5uYW1lXTogVGFnCiAgfSwKICBwcm9wczogewogICAgLyoqCiAgICAgKiDmnI3liqHlmajnsbvlnosKICAgICAqLwogICAgc2VydmVyVHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZU5hbWU6ICcnLAogICAgICBsaXN0TG9hZGluZzogZmFsc2UsCiAgICAgIGRpc3Q6IHsKICAgICAgICAvL+W3suWIhumFjeeUqOaItwogICAgICAgIHBhZ2luOiB7CiAgICAgICAgICByb2xlSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJvbGVJZCwKICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICB9LAogICAgICAgIHN0YWZmTmFtZTogJycsIC8v5pCc57Si5a2X5q61CiAgICAgICAgY2hlY2tlZDogW10sCiAgICAgICAgbGlzdDogW10KICAgICAgfSwKICAgICAgdW5kaXN0OiB7CiAgICAgICAgLy/mnKrliIbphY3nlKjmiLcKICAgICAgICBwYWdpbjogewogICAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQsCiAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgb2Zmc2V0OiAwCiAgICAgICAgfSwKICAgICAgICBzdGFmZk5hbWU6ICcnLAogICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgIGxpc3Q6IFsKICAgICAgICAgIC8vIHsgaWQ6IDEsIG5hbWU6ICLlvKDkuIkiLCBudW1iZXI6ICIxMDAwMTEiIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIHNhdmVEYXRhOiB7CiAgICAgICAgLy/lt7LliIbphY3nlKjmiLcKICAgICAgICBhZGQ6IFtdLCAvL+a3u+WKoOS6hgogICAgICAgIHJlbW92ZTogW10gLy/np7vpmaTkuoYKICAgICAgfSwKICAgICAgZGlzdExvYWRpbmc6IGZhbHNlLCAvLyDliIbphY3kuK0KICAgICAgdW5kaXN0TG9hZGluZzogZmFsc2UsIC8vIOWPlua2iOWIhumFjeS4rQogICAgICBsb2FkaW5nOiBmYWxzZSwgLy8g5Yqg6L295LitCiAgICAgIGxhc3RSZXF1ZXN0MTogbnVsbCwKICAgICAgbGFzdFJlcXVlc3QyOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHZhciByb2xlSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQ7CiAgICBpZiAoIXJvbGVJZCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0KICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICBQcm9taXNlLmFsbChbdGhpcy5nZXRVbmRpc3QoKSwgdGhpcy5nZXREaXN0KCldKQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgcmV0dXJuIGF4aW9zKAogICAgICAgICAgewogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICB1cmw6IGAvdXNlcmd3L2FkbWluL3JvbGVBdXRoL2dldFJvbGVOYW1lLyR7cm9sZUlkfWAKICAgICAgICAgIH0sCiAgICAgICAgICB0aGlzLnNlcnZlclR5cGUKICAgICAgICApOwogICAgICB9KQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucm9sZU5hbWUgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkKICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2NrKHR5cGUpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpc1snX2xvY2snICsgdHlwZV0gPSBmYWxzZTsKICAgICAgfSwgNTApOwogICAgfSwKICAgIC8qKgogICAgICog5p+l6K+i55So5oi35YiX6KGoCiAgICAgKi8KICAgIHF1ZXJ5VXNlcih0eXBlLCBwYWdpbiwga2V5KSB7CiAgICAgIC8vIHR5cGU9MOWIhumFjSAgMeacquWIhumFjSxrZXk65pCc57Si5a2X5q61CiAgICAgIHJldHVybiBheGlvcygKICAgICAgICB7CiAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgdXJsOiAnL3VzZXJndy9hZG1pbi9lZHVzeXNTdGFmZi9zZWxlY3RVc2VyQnlSb2xlSWQnLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgIC4uLnBhZ2luLAogICAgICAgICAgICBzdGFmZk5hbWU6IGtleQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdGhpcy5zZXJ2ZXJUeXBlCiAgICAgICk7CiAgICB9LAogICAgZ2V0VW5kaXN0KGtleSkgewogICAgICAvL+acquWIhumFjQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVuZGlzdC5wYWdpbi5vZmZzZXQpOwogICAgICBsZXQgbGFzdFJlcXVlc2V0ID0gKHRoaXMubGFzdFJlcXVlc3QxID0gKytjb3VudCk7CiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5VXNlcigxLCB0aGlzLnVuZGlzdC5wYWdpbiwgdGhpcy51bmRpc3Quc3RhZmZOYW1lKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvLyDmmK/lkKbmmK/mnIDlkI7kuIDmrKHor7fmsYIKICAgICAgICAgIGlmIChsYXN0UmVxdWVzZXQgIT09IHRoaXMubGFzdFJlcXVlc3QxKSByZXR1cm47CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLnJlY29yZHMgfHwgW107CiAgICAgICAgICB0aGlzLnVuZGlzdC5saXN0ID0gdGhpcy51bmRpc3QubGlzdC5jb25jYXQoZGF0YSk7CiAgICAgICAgICAvLyB0aGlzLl9lbCAmJiAodGhpcy5fZWwuc2Nyb2xsVG9wID0gdGhpcy5fc2Nyb2xsVG9wKTsKICAgICAgICAgIC8vIGlmIChkYXRhLmxlbmd0aCA9PSB0aGlzLnVuZGlzdC5wYWdpbi5saW1pdCkgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLl9lbCAmJiAodGhpcy5fZWwuc2Nyb2xsVG9wID0gdGhpcy5fc2Nyb2xsVG9wKTsKICAgICAgICAgICAgdGhpcy5sb2NrKDApOwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy90aGlzLmxvY2soMCkKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXREaXN0KGtleSkgewogICAgICBsZXQgbGFzdFJlcXVlc2V0ID0gKHRoaXMubGFzdFJlcXVlc3QyID0gKytjb3VudCk7CiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5VXNlcigwLCB0aGlzLmRpc3QucGFnaW4sIHRoaXMuZGlzdC5zdGFmZk5hbWUpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIC8vIOaYr+WQpuaYr+acgOWQjuS4gOasoeivt+axggogICAgICAgICAgaWYgKGxhc3RSZXF1ZXNldCAhPT0gdGhpcy5sYXN0UmVxdWVzdDIpIHJldHVybjsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEucmVjb3JkcyB8fCBbXTsKICAgICAgICAgIHRoaXMuZGlzdC5saXN0ID0gdGhpcy5kaXN0Lmxpc3QuY29uY2F0KGRhdGEpOwogICAgICAgICAgLy8gdGhpcy5fZWwgJiYgKHRoaXMuX2VsLnNjcm9sbFRvcCA9IHRoaXMuX3Njcm9sbFRvcCk7CiAgICAgICAgICAvLyBpZiAoZGF0YS5sZW5ndGggPT0gdGhpcy5kaXN0LnBhZ2luLmxpbWl0KSB7CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuX2VsICYmICh0aGlzLl9lbC5zY3JvbGxUb3AgPSB0aGlzLl9zY3JvbGxUb3ApOwogICAgICAgICAgICB0aGlzLmxvY2soMSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvL3RoaXMubG9jaygxKQogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaChldiwgdHlwZSkgewogICAgICBpZiAoZXYud2hpY2ggPT0gMTMpIHsKICAgICAgICBpZiAodHlwZSkgewogICAgICAgICAgdGhpcy5kaXN0LnBhZ2luLnBhZ2UgPSAxOwogICAgICAgICAgdGhpcy5kaXN0LnBhZ2luLm9mZnNldCA9IDA7CiAgICAgICAgICB0aGlzLmRpc3QubGlzdCA9IFtdOwogICAgICAgICAgdGhpcy5nZXREaXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudW5kaXN0LnBhZ2luLnBhZ2UgPSAxOwogICAgICAgICAgdGhpcy51bmRpc3QucGFnaW4ub2Zmc2V0ID0gMDsKICAgICAgICAgIHRoaXMudW5kaXN0Lmxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMuZ2V0VW5kaXN0KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2Nyb2xsKGV2LCB0eXBlKSB7CiAgICAgIC8vdHlwZTow5pyq5YiG6YWNCiAgICAgIHZhciBlbCA9IGV2LnRhcmdldCB8fCBldi5zcmNFbGVtZW50OwogICAgICB2YXIgbWF4ID0gZWwuc2Nyb2xsSGVpZ2h0IC0gTWF0aC5tYXgoZWwuY2xpZW50SGVpZ2h0LCBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAvLyBjb25zb2xlLmxvZyhtYXgsZWwuc2Nyb2xsVG9wKTsKICAgICAgaWYgKG1heCAtIGVsLnNjcm9sbFRvcCA8PSAxMCkgewogICAgICAgIGlmICh0aGlzWydfbG9jaycgKyB0eXBlXSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzWydfbG9jaycgKyB0eXBlXSA9IHRydWU7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5fZWwgPSBlbDsKICAgICAgICAgIHRoaXMuX3Njcm9sbFRvcCA9IGVsLnNjcm9sbFRvcDsKICAgICAgICAgIHR5cGUgPyB0aGlzLmRpc3QucGFnaW4ucGFnZSsrIDogdGhpcy51bmRpc3QucGFnaW4ucGFnZSsrOwogICAgICAgICAgdHlwZQogICAgICAgICAgICA/ICh0aGlzLmRpc3QucGFnaW4ub2Zmc2V0ID0KICAgICAgICAgICAgICAgICh0aGlzLmRpc3QucGFnaW4ucGFnZSAtIDEpICogdGhpcy5kaXN0LnBhZ2luLmxpbWl0KQogICAgICAgICAgICA6ICh0aGlzLnVuZGlzdC5wYWdpbi5vZmZzZXQgPQogICAgICAgICAgICAgICAgKHRoaXMudW5kaXN0LnBhZ2luLnBhZ2UgLSAxKSAqIHRoaXMudW5kaXN0LnBhZ2luLmxpbWl0KTsKICAgICAgICAgIHR5cGUgPyB0aGlzLmdldERpc3QoKSA6IHRoaXMuZ2V0VW5kaXN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coTWF0aC5yYW5kb20oKSk7CiAgICB9LAogICAgYWRkKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMudW5kaXN0LmNoZWNrZWQpOwogICAgICBpZiAoISh0aGlzLnVuZGlzdC5jaGVja2VkICYmIHRoaXMudW5kaXN0LmNoZWNrZWQubGVuZ3RoID4gMCkpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7foh7PlsJHpgInmi6nkuIDkuKrmnKrliIbphY3nlKjmiLcnKTsKICAgICAgfQogICAgICB0aGlzLmRpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGVEaXN0RGF0YSgKICAgICAgICB0aGlzLnVuZGlzdC5jaGVja2VkLm1hcChpdGVtID0+IGl0ZW0uc3RhZmZJZCksCiAgICAgICAgW10KICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy51bmRpc3QuY2hlY2tlZCkgewogICAgICAgICAgICB2YXIgbSA9IHRoaXMudW5kaXN0LmNoZWNrZWRbaV07CiAgICAgICAgICAgIHRoaXMuZGlzdC5saXN0LnVuc2hpZnQobSk7CiAgICAgICAgICAgIGRlbGV0ZU9yRmluZEFycih0aGlzLnVuZGlzdC5saXN0LCBtLCAnJywgMCk7CgogICAgICAgICAgICBkZWxldGVPckZpbmRBcnIodGhpcy5zYXZlRGF0YS5yZW1vdmUsIG0uc3RhZmZJZCwgJycsIDApOwogICAgICAgICAgICB2YXIgcmVzID0gZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEuYWRkLCBtLnN0YWZmSWQsICcnLCAwLCAxKTsKICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgICAgdGhpcy5zYXZlRGF0YS5hZGQucHVzaChtLnN0YWZmSWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlZnJlc2goMCk7CiAgICAgICAgICB0aGlzLnJlZnJlc2goMSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5kaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2F2ZURhdGEpCiAgICB9LAogICAgcmVtb3ZlKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZGlzdC5jaGVja2VkKTsKICAgICAgaWYgKCEodGhpcy5kaXN0LmNoZWNrZWQgJiYgdGhpcy5kaXN0LmNoZWNrZWQubGVuZ3RoID4gMCkpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7foh7PlsJHpgInmi6nkuIDkuKrlt7LliIbphY3nlKjmiLcnKTsKICAgICAgfQogICAgICB0aGlzLnVuZGlzdExvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnVwZGF0ZURpc3REYXRhKAogICAgICAgIFtdLAogICAgICAgIHRoaXMuZGlzdC5jaGVja2VkLm1hcChpdGVtID0+IGl0ZW0uc3RhZmZJZCkKICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMudW5kaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmRpc3QuY2hlY2tlZCkgewogICAgICAgICAgICB2YXIgbSA9IHRoaXMuZGlzdC5jaGVja2VkW2ldOwogICAgICAgICAgICB0aGlzLnVuZGlzdC5saXN0LnVuc2hpZnQobSk7CiAgICAgICAgICAgIGRlbGV0ZU9yRmluZEFycih0aGlzLmRpc3QubGlzdCwgbSwgJycsIDApOwoKICAgICAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEuYWRkLCBtLnN0YWZmSWQsICcnLCAwKTsKICAgICAgICAgICAgdmFyIHJlcyA9IGRlbGV0ZU9yRmluZEFycigKICAgICAgICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZSwKICAgICAgICAgICAgICBtLnN0YWZmSWQsCiAgICAgICAgICAgICAgJycsCiAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChyZXMubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEucmVtb3ZlLnB1c2gobS5zdGFmZklkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5yZWZyZXNoKDApOwogICAgICAgICAgdGhpcy5yZWZyZXNoKDEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMudW5kaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2F2ZURhdGEpCiAgICB9LAogICAgLyoqCiAgICAgKiDkv53lrZjnlKjmiLfliIbphY3mlbDmja4KICAgICAqLwogICAgc2F2ZUFsbG90RGF0YShkYXRhKSB7CiAgICAgIHJldHVybiBheGlvcygKICAgICAgICB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIHVybDogJy91c2VyZ3cvYWRtaW4vcm9sZVVzZXIvcm9sZUFkZFVzZXInLAogICAgICAgICAgZGF0YQogICAgICAgIH0sCiAgICAgICAgdGhpcy5zZXJ2ZXJUeXBlCiAgICAgICk7CiAgICB9LAogICAgaGFuZGxlU2F2ZSgpIHsKICAgICAgLy/kv53lrZgKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zYXZlRGF0YSkKICAgICAgcmV0dXJuIHRoaXMuc2F2ZUFsbG90RGF0YSh7CiAgICAgICAgLi4udGhpcy5zYXZlRGF0YSwKICAgICAgICByb2xlSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJvbGVJZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zYXZlRGF0YS5hZGQgPSBbXTsKICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZSA9IFtdOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5pu05paw5YiG6YWN5pWw5o2uCiAgICAgKiBAcGFyYW0ge0FycmF5fSBhZGQg5re75Yqg5YiG6YWNCiAgICAgKiBAcGFyYW0ge0FycmF5fSByZW1vdmUg56e76Zmk5YiG6YWNCiAgICAgKi8KICAgIHVwZGF0ZURpc3REYXRhKGFkZCwgcmVtb3ZlKSB7CiAgICAgIHJldHVybiB0aGlzLnNhdmVBbGxvdERhdGEoewogICAgICAgIGFkZCwKICAgICAgICByZW1vdmUsCiAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2F2ZURhdGEuYWRkID0gW107CiAgICAgICAgdGhpcy5zYXZlRGF0YS5yZW1vdmUgPSBbXTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIt+aWsOWIl+ihqAogICAgICogLSAwICjmnKrliIbphY3liJfooagpCiAgICAgKiAtIDEgKOW3suWIhumFjeWIl+ihqCkKICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIOWIt+aWsOS7gOS5iOWIl+ihqAogICAgICovCiAgICByZWZyZXNoKHR5cGUpIHsKICAgICAgdmFyIG5hbWUgPSB0eXBlID8gJ2Rpc3QnIDogJ3VuZGlzdCc7CiAgICAgIC8vIOWIt+aWsOWIl+ihqOeahOaWueazlQogICAgICB2YXIgZm4gPSB0eXBlID8gdGhpcy5nZXREaXN0IDogdGhpcy5nZXRVbmRpc3Q7CiAgICAgIC8vIOWIl+ihqOeahOWPguaVsAogICAgICB2YXIgcGFyYW0gPSB0eXBlID8gdGhpcy5kaXN0IDogdGhpcy51bmRpc3Q7CiAgICAgIC8vIOa7muWKqOWuueWZqAogICAgICB2YXIgZWwgPSB0aGlzLiRyZWZzW3R5cGUgPyAnZGlzdCcgOiAndW5kaXN0J107CiAgICAgIGlmIChwYXJhbS5saXN0Lmxlbmd0aCkgewogICAgICAgIHZhciBvZmZzZXQgPSBwYXJhbS5wYWdpbi5vZmZzZXQ7CiAgICAgICAgdmFyIGxpbWl0ID0gcGFyYW0ucGFnaW4ubGltaXQ7CiAgICAgICAgcGFyYW0ucGFnaW4ub2Zmc2V0ID0gMDsKICAgICAgICBwYXJhbS5wYWdpbi5saW1pdCA9IHBhcmFtLmxpc3QubGVuZ3RoOwogICAgICAgIHZhciByZXN0b3JlID0gKCkgPT4gewogICAgICAgICAgcGFyYW0ucGFnaW4ub2Zmc2V0ID0gb2Zmc2V0OwogICAgICAgICAgcGFyYW0ucGFnaW4ubGltaXQgPSBsaW1pdDsKICAgICAgICB9OwogICAgICAgIHBhcmFtLmxpc3QgPSBbXTsKICAgICAgICBmbigpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHJlc3RvcmUoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2gocmVzdG9yZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW0ucGFnaW4ub2Zmc2V0ID0gMDsKICAgICAgICBmbigpOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/business/BAllotUser","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"header\">\n      <div class=\"header-right\">\n        <span class=\"current-role\">当前角色：</span>\n        <el-tag>{{ roleName }}</el-tag>\n      </div>\n      <div class=\"header-left\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-arrow-left\"\n          size=\"small\"\n          @click=\"$router.push('/system/role')\"\n          >返回</el-button\n        >\n      </div>\n    </div>\n    <div v-loading=\"loading\" class=\"menu-box\">\n      <el-col :sm=\"10\" class=\"card-box-col\">\n        <el-card class=\"card-box\">\n          <div class=\"card-label tc\">\n            未分配用户\n          </div>\n          <div>\n            <el-input\n              size=\"small\"\n              v-model.trim=\"undist.staffName\"\n              placeholder=\"输入账号或姓名搜索\"\n              @keyup.native=\"search($event, 0)\"\n            />\n          </div>\n\n          <div\n            class=\"user-list\"\n            @scroll=\"scroll($event, 0)\"\n            style=\"overflow-y: auto; height: calc(100vh - 84px - 94px - 126px - 40px); \"\n          >\n            <!-- <el-scrollbar\n              ref=\"scrollbar\"\n              class=\"el-scrollbar_x\"\n              style=\"overflow-y: auto; height: calc(100vh - 84px - 94px - 126px - 40px); \"\n            > -->\n            <el-table\n              size=\"small\"\n              :data=\"undist.list\"\n              border\n              @selection-change=\"\n                res => {\n                  undist.checked = res;\n                }\n              \"\n            >\n              <el-table-column type=\"selection\" align=\"center\" />\n              <el-table-column label=\"账号\" prop=\"staffCode\" />\n              <el-table-column label=\"姓名\" prop=\"staffName\" />\n            </el-table>\n            <!-- </el-scrollbar> -->\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :sm=\"4\" class=\"card-box-col\">\n        <div class=\"card-box tb\" style=\"display: table; width: 100%;\">\n          <div\n            class=\"td\"\n            style=\"vertical-align: middle;text-align:center; display: table-cell;\"\n          >\n            <div class=\"item-btn\">\n              <el-button\n                size=\"small\"\n                :loading=\"distLoading\"\n                type=\"primary\"\n                @click=\"add\"\n              >\n                添加分配\n                <i class=\"el-icon-arrow-right\" />\n              </el-button>\n            </div>\n            <div class=\"item-btn cancelbtn\">\n              <el-button size=\"small\" :loading=\"undistLoading\" @click=\"remove\">\n                <i class=\"el-icon-arrow-left\" />\n                取消分配\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </el-col>\n      <el-col :sm=\"10\" class=\"card-box-col\">\n        <el-card class=\"card-box\">\n          <div class=\"card-label card-label2 tc\">\n            已分配用户\n          </div>\n          <div>\n            <el-input\n              size=\"small\"\n              v-model.trim=\"dist.staffName\"\n              placeholder=\"输入账号或姓名搜索\"\n              @keyup.native=\"search($event, 1)\"\n            />\n          </div>\n\n          <div\n            class=\"user-list\"\n            style=\"height:calc(100vh - 84px - 94px - 126px - 40px);overflow-y: auto; overflow-x: hidden;\"\n            @scroll=\"scroll($event, 1)\"\n          >\n            <!-- <el-scrollbar\n              class=\"el-scrollbar_x\"\n              style=\"height:calc(100vh - 84px - 94px - 126px - 40px);overflow-y: auto; overflow-x: hidden;\"\n            > -->\n            <el-table\n              size=\"small\"\n              :data=\"dist.list\"\n              border\n              @selection-change=\"\n                res => {\n                  dist.checked = res;\n                }\n              \"\n            >\n              <el-table-column type=\"selection\" align=\"center\" />\n              <el-table-column label=\"账号\" prop=\"staffCode\" />\n              <el-table-column label=\"姓名\" prop=\"staffName\" />\n            </el-table>\n            <!-- </el-scrollbar> -->\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n  </div>\n</template>\n<script>\nimport Vue from 'vue';\nimport axios from '@/plugins/axios';\nimport {\n  Card,\n  Tree,\n  Row,\n  Input,\n  Select,\n  Form,\n  FormItem,\n  Col,\n  Table,\n  TableColumn,\n  Scrollbar,\n  Tag,\n  Loading\n} from 'element-ui';\nimport CSvgIcon from '../../common/CSvgIcon';\n\nlet count = 0;\n\nfunction deleteOrFindArr(arrData, obj, children, _all, find, replaceArr) {\n  //删除或查找数组中有某个对象的元素. _all代表是否全部删除\n  children = children || 'children'; //obj可以是基本数据类型.replaceArr在删除的位置添加的数据\n  if (!Object.prototype.toString.call(find) === '[object Array]') {\n    find = find ? [] : find;\n  }\n  if (Object.prototype.toString.call(arrData) === '[object Array]') {\n    for (var i = 0; i < arrData.length; i++) {\n      var m = arrData[i],\n        flg = 1;\n      if (obj && typeof obj == 'object') {\n        for (var j in obj) {\n          if (\n            typeof obj[j] == 'function'\n              ? !obj[j](j, m[j], m, arrData, i)\n              : m[j] != obj[j]\n          ) {\n            flg = 0;\n            break;\n          }\n        }\n      } else {\n        if (m != obj) {\n          flg = 0;\n        }\n      }\n      if (flg) {\n        if (find) {\n          find.push(m);\n        } else {\n          if (typeof replaceArr == 'function') {\n            replaceArr = replaceArr(i, m, arrData);\n          }\n          replaceArr =\n            Object.prototype.toString.call(replaceArr) == '[object Array]'\n              ? replaceArr\n              : replaceArr || [];\n          arrData.splice.apply(arrData, [i, 1].concat(replaceArr));\n          i--;\n          _all && (i = i + replaceArr.length);\n        }\n        if (!_all) {\n          break;\n        }\n      }\n      obj &&\n        typeof obj == 'object' &&\n        deleteOrFindArr(m, obj, children, _all, find, replaceArr);\n    }\n  } else if (arrData && typeof arrData == 'object') {\n    Object.prototype.toString.call(arrData[children]) === '[object Array]' &&\n      deleteOrFindArr(arrData[children], obj, children, _all, find, replaceArr);\n  }\n  return find;\n}\n\nVue.use(Loading);\nexport default {\n  name: 'BAllotUser',\n  components: {\n    [Card.name]: Card,\n    [Tree.name]: Tree,\n    [Row.name]: Row,\n    [Col.name]: Col,\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    [CSvgIcon.name]: CSvgIcon,\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n    [Scrollbar.name]: Scrollbar,\n    [Tag.name]: Tag\n  },\n  props: {\n    /**\n     * 服务器类型\n     */\n    serverType: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      roleName: '',\n      listLoading: false,\n      dist: {\n        //已分配用户\n        pagin: {\n          roleId: this.$route.query.roleId,\n          limit: 50,\n          page: 1,\n          offset: 0\n        },\n        staffName: '', //搜索字段\n        checked: [],\n        list: []\n      },\n      undist: {\n        //未分配用户\n        pagin: {\n          roleId: this.$route.query.roleId,\n          limit: 50,\n          page: 1,\n          offset: 0\n        },\n        staffName: '',\n        checked: [],\n        list: [\n          // { id: 1, name: \"张三\", number: \"100011\" }\n        ]\n      },\n      saveData: {\n        //已分配用户\n        add: [], //添加了\n        remove: [] //移除了\n      },\n      distLoading: false, // 分配中\n      undistLoading: false, // 取消分配中\n      loading: false, // 加载中\n      lastRequest1: null,\n      lastRequest2: null\n    };\n  },\n  created() {\n    var roleId = this.$route.query.roleId;\n    if (!roleId) {\n      return this.$router.go(-1);\n    }\n    this.loading = true;\n    Promise.all([this.getUndist(), this.getDist()])\n      .then(() => {\n        return axios(\n          {\n            method: 'GET',\n            url: `/usergw/admin/roleAuth/getRoleName/${roleId}`\n          },\n          this.serverType\n        );\n      })\n      .then(res => {\n        this.roleName = res.data;\n        this.loading = false;\n      })\n      .catch(() => {\n        this.loading = false;\n      });\n  },\n  methods: {\n    lock(type) {\n      setTimeout(() => {\n        this['_lock' + type] = false;\n      }, 50);\n    },\n    /**\n     * 查询用户列表\n     */\n    queryUser(type, pagin, key) {\n      // type=0分配  1未分配,key:搜索字段\n      return axios(\n        {\n          method: 'GET',\n          url: '/usergw/admin/edusysStaff/selectUserByRoleId',\n          params: {\n            type: type,\n            ...pagin,\n            staffName: key\n          }\n        },\n        this.serverType\n      );\n    },\n    getUndist(key) {\n      //未分配\n      // console.log(this.undist.pagin.offset);\n      let lastRequeset = (this.lastRequest1 = ++count);\n      return this.queryUser(1, this.undist.pagin, this.undist.staffName)\n        .then(res => {\n          // 是否是最后一次请求\n          if (lastRequeset !== this.lastRequest1) return;\n          var data = res.data.records || [];\n          this.undist.list = this.undist.list.concat(data);\n          // this._el && (this._el.scrollTop = this._scrollTop);\n          // if (data.length == this.undist.pagin.limit) {\n          this.$nextTick(() => {\n            this._el && (this._el.scrollTop = this._scrollTop);\n            this.lock(0);\n          });\n          // }\n        })\n        .catch(() => {\n          //this.lock(0)\n        });\n    },\n    getDist(key) {\n      let lastRequeset = (this.lastRequest2 = ++count);\n      return this.queryUser(0, this.dist.pagin, this.dist.staffName)\n        .then(res => {\n          // 是否是最后一次请求\n          if (lastRequeset !== this.lastRequest2) return;\n          var data = res.data.records || [];\n          this.dist.list = this.dist.list.concat(data);\n          // this._el && (this._el.scrollTop = this._scrollTop);\n          // if (data.length == this.dist.pagin.limit) {\n          this.$nextTick(() => {\n            this._el && (this._el.scrollTop = this._scrollTop);\n            this.lock(1);\n          });\n          // }\n        })\n        .catch(() => {\n          //this.lock(1)\n        });\n    },\n    search(ev, type) {\n      if (ev.which == 13) {\n        if (type) {\n          this.dist.pagin.page = 1;\n          this.dist.pagin.offset = 0;\n          this.dist.list = [];\n          this.getDist();\n        } else {\n          this.undist.pagin.page = 1;\n          this.undist.pagin.offset = 0;\n          this.undist.list = [];\n          this.getUndist();\n        }\n      }\n    },\n    scroll(ev, type) {\n      //type:0未分配\n      var el = ev.target || ev.srcElement;\n      var max = el.scrollHeight - Math.max(el.clientHeight, el.offsetHeight);\n      // console.log(max,el.scrollTop);\n      if (max - el.scrollTop <= 10) {\n        if (this['_lock' + type]) {\n          return;\n        }\n        this['_lock' + type] = true;\n        this.$nextTick(() => {\n          this._el = el;\n          this._scrollTop = el.scrollTop;\n          type ? this.dist.pagin.page++ : this.undist.pagin.page++;\n          type\n            ? (this.dist.pagin.offset =\n                (this.dist.pagin.page - 1) * this.dist.pagin.limit)\n            : (this.undist.pagin.offset =\n                (this.undist.pagin.page - 1) * this.undist.pagin.limit);\n          type ? this.getDist() : this.getUndist();\n        });\n      }\n      // console.log(Math.random());\n    },\n    add() {\n      //console.log(this.undist.checked);\n      if (!(this.undist.checked && this.undist.checked.length > 0)) {\n        return this.$message.warning('请至少选择一个未分配用户');\n      }\n      this.distLoading = true;\n      this.updateDistData(\n        this.undist.checked.map(item => item.staffId),\n        []\n      )\n        .then(() => {\n          this.distLoading = false;\n          for (var i in this.undist.checked) {\n            var m = this.undist.checked[i];\n            this.dist.list.unshift(m);\n            deleteOrFindArr(this.undist.list, m, '', 0);\n\n            deleteOrFindArr(this.saveData.remove, m.staffId, '', 0);\n            var res = deleteOrFindArr(this.saveData.add, m.staffId, '', 0, 1);\n            if (res.length < 1) {\n              this.saveData.add.push(m.staffId);\n            }\n          }\n          this.refresh(0);\n          this.refresh(1);\n        })\n        .catch(() => {\n          this.distLoading = false;\n        });\n      //console.log(this.saveData)\n    },\n    remove() {\n      //console.log(this.dist.checked);\n      if (!(this.dist.checked && this.dist.checked.length > 0)) {\n        return this.$message.warning('请至少选择一个已分配用户');\n      }\n      this.undistLoading = true;\n      this.updateDistData(\n        [],\n        this.dist.checked.map(item => item.staffId)\n      )\n        .then(() => {\n          this.undistLoading = false;\n          for (var i in this.dist.checked) {\n            var m = this.dist.checked[i];\n            this.undist.list.unshift(m);\n            deleteOrFindArr(this.dist.list, m, '', 0);\n\n            deleteOrFindArr(this.saveData.add, m.staffId, '', 0);\n            var res = deleteOrFindArr(\n              this.saveData.remove,\n              m.staffId,\n              '',\n              0,\n              1\n            );\n            if (res.length < 1) {\n              this.saveData.remove.push(m.staffId);\n            }\n          }\n          this.refresh(0);\n          this.refresh(1);\n        })\n        .catch(() => {\n          this.undistLoading = false;\n        });\n      //console.log(this.saveData)\n    },\n    /**\n     * 保存用户分配数据\n     */\n    saveAllotData(data) {\n      return axios(\n        {\n          method: 'POST',\n          url: '/usergw/admin/roleUser/roleAddUser',\n          data\n        },\n        this.serverType\n      );\n    },\n    handleSave() {\n      //保存\n      // console.log(this.saveData)\n      return this.saveAllotData({\n        ...this.saveData,\n        roleId: this.$route.query.roleId\n      }).then(res => {\n        this.saveData.add = [];\n        this.saveData.remove = [];\n        this.$message.success('保存成功');\n      });\n    },\n    /**\n     * 更新分配数据\n     * @param {Array} add 添加分配\n     * @param {Array} remove 移除分配\n     */\n    updateDistData(add, remove) {\n      return this.saveAllotData({\n        add,\n        remove,\n        roleId: this.$route.query.roleId\n      }).then(res => {\n        this.saveData.add = [];\n        this.saveData.remove = [];\n        this.$message.success('保存成功');\n      });\n    },\n    /**\n     * 刷新列表\n     * - 0 (未分配列表)\n     * - 1 (已分配列表)\n     * @param {Number} type 刷新什么列表\n     */\n    refresh(type) {\n      var name = type ? 'dist' : 'undist';\n      // 刷新列表的方法\n      var fn = type ? this.getDist : this.getUndist;\n      // 列表的参数\n      var param = type ? this.dist : this.undist;\n      // 滚动容器\n      var el = this.$refs[type ? 'dist' : 'undist'];\n      if (param.list.length) {\n        var offset = param.pagin.offset;\n        var limit = param.pagin.limit;\n        param.pagin.offset = 0;\n        param.pagin.limit = param.list.length;\n        var restore = () => {\n          param.pagin.offset = offset;\n          param.pagin.limit = limit;\n        };\n        param.list = [];\n        fn()\n          .then(() => {\n            restore();\n          })\n          .catch(restore);\n      } else {\n        param.pagin.offset = 0;\n        fn();\n      }\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.header {\n  margin-bottom: 15px;\n  &-right {\n    float: right;\n    font-size: 14px;\n    line-height: 32px;\n    .current-role {\n      font-weight: bold;\n    }\n  }\n}\n.menu-box {\n  &::after {\n    display: block;\n    content: '';\n    clear: both;\n  }\n  .card-box {\n    height: calc(100vh - 84px - 94px - 60px);\n    margin-bottom: 0;\n    overflow: hidden;\n    position: relative;\n    padding-top: 58px;\n    &.card-auto {\n      height: auto;\n    }\n    .card-label {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      background: #4072ee;\n      padding: 18px 0 20px;\n      color: #fff;\n      z-index: 2;\n      font-size: 14px;\n      text-align: center;\n      // height: 58px;\n    }\n    .card-label2 {\n      background: #0e5ebb;\n    }\n    .card-list {\n      margin: -20px;\n      > .card-item {\n        padding: 6px 10px;\n        cursor: pointer;\n        font-size: 14px;\n        &:hover {\n          background: #e6e6e6;\n        }\n      }\n    }\n    .user-list {\n      margin: 20px -20px 0;\n      padding: 0 20px;\n    }\n    .item-btn {\n      & + .item-btn {\n        margin-top: 15px;\n      }\n    }\n  }\n}\n.el-scrollbar_x /deep/ .el-scrollbar__wrap {\n  overflow-x: hidden;\n}\n</style>\n"]}]}