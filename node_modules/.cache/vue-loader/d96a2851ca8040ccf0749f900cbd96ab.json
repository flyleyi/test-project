{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-book/views/menuManage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-book/views/menuManage/index.vue","mtime":1627979214328},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2J1c2luZXNzL0JUYWJsZSc7CmltcG9ydCBDRHluYW1pY0Zvcm0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DRHluYW1pY0Zvcm0vaW5kZXgnOwppbXBvcnQgeyBEaWFsb2csIEJ1dHRvbiwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgY29uZmlnIGZyb20gJy4vLi4vLi4vY29uZmlnJzsKaW1wb3J0IHsKICBnZXRDYXRhbG9nUGFnZSwKICBnZXRDYXRhbG9nTGlzdCwKICBhZGRDYXRhbG9nLAogIGFkZFBhcmVudENhdGFsb2csCiAgdXBkYXRlQ2F0YWxvZywKICBkZWxldGVDYXRhbG9nLAogIGNhdGFsb2dMb2dEZXRhaWwsCiAgY29udGVudERldGFpbCwKICBkZWxldGVDb250ZW50LAogIGRlbGV0ZUNvbnRlbnRCYXRjaCwKICBjaGVja0NvbnRlbnQsCiAgb25MaW5lQ29udGVudAp9IGZyb20gJy4vLi4vLi4vYXBpL2RhdGEnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Fuc3dlckxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIEJUYWJsZSwKICAgIENEeW5hbWljRm9ybSwKICAgIFtEaWFsb2cubmFtZV06IERpYWxvZywKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbgogIH0sCiAgcHJvcHM6IHt9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/lm77niYfliY3nvIAKICAgICAgLy8g6KGo5Y2V5YiXCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ2luZGV4JywKICAgICAgICAgIGxhYmVsOiAn5bqP5Y+3JwogICAgICAgICAgLy8gcHJvcDogJ251bScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn57yW5Y+3JywKICAgICAgICAgIHByb3A6ICdjYXRhbG9nQ29kZScsCiAgICAgICAgICB0eXBlOiAnJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfnm67lvZXnuqfliKsnLAogICAgICAgICAgcHJvcDogJ2NhdGFsb2dUeXBlJywKICAgICAgICAgIHR5cGU6ICcnLAogICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn55uu5b2V5ZCN56ewJywKICAgICAgICAgIHByb3A6ICdjYXRhbG9nTmFtZScsCiAgICAgICAgICB3aWR0aDogJzIwMHB4JywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+eCuei1nuaVsCcsCiAgICAgICAgICBwcm9wOiAnbGlrZUNvdW50JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfnlZnoqIDmlbAnLAogICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicsCiAgICAgICAgICBwcm9wOiAnY29tbWVudENvdW50JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfnvJbovpHml7bpl7QnLAogICAgICAgICAgd2lkdGg6ICcxNjAnLAogICAgICAgICAgcHJvcDogJ3VwZGF0ZVRpbWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+e8lui+keS6uicsCiAgICAgICAgICB3aWR0aDogJzE2MCcsCiAgICAgICAgICBwcm9wOiAnZWRpdG9yJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICflrqHmoLjml7bpl7QnLAogICAgICAgICAgd2lkdGg6ICcxNjAnLAogICAgICAgICAgcHJvcDogJ3Jldmlld1RpbWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+S4iue6v+aXtumXtCcsCiAgICAgICAgICB3aWR0aDogJzE2MCcsCiAgICAgICAgICBwcm9wOiAnb25saW5lVGltZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5LiL57q/5pe26Ze0JywKICAgICAgICAgIHdpZHRoOiAnMTYwJywKICAgICAgICAgIHByb3A6ICdvZmZsaW5lVGltZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn54q25oCBJywKICAgICAgICAgIHByb3A6ICdzdGF0dXMnLAogICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5a6h5qC457uT5p6cJywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdjaGVja1Jlc3VsdCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5a6h5qC45pyq6YCa6L+H5Y6f5ZugJywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdub1Bhc3NSZWFzb24nCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aTjeS9nOiusOW9lScsCiAgICAgICAgICBjb2xUeXBlOiAnYnRucycsCiAgICAgICAgICBidG5zOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBsYWJlbDogJ+afpeeci+ivpuaDhScsCiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgIHNpemU6ICdtaW5pJywKICAgICAgICAgICAgICBjbGljazogdGhpcy5vcGVyYURldGFpbAogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aTjeS9nCcsCiAgICAgICAgICB3aWR0aDogJzIwMCcsCiAgICAgICAgICBzbG90TmFtZTogJ29wZXJhJywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgYnRuczogW10KICAgICAgICB9CiAgICAgIF0sCiAgICAgIERpYWxvZ2hlYWRlcnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aTjeS9nOS6uicsCiAgICAgICAgICBwcm9wOiAnY3JlYXRvcicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2c57G75Z6LJywKICAgICAgICAgIHByb3A6ICdsb2dUeXBlJywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aTjeS9nOaXtumXtCcsCiAgICAgICAgICBwcm9wOiAnY3JlYXRlVGltZScKICAgICAgICB9CiAgICAgIF0sCiAgICAgIC8vIOafpeivouihqOWNlemFjee9rgogICAgICBmb3JtSXRlbXM6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgICAgcHJvcDogJ2NhdGFsb2dOYW1lJywKICAgICAgICAgIGxhYmVsOiAn5paH56ug5ZCN56ew77yaJywKICAgICAgICAgIGF0dHJzOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeagh+mimOWFs+mUruWtlycKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICBwcm9wOiAnc3RhdHVzJywKICAgICAgICAgIGxhYmVsOiAn54q25oCB77yaJywKICAgICAgICAgIG9wdGlvbnM6IHRoaXMuJEQoJ01MR0xfWlQnKQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ2RhdGUtcGlja2VyJywKICAgICAgICAgIHByb3A6ICdlZGl0VGltZScsCiAgICAgICAgICBsYWJlbDogJ+e8lui+keaXtumXtO+8micsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICB0eXBlOiAnZGF0ZXJhbmdlJywKICAgICAgICAgICAgJ3ZhbHVlLWZvcm1hdCc6ICd5eXl5LU1NLWRkJywKICAgICAgICAgICAgLy8gVE9ETyDml7bpl7TmoLzlvI8KICAgICAgICAgICAgJ3N0YXJ0LXBsYWNlaG9sZGVyJzogJ+W8gOWni+aXpeacnycsCiAgICAgICAgICAgICdlbmQtcGxhY2Vob2xkZXInOiAn57uT5p2f5pel5pyfJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ2RhdGUtcGlja2VyJywKICAgICAgICAgIHByb3A6ICdyZXZpZXdUaW1lJywKICAgICAgICAgIGxhYmVsOiAn5a6h5qC45pe26Ze077yaJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHR5cGU6ICdkYXRlcmFuZ2UnLAogICAgICAgICAgICAndmFsdWUtZm9ybWF0JzogJ3l5eXktTU0tZGQnLAogICAgICAgICAgICAvLyBUT0RPIOaXtumXtOagvOW8jwogICAgICAgICAgICAnc3RhcnQtcGxhY2Vob2xkZXInOiAn5byA5aeL5pel5pyfJywKICAgICAgICAgICAgJ2VuZC1wbGFjZWhvbGRlcic6ICfnu5PmnZ/ml6XmnJ8nCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdLAogICAgICBkaWFsb2dUaXRsZTogJycsCiAgICAgIGRpYWxvZ1R5cGU6ICcnLAogICAgICAvLyDlt6XlhbfmoI8KICAgICAgdG9vbGJhcnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aJuemHj+WIoOmZpCcsCiAgICAgICAgICBjbGljazogdGhpcy5kZWxldGVRdWVzdAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfmlrDlu7rnm67lvZUnLAogICAgICAgICAgY2xpY2s6IHRoaXMuYWRkQ2F0YWxvZ05hbWUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5paw5aKe5paH56ugJywKICAgICAgICAgIGNsaWNrOiB0aGlzLmFkZEFydGljbGUKICAgICAgICB9CiAgICAgIF0sCiAgICAgIC8v5by556qX6KGo5Y2VCiAgICAgIGRpYWxvZ0Zvcm06IHsKICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICB9LAogICAgICBwcmV2aWV3RGlhbG9nOiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UKICAgICAgfSwKICAgICAgLy/lvLnnqpfooajljZXlsZ7mgKcKICAgICAgZGlhbG9nRm9ybUF0dHJzOiB7CiAgICAgICAgJ2xhYmVsLXBvc2l0aW9uJzogJ3JpZ2h0JywKICAgICAgICAnbGFiZWwtd2lkdGgnOiAnMTMwcHgnLAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICBhZGRQYXJlbnROYW1lOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn55uu5b2V5ZCN56ew5pyq5aGr5YaZJwogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgYWRkU3ViTmFtZTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+ebruW9leWQjeensOacquWhq+WGmScKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIGVkaXRMZXZlbDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeaYr+WQpuS4uuS4gOe6p+ebruW9lScKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIGVkaXRQYXJlbnQ6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nkuIrnuqfnm67lvZUnCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICBlZGl0TmFtZTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+ebruW9leWQjeensOacquWhq+WGmScKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIGNoZWNrQ3VzdG9tUmVhc29uOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn6Ieq5a6a5LmJ5Y6f5Zug5pyq5aGr5YaZJwogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+W8ueeql+ihqOWNlem7mOiupOWAvO+8iOe8lui+keaXtuS8oOWFpe+8iQogICAgICBkaWFsb2dGb3JtRGF0YToge30sCiAgICAgIC8v6KGo5qC86YCJ5Lit6KGM5pWwCiAgICAgIHNlbGVjdGVkUm93czogbnVsbCwKICAgICAgLy8g5piv5ZCm5pi+56S6CiAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgIC8vIOiPnOWNleS9jee9rgogICAgICBtZW51VG9wOiAwLAogICAgICBtZW51TGVmdDogMCwKICAgICAgLy/pooTop4jmlofnq6DmlbDmja4KICAgICAgcHJldmlld0RhdGE6IHt9LAogICAgICBwcmV2aWV3RmlsZXM6IFtdLAogICAgICAvLyDpgInpobkKICAgICAgb3B0aW9uczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICfnvJbovpEnLAogICAgICAgICAgYWN0aW9uOiAnZWRpdCcsCiAgICAgICAgICBpY29uOiAnaWNvbl9iaWFuamknCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAn5Yig6ZmkJywKICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZScsCiAgICAgICAgICBpY29uOiAnaWNvbl9zaGFuY2h1MycKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICfmlrDlop7kuIrnuqfnm67lvZUnLAogICAgICAgICAgYWN0aW9uOiAnYWRkUGFyZW50JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ+aWsOWinuS4i+e6p+ebruW9lScsCiAgICAgICAgICBhY3Rpb246ICdhZGRTdWInCiAgICAgICAgfQogICAgICBdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICog56aB55So55qE6I+c5Y2V6YCJ6aG5CiAgICAgKi8KICAgIGRpc2FibGVkTWVudU9wdGlvbnMoKSB7CiAgICAgIGxldCBhcnIgPSBbXTsKICAgICAgaWYgKCF0aGlzLmlzQ2FuRGVsQ3VycmVudE5vZGUpIGFyci5wdXNoKCdkZWxldGUnKTsKICAgICAgaWYgKCF0aGlzLmlzQ2FuTmV3UGFyZW50RGlyKSBhcnIucHVzaCgnYWRkUGFyZW50Jyk7CiAgICAgIGlmICghdGhpcy5pc0Nhbk5ld0xvd2VyRGlyKSBhcnIucHVzaCgnYWRkU3ViJyk7CiAgICAgIHJldHVybiBhcnI7CiAgICB9LAogICAgLyoqCiAgICAgKiDmmK/lkKblj6/ku6XliKDpmaTlvZPliY3oioLngrkKICAgICAqLwogICAgaXNDYW5EZWxDdXJyZW50Tm9kZSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzICYmICF0aGlzLnNlbGVjdGVkUm93cy5jYXRhbG9nSWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLyoqCiAgICAgKiDmmK/lkKblj6/ku6XmlrDlop7kuIrnuqfnm67lvZUKICAgICAqLwogICAgaXNDYW5OZXdQYXJlbnREaXIoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRSb3dzKTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93cyAmJiB0aGlzLnNlbGVjdGVkUm93cy5wYXJlbnRJZCA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvLyBsZXQgY3VycmVudE5vZGUgPSB0aGlzLmN1cnJlbnROb2RlCiAgICAgIC8vIHJldHVybiAhKGN1cnJlbnROb2RlICYmIGN1cnJlbnROb2RlLmxldmVsID09PSAxKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLyoqCiAgICAgKiDmmK/lkKblj6/ku6XmlrDlop7kuIvnuqfnm67lvZUKICAgICAqLwogICAgaXNDYW5OZXdMb3dlckRpcigpIHsKICAgICAgLy8gbGV0IGN1cnJlbnROb2RlID0gdGhpcy5jdXJyZW50Tm9kZQogICAgICAvLyByZXR1cm4gIShjdXJyZW50Tm9kZSAmJiBjdXJyZW50Tm9kZS5kYXRhLmNvbnRlbnRJZCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGRpYWxvZ0Zvcm1JdGVtcygpIHsKICAgICAgbGV0IGRpYWxvZ1R5cGUgPSB0aGlzLmRpYWxvZ1R5cGU7CiAgICAgIGxldCByZXN1bHQ7CiAgICAgIHN3aXRjaCAoZGlhbG9nVHlwZSkgewogICAgICAgIGNhc2UgJ2FkZFBhcmVudCc6CiAgICAgICAgICByZXN1bHQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgICAgICAgIHByb3A6ICdhZGRQYXJlbnROYW1lJywKICAgICAgICAgICAgICBsYWJlbDogJ+ebruW9leWQjeensO+8micsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnMzDlrZfku6XlhoUnLAogICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2FkZFN1Yic6CiAgICAgICAgICByZXN1bHQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICBwcm9wOiAnYWRkU3ViUGFyZW50JywKICAgICAgICAgICAgICBsYWJlbDogJ+S4iue6p+ebruW9le+8micsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBhamF4OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDYXRhbG9nTGlzdCgpLnRoZW4oZGF0YSA9PiBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbGFiZWxLZXk6ICdjYXRhbG9nTmFtZScsCiAgICAgICAgICAgICAgdmFsdWVLZXk6ICdpZCcKICAgICAgICAgICAgICAvLyBhamF4OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAvLyAgIHJldHVybiBxdWVyeVNjaG9vbEluZm9MaXN0KHsgY29kZVR5cGU6IDIgfSkudGhlbihkYXRhID0+IGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICAgICAgICBwcm9wOiAnYWRkU3ViTmFtZScsCiAgICAgICAgICAgICAgbGFiZWw6ICfnm67lvZXlkI3np7DvvJonLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJzMw5a2X5Lul5YaFJywKICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMzAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdlZGl0JzoKICAgICAgICAgIHJlc3VsdCA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdyYWRpbycsCiAgICAgICAgICAgICAgcHJvcDogJ2VkaXRMZXZlbCcsCiAgICAgICAgICAgICAgbGFiZWw6ICfkuIDnuqfnm67lvZXvvJonLAogICAgICAgICAgICAgIGF0dHJzOiB7fSwKICAgICAgICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5pivJywKICAgICAgICAgICAgICAgICAgdmFsdWU6IDEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5ZCmJywKICAgICAgICAgICAgICAgICAgdmFsdWU6IDIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICBwcm9wOiAnZWRpdFBhcmVudCcsCiAgICAgICAgICAgICAgaGlkZGVuOgogICAgICAgICAgICAgICAgIXRoaXMuZGlhbG9nRm9ybURhdGEuZWRpdExldmVsIHx8CiAgICAgICAgICAgICAgICAodGhpcy5kaWFsb2dGb3JtRGF0YS5lZGl0TGV2ZWwgJiYKICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtRGF0YS5lZGl0TGV2ZWwgPT0gJzEnKSwKICAgICAgICAgICAgICBsYWJlbDogJ+S4iue6p+ebruW9le+8micsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkOiB0cnVlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBhamF4OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDYXRhbG9nTGlzdCgpLnRoZW4oZGF0YSA9PiBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbGFiZWxLZXk6ICdjYXRhbG9nTmFtZScsCiAgICAgICAgICAgICAgdmFsdWVLZXk6ICdpZCcKICAgICAgICAgICAgICAvLyBhamF4OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAvLyAgIHJldHVybiBxdWVyeVNjaG9vbEluZm9MaXN0KHsgY29kZVR5cGU6IDIgfSkudGhlbihkYXRhID0+IGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICAgICAgICBwcm9wOiAnZWRpdE5hbWUnLAogICAgICAgICAgICAgIGxhYmVsOiAn55uu5b2V5ZCN56ew77yaJywKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICczMOWtl+S7peWGhScsCiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IDMwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICBdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnYWRkTWVudSc6CiAgICAgICAgICByZXN1bHQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAncmFkaW8nLAogICAgICAgICAgICAgIHByb3A6ICdlZGl0TGV2ZWwnLAogICAgICAgICAgICAgIGxhYmVsOiAn5LiA57qn55uu5b2V77yaJywKICAgICAgICAgICAgICBhdHRyczoge30sCiAgICAgICAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBsYWJlbDogJ+aYrycsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBsYWJlbDogJ+WQpicsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgcHJvcDogJ2VkaXRQYXJlbnQnLAogICAgICAgICAgICAgIGhpZGRlbjoKICAgICAgICAgICAgICAgICF0aGlzLmRpYWxvZ0Zvcm1EYXRhLmVkaXRMZXZlbCB8fAogICAgICAgICAgICAgICAgKHRoaXMuZGlhbG9nRm9ybURhdGEuZWRpdExldmVsICYmCiAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEuZWRpdExldmVsID09ICcxJyksCiAgICAgICAgICAgICAgbGFiZWw6ICfkuIrnuqfnm67lvZXvvJonLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlZDogdHJ1ZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYWpheDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2F0YWxvZ0xpc3QoKS50aGVuKGRhdGEgPT4gZGF0YS5kYXRhKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxhYmVsS2V5OiAnY2F0YWxvZ05hbWUnLAogICAgICAgICAgICAgIHZhbHVlS2V5OiAnaWQnCiAgICAgICAgICAgICAgLy8gYWpheDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gICByZXR1cm4gcXVlcnlTY2hvb2xJbmZvTGlzdCh7IGNvZGVUeXBlOiAyIH0pLnRoZW4oZGF0YSA9PiBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICAgICAgcHJvcDogJ2VkaXROYW1lJywKICAgICAgICAgICAgICBsYWJlbDogJ+ebruW9leWQjeensO+8micsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnMzDlrZfku6XlhoUnLAogICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NoZWNrJzoKICAgICAgICAgIHJlc3VsdCA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgIHByb3A6ICdjaGVja1Jlc3VsdCcsCiAgICAgICAgICAgICAgbGFiZWw6ICflrqHmoLjnu5PmnpzvvJonLAogICAgICAgICAgICAgIGF0dHJzOiB7fSwKICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLiREKCdTSEpHJykKICAgICAgICAgICAgICAvLyBhamF4OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAvLyAgIHJldHVybiBxdWVyeVNjaG9vbEluZm9MaXN0KHsgY29kZVR5cGU6IDIgfSkudGhlbihkYXRhID0+IGRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgcHJvcDogJ2NoZWNrUmVhc29uJywKICAgICAgICAgICAgICBsYWJlbDogJ+S4jemAmui/h+WOn+WboO+8micsCiAgICAgICAgICAgICAgaGlkZGVuOgogICAgICAgICAgICAgICAgIXRoaXMuZGlhbG9nRm9ybURhdGEuY2hlY2tSZXN1bHQgfHwKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEuY2hlY2tSZXN1bHQgIT0gJzAnLAogICAgICAgICAgICAgIGF0dHJzOiB7fSwKICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLiREKCdCVEdZWScpCiAgICAgICAgICAgICAgLy8gYWpheDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gICByZXR1cm4gcXVlcnlTY2hvb2xJbmZvTGlzdCh7IGNvZGVUeXBlOiAyIH0pLnRoZW4oZGF0YSA9PiBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICAgICAgcHJvcDogJ2NoZWNrQ3VzdG9tUmVhc29uJywKICAgICAgICAgICAgICBoaWRkZW46CiAgICAgICAgICAgICAgICAhdGhpcy5kaWFsb2dGb3JtRGF0YS5jaGVja1JlYXNvbiB8fAogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtRGF0YS5jaGVja1JlYXNvbiAhPSAnNCcsCiAgICAgICAgICAgICAgbGFiZWw6ICfoh6rlrprkuYnljp/lm6DvvJonLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJzE15a2X5Lul5YaFJywKICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMTUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYWpheDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gICByZXR1cm4gcXVlcnlTY2hvb2xJbmZvTGlzdCh7IGNvZGVUeXBlOiAyIH0pLnRoZW4oZGF0YSA9PiBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgfQogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwKICB3YXRjaDoge30sCiAgY3JlYXRlZCgpIHt9LAogIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOivt+axgnRhYmxl5pWw5o2uCiAgICAgKi8KICAgIGFqYXhHZXREYXRhKGRhdGEpIHsKICAgICAgY29uc3QgeyBlZGl0VGltZSwgcmV2aWV3VGltZSB9ID0gZGF0YTsKICAgICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbigKICAgICAgICB7CiAgICAgICAgICBzdGFydFVwZGF0ZVRpbWU6IChlZGl0VGltZSAmJiBlZGl0VGltZVswXSkgfHwgbnVsbCwKICAgICAgICAgIGVuZFVwZGF0ZVRpbWU6IChlZGl0VGltZSAmJiBlZGl0VGltZVsxXSkgfHwgbnVsbCwKICAgICAgICAgIHN0YXJ0UmV2aWV3VGltZTogKHJldmlld1RpbWUgJiYgcmV2aWV3VGltZVswXSkgfHwgbnVsbCwKICAgICAgICAgIGVuZFJldmlld1RpbWU6IChyZXZpZXdUaW1lICYmIHJldmlld1RpbWVbMV0pIHx8IG51bGwKICAgICAgICB9LAogICAgICAgIGRhdGEsCiAgICAgICAgeyBlZGl0VGltZTogbnVsbCwgcmV2aWV3VGltZTogbnVsbCB9CiAgICAgICk7CiAgICAgIC8vIHJldHVybiBnZXRDYXRhbG9nUGFnZShwYXJhbXMpOwogICAgICByZXR1cm4gZ2V0Q2F0YWxvZ1BhZ2UocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgY29uc3QgbGlzdCA9IHJlcy5kYXRhLnJlY29yZHMgfHwgW107CiAgICAgICAgICBjb25zdCB0cmVlID0gdGhpcy4kdXRpbC5saXN0Q29udmVydFRyZWUobGlzdCk7CiAgICAgICAgICByZXMuZGF0YS5yZWNvcmRzID0gdHJlZTsKICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIC8vIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICAgIGxldCBsaXN0ID0gW107CiAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgLy8gICAgICAgbGlzdC5wdXNoKHsKICAgICAgLy8gICAgICAgICBpZDogaSwKICAgICAgLy8gICAgICAgICBudW06IGksCiAgICAgIC8vICAgICAgICAgdHlwZUNvZGU6ICd0eXBlQ29kZScgKyBpLAogICAgICAvLyAgICAgICAgIHR5cGVOYW1lOiAn5YiG57G75ZCN56ewJyArIGksCiAgICAgIC8vICAgICAgICAgc29ydDogJ+aOkuW6j+WAvCcgKyBpLAogICAgICAvLyAgICAgICAgIHRpbWU6ICfnvJbovpHml7bpl7QnCiAgICAgIC8vICAgICAgIH0pOwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgcmVzb2x2ZSh7CiAgICAgIC8vICAgICAgIHN0YXR1czogMjAwLAogICAgICAvLyAgICAgICBkYXRhOiB7CiAgICAgIC8vICAgICAgICAgdG90YWw6IDEwLAogICAgICAvLyAgICAgICAgIHJlY29yZHM6IGxpc3QKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgfSk7CiAgICAgIC8vICAgfSwgNTAwKTsKICAgICAgLy8gfSk7CiAgICB9LAogICAgYWpheEdldERpYWxvZ0RhdGEoZGF0YSkgewogICAgICByZXR1cm4gY2F0YWxvZ0xvZ0RldGFpbCgKICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBkYXRhLCB7IGlkOiB0aGlzLnNlbGVjdGVkUm93cy5pZCB9KQogICAgICApOwogICAgfSwKICAgIC8v5aSE55CG5Zu+54mH5paH5Lu2CiAgICBnZXRGaWxlTGlzdChkYXRhKSB7CiAgICAgIGNvbnN0IGxpc3QgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICBsZXQgdXJsTGlzdCA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0W2ldLnVybCA9IGNvbmZpZy5GSUxFX1BSRUZJWCArIGxpc3RbaV0udXJsOwogICAgICAgIHVybExpc3QucHVzaChsaXN0W2ldLnVybCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBsaXN0OiBsaXN0LAogICAgICAgIHVybExpc3Q6IHVybExpc3QKICAgICAgfTsKICAgIH0sCiAgICAvL+S4i+i9veaWh+S7tgogICAgZG93bmxvYWRGaWxlKGl0ZW0pIHsKICAgICAgd2luZG93Lm9wZW4oaXRlbS51cmwpOwogICAgfSwKICAgIC8qKgogICAgICog5Yid5aeL5YyW5paw5bu66KGo5Y2V55qE5pWw5o2u6buY6K6k5YC8CiAgICAgKi8KICAgIGluaXREaWFsb2dGb3JtRGF0YSgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtRGF0YSA9IHt9OwogICAgfSwKICAgIC8qKgogICAgICog5YWz6Zet56qX5Y+j5YmN5aSE55CGCiAgICAgKi8KICAgIG9uQmVmb3JlQ2xvc2UoZG9uZSkgewogICAgICBpZiAodGhpcy5kaWFsb2dGb3JtLmxvYWRpbmcpIHJldHVybjsKICAgICAgZG9uZSgpOwogICAgfSwKICAgIC8v5YWz6Zet6aKE6KeI5by556qXCiAgICBvbkNsb3NlRm9ybVByZXZpZXcoKSB7CiAgICAgIHRoaXMucHJldmlld0RhdGEudmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnByZXZpZXdGaWxlcyA9IFtdOwogICAgICB0aGlzLnByZXZpZXdEYXRhID0ge307CiAgICB9LAogICAgLyoqCiAgICAgKiDooajljZXlhbPpl63liY3muIXpmaTmoKHpqozlubbph43nva7mlbDmja4KICAgICAqLwogICAgb25DbG9zZUZvcm0oKSB7CiAgICAgIC8vIHRoaXMuJHJlZnNbJ2RpYWxvZ0Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmluaXREaWFsb2dGb3JtRGF0YSgpOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnJzsKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10gJiYgdGhpcy4kcmVmc1snZWxGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOaTjeS9nOaMiemSrgogICAgICovCiAgICBvcGVyYUJ0bihyb3csIHR5cGUpIHsKICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAnb25MaW5lJzoKICAgICAgICAgIHJldHVybiBvbkxpbmVDb250ZW50KHsgaWQ6IHJvdy5pZCwgY29kZTogMiB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIrnur/miJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5zdWJtaXREb25lKCk7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlICdvZmZMaW5lJzoKICAgICAgICAgIHJldHVybiBvbkxpbmVDb250ZW50KHsgaWQ6IHJvdy5pZCwgY29kZTogMyB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIvnur/miJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5zdWJtaXREb25lKCk7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgdGhpcy5kZWxldGVRdWVzdChyb3cpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY2hlY2snOgogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSB0cnVlOwogICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3c7CiAgICAgICAgICB0aGlzLmRpYWxvZ1R5cGUgPSB0eXBlOwogICAgICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICflrqHmoLgnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZWRpdCc6CiAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvdzsKICAgICAgICAgIGlmIChyb3cuY2F0YWxvZ0lkKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiAnL2VkaXRBcnRpY2xlJywKICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgY29udGVudElkOiByb3cuaWQsCiAgICAgICAgICAgICAgICBwYXJlbnRJZDogcm93LnBhcmVudElkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZWRpdENhdGFsb2dOYW1lKCk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdwcmV2aWV3JzoKICAgICAgICAgIHRoaXMucHJldmlld0FydGljbGUocm93KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5o+Q5Lqk6KGo5Y2VCiAgICAgKi8KICAgIG9uU3VibWl0Rm9ybSgpIHsKICAgICAgY29uc3QgZGlhbG9nVHlwZSA9IHRoaXMuZGlhbG9nVHlwZTsKICAgICAgc3dpdGNoIChkaWFsb2dUeXBlKSB7CiAgICAgICAgY2FzZSAnYWRkUGFyZW50JzoKICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzWydlbEZvcm0nXS52YWxpZGF0ZSgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICBjb25zdCB7IGFkZFBhcmVudE5hbWUgfSA9IHRoaXMuZGlhbG9nRm9ybURhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWRSb3dzKTsKICAgICAgICAgICAgLy8g5qCh6aqM5oiQ5YqfCiAgICAgICAgICAgIGFkZFBhcmVudENhdGFsb2coewogICAgICAgICAgICAgIGNhdGFsb2dJZDogdGhpcy5zZWxlY3RlZFJvd3MgJiYgdGhpcy5zZWxlY3RlZFJvd3MuaWQsCiAgICAgICAgICAgICAgcGFyZW50TmFtZTogYWRkUGFyZW50TmFtZQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdERvbmUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlICdhZGRTdWInOgogICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ2VsRm9ybSddLnZhbGlkYXRlKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHsgYWRkU3ViUGFyZW50LCBhZGRTdWJOYW1lIH0gPSB0aGlzLmRpYWxvZ0Zvcm1EYXRhOwogICAgICAgICAgICAvLyDmoKHpqozmiJDlip8KICAgICAgICAgICAgYWRkQ2F0YWxvZyh7CiAgICAgICAgICAgICAgcGFyZW50SWQ6IGFkZFN1YlBhcmVudCwKICAgICAgICAgICAgICBjYXRhbG9nTmFtZTogYWRkU3ViTmFtZQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdERvbmUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICBjYXNlICdlZGl0JzoKICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzWydlbEZvcm0nXS52YWxpZGF0ZSgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICBjb25zdCB7IGVkaXRMZXZlbCwgZWRpdFBhcmVudCwgZWRpdE5hbWUgfSA9IHRoaXMuZGlhbG9nRm9ybURhdGE7CiAgICAgICAgICAgIC8vIOagoemqjOaIkOWKnwogICAgICAgICAgICB1cGRhdGVDYXRhbG9nKHsKICAgICAgICAgICAgICBpZDogKHRoaXMuc2VsZWN0ZWRSb3dzICYmIHRoaXMuc2VsZWN0ZWRSb3dzLmlkKSB8fCAnJywKICAgICAgICAgICAgICBwYXJlbnRJZDogZWRpdExldmVsID09IDEgPyAwIDogZWRpdFBhcmVudCwKICAgICAgICAgICAgICBjYXRhbG9nTmFtZTogZWRpdE5hbWUKICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+e8lui+keaIkOWKnyEnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5zdWJtaXREb25lKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAnY2hlY2snOgogICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ2VsRm9ybSddLnZhbGlkYXRlKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICBjaGVja1Jlc3VsdCwKICAgICAgICAgICAgICBjaGVja1JlYXNvbiwKICAgICAgICAgICAgICBjaGVja0N1c3RvbVJlYXNvbgogICAgICAgICAgICB9ID0gdGhpcy5kaWFsb2dGb3JtRGF0YTsKICAgICAgICAgICAgLy8g5qCh6aqM5oiQ5YqfCiAgICAgICAgICAgIGNoZWNrQ29udGVudCh7CiAgICAgICAgICAgICAgaWQ6IHRoaXMuZ2VyU2VsZWN0SWRzKCksCiAgICAgICAgICAgICAgY29kZTogY2hlY2tSZXN1bHQsCiAgICAgICAgICAgICAgbm9wYXNzS2V5OiBjaGVja1JlYXNvbiwKICAgICAgICAgICAgICBub3Bhc3NSZWFzb246IGNoZWNrQ3VzdG9tUmVhc29uCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflrqHmoLjmiJDlip8hJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuc3VibWl0RG9uZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgJ2FkZE1lbnUnOgogICAgICAgICAgLy8g5qCh6aqM5oiQ5YqfCiAgICAgICAgICByZXR1cm4gdGhpcy4kcmVmc1snZWxGb3JtJ10udmFsaWRhdGUoKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBlZGl0TGV2ZWwsIGVkaXRQYXJlbnQsIGVkaXROYW1lIH0gPSB0aGlzLmRpYWxvZ0Zvcm1EYXRhOwogICAgICAgICAgICAvLyDmoKHpqozmiJDlip8KICAgICAgICAgICAgYWRkQ2F0YWxvZyh7CiAgICAgICAgICAgICAgcGFyZW50SWQ6IGVkaXRMZXZlbCA9PSAxID8gMCA6IGVkaXRQYXJlbnQsCiAgICAgICAgICAgICAgY2F0YWxvZ05hbWU6IGVkaXROYW1lCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmlrDlu7rmiJDlip8hJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuc3VibWl0RG9uZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdERvbmUoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS5sb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuaW5pdERpYWxvZ0Zvcm1EYXRhKCk7CiAgICAgIHRoaXMuJHJlZnMuYlRhYmxlLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsKICAgIH0sCiAgICAvL+iOt+WPlumAieS4rSBJZAogICAgZ2VyU2VsZWN0SWRzKCkgewogICAgICBsZXQgcm93cyA9ICcnOwogICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3dzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0ZWRSb3dzKSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJvd3MgKz0gdGhpcy5zZWxlY3RlZFJvd3NbaV0uaWQgKyAnLCc7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJvd3MgPSB0aGlzLnNlbGVjdGVkUm93cy5pZDsKICAgICAgfQogICAgICByZXR1cm4gcm93czsKICAgIH0sCiAgICAvKioKICAgICAqIOWuoeaguOmXrumimAogICAgICovCiAgICBvbkV4YW1pbmVRdWVzdChyb3dzKSB7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICdleGFtJzsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICflrqHmoLgnOwogICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvd3M7CiAgICAgIGlmICghcm93cyB8fCByb3dzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+iHs+WwkemAieaLqeS4gOS4queVmeiogCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgb3BlcmFEZXRhaWwocm93cykgewogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnZGV0YWlsJzsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfmk43kvZzorrDlvZUnOwogICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvd3M7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBvblJlcGx5UXVlc3Qocm93cykgewogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAncmVwbHknOwogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+WbnuWkjSc7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gcm93czsKICAgICAgY29uc29sZS5sb2coJ3Jvd3MnLCByb3dzKTsKICAgICAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6Iez5bCR6YCJ5oup5LiA5Liq55WZ6KiAJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvL+aWsOWinuaWh+eroAogICAgYWRkQXJ0aWNsZSgpIHsKICAgICAgY29uc29sZS5sb2coJ2FhYScpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9lZGl0QXJ0aWNsZScKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliKDpmaTnm67lvZUKICAgICAqLwogICAgZGVsZXRlUXVlc3Qocm93cykgewogICAgICBjb25zb2xlLmxvZyhyb3dzKTsKICAgICAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6Iez5bCR6YCJ5oup5LiA5Liq55uu5b2VJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOW9k+WJjeebruW9lT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3dzOwogICAgICAgIGRlbGV0ZUNhdGFsb2coeyBpZHM6IHRoaXMuZ2VyU2VsZWN0SWRzKCkgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5iVGFibGUuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwogICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5Yig6Zmk5paH56ugCiAgICAgKi8KICAgIGRlbGV0ZUNvbnRlbnQocm93cykgewogICAgICBpZiAoIXJvd3MgfHwgcm93cy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKCfoh7PlsJHpgInmi6nkuIDkuKrmlofnq6AnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a6KaB5Yig6Zmk5b2T5YmN5paH56ugPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHJvd3M7CiAgICAgICAgZGVsZXRlQ29udGVudEJhdGNoKHsgaWRzOiB0aGlzLmdlclNlbGVjdElkcygpIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuYlRhYmxlLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+i3s+i9rOWbnuWkjQogICAgdG9SZXBseSgpIHsKICAgICAgY29uc29sZS5sb2coJ3JlcGx5Jyk7CiAgICB9LAogICAgaGFuZGxlQWN0aW9uKGFjdGlvbiwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKGFjdGlvbikgewogICAgICAgIGNhc2UgJ2VkaXQnOgogICAgICAgICAgdGhpcy5lZGl0Q2F0YWxvZ05hbWUoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICB0aGlzLmRlbGV0ZVF1ZXN0KHRoaXMuc2VsZWN0ZWRSb3dzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2FkZFBhcmVudCc6CiAgICAgICAgICB0aGlzLmRpYWxvZ1R5cGUgPSBhY3Rpb247CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdhZGRTdWInOgogICAgICAgICAgdGhpcy5kaWFsb2dUeXBlID0gYWN0aW9uOwogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtRGF0YSA9IHsKICAgICAgICAgICAgYWRkU3ViUGFyZW50OiB0aGlzLnNlbGVjdGVkUm93cy5pZAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIC8vIOmakOiXj+iPnOWNlQogICAgICB0aGlzLmhpZGVDb250ZW50TWVudSgpOwogICAgfSwKICAgIG9uQ29udGV4dE1lbnUoZXZlbnQsIHJvdykgewogICAgICAvLyDmlofnq6DoioLngrnkuI3mmL7npLrkuIrkuIvmlofoj5zljZUKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3c7CiAgICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTsKICAgICAgLy8g5pyq5riy5p+T5LiN6IO96I635Y+W6auY5bqmCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLm1lbnVUb3AgPSBldmVudC5jbGllbnRZOwogICAgICAgIHRoaXMubWVudUxlZnQgPSBldmVudC5jbGllbnRYOwoKICAgICAgICAvLyDlpITnkIboj5zljZXooqvpga7mjKHpl67popgKICAgICAgICB2YXIgaHRtbEhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7CiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuJHJlZnMuY29udGVudE1lbnUuc2Nyb2xsSGVpZ2h0OwogICAgICAgIGlmIChldmVudC5jbGllbnRZICsgaGVpZ2h0ID4gaHRtbEhlaWdodCkgewogICAgICAgICAgdGhpcy5tZW51VG9wID0gZXZlbnQuY2xpZW50WSAtIGhlaWdodDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXRDYXRhbG9nTmFtZSgpIHsKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ2VkaXQnOwogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+e8lui+kSc7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93cyAmJiB0aGlzLnNlbGVjdGVkUm93cy5wYXJlbnRJZCAhPT0gMCkgewogICAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEgPSB7CiAgICAgICAgICBlZGl0TGV2ZWw6IDIsCiAgICAgICAgICBlZGl0UGFyZW50OiB0aGlzLnNlbGVjdGVkUm93cy5wYXJlbnRJZCB8fCAnJywKICAgICAgICAgIGVkaXROYW1lOiB0aGlzLnNlbGVjdGVkUm93cy5jYXRhbG9nTmFtZSB8fCAnJwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtRGF0YSA9IHsKICAgICAgICAgIGVkaXRMZXZlbDogMSwKICAgICAgICAgIGVkaXRQYXJlbnQ6ICcnLAogICAgICAgICAgZWRpdE5hbWU6ICh0aGlzLnNlbGVjdGVkUm93cyAmJiB0aGlzLnNlbGVjdGVkUm93cy5jYXRhbG9nTmFtZSkgfHwgJycKICAgICAgICB9OwogICAgICB9CgogICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgYWRkQ2F0YWxvZ05hbWUoKSB7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICdhZGRNZW51JzsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICcg5paw5bu6JzsKICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhpZGVDb250ZW50TWVudSgpIHsKICAgICAgdGhpcy5pc1Nob3cgPSBmYWxzZTsKICAgIH0sCiAgICBwcmV2aWV3QXJ0aWNsZShyb3cpIHsKICAgICAgdGhpcy5wcmV2aWV3RGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICBjb250ZW50RGV0YWlsKHsgaWQ6IHJvdy5pZCB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcyk7CiAgICAgICAgdGhpcy5wcmV2aWV3RGF0YSA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMucHJldmlld0ZpbGVzID0KICAgICAgICAgICh0aGlzLnByZXZpZXdEYXRhLmZpbGVzICYmIEpTT04ucGFyc2UodGhpcy5wcmV2aWV3RGF0YS5maWxlcykpIHx8IFtdOwogICAgICB9KTsKICAgIH0sCiAgICB0b0NvbW1lbnQocm93KSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL21lc3NhZ2VNYW5hZ2UnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjYXRhbG9nTmFtZTogcm93LmNhdGFsb2dOYW1lCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/school-book/views/menuManage","sourcesContent":["<template>\n  <div\n    class=\"app-container\"\n    @mouseleave=\"hideContentMenu\"\n    @click=\"hideContentMenu\"\n  >\n    <b-table\n      ref=\"bTable\"\n      loading\n      default-expand-all\n      empty-text=\"目录管理暂无数据\"\n      :headers=\"headers\"\n      row-key=\"id\"\n      :form-items=\"formItems\"\n      :ajax-get-data=\"ajaxGetData\"\n      :toolbars=\"toolbars\"\n      :show-column=\"false\"\n      :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\n    >\n      <template slot=\"column|status\" slot-scope=\"{ row }\">\n        <span\n          >{{\n            ($D('MLGL_ZT').find(item => item.value == row.status) &&\n              $D('MLGL_ZT').find(item => item.value == row.status)['label']) ||\n              '-'\n          }}\n        </span>\n      </template>\n      <template slot=\"column|commentCount\" slot-scope=\"{ row }\">\n        <span\n          @click=\"toComment(row)\"\n          v-if=\"row.commentCount || row.commentCount === 0\"\n          class=\"comment-number\"\n          >{{ row.commentCount }}</span\n        >\n        <span v-else>-</span>\n      </template>\n\n      <template slot=\"column|checkResult\" slot-scope=\"{ row }\">\n        {{\n          ($D('SHJG').find(item => item.value == row.online) &&\n            $D('SHJG').find(item => item.value == row.online)['label']) ||\n            '-'\n        }}\n      </template>\n      <template slot=\"column|catalogType\" slot-scope=\"{ row }\">\n        <span\n          >{{\n            ($D('CATALOG_TYPE').find(item => item.value == row.catalogType) &&\n              $D('CATALOG_TYPE').find(item => item.value == row.catalogType)[\n                'label'\n              ]) ||\n              '-'\n          }}\n        </span>\n      </template>\n      <template slot=\"column|catalogName\" slot-scope=\"{ row }\">\n        <span @contextmenu.prevent=\"onContextMenu($event, row)\"\n          >{{ row.catalogName }}\n        </span>\n      </template>\n      <template slot=\"column|noPassReason\" slot-scope=\"{ row }\">\n        <span v-if=\"row.nopassKey && row.nopassKey != 4\"\n          >{{ $D('BTGYY')[row.nopassKey]['label'] }}\n        </span>\n        <span v-else-if=\"row.nopassKey && row.nopassKey == 4\">\n          {{ row.nopassReason }}\n        </span>\n        <span v-else> - </span>\n      </template>\n\n      <template slot=\"column|opera\" slot-scope=\"{ row }\">\n        <div>\n          <el-button\n            size=\"small\"\n            type=\"text\"\n            :disabled=\"row.status == '2'\"\n            @click.stop=\"operaBtn(row, 'edit')\"\n            >编辑</el-button\n          >\n          <el-button\n            v-if=\"row.catalogId\"\n            v-auth=\"['check-article']\"\n            size=\"small\"\n            type=\"text\"\n            @click.stop=\"operaBtn(row, 'check')\"\n            >审核</el-button\n          >\n          <el-button\n            v-if=\"row.catalogId\"\n            size=\"small\"\n            type=\"text\"\n            @click.stop=\"operaBtn(row, 'preview')\"\n            >预览</el-button\n          >\n          <el-button\n            size=\"small\"\n            type=\"text\"\n            v-auth=\"['delete-article']\"\n            @click.stop=\"operaBtn(row, 'delete')\"\n            >删除</el-button\n          >\n          <el-button\n            size=\"small\"\n            v-if=\"row.catalogId\"\n            v-auth=\"['online-article']\"\n            :disabled=\"\n              row.status == '0' || (row.status == '1' && row.online != 1)\n            \"\n            type=\"text\"\n            @click.stop=\"operaBtn(row, 'onLine')\"\n            >上线</el-button\n          >\n          <el-button\n            size=\"small\"\n            v-if=\"row.catalogId\"\n            v-auth=\"['offline-article']\"\n            :disabled=\"row.status != '2'\"\n            type=\"text\"\n            @click.stop=\"operaBtn(row, 'offLine')\"\n            >下线</el-button\n          >\n        </div>\n      </template>\n      <!-- <template slot=\"column|commentCount\" slot-scope=\"{ row }\">\n        <el-button size=\"mini\" type=\"text\" @click.stop=\"toReply\">\n          {{ row.commentCount }}条回复</el-button\n        >\n      </template>\n      <template slot=\"column|unreviewedCommentCount\" slot-scope=\"{ row }\">\n        <el-button size=\"mini\" type=\"text\" @click.stop=\"toReply\">\n          {{ row.unreviewedCommentCount }}条回复</el-button\n        >\n      </template> -->\n    </b-table>\n    <!-- 审核弹窗 -->\n    <el-dialog\n      width=\"560px\"\n      center\n      :visible.sync=\"dialogForm.visible\"\n      :title=\"dialogTitle\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"onBeforeClose\"\n      @close=\"onCloseForm\"\n    >\n      <b-table\n        v-if=\"dialogType == 'detail'\"\n        ref=\"dialogBTable\"\n        loading\n        empty-text=\"操作记录暂无数据\"\n        :headers=\"Dialogheaders\"\n        :pageSizes=\"[10]\"\n        :pageLimit=\"10\"\n        row-key=\"id\"\n        :ajax-get-data=\"ajaxGetDialogData\"\n        :show-column=\"false\"\n      >\n        <template slot=\"column|logType\" slot-scope=\"{ row }\">\n          <span>{{\n            ($D('LOG_TYPE')[row.logType] &&\n              $D('LOG_TYPE')[row.logType]['label']) ||\n              '-'\n          }}</span>\n        </template>\n      </b-table>\n      <c-dynamic-form\n        v-if=\"dialogType != 'detail'\"\n        ref=\"elForm\"\n        :formData=\"dialogFormData\"\n        :form-items=\"dialogFormItems\"\n        :form-attrs=\"dialogFormAttrs\"\n        @change-model=\"model => (dialogFormData = model)\"\n      ></c-dynamic-form>\n      <span v-if=\"dialogType != 'detail'\" slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          size=\"small\"\n          :loading=\"dialogForm.loading\"\n          @click=\"onCloseForm\"\n        >\n          取消\n        </el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"dialogForm.loading\"\n          @click.stop.prevent=\"onSubmitForm\"\n        >\n          确定\n        </el-button>\n      </span>\n    </el-dialog>\n    <el-dialog\n      width=\"830px\"\n      center\n      :visible.sync=\"previewDialog.visible\"\n      title=\"预览\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      @close=\"onCloseFormPreview\"\n    >\n      <div class=\"preview-wrap\">\n        <div class=\"preview-title\">{{ previewData.catalogName }}</div>\n        <div class=\"preview-content\">\n          <div v-html=\"previewData.content\"></div>\n        </div>\n        <div class=\"preview-file\" v-if=\"previewFiles.length\">\n          附件:\n          <div v-for=\"item in previewFiles\" :key=\"item.url\">\n            {{ item.name }}\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n    <ul\n      ref=\"contentMenu\"\n      v-show=\"isShow\"\n      class=\"content-menu-ul\"\n      :style=\"{\n        top: menuTop + 'px',\n        left: menuLeft + 'px'\n      }\"\n      @click.stop\n    >\n      <li\n        v-for=\"(item, index) in options\"\n        :key=\"index\"\n        :class=\"{\n          disabled: disabledMenuOptions.indexOf(item.action) !== -1\n        }\"\n        @click.stop=\"\n          disabledMenuOptions.indexOf(item.action) !== -1 ||\n            handleAction(item.action, item)\n        \"\n      >\n        <slot name=\"option\" v-bind=\"item\">\n          <i v-if=\"item.icon\" class=\"iconfont\" :class=\"item.icon\"></i\n          >{{ item.text }}\n        </slot>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport BTable from '@/components/business/BTable';\nimport CDynamicForm from '@/components/common/CDynamicForm/index';\nimport { Dialog, Button, Message } from 'element-ui';\nimport config from './../../config';\nimport {\n  getCatalogPage,\n  getCatalogList,\n  addCatalog,\n  addParentCatalog,\n  updateCatalog,\n  deleteCatalog,\n  catalogLogDetail,\n  contentDetail,\n  deleteContent,\n  deleteContentBatch,\n  checkContent,\n  onLineContent\n} from './../../api/data';\nexport default {\n  name: 'AnswerList',\n  components: {\n    BTable,\n    CDynamicForm,\n    [Dialog.name]: Dialog,\n    [Button.name]: Button\n  },\n  props: {},\n\n  data() {\n    return {\n      //图片前缀\n      // 表单列\n      headers: [\n        {\n          type: 'selection'\n        },\n        {\n          type: 'index',\n          label: '序号'\n          // prop: 'num'\n        },\n        {\n          label: '编号',\n          prop: 'catalogCode',\n          type: ''\n        },\n        {\n          label: '目录级别',\n          prop: 'catalogType',\n          type: '',\n          colType: 'column'\n        },\n        {\n          label: '目录名称',\n          prop: 'catalogName',\n          width: '200px',\n          colType: 'column'\n        },\n        {\n          label: '点赞数',\n          prop: 'likeCount'\n        },\n        {\n          label: '留言数',\n          colType: 'column',\n          prop: 'commentCount'\n        },\n        {\n          label: '编辑时间',\n          width: '160',\n          prop: 'updateTime'\n        },\n        {\n          label: '编辑人',\n          width: '160',\n          prop: 'editor'\n        },\n        {\n          label: '审核时间',\n          width: '160',\n          prop: 'reviewTime'\n        },\n        {\n          label: '上线时间',\n          width: '160',\n          prop: 'onlineTime'\n        },\n        {\n          label: '下线时间',\n          width: '160',\n          prop: 'offlineTime'\n        },\n        {\n          label: '状态',\n          prop: 'status',\n          colType: 'column'\n        },\n        {\n          label: '审核结果',\n          colType: 'column',\n          slotName: 'checkResult'\n        },\n        {\n          label: '审核未通过原因',\n          colType: 'column',\n          slotName: 'noPassReason'\n        },\n        {\n          label: '操作记录',\n          colType: 'btns',\n          btns: [\n            {\n              label: '查看详情',\n              type: 'text',\n              size: 'mini',\n              click: this.operaDetail\n            }\n          ]\n        },\n        {\n          label: '操作',\n          width: '200',\n          slotName: 'opera',\n          colType: 'column',\n          btns: []\n        }\n      ],\n      Dialogheaders: [\n        {\n          label: '操作人',\n          prop: 'creator'\n        },\n        {\n          label: '操作类型',\n          prop: 'logType',\n          colType: 'column'\n        },\n        {\n          label: '操作时间',\n          prop: 'createTime'\n        }\n      ],\n      // 查询表单配置\n      formItems: [\n        {\n          type: 'input',\n          prop: 'catalogName',\n          label: '文章名称：',\n          attrs: [\n            {\n              placeholder: '请输入标题关键字'\n            }\n          ]\n        },\n        {\n          type: 'select',\n          prop: 'status',\n          label: '状态：',\n          options: this.$D('MLGL_ZT')\n        },\n        {\n          type: 'date-picker',\n          prop: 'editTime',\n          label: '编辑时间：',\n          attrs: {\n            type: 'daterange',\n            'value-format': 'yyyy-MM-dd',\n            // TODO 时间格式\n            'start-placeholder': '开始日期',\n            'end-placeholder': '结束日期'\n          }\n        },\n        {\n          type: 'date-picker',\n          prop: 'reviewTime',\n          label: '审核时间：',\n          attrs: {\n            type: 'daterange',\n            'value-format': 'yyyy-MM-dd',\n            // TODO 时间格式\n            'start-placeholder': '开始日期',\n            'end-placeholder': '结束日期'\n          }\n        }\n      ],\n      dialogTitle: '',\n      dialogType: '',\n      // 工具栏\n      toolbars: [\n        {\n          label: '批量删除',\n          click: this.deleteQuest\n        },\n        {\n          label: '新建目录',\n          click: this.addCatalogName\n        },\n        {\n          label: '新增文章',\n          click: this.addArticle\n        }\n      ],\n      //弹窗表单\n      dialogForm: {\n        visible: false,\n        loading: false\n      },\n      previewDialog: {\n        visible: false\n      },\n      //弹窗表单属性\n      dialogFormAttrs: {\n        'label-position': 'right',\n        'label-width': '130px',\n        rules: {\n          addParentName: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '目录名称未填写'\n            }\n          ],\n          addSubName: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '目录名称未填写'\n            }\n          ],\n          editLevel: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '请选择是否为一级目录'\n            }\n          ],\n          editParent: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '请选择上级目录'\n            }\n          ],\n          editName: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '目录名称未填写'\n            }\n          ],\n          checkCustomReason: [\n            {\n              required: true,\n              trigger: 'change',\n              message: '自定义原因未填写'\n            }\n          ]\n        }\n      },\n      //弹窗表单默认值（编辑时传入）\n      dialogFormData: {},\n      //表格选中行数\n      selectedRows: null,\n      // 是否显示\n      isShow: false,\n      // 菜单位置\n      menuTop: 0,\n      menuLeft: 0,\n      //预览文章数据\n      previewData: {},\n      previewFiles: [],\n      // 选项\n      options: [\n        {\n          text: '编辑',\n          action: 'edit',\n          icon: 'icon_bianji'\n        },\n        {\n          text: '删除',\n          action: 'delete',\n          icon: 'icon_shanchu3'\n        },\n        {\n          text: '新增上级目录',\n          action: 'addParent'\n        },\n        {\n          text: '新增下级目录',\n          action: 'addSub'\n        }\n      ]\n    };\n  },\n  computed: {\n    /**\n     * 禁用的菜单选项\n     */\n    disabledMenuOptions() {\n      let arr = [];\n      if (!this.isCanDelCurrentNode) arr.push('delete');\n      if (!this.isCanNewParentDir) arr.push('addParent');\n      if (!this.isCanNewLowerDir) arr.push('addSub');\n      return arr;\n    },\n    /**\n     * 是否可以删除当前节点\n     */\n    isCanDelCurrentNode() {\n      if (this.selectedRows && !this.selectedRows.catalogId) {\n        return false;\n      }\n      return true;\n    },\n    /**\n     * 是否可以新增上级目录\n     */\n    isCanNewParentDir() {\n      console.log(this.selectedRows);\n\n      if (this.selectedRows && this.selectedRows.parentId === 0) {\n        return false;\n      }\n      // let currentNode = this.currentNode\n      // return !(currentNode && currentNode.level === 1);\n      return true;\n    },\n    /**\n     * 是否可以新增下级目录\n     */\n    isCanNewLowerDir() {\n      // let currentNode = this.currentNode\n      // return !(currentNode && currentNode.data.contentId);\n      return true;\n    },\n    dialogFormItems() {\n      let dialogType = this.dialogType;\n      let result;\n      switch (dialogType) {\n        case 'addParent':\n          result = [\n            {\n              type: 'input',\n              prop: 'addParentName',\n              label: '目录名称：',\n              attrs: {\n                placeholder: '30字以内',\n                maxlength: 30\n              }\n            }\n          ];\n          break;\n        case 'addSub':\n          result = [\n            {\n              type: 'select',\n              prop: 'addSubParent',\n              label: '上级目录：',\n              attrs: {\n                disabled: true\n              },\n              ajax: function() {\n                return getCatalogList().then(data => data.data);\n              },\n              labelKey: 'catalogName',\n              valueKey: 'id'\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            },\n            {\n              type: 'input',\n              prop: 'addSubName',\n              label: '目录名称：',\n              attrs: {\n                placeholder: '30字以内',\n                maxlength: 30\n              }\n            }\n          ];\n          break;\n        case 'edit':\n          result = [\n            {\n              type: 'radio',\n              prop: 'editLevel',\n              label: '一级目录：',\n              attrs: {},\n              options: [\n                {\n                  label: '是',\n                  value: 1\n                },\n                {\n                  label: '否',\n                  value: 2\n                }\n              ]\n            },\n            {\n              type: 'select',\n              prop: 'editParent',\n              hidden:\n                !this.dialogFormData.editLevel ||\n                (this.dialogFormData.editLevel &&\n                  this.dialogFormData.editLevel == '1'),\n              label: '上级目录：',\n              attrs: {\n                // disabled: true\n              },\n              ajax: function() {\n                return getCatalogList().then(data => data.data);\n              },\n              labelKey: 'catalogName',\n              valueKey: 'id'\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            },\n            {\n              type: 'input',\n              prop: 'editName',\n              label: '目录名称：',\n              attrs: {\n                placeholder: '30字以内',\n                maxlength: 30\n              }\n            }\n          ];\n          break;\n        case 'addMenu':\n          result = [\n            {\n              type: 'radio',\n              prop: 'editLevel',\n              label: '一级目录：',\n              attrs: {},\n              options: [\n                {\n                  label: '是',\n                  value: 1\n                },\n                {\n                  label: '否',\n                  value: 2\n                }\n              ]\n            },\n            {\n              type: 'select',\n              prop: 'editParent',\n              hidden:\n                !this.dialogFormData.editLevel ||\n                (this.dialogFormData.editLevel &&\n                  this.dialogFormData.editLevel == '1'),\n              label: '上级目录：',\n              attrs: {\n                // disabled: true\n              },\n              ajax: function() {\n                return getCatalogList().then(data => data.data);\n              },\n              labelKey: 'catalogName',\n              valueKey: 'id'\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            },\n            {\n              type: 'input',\n              prop: 'editName',\n              label: '目录名称：',\n              attrs: {\n                placeholder: '30字以内',\n                maxlength: 30\n              }\n            }\n          ];\n          break;\n        case 'check':\n          result = [\n            {\n              type: 'select',\n              prop: 'checkResult',\n              label: '审核结果：',\n              attrs: {},\n              options: this.$D('SHJG')\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            },\n            {\n              type: 'select',\n              prop: 'checkReason',\n              label: '不通过原因：',\n              hidden:\n                !this.dialogFormData.checkResult ||\n                this.dialogFormData.checkResult != '0',\n              attrs: {},\n              options: this.$D('BTGYY')\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            },\n            {\n              type: 'input',\n              prop: 'checkCustomReason',\n              hidden:\n                !this.dialogFormData.checkReason ||\n                this.dialogFormData.checkReason != '4',\n              label: '自定义原因：',\n              attrs: {\n                placeholder: '15字以内',\n                maxlength: 15\n              }\n              // ajax: function() {\n              //   return querySchoolInfoList({ codeType: 2 }).then(data => data.data);\n              // }\n            }\n          ];\n          break;\n        default:\n          result = [];\n          break;\n      }\n      return result;\n    }\n  },\n  watch: {},\n  created() {},\n  mounted() {},\n  methods: {\n    /**\n     * 请求table数据\n     */\n    ajaxGetData(data) {\n      const { editTime, reviewTime } = data;\n      const params = Object.assign(\n        {\n          startUpdateTime: (editTime && editTime[0]) || null,\n          endUpdateTime: (editTime && editTime[1]) || null,\n          startReviewTime: (reviewTime && reviewTime[0]) || null,\n          endReviewTime: (reviewTime && reviewTime[1]) || null\n        },\n        data,\n        { editTime: null, reviewTime: null }\n      );\n      // return getCatalogPage(params);\n      return getCatalogPage(params).then(res => {\n        return new Promise(resolve => {\n          const list = res.data.records || [];\n          const tree = this.$util.listConvertTree(list);\n          res.data.records = tree;\n          resolve(res);\n        });\n      });\n      // return new Promise(resolve => {\n      //   setTimeout(() => {\n      //     let list = [];\n      //     for (let i = 0; i < 10; i++) {\n      //       list.push({\n      //         id: i,\n      //         num: i,\n      //         typeCode: 'typeCode' + i,\n      //         typeName: '分类名称' + i,\n      //         sort: '排序值' + i,\n      //         time: '编辑时间'\n      //       });\n      //     }\n      //     resolve({\n      //       status: 200,\n      //       data: {\n      //         total: 10,\n      //         records: list\n      //       }\n      //     });\n      //   }, 500);\n      // });\n    },\n    ajaxGetDialogData(data) {\n      return catalogLogDetail(\n        Object.assign({}, data, { id: this.selectedRows.id })\n      );\n    },\n    //处理图片文件\n    getFileList(data) {\n      const list = JSON.parse(data);\n      let urlList = [];\n      for (let i = 0; i < list.length; i++) {\n        list[i].url = config.FILE_PREFIX + list[i].url;\n        urlList.push(list[i].url);\n      }\n      return {\n        list: list,\n        urlList: urlList\n      };\n    },\n    //下载文件\n    downloadFile(item) {\n      window.open(item.url);\n    },\n    /**\n     * 初始化新建表单的数据默认值\n     */\n    initDialogFormData() {\n      this.dialogFormData = {};\n    },\n    /**\n     * 关闭窗口前处理\n     */\n    onBeforeClose(done) {\n      if (this.dialogForm.loading) return;\n      done();\n    },\n    //关闭预览弹窗\n    onCloseFormPreview() {\n      this.previewData.visible = false;\n      this.previewFiles = [];\n      this.previewData = {};\n    },\n    /**\n     * 表单关闭前清除校验并重置数据\n     */\n    onCloseForm() {\n      // this.$refs['dialogForm'].resetFields();\n      this.initDialogFormData();\n      this.dialogForm.visible = false;\n      this.dialogType = '';\n      this.$refs['elForm'] && this.$refs['elForm'].resetFields();\n    },\n    /**\n     * 操作按钮\n     */\n    operaBtn(row, type) {\n      this.isShow = false;\n      switch (type) {\n        case 'onLine':\n          return onLineContent({ id: row.id, code: 2 }).then(res => {\n            this.$message({\n              message: '上线成功',\n              type: 'success'\n            });\n            this.submitDone();\n          });\n        case 'offLine':\n          return onLineContent({ id: row.id, code: 3 }).then(res => {\n            this.$message({\n              message: '下线成功',\n              type: 'success'\n            });\n            this.submitDone();\n          });\n        case 'delete':\n          this.deleteQuest(row);\n          break;\n        case 'check':\n          this.dialogForm.visible = true;\n          this.selectedRows = row;\n          this.dialogType = type;\n          this.dialogTitle = '审核';\n          break;\n        case 'edit':\n          this.selectedRows = row;\n          if (row.catalogId) {\n            this.$router.push({\n              path: '/editArticle',\n              query: {\n                contentId: row.id,\n                parentId: row.parentId\n              }\n            });\n          } else {\n            this.editCatalogName();\n          }\n          break;\n        case 'preview':\n          this.previewArticle(row);\n          break;\n        default:\n          break;\n      }\n    },\n    /**\n     * 提交表单\n     */\n    onSubmitForm() {\n      const dialogType = this.dialogType;\n      switch (dialogType) {\n        case 'addParent':\n          return this.$refs['elForm'].validate().then(() => {\n            const { addParentName } = this.dialogFormData;\n            console.log('selected', this.selectedRows);\n            // 校验成功\n            addParentCatalog({\n              catalogId: this.selectedRows && this.selectedRows.id,\n              parentName: addParentName\n            }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '添加成功!'\n              });\n              this.submitDone();\n            });\n          });\n        case 'addSub':\n          return this.$refs['elForm'].validate().then(() => {\n            const { addSubParent, addSubName } = this.dialogFormData;\n            // 校验成功\n            addCatalog({\n              parentId: addSubParent,\n              catalogName: addSubName\n            }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '添加成功!'\n              });\n              this.submitDone();\n            });\n          });\n        case 'edit':\n          return this.$refs['elForm'].validate().then(() => {\n            const { editLevel, editParent, editName } = this.dialogFormData;\n            // 校验成功\n            updateCatalog({\n              id: (this.selectedRows && this.selectedRows.id) || '',\n              parentId: editLevel == 1 ? 0 : editParent,\n              catalogName: editName\n            }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '编辑成功!'\n              });\n              this.submitDone();\n            });\n          });\n        case 'check':\n          return this.$refs['elForm'].validate().then(() => {\n            const {\n              checkResult,\n              checkReason,\n              checkCustomReason\n            } = this.dialogFormData;\n            // 校验成功\n            checkContent({\n              id: this.gerSelectIds(),\n              code: checkResult,\n              nopassKey: checkReason,\n              nopassReason: checkCustomReason\n            }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '审核成功!'\n              });\n              this.submitDone();\n            });\n          });\n        case 'addMenu':\n          // 校验成功\n          return this.$refs['elForm'].validate().then(() => {\n            const { editLevel, editParent, editName } = this.dialogFormData;\n            // 校验成功\n            addCatalog({\n              parentId: editLevel == 1 ? 0 : editParent,\n              catalogName: editName\n            }).then(res => {\n              this.$message({\n                type: 'success',\n                message: '新建成功!'\n              });\n              this.submitDone();\n            });\n          });\n        default:\n          break;\n      }\n    },\n    submitDone() {\n      this.dialogForm.visible = false;\n      this.dialogForm.loading = false;\n      this.initDialogFormData();\n      this.$refs.bTable.ajaxGetTableDataByPage();\n    },\n    //获取选中 Id\n    gerSelectIds() {\n      let rows = '';\n      if (!this.selectedRows) {\n        return;\n      }\n      if (Array.isArray(this.selectedRows)) {\n        for (let i = 0; i < this.selectedRows.length; i++) {\n          rows += this.selectedRows[i].id + ',';\n        }\n      } else {\n        rows = this.selectedRows.id;\n      }\n      return rows;\n    },\n    /**\n     * 审核问题\n     */\n    onExamineQuest(rows) {\n      this.dialogType = 'exam';\n      this.dialogTitle = '审核';\n      this.selectedRows = rows;\n      if (!rows || rows.length === 0) {\n        this.$message('至少选择一个留言');\n        return;\n      }\n      this.dialogForm.visible = true;\n    },\n    operaDetail(rows) {\n      this.dialogType = 'detail';\n      this.dialogTitle = '操作记录';\n      this.selectedRows = rows;\n      this.dialogForm.visible = true;\n    },\n    onReplyQuest(rows) {\n      this.dialogType = 'reply';\n      this.dialogTitle = '回复';\n      this.selectedRows = rows;\n      console.log('rows', rows);\n      if (!rows || rows.length === 0) {\n        this.$message('至少选择一个留言');\n        return;\n      }\n      this.dialogForm.visible = true;\n    },\n    //新增文章\n    addArticle() {\n      console.log('aaa');\n      this.$router.push({\n        path: '/editArticle'\n      });\n    },\n    /**\n     * 删除目录\n     */\n    deleteQuest(rows) {\n      console.log(rows);\n      if (!rows || rows.length === 0) {\n        this.$message('至少选择一个目录');\n        return;\n      }\n      this.$confirm('确定要删除当前目录?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.selectedRows = rows;\n        deleteCatalog({ ids: this.gerSelectIds() }).then(res => {\n          this.$refs.bTable.ajaxGetTableDataByPage();\n          this.selectedRows = [];\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n        });\n      });\n    },\n    /**\n     * 删除文章\n     */\n    deleteContent(rows) {\n      if (!rows || rows.length === 0) {\n        this.$message('至少选择一个文章');\n        return;\n      }\n      this.$confirm('确定要删除当前文章?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.selectedRows = rows;\n        deleteContentBatch({ ids: this.gerSelectIds() }).then(res => {\n          this.$refs.bTable.ajaxGetTableDataByPage();\n          this.selectedRows = [];\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n        });\n      });\n    },\n    //跳转回复\n    toReply() {\n      console.log('reply');\n    },\n    handleAction(action, options) {\n      switch (action) {\n        case 'edit':\n          this.editCatalogName();\n          break;\n        case 'delete':\n          this.deleteQuest(this.selectedRows);\n          break;\n        case 'addParent':\n          this.dialogType = action;\n          this.dialogForm.visible = true;\n          break;\n        case 'addSub':\n          this.dialogType = action;\n          this.dialogFormData = {\n            addSubParent: this.selectedRows.id\n          };\n          this.dialogForm.visible = true;\n          break;\n      }\n      // 隐藏菜单\n      this.hideContentMenu();\n    },\n    onContextMenu(event, row) {\n      // 文章节点不显示上下文菜单\n      this.selectedRows = row;\n      this.isShow = true;\n      // 未渲染不能获取高度\n      this.$nextTick(() => {\n        this.menuTop = event.clientY;\n        this.menuLeft = event.clientX;\n\n        // 处理菜单被遮挡问题\n        var htmlHeight = document.documentElement.scrollHeight;\n        var height = this.$refs.contentMenu.scrollHeight;\n        if (event.clientY + height > htmlHeight) {\n          this.menuTop = event.clientY - height;\n        }\n      });\n    },\n    editCatalogName() {\n      this.dialogType = 'edit';\n      this.dialogTitle = '编辑';\n      if (this.selectedRows && this.selectedRows.parentId !== 0) {\n        this.dialogFormData = {\n          editLevel: 2,\n          editParent: this.selectedRows.parentId || '',\n          editName: this.selectedRows.catalogName || ''\n        };\n      } else {\n        this.dialogFormData = {\n          editLevel: 1,\n          editParent: '',\n          editName: (this.selectedRows && this.selectedRows.catalogName) || ''\n        };\n      }\n\n      this.dialogForm.visible = true;\n    },\n    addCatalogName() {\n      this.dialogType = 'addMenu';\n      this.dialogTitle = ' 新建';\n      this.dialogForm.visible = true;\n    },\n    hideContentMenu() {\n      this.isShow = false;\n    },\n    previewArticle(row) {\n      this.previewDialog.visible = true;\n      contentDetail({ id: row.id }).then(res => {\n        console.log('res', res);\n        this.previewData = res.data;\n        this.previewFiles =\n          (this.previewData.files && JSON.parse(this.previewData.files)) || [];\n      });\n    },\n    toComment(row) {\n      this.$router.push({\n        path: '/messageManage',\n        query: {\n          catalogName: row.catalogName\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import './../../assets/less/mixins/mixins';\n.reason-input {\n  width: 198px;\n}\n.content-menu-ul {\n  position: fixed;\n  z-index: 100;\n  width: .px2Rem(108px) [ @rem];\n  padding: .px2Rem(12px) [ @rem];\n  background: #ffffff;\n  box-shadow: .px2Rem(0px) [ @rem] .px2Rem(9px) [ @rem] .px2Rem(28px) [ @rem]\n      .px2Rem(8px) [ @rem] rgba(0, 0, 0, 0.05),\n    .px2Rem(0px) [ @rem] .px2Rem(6px) [ @rem] .px2Rem(16px) [ @rem] .px2Rem(0px)\n      [ @rem] rgba(0, 0, 0, 0.08),\n    .px2Rem(0px) [ @rem] .px2Rem(3px) [ @rem] .px2Rem(6px) [ @rem] .px2Rem(-4px)\n      [ @rem] rgba(0, 0, 0, 0.12);\n  border-radius: .px2Rem(2px) [ @rem];\n  li {\n    user-select: none;\n    color: rgba(0, 0, 0, 0.65);\n    font-size: .px2Rem(14px) [ @rem];\n    line-height: .px2Rem(22px) [ @rem];\n    cursor: pointer;\n    & + li {\n      margin-top: .px2Rem(4px) [ @rem];\n    }\n    &:hover {\n      color: #1890ff;\n    }\n    &.disabled {\n      color: rgba(0, 0, 0, 0.45);\n      cursor: no-drop;\n    }\n  }\n  // &::before {\n  //   display: inline-block;\n  //   content: '';\n  //   width: 0;\n  //   height: 0;\n  //   border: .px2Rem(10px) solid transparent;\n  //   border-bottom-color: #fff;\n  //   top: .px2Rem(-20px);\n  // }\n  .iconfont {\n    font-size: .px2Rem(14px) [ @rem];\n    margin-right: .px2Rem(4px) [ @rem];\n  }\n}\n.preview-wrap {\n  height: 500px;\n}\n.preview-title {\n  font-weight: 500;\n  color: #000000;\n  line-height: 28px;\n  text-align: center;\n}\n.preview-content {\n  margin-top: 20px;\n}\n.preview-file {\n  margin-top: 20px;\n  font-size: 14px;\n}\n.comment-number {\n  color: #409eff;\n  cursor: pointer;\n  text-decoration: underline;\n}\n</style>\n"]}]}