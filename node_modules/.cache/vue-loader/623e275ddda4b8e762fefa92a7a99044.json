{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-book/views/statisticalChart/StatisticalChart.vue?vue&type=style&index=0&id=3952968d&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-book/views/statisticalChart/StatisticalChart.vue","mtime":1627979214329},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWNoYXJ0cy13cmFwcGVyIHsKICAvLyB3aWR0aDogMHB4OwogIGJhY2tncm91bmQ6ICNmZmZmZmY7CiAgcGFkZGluZzogMjBweDsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLmVjaGFydHMtYm94IHsKICBtaW4taGVpZ2h0OiAzNDBweDsKfQouZWNoYXJ0cy1jb250YWluZXIgewogIHdpZHRoOiA1NDBweDsKICBoZWlnaHQ6IDM0MHB4OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwOwogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzAwMDsKfQouZWNoYXJ0cy10aXRsZSB7CiAgY29sb3I6ICMwMDA7CiAgZm9udC1zaXplOiAyMHB4OwogIGhlaWdodDogNDBweDsKICBsaW5lLWhlaWdodDogNDBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmVjaGFydHMtdGl0bGUtY2lyY2xlIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHRvcDogLTRweDsKICB3aWR0aDogMTBweDsKICBoZWlnaHQ6IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIG1hcmdpbjogMHB4IDVweCAwIDA7Cn0KLnRhYmxlLXdyYXBwZXIgewogIG1hcmdpbi10b3A6IDIwcHg7Cn0KLnRhYmxlLWxlZnQsCi50YWJsZS1yaWdodCB7CiAgd2lkdGg6IDQ5JTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KLnRhYmxlLWxlZnQgewogIG1hcmdpbi1yaWdodDogMiU7Cn0KLmRhdGUtcGlja2VyIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDE2MHB4OwogIC8vIGZsb2F0OiByaWdodDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDIwcHg7Cn0KLnRhYmxlLXdyYXBwZXIgewogIG1pbi1oZWlnaHQ6IDI5OHB4OwogIGRpc3BsYXk6IGZsZXg7Cn0KLmJ0bi13cmFwcGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgaGVpZ2h0OiA0MHB4Owp9Ci9kZWVwLy5lbC1idXR0b24tLXdhcm5pbmcgewogIGJhY2tncm91bmQtY29sb3I6ICNmZjk4MDA7CiAgYm9yZGVyLWNvbG9yOiAjZmY5ODAwOwp9Ci9kZWVwLy5lbC1kYXRlLWVkaXRvci5lbC1pbnB1dCB7CiAgd2lkdGg6IDE2MHB4Owp9CgoudGFibGVFbXB0eSB7CiAgaGVpZ2h0OiAyNjBweDsKfQouYWxsRW1wdHkgewogIGhlaWdodDogNjIwcHg7Cn0KLmNoYXJ0c0VtcHR5IHsKICBoZWlnaHQ6IDM0MHB4Owp9Ci5lbXB0eSB7CiAgd2lkdGg6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDA7CiAgYm90dG9tOiAwOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwp9Ci5lbXB0eUltZyB7CiAgd2lkdGg6IDE2MHB4Owp9Ci5lbXB0eVRleHQgewogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMzUpOwp9Cg=="},{"version":3,"sources":["StatisticalChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StatisticalChart.vue","sourceRoot":"src/pages/school-book/views/statisticalChart","sourcesContent":["<template>\n  <div class=\"echarts-wrapper\">\n    <div class=\"echarts-title\">\n      <span class=\"echarts-title-circle\" :style=\"{ background: color }\"></span\n      >{{ title }}\n      <span class=\"date-picker\">\n        <el-date-picker\n          v-model=\"date\"\n          :clearable=\"false\"\n          type=\"month\"\n          format=\"yyyy 年 MM 月\"\n          popper-class=\"statisticalPicker\"\n          @change=\"changeDate\"\n          :picker-options=\"pickerOptions\"\n          placeholder=\"选择日期\"\n        >\n        </el-date-picker>\n      </span>\n    </div>\n    <div class=\"echarts-box\">\n      <div\n        v-show=\"chartsData.length > 0\"\n        class=\"echarts-container\"\n        ref=\"echartsContainer\"\n        id=\"echartsContainer\"\n      ></div>\n    </div>\n    <div class=\"table-wrapper\">\n      <div class=\"table-left\">\n        <el-table\n          border\n          v-if=\"tableLeftData.length > 0\"\n          :data=\"tableLeftData\"\n          style=\"width: 100%\"\n        >\n          <el-table-column\n            show-overflow-tooltip\n            prop=\"staffName\"\n            :label=\"getLabel1()\"\n          >\n          </el-table-column>\n          <el-table-column prop=\"score\" :label=\"getLabel2()\"> </el-table-column>\n          <el-table-column prop=\"rank\" label=\"排行榜\"> </el-table-column>\n        </el-table>\n      </div>\n      <div class=\"table-right\">\n        <el-table\n          border\n          v-if=\"tableRightData.length > 0\"\n          :data=\"tableRightData\"\n          style=\"width: 100%\"\n        >\n          <el-table-column\n            prop=\"staffName\"\n            show-overflow-tooltip\n            :label=\"getLabel1()\"\n          >\n          </el-table-column>\n          <el-table-column prop=\"score\" :label=\"getLabel2()\"> </el-table-column>\n          <el-table-column prop=\"rank\" label=\"排行榜\"> </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <div class=\"btn-wrapper\">\n      <div v-if=\"totalPage > 2\">\n        <el-button type=\"warning\" :disabled=\"current <= 2\" @click=\"prePage\"\n          >上一页</el-button\n        >\n        <el-button\n          type=\"warning\"\n          :disabled=\"!(current < totalPage)\"\n          @click=\"nextPage\"\n          >下一页</el-button\n        >\n      </div>\n    </div>\n    <div\n      v-if=\"chartsData.length === 0 || tableLeftData.length === 0\"\n      class=\"empty\"\n      :class=\"{\n        allEmpty: chartsData.length === 0 && tableLeftData.length === 0,\n        tableEmpty: chartsData.length > 0 && tableLeftData.length === 0,\n        chartsEmpty: chartsData.length === 0 && tableLeftData.length > 0\n      }\"\n    >\n      <img class=\"emptyImg\" src=\"./../../assets/images/空状态@2x.png\" />\n      <div class=\"emptyText\">暂无排行榜</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getStatisticalData } from './../../api/data.js';\nexport default {\n  //   name: 'statisticalChart',\n  props: ['title', 'color', 'type'],\n  data() {\n    return {\n      date: new Date(),\n      tableCol1Name: {\n        '1': '姓名',\n        '2': '文章名称',\n        '3': '姓名',\n        '4': '姓名'\n      },\n      tableCol2Name: {\n        '1': '活跃度',\n        '2': '兴趣度',\n        '3': '留言数',\n        '4': '点赞数'\n      },\n      xData: [],\n      yData: [],\n      current: 2,\n      totalPage: 0,\n      chartsData: [],\n      tableLeftData: [],\n      tableRightData: [],\n      pickerOptions: {\n        disabledDate(time) {\n          return time.getTime() > Date.now();\n        },\n        cellClassName() {\n          return 'myCellName';\n        }\n      }\n    };\n  },\n  mounted() {\n    this.getBarData();\n    this.getStatisticalData();\n    // this.$nextTick(function() {\n    //   this.initCharts();\n    // });\n  },\n  methods: {\n    getLabel1() {\n      let label = '';\n      switch (this.type) {\n        case '2':\n          label = '文章名称';\n          break;\n        default:\n          label = '姓名';\n          break;\n      }\n      return label;\n    },\n    getLabel2() {\n      let label = '';\n      switch (this.type) {\n        case '1':\n          label = '活跃度';\n          break;\n        case '2':\n          label = '兴趣度';\n          break;\n        case '3':\n          label = '留言数';\n          break;\n        case '4':\n          label = '点赞数';\n          break;\n        default:\n          break;\n      }\n      return label;\n    },\n    changeDate() {\n      this.getBarData();\n      this.current = 2;\n      this.getStatisticalData();\n    },\n    getStatisticalData() {\n      let params = {\n        typeId: this.type,\n        countYear: this.date.getFullYear(),\n        countMonth: this.date.getMonth() + 1,\n        current: this.current,\n        size: 10\n      };\n      getStatisticalData(params).then(res => {\n        let resData = (res.data && res.data.records) || [];\n        this.tableLeftData = resData.slice(0, 5);\n        this.tableRightData = resData.slice(5, 10);\n      });\n    },\n    getBarData() {\n      let params = {\n        typeId: this.type,\n        countYear: this.date.getFullYear(),\n        countMonth: this.date.getMonth() + 1,\n        current: 1,\n        size: 10\n      };\n      getStatisticalData(params).then(res => {\n        let resData = (res.data && res.data.records) || [];\n        this.chartsData = resData;\n        this.totalPage = res.data.pages || 0;\n        this.xData = [];\n        this.yData = [];\n        for (let i = 0; i < resData.length; i++) {\n          this.xData.push(resData[i].staffName);\n          this.yData.push(resData[i].score);\n          this.initCharts();\n        }\n      });\n    },\n    prePage() {\n      this.current--;\n      this.getStatisticalData();\n    },\n    nextPage() {\n      this.current++;\n      this.getStatisticalData();\n    },\n    initCharts() {\n      let charts = this.$echarts.init(this.$refs['echartsContainer']);\n      const option = {\n        color: [this.color],\n        title: {\n          show: false,\n          text: this.title\n        },\n        grid: {\n          left: '20px',\n          bottom: '30px',\n          right: '20px',\n          top: '50px'\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function(params) {\n            let item = params[0];\n            let label = `${item.seriesName}<br/>`;\n            label += `${item.name}: ${item.data}`;\n            return label;\n          }\n        },\n        legend: {\n          show: false\n          // data: ['蒸发量', '降水量']\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            // dataView: { show: true, readOnly: false },\n            // magicType: { show: true, type: ['line', 'bar'] },\n            // restore: { show: true },\n            // saveAsImage: { show: true }\n          }\n        },\n        calculable: true,\n        xAxis: [\n          {\n            type: 'category',\n            axisTick: {\n              show: false //不显示坐标轴刻度线\n            },\n            axisLine: {\n              show: false //不显示坐标轴线\n            },\n            axisLabel: {\n              interval: 0,\n              formatter: function(value) {\n                if (value.length <= 4) {\n                  return value;\n                } else {\n                  return value.substring(0, 2) + '...';\n                }\n              }\n            },\n            data: this.xData\n          }\n        ],\n        yAxis: [\n          {\n            type: 'value',\n            splitLine: {\n              show: false\n            },\n            axisTick: {\n              show: false //不显示坐标轴刻度线\n            },\n            axisLine: {\n              show: false //不显示坐标轴线\n            },\n            axisLabel: {\n              show: false //不显示坐标轴上的文字\n            }\n          }\n        ],\n        series: [\n          {\n            name: this.getLabel2(),\n            type: 'bar',\n            barMaxWidth: 40,\n            data: this.yData,\n            label: {\n              show: true,\n              position: 'top',\n              top: 0,\n              color: '#000'\n            },\n            markPoint: {\n              data: [\n                {\n                  name: '冠军',\n                  xAxis: 0,\n                  symbol: `image://${require('./../../assets/images/金@2x.png')}`,\n                  yAxis: this.yData[0],\n                  // symbol:\n                  //   'image://http://img30.360buyimg.com/poprx/jfs/t23662/172/668395134/12944/5653b1ff/5b3c2737N3d867c2f.png',\n                  symbolSize: [32, 32],\n                  symbolOffset: [0, -35]\n                },\n                {\n                  name: '亚军',\n                  xAxis: 1,\n                  symbol: `image://${require('./../../assets/images/银@2x.png')}`,\n                  yAxis: this.yData[1],\n                  symbolSize: [32, 32],\n                  symbolOffset: [0, -35]\n                },\n                {\n                  name: '季军',\n                  xAxis: 2,\n                  symbol: `image://${require('./../../assets/images/铜@2x.png')}`,\n                  yAxis: this.yData[2],\n                  symbolSize: [32, 32],\n                  symbolOffset: [0, -35]\n                }\n              ]\n            }\n            // markLine: {\n            //   data: [{ type: 'average', name: '平均值' }]\n            // }\n          }\n          // {\n          //   name: '降水量',\n          //   type: 'bar',\n          //   data: [\n          //     2.6,\n          //     5.9,\n          //     9.0,\n          //     26.4,\n          //     28.7,\n          //     70.7,\n          //     175.6,\n          //     182.2,\n          //     48.7,\n          //     18.8,\n          //     6.0,\n          //     2.3\n          //   ],\n          //   markPoint: {\n          //     data: [\n          //       { name: '年最高', value: 182.2, xAxis: 7, yAxis: 183 },\n          //       { name: '年最低', value: 2.3, xAxis: 11, yAxis: 3 }\n          //     ]\n          //   },\n          //   markLine: {\n          //     data: [{ type: 'average', name: '平均值' }]\n          //   }\n          // }\n        ]\n      };\n      charts.setOption(option);\n      window.onresize = function() {\n        charts.resize();\n      };\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.echarts-wrapper {\n  // width: 0px;\n  background: #ffffff;\n  padding: 20px;\n  position: relative;\n}\n.echarts-box {\n  min-height: 340px;\n}\n.echarts-container {\n  width: 540px;\n  height: 340px;\n  border-bottom: 1px solid #000;\n  border-left: 1px solid #000;\n}\n.echarts-title {\n  color: #000;\n  font-size: 20px;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n}\n.echarts-title-circle {\n  display: inline-block;\n  position: relative;\n  top: -4px;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin: 0px 5px 0 0;\n}\n.table-wrapper {\n  margin-top: 20px;\n}\n.table-left,\n.table-right {\n  width: 49%;\n  display: inline-block;\n}\n.table-left {\n  margin-right: 2%;\n}\n.date-picker {\n  display: inline-block;\n  width: 160px;\n  // float: right;\n  position: absolute;\n  right: 20px;\n}\n.table-wrapper {\n  min-height: 298px;\n  display: flex;\n}\n.btn-wrapper {\n  text-align: center;\n  height: 40px;\n}\n/deep/.el-button--warning {\n  background-color: #ff9800;\n  border-color: #ff9800;\n}\n/deep/.el-date-editor.el-input {\n  width: 160px;\n}\n\n.tableEmpty {\n  height: 260px;\n}\n.allEmpty {\n  height: 620px;\n}\n.chartsEmpty {\n  height: 340px;\n}\n.empty {\n  width: 100%;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.emptyImg {\n  width: 160px;\n}\n.emptyText {\n  color: rgba(0, 0, 0, 0.35);\n}\n</style>\n"]}]}