{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/checker/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/views/checker/index.vue","mtime":1627979214302},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGaWxsVGFibGUgZnJvbSAnLi4vZmlsbGVyL0ZpbGxUYWJsZS52dWUnOwppbXBvcnQgeyBnZXRTZXJ2ZUxpc3QgfSBmcm9tICcuLy4uLy4uL2FwaS9zZXJ2ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZmlsbGVyJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWRlbnRpdHk6ICdjaGVja2VyJywKICAgICAgYWN0aXZlTmFtZTogJ2FsbCcsCiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgcm9sZXM6IFtdLAogICAgICBzdGF0dXNUeXBlTGlzdDogewogICAgICAgIC8vIGFsbDogWzEsIDJdLAogICAgICAgIGFsbDogbnVsbCwKICAgICAgICB1bmNoZWNrOiBbMV0sCiAgICAgICAgY2hlY2s6IFsyLCAzLCA0LCA1XQogICAgICB9LAogICAgICBhbGxEYXRhTGlzdDogW10sCiAgICAgIGFsbERhdGFUb3RhbDogMCwKICAgICAgdW5jaGVja0RhdGFMaXN0OiBbXSwKICAgICAgdW5jaGVja0RhdGFUb3RhbDogMCwKICAgICAgY2hlY2tEYXRhTGlzdDogW10sCiAgICAgIGNoZWNrRGF0YVRvdGFsOiAwLAogICAgICBpc0VtcHR5OiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmVOYW1lKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkgewogICAgICAgIHRoaXNbb2xkVmFsICsgJ0RhdGFMaXN0J10gPSBbXTsKICAgICAgICB0aGlzW29sZFZhbCArICdEYXRhVG90YWwnXSA9IDA7CiAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEobmV3VmFsLCAxLCB0aGlzLnN0YXR1c1R5cGVMaXN0W25ld1ZhbF0pOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc3QgdXNlckluZm8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW5mbycpKTsKICAgIHRoaXMudXNlckluZm8gPSB1c2VySW5mbzsKICAgIHRoaXMucm9sZXMgPSB1c2VySW5mby5yb2xlcyB8fCBbXTsKICAgIHRoaXMuZ2V0VGFibGVEYXRhKCdhbGwnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRhYmxlRGF0YSh0eXBlLCBjdXJyZW50ID0gMSwgc3RhdHVzID0gbnVsbCkgewogICAgICBjb25zb2xlLmxvZygndGFibGVEYXRhJywgdHlwZSwgY3VycmVudCk7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgb2Zmc2V0OiBjdXJyZW50LAogICAgICAgIHBhZ2VUeXBlOiAyLAogICAgICAgIGxpbWl0OiAxMDAwMCwKICAgICAgICBzZXJ2ZVN0YXR1czogdGhpcy5zdGF0dXNUeXBlTGlzdFt0eXBlXQogICAgICB9OwogICAgICBsZXQgdGFibGVEYXRhLCB0YWJsZVRvdGFsOwogICAgICBnZXRTZXJ2ZUxpc3QocGFyYW1zKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEgfHwge307CiAgICAgICAgICB0YWJsZURhdGEgPSBkYXRhLnJlY29yZHMgfHwgW107CiAgICAgICAgICB0YWJsZVRvdGFsID0gZGF0YS50b3RhbDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIHRhYmxlRGF0YSA9IFtdOwogICAgICAgICAgdGFibGVUb3RhbCA9IDA7CiAgICAgICAgICB0aGlzLmlzRW1wdHkgPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnYWxsJzoKICAgICAgICAgICAgICB0aGlzLmFsbERhdGFMaXN0ID0gdGFibGVEYXRhOwogICAgICAgICAgICAgIHRoaXMuYWxsRGF0YVRvdGFsID0gdGFibGVUb3RhbDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAndW5jaGVjayc6CiAgICAgICAgICAgICAgdGhpcy51bmNoZWNrRGF0YUxpc3QgPSB0YWJsZURhdGE7CiAgICAgICAgICAgICAgdGhpcy51bmNoZWNrRGF0YVRvdGFsID0gdGFibGVUb3RhbDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnY2hlY2snOgogICAgICAgICAgICAgIHRoaXMuY2hlY2tEYXRhTGlzdCA9IHRhYmxlRGF0YTsKICAgICAgICAgICAgICB0aGlzLmNoZWNrRGF0YVRvdGFsID0gdGFibGVUb3RhbDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGFibGVEYXRhLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmlzRW1wdHkgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBGaWxsVGFibGUKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/executive-serveh5/views/checker","sourcesContent":["<template>\n  <div class=\"fill-warpper\">\n    <van-tabs v-model=\"activeName\">\n      <van-tab title=\"全部\" name=\"all\">\n        <div\n          class=\"tab-content\"\n          :class=\"{ noBottom: roles.length == 1 && !roles.includes('处理人') }\"\n        >\n          <fill-table\n            :identity=\"identity\"\n            :tableData=\"allDataList\"\n            :total=\"allDataTotal\"\n            tableType=\"all\"\n            :isEmpty=\"isEmpty\"\n            @getTableData=\"getTableData\"\n          ></fill-table>\n        </div>\n      </van-tab>\n      <van-tab title=\"待审核\" name=\"uncheck\">\n        <div\n          class=\"tab-content\"\n          :class=\"{ noBottom: roles.length === 1 && !roles.includes('处理人') }\"\n        >\n          <fill-table\n            :identity=\"identity\"\n            :tableData=\"uncheckDataList\"\n            :isEmpty=\"isEmpty\"\n            :total=\"uncheckDataTotal\"\n            tableType=\"uncheck\"\n            @getTableData=\"getTableData\"\n          ></fill-table>\n        </div>\n      </van-tab>\n      <van-tab title=\"已审核\" name=\"check\">\n        <div\n          class=\"tab-content\"\n          :class=\"{ noBottom: roles.length === 1 && !roles.includes('处理人') }\"\n        >\n          <fill-table\n            :identity=\"identity\"\n            :isEmpty=\"isEmpty\"\n            :tableData=\"checkDataList\"\n            :total=\"checkDataTotal\"\n            tableType=\"check\"\n            @getTableData=\"getTableData\"\n          ></fill-table>\n        </div>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport FillTable from '../filler/FillTable.vue';\nimport { getServeList } from './../../api/serve';\nexport default {\n  name: 'filler',\n  data() {\n    return {\n      identity: 'checker',\n      activeName: 'all',\n      userInfo: {},\n      roles: [],\n      statusTypeList: {\n        // all: [1, 2],\n        all: null,\n        uncheck: [1],\n        check: [2, 3, 4, 5]\n      },\n      allDataList: [],\n      allDataTotal: 0,\n      uncheckDataList: [],\n      uncheckDataTotal: 0,\n      checkDataList: [],\n      checkDataTotal: 0,\n      isEmpty: false\n    };\n  },\n  watch: {\n    activeName(newVal, oldVal) {\n      if (oldVal !== newVal) {\n        this[oldVal + 'DataList'] = [];\n        this[oldVal + 'DataTotal'] = 0;\n        this.getTableData(newVal, 1, this.statusTypeList[newVal]);\n      }\n    }\n  },\n  created() {\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'));\n    this.userInfo = userInfo;\n    this.roles = userInfo.roles || [];\n    this.getTableData('all');\n  },\n  methods: {\n    getTableData(type, current = 1, status = null) {\n      console.log('tableData', type, current);\n      let params = {\n        offset: current,\n        pageType: 2,\n        limit: 10000,\n        serveStatus: this.statusTypeList[type]\n      };\n      let tableData, tableTotal;\n      getServeList(params)\n        .then(res => {\n          const data = res.data || {};\n          tableData = data.records || [];\n          tableTotal = data.total;\n          return;\n        })\n        .catch(e => {\n          tableData = [];\n          tableTotal = 0;\n          this.isEmpty = true;\n          return;\n        })\n        .then(data => {\n          switch (type) {\n            case 'all':\n              this.allDataList = tableData;\n              this.allDataTotal = tableTotal;\n              break;\n            case 'uncheck':\n              this.uncheckDataList = tableData;\n              this.uncheckDataTotal = tableTotal;\n              break;\n            case 'check':\n              this.checkDataList = tableData;\n              this.checkDataTotal = tableTotal;\n              break;\n            default:\n              break;\n          }\n          if (!tableData.length) {\n            this.isEmpty = true;\n          } else {\n            this.isEmpty = false;\n          }\n        });\n    }\n  },\n  components: {\n    FillTable\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.fill-warpper {\n  position: fixed;\n  width: 100%;\n  height: calc(100% - 50px);\n  overflow-y: auto;\n}\n.tab-content {\n  position: fixed;\n  padding: 0.2rem 0 0 0;\n  top: 44px;\n  background: #f6f6f6;\n  width: 100%;\n  height: calc(100% - 98px);\n  overflow-y: auto;\n  box-sizing: border-box;\n}\n.noBottom {\n  height: calc(100% - 44px);\n}\n</style>\n"]}]}