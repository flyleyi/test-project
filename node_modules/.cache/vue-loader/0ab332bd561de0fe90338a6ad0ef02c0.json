{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-h5/components/echarts/ybar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-h5/components/echarts/ybar.vue","mtime":1645176309817},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHN0clNsaWNlIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9jb21tb24vdXRpbHMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd5YmFyJywKICBwcm9wczogewogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMgogICAgfSwKICAgIC8vIOaVsOaNrgogICAgY2hhcnRzQ29uZmlnOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4ge30KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjaGFydHNDb25maWc6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogJ2NoYW5nZURhdGEnLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBoZWlnaHQ6IHsKICAgICAgaGFuZGxlcjogJ2NoYW5nZUhlaWdodCcsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0RGF0YToge30sCiAgICAgIGNoYXJ0OiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2hhcnQgPSB0aGlzLiRlY2hhcnRzLmluaXQodGhpcy4kcmVmcy5jaGFydHNCb3gpOwogICAgdGhpcy5pbml0RWNoYXJ0c0JveCgpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHsKICAgICAgdGhpcy5jaGFydC5yZXNpemUoKTsKICAgIH0pOwogICAgdGhpcy4kb24oJ2hvb2s6ZGVzdHJveWVkJywgKCkgPT4gewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgIHRoaXMuY2hhcnQucmVzaXplKCk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VEYXRhKG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgdGhpcy5jaGFydERhdGEgPSBuZXdWYWw7CiAgICAgICAgdGhpcy5pbml0RWNoYXJ0c0JveCgpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlSGVpZ2h0KCkgewogICAgICAvLyDov5nmraXlvojlhbPplK7vvIzkuIDlrpropoHlnKjpq5jluqbmlLnlj5jlkI7vvIzkvb/nlKggJG5leHRUaWNr77yM5by65Yi26KeG5Zu+5Yi35pawCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmNoYXJ0LnJlc2l6ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0RWNoYXJ0c0JveCgpIHsKICAgICAgbGV0IG9iaiA9IHRoaXMuY2hhcnREYXRhOwogICAgICBjb25zb2xlLmxvZyhvYmopOwogICAgICBsZXQgbGFiZWxDb2xvciA9ICcjMDAwJzsKICAgICAgbGV0IGxpbmVDb2xvciA9ICcjRDhEOEQ4JzsKICAgICAgbGV0IGMgPSBvYmouY29sb3JSdWxlWzBdLmNvbG9yOwogICAgICBsZXQgdjEgPSBvYmouY29sb3JSdWxlWzBdLm51bSAqIDEwMDsKICAgICAgbGV0IHYyID0gb2JqLmNvbG9yUnVsZVsxXS5udW0gKiAxMDA7CiAgICAgIGxldCB2MyA9IG9iai5jb2xvclJ1bGVbMl0ubnVtICogMTAwOwogICAgICBsZXQgb3B0aW9uID0gewogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIHRvcDogJzUlJywKICAgICAgICAgIGxlZnQ6ICcwJywKICAgICAgICAgIHJpZ2h0OiAnNSUnLAogICAgICAgICAgYm90dG9tOiAnMCcsCiAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICB9LAogICAgICAgIHhBeGlzOiB7CiAgICAgICAgICBtaW46IDAsCiAgICAgICAgICBtYXg6IG9iai54QXhpc01heCwKICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICBzcGxpdExpbmU6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBheGlzVGljazogewogICAgICAgICAgICBzaG93OiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgY29sb3I6IGxpbmVDb2xvcgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgYXhpc0xhYmVsOiB7CiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAnJSc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbG9yOiBsYWJlbENvbG9yLAogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTAKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICBkYXRhOiBvYmoueUF4aXNEYXRhLAogICAgICAgICAgYXhpc1RpY2s6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBheGlzTGluZTogewogICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogbGluZUNvbG9yCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgIC8vIOavj+ihjOWxleekuuS4quaVsAogICAgICAgICAgICAgIGxldCBzdGVwID0gNTsKICAgICAgICAgICAgICAvLyDotoXlh7rkuKrmlbDnnIHnlaXlj7flsZXnpLoKICAgICAgICAgICAgICBsZXQgbWF4ID0gMTk7CiAgICAgICAgICAgICAgLy8g5a6e6ZmF5bGV56S655qE5YaF5a65CiAgICAgICAgICAgICAgbGV0IGFjdHVhbCA9IHZhbHVlLnNsaWNlKDAsIG1heCk7CiAgICAgICAgICAgICAgLy8g5YiG5Ymy5a2X56ym5LiyCiAgICAgICAgICAgICAgbGV0IHZhbCA9IHN0clNsaWNlKGFjdHVhbCwgc3RlcCwgJ1xuJyk7CiAgICAgICAgICAgICAgLy8g5o2i6KGM5LqG5aSa5bCR5qyh77yM5bCx5a2Y5Zyo5aSa5bCR5Liq5o2i6KGM56ym77yM5o2i6KGM56ym5Lmf5Y2g5LiA5Liq6ZW/5bqmCiAgICAgICAgICAgICAgbGV0IG5zID0gcGFyc2VJbnQoYWN0dWFsLmxlbmd0aCAvIHN0ZXApOwogICAgICAgICAgICAgIGxldCBzdHIgPQogICAgICAgICAgICAgICAgdmFsdWUubGVuZ3RoID4gbWF4ICsgbnMgPyB2YWwuc2xpY2UoMCwgbWF4ICsgbnMpICsgJy4uLicgOiB2YWw7CiAgICAgICAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29sb3I6IGxhYmVsQ29sb3IsCiAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxMAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogJ2JhcicsCiAgICAgICAgICAgIHN0YWNrOiAndG90YWwnLAogICAgICAgICAgICBzaWxlbnQ6IG9iai5zaWxlbnQgfHwgZmFsc2UsCiAgICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgICAgZm9jdXM6ICdzZXJpZXMnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhcldpZHRoOiAyMCwKICAgICAgICAgICAgZGF0YTogb2JqLnNlcmllc0RhdGExLAogICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnZhbHVlID4gdjEgJiYgcGFyYW1zLnZhbHVlIDwgdjIpCiAgICAgICAgICAgICAgICAgIGMgPSBvYmouY29sb3JSdWxlWzFdLmNvbG9yOwogICAgICAgICAgICAgICAgaWYgKHBhcmFtcy52YWx1ZSA+IHYyICYmIHBhcmFtcy52YWx1ZSA8IHYzKQogICAgICAgICAgICAgICAgICBjID0gb2JqLmNvbG9yUnVsZVsyXS5jb2xvcjsKICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogJ2JhcicsCiAgICAgICAgICAgIHN0YWNrOiAndG90YWwnLAogICAgICAgICAgICBzaWxlbnQ6IG9iai5zaWxlbnQgfHwgZmFsc2UsCiAgICAgICAgICAgIGJhcldpZHRoOiAyMCwKICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICBmb2N1czogJ3NlcmllcycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogb2JqLnNlcmllc0RhdGEyLAogICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSwKICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC44NSknLAogICAgICAgICAgICAgIGJvcmRlclR5cGU6ICdkb3R0ZWQnLAogICAgICAgICAgICAgIC8vIOminOiJsuS4juWJjeiAheebuOS8vO+8jOWPquaYr+WinuWKoOmAj+aYjuW6pgogICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgIGlmIChwYXJhbXMudmFsdWUgPiB2MSAmJiBwYXJhbXMudmFsdWUgPCB2MikKICAgICAgICAgICAgICAgICAgYyA9IG9iai5jb2xvclJ1bGVbMV0uY29sb3I7CiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnZhbHVlID4gdjIgJiYgcGFyYW1zLnZhbHVlIDwgdjMpCiAgICAgICAgICAgICAgICAgIGMgPSBvYmouY29sb3JSdWxlWzJdLmNvbG9yOwogICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvcGFjaXR5OiAwLjIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfTsKICAgICAgaWYgKHRoaXMuY2hhcnQgIT09IG51bGwpIHRoaXMuY2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["ybar.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ybar.vue","sourceRoot":"src/pages/score-analysis-h5/components/echarts","sourcesContent":["<!--\n * @Author: wangxu\n * @Date: 2021-09-28 10:04:45\n * @LastEditTime: 2021-10-14 14:21:42\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: \\mutilwap\\src\\pages\\score-analysis-h5\\components\\echarts\\ybar.vue\n-->\n<template>\n  <div ref=\"chartsBox\" :style=\"{ height: height + 'rem' }\"></div>\n</template>\n\n<script>\nimport { strSlice } from '../../plugins/common/utils';\n\nexport default {\n  name: 'ybar',\n  props: {\n    height: {\n      type: Number,\n      default: 2\n    },\n    // 数据\n    chartsConfig: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  watch: {\n    chartsConfig: {\n      deep: true,\n      handler: 'changeData',\n      immediate: true\n    },\n    height: {\n      handler: 'changeHeight',\n      immediate: true\n    }\n  },\n  data() {\n    return {\n      chartData: {},\n      chart: null\n    };\n  },\n  mounted() {\n    this.chart = this.$echarts.init(this.$refs.chartsBox);\n    this.initEchartsBox();\n    window.addEventListener('resize', () => {\n      this.chart.resize();\n    });\n    this.$on('hook:destroyed', () => {\n      window.removeEventListener('resize', () => {\n        this.chart.resize();\n      });\n    });\n  },\n  methods: {\n    changeData(newVal) {\n      if (newVal) {\n        this.chartData = newVal;\n        this.initEchartsBox();\n      }\n    },\n    changeHeight() {\n      // 这步很关键，一定要在高度改变后，使用 $nextTick，强制视图刷新\n      this.$nextTick(() => {\n        this.chart.resize();\n      });\n    },\n    initEchartsBox() {\n      let obj = this.chartData;\n      console.log(obj);\n      let labelColor = '#000';\n      let lineColor = '#D8D8D8';\n      let c = obj.colorRule[0].color;\n      let v1 = obj.colorRule[0].num * 100;\n      let v2 = obj.colorRule[1].num * 100;\n      let v3 = obj.colorRule[2].num * 100;\n      let option = {\n        grid: {\n          top: '5%',\n          left: '0',\n          right: '5%',\n          bottom: '0',\n          containLabel: true\n        },\n        xAxis: {\n          min: 0,\n          max: obj.xAxisMax,\n          type: 'value',\n          splitLine: {\n            show: false\n          },\n          axisTick: {\n            show: true\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              color: lineColor\n            }\n          },\n          axisLabel: {\n            formatter: function(value) {\n              return value + '%';\n            },\n            color: labelColor,\n            textStyle: {\n              fontSize: 10\n            }\n          }\n        },\n        yAxis: {\n          type: 'category',\n          data: obj.yAxisData,\n          axisTick: {\n            show: false\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              color: lineColor\n            }\n          },\n          axisLabel: {\n            formatter: function(value) {\n              // 每行展示个数\n              let step = 5;\n              // 超出个数省略号展示\n              let max = 19;\n              // 实际展示的内容\n              let actual = value.slice(0, max);\n              // 分割字符串\n              let val = strSlice(actual, step, '\\n');\n              // 换行了多少次，就存在多少个换行符，换行符也占一个长度\n              let ns = parseInt(actual.length / step);\n              let str =\n                value.length > max + ns ? val.slice(0, max + ns) + '...' : val;\n              return str;\n            },\n            color: labelColor,\n            textStyle: {\n              fontSize: 10\n            }\n          }\n        },\n        series: [\n          {\n            type: 'bar',\n            stack: 'total',\n            silent: obj.silent || false,\n            emphasis: {\n              focus: 'series'\n            },\n            barWidth: 20,\n            data: obj.seriesData1,\n            itemStyle: {\n              color: function(params) {\n                if (params.value > v1 && params.value < v2)\n                  c = obj.colorRule[1].color;\n                if (params.value > v2 && params.value < v3)\n                  c = obj.colorRule[2].color;\n                return c;\n              }\n            }\n          },\n          {\n            type: 'bar',\n            stack: 'total',\n            silent: obj.silent || false,\n            barWidth: 20,\n            emphasis: {\n              focus: 'series'\n            },\n            data: obj.seriesData2,\n            itemStyle: {\n              borderWidth: 1,\n              borderColor: 'rgba(0, 0, 0, 0.85)',\n              borderType: 'dotted',\n              // 颜色与前者相似，只是增加透明度\n              color: function(params) {\n                if (params.value > v1 && params.value < v2)\n                  c = obj.colorRule[1].color;\n                if (params.value > v2 && params.value < v3)\n                  c = obj.colorRule[2].color;\n                return c;\n              },\n              opacity: 0.2\n            }\n          }\n        ]\n      };\n      if (this.chart !== null) this.chart.setOption(option);\n    }\n  }\n};\n</script>\n"]}]}