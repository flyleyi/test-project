{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/catering/views/meals/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/catering/views/meals/index.vue","mtime":1645178321128},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7DQppbXBvcnQgew0KICBUYWJzLA0KICBUYWJQYW5lLA0KICBEaWFsb2csDQogIElucHV0LA0KICBzZWxlY3QsDQogIE9wdGlvbiwNCiAgQ2FyZCwNCiAgVHJlZSwNCiAgUm93LA0KICBTZWxlY3QsDQogIEZvcm0sDQogIEZvcm1JdGVtLA0KICBDb2wsDQogIFRhYmxlLA0KICBUYWJsZUNvbHVtbiwNCiAgU2Nyb2xsYmFyLA0KICBUYWcsDQogIExvYWRpbmcNCn0gZnJvbSAnZWxlbWVudC11aSc7DQppbXBvcnQgQ1N2Z0ljb24gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DU3ZnSWNvbic7DQppbXBvcnQgQlRhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9idXNpbmVzcy9CVGFibGUnOw0KaW1wb3J0IENEeW5hbWljRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0NEeW5hbWljRm9ybS9pbmRleCc7DQppbXBvcnQgQ1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ1RhYmxlJzsNCmltcG9ydCBCSW1wb3J0RGF0YSBmcm9tICdAL3BhZ2VzL2NhdGVyaW5nL2NvbXBvbmVudHMvQkltcG9ydERhdGFQYW5lbCc7DQppbXBvcnQgcHVzaFBhbmVsIGZyb20gJy4vUHVzaFBhbmVsJzsNCmltcG9ydCB7IElzc3VlLCBBZGRNZW51IH0gZnJvbSAnLi9jb21wb25lbnRzJzsNCmltcG9ydCBhcmVhIGZyb20gJy4uLy4uL2FwaS9hcmVhJzsNCmltcG9ydCB1dGlscyBmcm9tICdAL3BsdWdpbnMvY29tbW9uL3V0aWxzJzsNCmltcG9ydCB7IGhhbmRsZU1lYWxEYXRhIH0gZnJvbSAnQC9wYWdlcy9jYXRlcmluZy9wbHVnaW5zL2NvbW1vbi91dGlscyc7DQppbXBvcnQgeyBmb3JtYXRJbnB1dCB9IGZyb20gJy4uL0Jhc2ljRGF0YS91dGlscy5qcyc7DQppbXBvcnQgTWVudSwgew0KICBzdXBwbGllckluZ3JlZGllbnRQYWdlLA0KICBzYXZlU3VwcGxpZXJJbmdyZWRpZW50LA0KICBkZWxldGVTdXBwbGllckluZ3JlZGllbnRCeUlkcywNCiAgdXBkYXRlU3VwcGxpZXJJbmdyZWRpZW50U3RhdHVzQnlJZHMsDQogIHF1ZXJ5aW5ncmVkaWVudFBhZ2UsDQogIHNhdmVJbmdyZWRpZW50LA0KICBkZWxldGVJbmdyZWRpZW50QnlJZHMsDQogIHVwZGF0ZUluZ3JlZGllbnRTdGF0dXNCeUlkcywNCiAgcXVlcnlDdXRNYXRjaFN0YW5kYXJkUGFnZXQsDQogIHNhdmVDdXRNYXRjaFN0YW5kYXJkLA0KICBkZWxldGVDdXRNYXRjaFN0YW5kYXJkQnlJZHMsDQogIHVwZGF0ZVN0YXR1c0J5SWRzLA0KICBxdWVyeUNvb2tpbmdTdHlsZVBhZ2UsDQogIHNhdmVDb29raW5nU3R5bGUsDQogIGRlbGV0ZUNvb2tpbmdTdHlsZUJ5SWRzLA0KICB1cGRhdGVDb29raW5nU3RhdHVzQnlJZHMsDQogIHF1ZXJ5RGlzaGVzUGFnZSwNCiAgc2F2ZURpc2hlc1N1cGVyLA0KICBkZWxldGVEaXNoZXNCeUlkcywNCiAgdXBkYXRlRGlzaGVzU3RhdHVzQnlJZHMsDQogIHF1ZXJ5Y3Jvd2RQYWdlLA0KICBzYXZlQ3Jvd2QsDQogIGRlbGV0ZUNyb3dkQnlJZHMsDQogIHVwZGF0ZUNyb3dkU3RhdHVzQnlJZHMsDQogIGRpc2hlc0xpc3RQYWdlLA0KICBzYXZlRGlzaGVzTGlzdCwNCiAgYmF0Y2hEZWxldGVEaXNoZXNMaXN0LA0KICBjcm93ZExpc3QsDQogIGNvb2tpbmdTdHlsZUxpc3QsDQogIGluZ3JlZGllbnRMaXN0LA0KICBnZXREaXNoZXNDb250ZW50TGlzdEJ5RGlzaGVzSWQsDQogIGN1dE1hdGNoU3RhbmRhcmRMaXN0LA0KICBhZGRUb015TWVudSwNCiAgZGlzaGVzTGlzdERldGFpbCwNCiAgaW1wb3J0RXhjZWwsDQogIGNoaWxkRGljdGlvbmFyeQ0KfSBmcm9tICcuLi8uLi9hcGkvY3Jvd2QnOw0KY29uc3QgYXBpID0gew0KICBwcm92aWRlSW5ncmVkaWVudHM6IHNhdmVTdXBwbGllckluZ3JlZGllbnQsDQogIGluZ3JlZGllbnRzOiBzYXZlSW5ncmVkaWVudCwNCiAgcnVsZXM6IHNhdmVDdXRNYXRjaFN0YW5kYXJkLA0KICBjdWlzaW5lOiBzYXZlQ29va2luZ1N0eWxlLA0KICBkaXNoZXM6IHNhdmVEaXNoZXNTdXBlciwNCiAgbWVudTogc2F2ZURpc2hlc0xpc3QsDQogIGNyb3dkOiBzYXZlQ3Jvd2QNCn07DQpjb25zdCBxdWVyeUFwaSA9IHsNCiAgcHJvdmlkZUluZ3JlZGllbnRzOiBzdXBwbGllckluZ3JlZGllbnRQYWdlLA0KICBpbmdyZWRpZW50czogcXVlcnlpbmdyZWRpZW50UGFnZSwNCiAgcnVsZXM6IHF1ZXJ5Q3V0TWF0Y2hTdGFuZGFyZFBhZ2V0LA0KICBjdWlzaW5lOiBxdWVyeUNvb2tpbmdTdHlsZVBhZ2UsDQogIGRpc2hlczogcXVlcnlEaXNoZXNQYWdlLA0KICBtZW51OiBkaXNoZXNMaXN0UGFnZSwNCiAgY3Jvd2Q6IHF1ZXJ5Y3Jvd2RQYWdlDQp9Ow0KDQpjb25zdCBkZWxBcGkgPSB7DQogIHByb3ZpZGVJbmdyZWRpZW50czogZGVsZXRlU3VwcGxpZXJJbmdyZWRpZW50QnlJZHMsDQogIGluZ3JlZGllbnRzOiBkZWxldGVJbmdyZWRpZW50QnlJZHMsDQogIHJ1bGVzOiBkZWxldGVDdXRNYXRjaFN0YW5kYXJkQnlJZHMsDQogIGN1aXNpbmU6IGRlbGV0ZUNvb2tpbmdTdHlsZUJ5SWRzLA0KICBkaXNoZXM6IGRlbGV0ZURpc2hlc0J5SWRzLA0KICBtZW51OiBiYXRjaERlbGV0ZURpc2hlc0xpc3QsDQogIGNyb3dkOiBkZWxldGVDcm93ZEJ5SWRzDQp9Ow0KDQpjb25zdCBzdGF0dXNBcGkgPSB7DQogIHByb3ZpZGVJbmdyZWRpZW50czogdXBkYXRlU3VwcGxpZXJJbmdyZWRpZW50U3RhdHVzQnlJZHMsDQogIGluZ3JlZGllbnRzOiB1cGRhdGVJbmdyZWRpZW50U3RhdHVzQnlJZHMsDQogIHJ1bGVzOiB1cGRhdGVTdGF0dXNCeUlkcywNCiAgY3Vpc2luZTogdXBkYXRlQ29va2luZ1N0YXR1c0J5SWRzLA0KICBkaXNoZXM6IHVwZGF0ZURpc2hlc1N0YXR1c0J5SWRzLA0KICBtZW51OiBxdWVyeUN1dE1hdGNoU3RhbmRhcmRQYWdldCwNCiAgY3Jvd2Q6IHVwZGF0ZUNyb3dkU3RhdHVzQnlJZHMNCn07DQoNCmZ1bmN0aW9uIGRlbGV0ZU9yRmluZEFycihhcnJEYXRhLCBvYmosIGNoaWxkcmVuLCBfYWxsLCBmaW5kLCByZXBsYWNlQXJyKSB7DQogIC8v5Yig6Zmk5oiW5p+l5om+5pWw57uE5Lit5pyJ5p+Q5Liq5a+56LGh55qE5YWD57SgLiBfYWxs5Luj6KGo5piv5ZCm5YWo6YOo5Yig6ZmkDQogIGNoaWxkcmVuID0gY2hpbGRyZW4gfHwgJ2NoaWxkcmVuJzsgLy9vYmrlj6/ku6XmmK/ln7rmnKzmlbDmja7nsbvlnosucmVwbGFjZUFycuWcqOWIoOmZpOeahOS9jee9rua3u+WKoOeahOaVsOaNrg0KICBpZiAoIU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmaW5kKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgew0KICAgIGZpbmQgPSBmaW5kID8gW10gOiBmaW5kOw0KICB9DQogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyRGF0YSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyckRhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBtID0gYXJyRGF0YVtpXSwNCiAgICAgICAgZmxnID0gMTsNCiAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PSAnb2JqZWN0Jykgew0KICAgICAgICBmb3IgKHZhciBqIGluIG9iaikgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHR5cGVvZiBvYmpbal0gPT0gJ2Z1bmN0aW9uJw0KICAgICAgICAgICAgICA/ICFvYmpbal0oaiwgbVtqXSwgbSwgYXJyRGF0YSwgaSkNCiAgICAgICAgICAgICAgOiBtW2pdICE9IG9ialtqXQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgZmxnID0gMDsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKG0gIT0gb2JqKSB7DQogICAgICAgICAgZmxnID0gMDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGZsZykgew0KICAgICAgICBpZiAoZmluZCkgew0KICAgICAgICAgIGZpbmQucHVzaChtKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VBcnIgPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgcmVwbGFjZUFyciA9IHJlcGxhY2VBcnIoaSwgbSwgYXJyRGF0YSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHJlcGxhY2VBcnIgPQ0KICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHJlcGxhY2VBcnIpID09ICdbb2JqZWN0IEFycmF5XScNCiAgICAgICAgICAgICAgPyByZXBsYWNlQXJyDQogICAgICAgICAgICAgIDogcmVwbGFjZUFyciB8fCBbXTsNCiAgICAgICAgICBhcnJEYXRhLnNwbGljZS5hcHBseShhcnJEYXRhLCBbaSwgMV0uY29uY2F0KHJlcGxhY2VBcnIpKTsNCiAgICAgICAgICBpLS07DQogICAgICAgICAgX2FsbCAmJiAoaSA9IGkgKyByZXBsYWNlQXJyLmxlbmd0aCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFfYWxsKSB7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIG9iaiAmJg0KICAgICAgICB0eXBlb2Ygb2JqID09ICdvYmplY3QnICYmDQogICAgICAgIGRlbGV0ZU9yRmluZEFycihtLCBvYmosIGNoaWxkcmVuLCBfYWxsLCBmaW5kLCByZXBsYWNlQXJyKTsNCiAgICB9DQogIH0gZWxzZSBpZiAoYXJyRGF0YSAmJiB0eXBlb2YgYXJyRGF0YSA9PSAnb2JqZWN0Jykgew0KICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnJEYXRhW2NoaWxkcmVuXSkgPT09ICdbb2JqZWN0IEFycmF5XScgJiYNCiAgICAgIGRlbGV0ZU9yRmluZEFycihhcnJEYXRhW2NoaWxkcmVuXSwgb2JqLCBjaGlsZHJlbiwgX2FsbCwgZmluZCwgcmVwbGFjZUFycik7DQogIH0NCiAgcmV0dXJuIGZpbmQ7DQp9DQoNClZ1ZS51c2UoTG9hZGluZyk7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFtEaWFsb2cubmFtZV06IERpYWxvZywNCiAgICBbVGFicy5uYW1lXTogVGFicywNCiAgICBbVGFiUGFuZS5uYW1lXTogVGFiUGFuZSwNCiAgICBbT3B0aW9uLm5hbWVdOiBPcHRpb24sDQogICAgW0lucHV0Lm5hbWVdOiBJbnB1dCwNCiAgICBbQ2FyZC5uYW1lXTogQ2FyZCwNCiAgICBbVHJlZS5uYW1lXTogVHJlZSwNCiAgICBbUm93Lm5hbWVdOiBSb3csDQogICAgW0NvbC5uYW1lXTogQ29sLA0KICAgIFtJbnB1dC5uYW1lXTogSW5wdXQsDQogICAgW1NlbGVjdC5uYW1lXTogU2VsZWN0LA0KICAgIFtGb3JtLm5hbWVdOiBGb3JtLA0KICAgIFtGb3JtSXRlbS5uYW1lXTogRm9ybUl0ZW0sDQogICAgW0NTdmdJY29uLm5hbWVdOiBDU3ZnSWNvbiwNCiAgICBbVGFibGUubmFtZV06IFRhYmxlLA0KICAgIFtUYWJsZUNvbHVtbi5uYW1lXTogVGFibGVDb2x1bW4sDQogICAgW1Njcm9sbGJhci5uYW1lXTogU2Nyb2xsYmFyLA0KICAgIFtUYWcubmFtZV06IFRhZywNCiAgICBbc2VsZWN0Lm5hbWVdOiBzZWxlY3QsDQogICAgQlRhYmxlLA0KICAgIElzc3VlLA0KICAgIEFkZE1lbnUsDQogICAgQ0R5bmFtaWNGb3JtLA0KICAgIENUYWJsZSwNCiAgICBwdXNoUGFuZWwNCiAgfSwNCiAgLy8g5a6a5LmJ5bGe5oCnDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFyZWEsDQogICAgICByb2xlOiAwLA0KICAgICAgdHlwZTogMCwNCiAgICAgIG1lbnVEZXRhaWw6IHt9LA0KICAgICAgYWN0aXZlOiAncnVsZXMnLA0KICAgICAgaXNNZW51RGV0YWlsOiBmYWxzZSwNCiAgICAgIGlubmVyVmlzaWJsZTogZmFsc2UsDQogICAgICBjdXRNYXRjaFN0YW5kYXJkTGlzdDogW10sDQogICAgICBxdWVyeUFwaSwNCiAgICAgIG9wdGlvbnM6IFtdLA0KICAgICAgd2Vla0xpc3Q6IFsNCiAgICAgICAgJ+aYn+acn+S4gCcsDQogICAgICAgICfmmJ/mnJ/kuownLA0KICAgICAgICAn5pif5pyf5LiJJywNCiAgICAgICAgJ+aYn+acn+WbmycsDQogICAgICAgICfmmJ/mnJ/kupQnLA0KICAgICAgICAn5pif5pyf5YWtJywNCiAgICAgICAgJ+aYn+acn+aXpScNCiAgICAgIF0sDQogICAgICB0YWJzTGFiZWw6IHsNCiAgICAgICAgcHJvdmlkZUluZ3JlZGllbnRzOiB7DQogICAgICAgICAgbmFtZTogJ+mjn+adkCcsDQogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsncHJvdmlkZUluZ3JlZGllbnRzLXJvbGUnXSkNCiAgICAgICAgfSwNCiAgICAgICAgaW5ncmVkaWVudHM6IHsNCiAgICAgICAgICBuYW1lOiAn6aOf5p2QJywNCiAgICAgICAgICBoaWRkZW46ICF0aGlzLiRoYXMoWydpbmdyZWRpZW50cy1yb2xlJ10pDQogICAgICAgIH0sDQogICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgbmFtZTogJ+WIh+mFjeagh+WHhicsDQogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsncnVsZXMtcm9sZSddKQ0KICAgICAgICB9LA0KICAgICAgICAvLyBjdWlzaW5lOiB7DQogICAgICAgIC8vICAgbmFtZTogJ+iPnOezuycsDQogICAgICAgIC8vICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnY3Vpc2luZS1yb2xlJ10pDQogICAgICAgIC8vIH0sDQogICAgICAgIGRpc2hlczogew0KICAgICAgICAgIG5hbWU6ICfoj5zlk4EnLA0KICAgICAgICAgIGhpZGRlbjogIXRoaXMuJGhhcyhbJ2Rpc2hlcy1yb2xlJ10pDQogICAgICAgIH0sDQogICAgICAgIGNyb3dkOiB7DQogICAgICAgICAgbmFtZTogJ+S6uue+pCcsDQogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnY3Jvd2Qtcm9sZSddKQ0KICAgICAgICB9LA0KICAgICAgICBtZW51OiB7DQogICAgICAgICAgbmFtZTogJ+agh+WHhuiPnOiwsScsDQogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnbWVudS1yb2xlJ10pDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBzdWJBY3RpdmU6ICdncm91cE1lbnUnLA0KICAgICAgc2VhcmNoRm9ybTogew0KICAgICAgICBzZWFyY2hOYW1lOiAnJywNCiAgICAgICAgc3RhdHVzOiAnJw0KICAgICAgfSwNCiAgICAgIGJ0bnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn57yW6L6RJywNCiAgICAgICAgICB0eXBlOiAndGV4dCcsDQogICAgICAgICAgc2l6ZTogJ21pbmknLA0KICAgICAgICAgIGNsaWNrOiB0aGlzLmVkaXRDcm93ZA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfnpoHnlKgnLA0KICAgICAgICAgIHR5cGU6ICd0ZXh0JywNCiAgICAgICAgICBzaXplOiAnbWluaScsDQogICAgICAgICAgY2xpY2s6IHRoaXMuZGlzYWJsZWRDcm93ZA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICflkK/nlKgnLA0KICAgICAgICAgIHR5cGU6ICd0ZXh0JywNCiAgICAgICAgICBzaXplOiAnbWluaScsDQogICAgICAgICAgY2xpY2s6IHRoaXMuYWJsZWRDcm93ZA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfliKDpmaQnLA0KICAgICAgICAgIGhpZGRlbjogdHJ1ZSwNCiAgICAgICAgICB0eXBlOiAndGV4dCcsDQogICAgICAgICAgc2l6ZTogJ21pbmknLA0KICAgICAgICAgIGNsaWNrOiB0aGlzLmRlbENyb3dkDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0Zvcm06IHsNCiAgICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICAgIGlzRWRpdDogZmFsc2UsDQogICAgICAgIC8vIOihqOWNleaPkOS6pOS4rQ0KICAgICAgICBsb2FkaW5nOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIGN1cnJlbnRQYWdlOiAnMCcsDQogICAgICB0b3RhbDogMCwNCiAgICAgIGNvbHVtbkRhdGE6IFtdLA0KICAgICAgdG9vbGJhcnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5paw5aKeJywNCiAgICAgICAgICBjbGljazogdGhpcy5vbkFkZA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfmibnph4/liKDpmaQnLA0KICAgICAgICAgIGNsaWNrOiB0aGlzLmJhdGNoRGVsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+aJuemHj+emgeeUqCcsDQogICAgICAgICAgY2xpY2s6IHRoaXMuYmF0Y2hPZmYNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5om56YeP5ZCv55SoJywNCiAgICAgICAgICBjbGljazogdGhpcy5iYXRjaE9uDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICBhbGxNZW51SXRlbXM6IHsNCiAgICAgICAgZ3JvdXBNZW51OiB7DQogICAgICAgICAgdmFsdWU6ICfpm4blm6Loj5zosLEnLA0KICAgICAgICAgIGJ0bnM6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbGFiZWw6ICfmn6XnnIsnLA0KICAgICAgICAgICAgICBjbGljazogdGhpcy5jaGVja01lbnUNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGxhYmVsOiAn5LiL5Y+RJywNCiAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZG93bk1lbnUNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGxhYmVsOiAn57yW6L6RJywNCiAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZWRpdE1lbnUNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGxhYmVsOiAn5Yig6ZmkJywNCiAgICAgICAgICAgICAgY2xpY2s6IHRoaXMuZGVsQ3Jvd2QNCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHR5cGU6IDEsDQogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnZ3JvdXBNZW51LXJvbGUnXSkNCiAgICAgICAgfSwNCiAgICAgICAgTXlNZW51OiB7DQogICAgICAgICAgdmFsdWU6ICfmiJHnmoToj5zosLEnLA0KICAgICAgICAgIGJ0bnM6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbGFiZWw6ICfmn6XnnIsnLA0KICAgICAgICAgICAgICBjbGljazogdGhpcy5jaGVja01lbnUNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGxhYmVsOiAn5o6o6YCB6Iez5a626ZW/JywNCiAgICAgICAgICAgICAgY2xpY2s6IHRoaXMucHVzaFRvUGFyZW50DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBsYWJlbDogJ+e8lui+kScsDQogICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmVkaXRNZW51DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBsYWJlbDogJ+WIoOmZpCcsDQogICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRlbENyb3dkDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICB0eXBlOiAyLA0KICAgICAgICAgIGhpZGRlbjogIXRoaXMuJGhhcyhbJ015TWVudS1yb2xlJ10pDQogICAgICAgIH0sDQogICAgICAgIGdyb3VwRG93bk1lbnU6IHsNCiAgICAgICAgICB2YWx1ZTogJ+mbhuWbouS4i+WPkeeahOiPnOiwsScsDQogICAgICAgICAgYnRuczogWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBsYWJlbDogJ+afpeeciycsDQogICAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNoZWNrTWVudQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbGFiZWw6ICfliqDlhaXmiJHnmoToj5zosLEnLA0KICAgICAgICAgICAgICBjbGljazogdGhpcy5hZGRUb015TWVudQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgdHlwZTogMywNCiAgICAgICAgICBoaWRkZW46ICF0aGlzLiRoYXMoWydncm91cERvd25NZW51LXJvbGUnXSkNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIC8v5by556qX6KGo5Y2V6buY6K6k5YC877yI57yW6L6R5pe25Lyg5YWl77yJDQogICAgICBkaWFsb2dGb3JtRGF0YToge30sDQogICAgICAvLyDpgInkuK3mlbDmja4NCiAgICAgIHNlbGVjdGVkUm93czogW10sDQogICAgICAvLyDooajljZXpobnliJfooagNCiAgICAgIGZvcm1BdHRyczogew0KICAgICAgICBzaXplOiAnc21hbGwnLA0KICAgICAgICBydWxlczogew0KICAgICAgICAgIGNsYXNzQ29kZTogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnj63nuqfmnKrloavlhpknDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZm9ybURhdGE6IHt9LA0KICAgICAgLy/lvLnnqpfooajljZXpu5jorqTlgLzvvIjnvJbovpHml7bkvKDlhaXvvIkNCiAgICAgIGRpYWxvZ0Zvcm1BdHRyczogew0KICAgICAgICAnbGFiZWwtcG9zaXRpb24nOiAncmlnaHQnLA0KICAgICAgICBydWxlczogew0KICAgICAgICAgIGluZ3JlZGllbnRJZDogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpo5/mnZDlkI3np7AnDQogICAgICAgICAgfSwNCiAgICAgICAgICBkaXNoZXNTdHlsZUlkOiB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeiPnOezuycNCiAgICAgICAgICB9LA0KICAgICAgICAgIGNyb3dkSWQ6IHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Lq6576kJw0KICAgICAgICAgIH0sDQogICAgICAgICAgZGljdGlvbmFyeUlkOiB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemjn+adkOWQjeensCcNCiAgICAgICAgICB9LA0KICAgICAgICAgIHByb3ZpbmNlQ29kZTogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnnIHku70nDQogICAgICAgICAgfSwNCiAgICAgICAgICBjaXR5Q29kZTogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlnLDnuqfluIInDQogICAgICAgICAgfSwNCiAgICAgICAgICBkaXN0cmljdENvZGU6IHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Yy6L+WOvycNCiAgICAgICAgICB9LA0KICAgICAgICAgIG9yaWdpbmFsVmVnZXRhYmxlUHJpY2U6IHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5q+b6I+cJw0KICAgICAgICAgIH0sDQogICAgICAgICAgY2xlYW5WZWdldGFibGVQcmljZTogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlh4Doj5wnDQogICAgICAgICAgfSwNCiAgICAgICAgICBjbGVhblZlZ2V0YWJsZVJhdGlvOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgICAgcGF0dGVybjogL14xMDAkfF4oWzEtOV18WzEtOV1cZCkkfF4oWzEtOV18WzEtOV1cZHwwKSsoPzpcLlxkezEsMn0pJC8sDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaUw77yI5LiN5ZCr77yJ5YiwMTAw55qE5pWw5a2X77yM5bCP5pWw54K55pyA5aSa5L+d55WZMuS9jScNCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHR5cGU6IHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6aOf5p2Q57G75Z6LJw0KICAgICAgICAgIH0sDQogICAgICAgICAgbmFtZTogWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlkI3np7AnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBtaW46IDEsDQogICAgICAgICAgICAgIG1heDogMjAsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMjAg5Liq5a2X56ymJywNCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBsZW5ndGg6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgICBwYXR0ZXJuOiAvXigwfChbMS05XVswLTldezAsM30pfCgoWzBdXC5cZHsxLDJ9fFsxLTldWzAtOV0qXC5cZHsxLDJ9KSkpJC8sDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlgLzkuI3nrYnkuo4w5LiU5LiN5aSn5LqOOTk5OS45OeWwj+aVsOS9jeacgOWkmuS4uuS4pOS9jeeahOmVv+W6picNCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHdpZHRoOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgICAgcGF0dGVybjogL14oMHwoWzEtOV1bMC05XXswLDN9KXwoKFswXVwuXGR7MSwyfXxbMS05XVswLTldKlwuXGR7MSwyfSkpKSQvLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWlMOWIsDk5OTkuOTnlsI/mlbDkvY3mnIDlpJrkuLrkuKTkvY3nmoTlrr3luqYnDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBoZWlnaHQ6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgICBwYXR0ZXJuOiAvXigwfChbMS05XVswLTldezAsM30pfCgoWzBdXC5cZHsxLDJ9fFsxLTldWzAtOV0qXC5cZHsxLDJ9KSkpJC8sDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaUw5YiwOTk5OS45OeWwj+aVsOS9jeacgOWkmuS4uuS4pOS9jeeahOmrmOW6picNCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIHByaWNlOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgICAgcGF0dGVybjogL14oKFsxLTldWzAtOV17MCw1fSl8KChbMF1cLlxkezEsMn18WzEtOV1bMC05XSpcLlxkezEsMn0pKSkkLywNCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WUruS7t+W6lOWkp+S6jjDkuJTkuI3otoXov4c5OTk5OTkuOTknDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBtZW51TmFtZTogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zosLHlkI3np7AnDQogICAgICAgICAgfSwNCiAgICAgICAgICBhcHBsaWNhYmxlUGVvcGxlOiB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemAgueUqOS6uue+pCcNCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRpc2FibGVkOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIC8vIOmjn+adkOWIhumFjQ0KICAgICAgcm9sZU5hbWU6ICcnLA0KICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLA0KICAgICAgY3Vpc2luZTogew0KICAgICAgICAvL+W3suWIhumFjemjn+adkA0KICAgICAgICBwYWdpbjogew0KICAgICAgICAgIHJvbGVJZDogdGhpcy4kcm91dGUucXVlcnkucm9sZUlkLA0KICAgICAgICAgIGxpbWl0OiA1MCwNCiAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgIG9mZnNldDogMA0KICAgICAgICB9LA0KICAgICAgICBzdGFmZk5hbWU6ICcnLCAvL+aQnOe0ouWtl+autQ0KICAgICAgICBjaGVja2VkOiBbXSwNCiAgICAgICAgbGlzdDogW10NCiAgICAgIH0sDQogICAgICBpbmdyZWRpZW50OiB7DQogICAgICAgIC8v5pyq5YiG6YWN6aOf5p2QDQogICAgICAgIHBhZ2luOiB7DQogICAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQsDQogICAgICAgICAgbGltaXQ6IDUwLA0KICAgICAgICAgIHBhZ2U6IDEsDQogICAgICAgICAgb2Zmc2V0OiAwDQogICAgICAgIH0sDQogICAgICAgIG5hbWVPclBpbnlpbkhlYWRlcjogJycsDQogICAgICAgIGNoZWNrZWQ6IFtdLA0KICAgICAgICBsaXN0OiBbDQogICAgICAgICAgLy8geyBpZDogMSwgbmFtZTogIuW8oOS4iSIsIG51bWJlcjogIjEwMDAxMSIgfQ0KICAgICAgICBdLA0KICAgICAgICBmaWx0ZXJMaXN0OiBbXQ0KICAgICAgfSwNCiAgICAgIHNhdmVEYXRhOiB7DQogICAgICAgIC8v5bey5YiG6YWN55So5oi3DQogICAgICAgIGFkZDogW10sIC8v5re75Yqg5LqGDQogICAgICAgIHJlbW92ZTogW10gLy/np7vpmaTkuoYNCiAgICAgIH0sDQogICAgICBwaWNrZXJPcHRpb25zOiB7DQogICAgICAgIGRpc2FibGVkRGF0ZSh0aW1lKSB7DQogICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpIDwgRGF0ZS5ub3coKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGN1aXNpbmVMb2FkaW5nOiBmYWxzZSwgLy8g5YiG6YWN5LitDQogICAgICB1bmN1aXNpbmVMb2FkaW5nOiBmYWxzZSwgLy8g5Y+W5raI5YiG6YWN5LitDQogICAgICBsb2FkaW5nOiBmYWxzZSwgLy8g5Yqg6L295LitDQogICAgICBwdXNoUGFuZWxWaXNpYmxlOiBmYWxzZSwNCiAgICAgIG1lbnVJZDogJycNCiAgICB9Ow0KICB9LA0KICAvLyDorqHnrpflsZ7mgKfvvIzkvJrnm5HlkKzkvp3otZblsZ7mgKflgLzpmo/kuYvlj5jljJYNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsncm9sZVR5cGUnXSksDQogICAgY2FuUHVzaCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFsbE1lbnVMaXN0LmluY2x1ZGVzKCcvc2V0dGluZy9wdXNoUmVjb3JkcycpOw0KICAgIH0sDQogICAgYWxsTWVudUxpc3QoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5tZW51TGlzdC5tYXAoaXRlbSA9PiBpdGVtLnVybCk7DQogICAgfSwNCiAgICAvLyBtZW51KCkgew0KICAgIC8vICAgcmV0dXJuIE1lbnUuZ2V0TWVudSgpOw0KICAgIC8vIH0sDQogICAgd2Vla0hlYWRlcnMoKSB7DQogICAgICBsZXQgbGlzdCA9IHRoaXMud2Vla0xpc3QubWFwKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIGxhYmVsOiBpdGVtLA0KICAgICAgICAgIHByb3A6IGl0ZW0sDQogICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicNCiAgICAgICAgfTsNCiAgICAgIH0pOw0KICAgICAgbGlzdC51bnNoaWZ0KHsNCiAgICAgICAgbGFiZWw6ICcnLA0KICAgICAgICBwcm9wOiAnbWVhbFR5cGVTdHJpbmcnDQogICAgICB9KTsNCiAgICAgIHJldHVybiBsaXN0Ow0KICAgIH0sDQogICAgbGFiZWxXaWR0aCgpIHsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gJ2luZ3JlZGllbnRzJykgew0KICAgICAgICByZXR1cm4gJzE1MHB4JzsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09ICdydWxlcycpIHsNCiAgICAgICAgcmV0dXJuICcxMjBweCc7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gJzYwcHgnOw0KICAgICAgfQ0KICAgIH0sDQogICAgZGlhbG9nV2lkdGgoKSB7DQogICAgICBpZiAodGhpcy5hY3RpdmUgPT09ICdtZW51Jykgew0KICAgICAgICByZXR1cm4gJzkwMHB4JzsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmUgPT09ICdkaXNoZXMnKSB7DQogICAgICAgIHJldHVybiAnMTA0NXB4JzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAnNTYwcHgnOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGVhZGVycygpIHsNCiAgICAgIC8vIOWIl+ihqOaJgOacieWIl+ihqOmhuQ0KICAgICAgY29uc3QgYWxsSGVhZGVycyA9IHsNCiAgICAgICAgcHJvdmlkZUluZ3JlZGllbnRzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsDQogICAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLnNlbGVjdGFibGUgLy8g5piv5ZCm56aB6YCJDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+eugOaLvCcsDQogICAgICAgICAgICBwcm9wOiAnaW5ncmVkaWVudFBpbnlpbkhlYWRlcicNCiAgICAgICAgICB9LA0KDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfpo5/mnZDlkI3np7AnLA0KICAgICAgICAgICAgcHJvcDogJ2luZ3JlZGllbnROYW1lJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfnnIHku70nLA0KICAgICAgICAgICAgcHJvcDogJ3Byb3ZpbmNlTmFtZScNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5Zyw57qn5biCJywNCiAgICAgICAgICAgIHByb3A6ICdjaXR5TmFtZScNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5Yy6L+WOvycsDQogICAgICAgICAgICBwcm9wOiAnZGlzdHJpY3ROYW1lJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfmr5voj5zvvIjlhYMva2fvvIknLA0KICAgICAgICAgICAgcHJvcDogJ29yaWdpbmFsVmVnZXRhYmxlUHJpY2UnLA0KICAgICAgICAgICAgd2lkdGg6IDEyMA0KICAgICAgICAgICAgLy8gYWxpZ246ICdyaWdodCcNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5YeA6I+c77yI5YWDL2tn77yJJywNCiAgICAgICAgICAgIHByb3A6ICdjbGVhblZlZ2V0YWJsZVByaWNlJywNCiAgICAgICAgICAgIHdpZHRoOiAxMjANCiAgICAgICAgICAgIC8vIGFsaWduOiAncmlnaHQnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+aTjeS9nCcsDQogICAgICAgICAgICAvLyBjb2xUeXBlOiAnYnRucycsDQogICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywNCiAgICAgICAgICAgIHdpZHRoOiAnMTIwcHgnLA0KICAgICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicsDQogICAgICAgICAgICBzbG90TmFtZTogJ29wZXJhdGlvbicNCiAgICAgICAgICB9DQogICAgICAgIF0sDQoNCiAgICAgICAgaW5ncmVkaWVudHM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn566A5ou8JywNCiAgICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+mjn+adkOWQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnaW5ncmVkaWVudE5hbWUnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+WHgOavm+iPnOi9rOWMluavlO+8iCXvvIknLA0KICAgICAgICAgICAgcHJvcDogJ2NsZWFuVmVnZXRhYmxlUmF0aW8nDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+mjn+adkOexu+WeiycsDQogICAgICAgICAgICBwcm9wOiAnaW5ncmVkaWVudFR5cGUnLA0KICAgICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywNCiAgICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywNCiAgICAgICAgICAgIGZpeGVkOiAncmlnaHQnLA0KICAgICAgICAgICAgd2lkdGg6ICcxMjBweCcsDQogICAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywNCiAgICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywNCiAgICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucw0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgcnVsZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgIHNlbGVjdGFibGU6IHJvdyA9PiB7DQogICAgICAgICAgICAgIC8vIOaYr+WQpuemgemAiQ0KICAgICAgICAgICAgICBpZiAocm93LmNhbkVkaXQpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+WQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn6ZW/77yI5Y6Y57Gz77yJJywNCiAgICAgICAgICAgIHByb3A6ICdsZW5ndGgnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+Wuve+8iOWOmOexs++8iScsDQogICAgICAgICAgICBwcm9wOiAnd2lkdGgnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+mrmO+8iOWOmOexs++8iScsDQogICAgICAgICAgICBwcm9wOiAnaGVpZ2h0Jw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfmk43kvZwnLA0KICAgICAgICAgICAgLy8gY29sVHlwZTogJ2J0bnMnLA0KICAgICAgICAgICAgZml4ZWQ6ICdyaWdodCcsDQogICAgICAgICAgICB3aWR0aDogJzEyMHB4JywNCiAgICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLA0KICAgICAgICAgICAgc2xvdE5hbWU6ICdvcGVyYXRpb24nLA0KICAgICAgICAgICAgYnRuczogdGhpcy5idG5zDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBkaXNoZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn566A5ou8JywNCiAgICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+WQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn6I+c57O7JywNCiAgICAgICAgICAgIHByb3A6ICdkaXNoZXNTdHlsZU5hbWUnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+S6uue+pCcsDQogICAgICAgICAgICBwcm9wOiAnY3Jvd2ROYW1lJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfllK7ku7fvvIjlhYPvvIknLA0KICAgICAgICAgICAgcHJvcDogJ3ByaWNlJywNCiAgICAgICAgICAgIHdpZHRoOiAxMjANCiAgICAgICAgICAgIC8vIGFsaWduOiAncmlnaHQnDQogICAgICAgICAgfSwNCg0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywNCiAgICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywNCiAgICAgICAgICAgIGZpeGVkOiAncmlnaHQnLA0KICAgICAgICAgICAgd2lkdGg6ICcxMzBweCcsDQogICAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywNCiAgICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywNCiAgICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucw0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgY3Jvd2Q6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn566A5ou8JywNCiAgICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+WQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScNCiAgICAgICAgICB9LA0KDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfmk43kvZwnLA0KICAgICAgICAgICAgLy8gY29sVHlwZTogJ2J0bnMnLA0KICAgICAgICAgICAgZml4ZWQ6ICdyaWdodCcsDQogICAgICAgICAgICB3aWR0aDogJzEyMHB4JywNCiAgICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLA0KICAgICAgICAgICAgc2xvdE5hbWU6ICdvcGVyYXRpb24nLA0KICAgICAgICAgICAgYnRuczogdGhpcy5idG5zDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBjdWlzaW5lOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsDQogICAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLnNlbGVjdGFibGUgLy8g5piv5ZCm56aB6YCJDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+eugOaLvCcsDQogICAgICAgICAgICBwcm9wOiAncGlueWluSGVhZGVyJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICflkI3np7AnLA0KICAgICAgICAgICAgcHJvcDogJ25hbWUnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+aTjeS9nCcsDQogICAgICAgICAgICAvLyBjb2xUeXBlOiAnYnRucycsDQogICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywNCiAgICAgICAgICAgIHdpZHRoOiAnMTIwcHgnLA0KICAgICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicsDQogICAgICAgICAgICBzbG90TmFtZTogJ29wZXJhdGlvbicsDQogICAgICAgICAgICBidG5zOiB0aGlzLmJ0bnMNCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIG1lbnU6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn566A5ou8JywNCiAgICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+iPnOiwseWQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn6YCC55So5Lq6576kJywNCiAgICAgICAgICAgIHByb3A6ICdjcm93ZE5hbWVzJywNCiAgICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLA0KICAgICAgICAgICAgc2xvdE5hbWU6ICdjcm93ZE5hbWVzJywNCiAgICAgICAgICAgICdzaG93LW92ZXJmbG93LXRvb2x0aXAnOiB0cnVlDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+aTjeS9nCcsDQogICAgICAgICAgICAvLyBjb2xUeXBlOiAnYnRucycsDQogICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywNCiAgICAgICAgICAgIHdpZHRoOiAnMTgwcHgnLA0KICAgICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicsDQogICAgICAgICAgICBzbG90TmFtZTogJ29wZXJhdGlvbicsDQogICAgICAgICAgICBidG5zOiB0aGlzLmJ0bnMNCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH07DQogICAgICByZXR1cm4gYWxsSGVhZGVyczsNCiAgICB9LA0KICAgIG1lbnVMaXN0KCkgew0KICAgICAgY29uc3Qgc2hvdyA9IHt9Ow0KICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuYWxsTWVudUl0ZW1zKSB7DQogICAgICAgIGlmICghdGhpcy5hbGxNZW51SXRlbXNba2V5XS5oaWRkZW4pIHsNCiAgICAgICAgICBzaG93W2tleV0gPSB0aGlzLmFsbE1lbnVJdGVtc1trZXldOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gc2hvdzsNCiAgICB9LA0KDQogICAgZm9ybUl0ZW1zKCkgew0KICAgICAgY29uc3QgYWxsRm9ybUl0ZW1zID0gWw0KICAgICAgICBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfor7fovpPlhaUnLA0KICAgICAgICAgICAgcHJvcDogJ25hbWVPclBpbnlpbkhlYWRlcicsDQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMCwNCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICflkI3np7DjgIHnroDmi7wnDQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+eKtuaAgScsDQogICAgICAgICAgICBwcm9wOiAnc3RhdHVzJywNCiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgb3B0aW9uczogWw0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFsdWU6ICcxJywNCiAgICAgICAgICAgICAgICBsYWJlbDogJ+WQr+eUqCcNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhbHVlOiAnLTEnLA0KICAgICAgICAgICAgICAgIGxhYmVsOiAn56aB55SoJw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfor7fovpPlhaUnLA0KICAgICAgICAgICAgcHJvcDogJ25hbWVPclBpbnlpbkhlYWRlcicsDQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMCwNCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICflkI3np7DjgIHnroDmi7wnDQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBsYWJlbDogJ+eKtuaAgScsDQogICAgICAgICAgICBwcm9wOiAnc3RhdHVzJywNCiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgb3B0aW9uczogWw0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFsdWU6ICcxJywNCiAgICAgICAgICAgICAgICBsYWJlbDogJ+WQr+eUqCcNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhbHVlOiAnLTEnLA0KICAgICAgICAgICAgICAgIGxhYmVsOiAn56aB55SoJw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbGFiZWw6ICfor7fovpPlhaUnLA0KICAgICAgICAgICAgcHJvcDogJ25hbWVPclBpbnlpbkhlYWRlcicsDQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAzMCwNCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICflkI3np7DjgIHnroDmi7wnDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICBdOw0KICAgICAgY29uc3Qgb3RoZXJJdGVtID0gWw0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgbGFiZWw6ICfnnIHku70nLA0KICAgICAgICAgIHByb3A6ICdwcm92aW5jZUNvZGUnLA0KICAgICAgICAgIC8vIHZhbHVlS2V5OiAnaWQnLA0KICAgICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsDQogICAgICAgICAgbGFiZWxQcm9wOiAncHJvdmluY2VOYW1lJywNCiAgICAgICAgICBoaWRkZW46ICF0aGlzLmFyZWEuYXJlYUxpc3QubGVuZ3RoLA0KICAgICAgICAgIC8vIG9wdGlvbnM6IHRoaXMuYXJlYUxpc3QNCiAgICAgICAgICBhamF4OiAoKSA9PiB0aGlzLmFyZWEuZ2V0UHJvdmluY2VMaXN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgIGxhYmVsOiAn5Zyw57qn5biCJywNCiAgICAgICAgICBwcm9wOiAnY2l0eUNvZGUnLA0KICAgICAgICAgIHBhcmVudFByb3A6ICdwcm92aW5jZUNvZGUnLA0KICAgICAgICAgIGxhYmVsUHJvcDogJ2NpdHlOYW1lJywNCiAgICAgICAgICAvLyB2YWx1ZUtleTogJ2NvZGUnLA0KICAgICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsDQogICAgICAgICAgLy8gb3B0aW9uczogdGhpcy5jaXR5TGlzdA0KICAgICAgICAgIGhpZGRlbjogIXRoaXMuYXJlYS5hcmVhTGlzdC5sZW5ndGgsDQogICAgICAgICAgYWpheDogbW9kZWwgPT4gdGhpcy5hcmVhLmdldENpdHlMaXN0KG1vZGVsLnByb3ZpbmNlQ29kZSkNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgIGxhYmVsOiAn5Yy6L+WOvycsDQogICAgICAgICAgcHJvcDogJ2Rpc3RyaWN0Q29kZScsDQogICAgICAgICAgcGFyZW50UHJvcDogJ2NpdHlDb2RlJywNCiAgICAgICAgICAvLyBsYWJlbFByb3A6ICdkaXN0cmljdE5hbWUnLA0KICAgICAgICAgIC8vIG9wdGlvbnM6IHRoaXMuZGlzdHJpY3RMaXN0LA0KICAgICAgICAgIC8vIHZhbHVlS2V5OiAnY29kZScsDQogICAgICAgICAgLy8gbGFiZWxLZXk6ICduYW1lJw0KICAgICAgICAgIGhpZGRlbjogIXRoaXMuYXJlYS5hcmVhTGlzdC5sZW5ndGgsDQogICAgICAgICAgYWpheDogbW9kZWwgPT4gdGhpcy5hcmVhLmdldENvdW50eUxpc3QobW9kZWwuY2l0eUNvZGUpDQogICAgICAgIH0NCiAgICAgIF07DQogICAgICBpZiAoIXRoaXMucm9sZVR5cGUuaW5jbHVkZXMoNykpIHsNCiAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhbGxGb3JtSXRlbXNbMF0sIFsxLCAwXS5jb25jYXQob3RoZXJJdGVtKSk7DQogICAgICB9DQogICAgICByZXR1cm4gYWxsRm9ybUl0ZW1zOw0KICAgIH0sDQogICAgZGlhbG9nRm9ybUl0ZW1zKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgcHJvdmlkZUluZ3JlZGllbnRzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICBsYWJlbDogJ+mjn+adkOWQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnZGljdGlvbmFyeUlkJywNCiAgICAgICAgICAgIGxhYmVsUHJvcDogJ2luZ3JlZGllbnROYW1lJywNCiAgICAgICAgICAgIHZhbHVlS2V5OiAnZGljdGlvbmFyeUlkJywNCiAgICAgICAgICAgIGxhYmVsS2V5OiAnZGljdGlvbmFyeVRleHQnLA0KICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgZGlzYWJsZWQ6DQogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPT09ICdwcm92aWRlSW5ncmVkaWVudHMnICYmDQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzRWRpdCA9PT0gdHJ1ZQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGFqYXg6IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgbGV0IGl0ZW1zID0gW107DQogICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBjaGlsZERpY3Rpb25hcnkoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaXRlbXMgPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIHJldHVybiBpdGVtczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgbGFiZWw6ICfnnIHku70nLA0KICAgICAgICAgICAgcHJvcDogJ3Byb3ZpbmNlQ29kZScsDQogICAgICAgICAgICAvLyB2YWx1ZUtleTogJ2lkJywNCiAgICAgICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsDQogICAgICAgICAgICBsYWJlbFByb3A6ICdwcm92aW5jZU5hbWUnLA0KICAgICAgICAgICAgaGlkZGVuOiAhdGhpcy5hcmVhLmFyZWFMaXN0Lmxlbmd0aCwNCiAgICAgICAgICAgIC8vIG9wdGlvbnM6ICF0aGlzLmFyZWEuZ2V0UHJvdmluY2VMaXN0KCksDQogICAgICAgICAgICBhamF4OiAoKSA9PiB0aGlzLmFyZWEuZ2V0UHJvdmluY2VMaXN0KCkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgbGFiZWw6ICflnLDnuqfluIInLA0KICAgICAgICAgICAgcHJvcDogJ2NpdHlDb2RlJywNCiAgICAgICAgICAgIHBhcmVudFByb3A6ICdwcm92aW5jZUNvZGUnLA0KICAgICAgICAgICAgbGFiZWxQcm9wOiAnY2l0eU5hbWUnLA0KICAgICAgICAgICAgLy8gdmFsdWVLZXk6ICdjb2RlJywNCiAgICAgICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsDQogICAgICAgICAgICAvLyBvcHRpb25zOiB0aGlzLmNpdHlMaXN0DQogICAgICAgICAgICBoaWRkZW46ICF0aGlzLmFyZWEuYXJlYUxpc3QubGVuZ3RoLA0KICAgICAgICAgICAgYWpheDogbW9kZWwgPT4gdGhpcy5hcmVhLmdldENpdHlMaXN0KG1vZGVsLnByb3ZpbmNlQ29kZSkNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgbGFiZWw6ICfljLov5Y6/JywNCiAgICAgICAgICAgIHByb3A6ICdkaXN0cmljdENvZGUnLA0KICAgICAgICAgICAgcGFyZW50UHJvcDogJ2NpdHlDb2RlJywNCiAgICAgICAgICAgIC8vIGxhYmVsUHJvcDogJ2Rpc3RyaWN0TmFtZScsDQogICAgICAgICAgICAvLyBvcHRpb25zOiB0aGlzLmRpc3RyaWN0TGlzdCwNCiAgICAgICAgICAgIC8vIHZhbHVlS2V5OiAnY29kZScsDQogICAgICAgICAgICAvLyBsYWJlbEtleTogJ25hbWUnDQogICAgICAgICAgICBoaWRkZW46ICF0aGlzLmFyZWEuYXJlYUxpc3QubGVuZ3RoLA0KICAgICAgICAgICAgYWpheDogbW9kZWwgPT4gdGhpcy5hcmVhLmdldENvdW50eUxpc3QobW9kZWwuY2l0eUNvZGUpDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbGFiZWw6ICfmr5voj5zvvIjlhYMva2fvvIknLA0KICAgICAgICAgICAgcHJvcDogJ29yaWdpbmFsVmVnZXRhYmxlUHJpY2UnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbGFiZWw6ICflh4Doj5zvvIjlhYMva2fvvIknLA0KICAgICAgICAgICAgcHJvcDogJ2NsZWFuVmVnZXRhYmxlUHJpY2UnLA0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywNCiAgICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywNCiAgICAgICAgICAgIGZpeGVkOiAncmlnaHQnLA0KICAgICAgICAgICAgd2lkdGg6ICcxMDBweCcsDQogICAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywNCiAgICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJw0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgaW5ncmVkaWVudHM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgICAgICAgIGxhYmVsOiAn6aOf5p2Q5ZCN56ewJywNCiAgICAgICAgICAgIHByb3A6ICdkaWN0aW9uYXJ5SWQnLA0KICAgICAgICAgICAgbGFiZWxQcm9wOiAnaW5ncmVkaWVudE5hbWUnLA0KICAgICAgICAgICAgdmFsdWVLZXk6ICdkaWN0aW9uYXJ5SWQnLA0KICAgICAgICAgICAgbGFiZWxLZXk6ICdkaWN0aW9uYXJ5VGV4dCcsDQogICAgICAgICAgICBpbml0Q291bnQ6ICdrZWVwJywNCiAgICAgICAgICAgIGF0dHJzOiB7DQogICAgICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsDQogICAgICAgICAgICAgICdmaWx0ZXItbWV0aG9kJzogdGhpcy5kYXRhRmlsdGVyKCksDQogICAgICAgICAgICAgIGRpc2FibGVkOg0KICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID09PSAnaW5ncmVkaWVudHMnICYmIHRoaXMuZGlhbG9nRm9ybS5pc0VkaXQgPT09IHRydWUNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMNCiAgICAgICAgICAgIC8vIGFqYXg6IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIC8vICAgbGV0IGl0ZW1zID0gW107DQogICAgICAgICAgICAvLyAgIGxldCByZXN1bHQgPSBhd2FpdCBjaGlsZERpY3Rpb25hcnkoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAvLyAgICAgaXRlbXMgPSByZXMuZGF0YTsNCiAgICAgICAgICAgIC8vICAgfSk7DQogICAgICAgICAgICAvLyAgIHJldHVybiBpdGVtczsNCiAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBsYWJlbDogJ+WHgOavm+iPnOi9rOWMluavlO+8iCXvvIknLA0KICAgICAgICAgICAgcHJvcDogJ2NsZWFuVmVnZXRhYmxlUmF0aW8nDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgICAgICAgIGxhYmVsOiAn6aOf5p2Q57G75Z6LJywNCiAgICAgICAgICAgIHByb3A6ICd0eXBlJywNCiAgICAgICAgICAgIG9wdGlvbnM6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4kRCgnSU5HUkVESUVOVF9UWVBFJykpKS5tYXAoDQogICAgICAgICAgICAgIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBOdW1iZXIoaXRlbS52YWx1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIHJ1bGVzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIGxhYmVsOiAn5ZCN56ewJywNCiAgICAgICAgICAgIHByb3A6ICduYW1lJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIGxhYmVsOiAn6ZW/5bqm77yI5Y6Y57Gz77yJJywNCiAgICAgICAgICAgIHByb3A6ICdsZW5ndGgnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbGFiZWw6ICflrr3luqbvvIjljpjnsbPvvIknLA0KICAgICAgICAgICAgcHJvcDogJ3dpZHRoJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIGxhYmVsOiAn6auY5bqm77yI5Y6Y57Gz77yJJywNCiAgICAgICAgICAgIHByb3A6ICdoZWlnaHQnDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBkaXNoZXM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICAvLyB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbGFiZWw6ICflkI3np7AnLA0KICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScsDQogICAgICAgICAgICBzbG90TmFtZTogJ2N1c3RvbXxuYW1lJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICBsYWJlbDogJ+iPnOezuycsDQogICAgICAgICAgICBwcm9wOiAnZGlzaGVzU3R5bGVJZCcsDQogICAgICAgICAgICB2YWx1ZUtleTogJ2lkJywNCiAgICAgICAgICAgIGxhYmVsS2V5OiAnbmFtZScsDQogICAgICAgICAgICBhamF4OiBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgIGxldCBpdGVtID0gW107DQogICAgICAgICAgICAgIGF3YWl0IGNvb2tpbmdTdHlsZUxpc3QoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaXRlbSA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgICAgICAgIGxhYmVsOiAn5Lq6576kJywNCiAgICAgICAgICAgIHByb3A6ICdjcm93ZElkJywNCiAgICAgICAgICAgIHZhbHVlS2V5OiAnaWQnLA0KICAgICAgICAgICAgbGFiZWxLZXk6ICduYW1lJywNCiAgICAgICAgICAgIGFqYXg6IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBbXTsNCiAgICAgICAgICAgICAgYXdhaXQgY3Jvd2RMaXN0KCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGl0ZW0gPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIHJldHVybiBpdGVtOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIGxhYmVsOiAn5ZSu5Lu377yI5YWD77yJJywNCiAgICAgICAgICAgIHByb3A6ICdwcmljZScsDQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIGF0dHJzOiB7DQogICAgICAgICAgICAgIC8vIHR5cGU6ICdudW1iZXInLA0KICAgICAgICAgICAgICAvLyBuYW1lOiAnbnVtYmVyLWlucHV0Jw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgbWVudTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBsYWJlbDogJ+iPnOiwseWQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbWVudU5hbWUnLA0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBsYWJlbDogJ+mAgueUqOS6uue+pCcsDQogICAgICAgICAgICBwcm9wOiAnYXBwbGljYWJsZVBlb3BsZScsDQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgY3Vpc2luZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBsYWJlbDogJ+WQjeensCcsDQogICAgICAgICAgICBwcm9wOiAnbmFtZScsDQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgY3Jvd2Q6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbGFiZWw6ICflkI3np7AnLA0KICAgICAgICAgICAgcHJvcDogJ25hbWUnLA0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH07DQogICAgfSwNCiAgICB0YWJzKCkgew0KICAgICAgY29uc3QgdGFic0FsbEl0ZW1zID0gWw0KICAgICAgICAncHJvdmlkZUluZ3JlZGllbnRzJywNCiAgICAgICAgLy8gJ2luZ3JlZGllbnRzJywNCiAgICAgICAgJ3J1bGVzJywNCiAgICAgICAgLy8gJ2N1aXNpbmUnLA0KICAgICAgICAnZGlzaGVzJywNCiAgICAgICAgJ2Nyb3dkJywNCiAgICAgICAgJ21lbnUnDQogICAgICBdOw0KDQogICAgICAvLyByZXR1cm4gdGFic0FsbEl0ZW1zLmZpbHRlcihpdGVtID0+ICF0aGlzLnRhYnNMYWJlbFtpdGVtXS5oaWRkZW4pOw0KICAgICAgcmV0dXJuIHRhYnNBbGxJdGVtczsNCiAgICB9DQogIH0sDQogIC8vIOebkeaOp2RhdGHkuK3nmoTmlbDmja7lj5jljJYNCiAgd2F0Y2g6IHsNCiAgICBpbm5lclZpc2libGU6IHsNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIGlmICh2YWwgJiYgIXRoaXMuaW5ncmVkaWVudC5saXN0Lmxlbmd0aCAmJiAhdGhpcy5jdWlzaW5lLmxpc3QubGVuZ3RoKSB7DQogICAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VW5kaXN0KCksIHRoaXMuZ2V0RGlzdCgpXSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5nZXRVbmRpc3QoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgYWN0aXZlKG5leHQsIHByZXYpIHsNCiAgICAgIGlmIChuZXh0ID09PSAnZGlzaGVzJyAmJiBwcmV2ICE9PSAnZGlzaGVzJykgew0KICAgICAgICBjdXRNYXRjaFN0YW5kYXJkTGlzdCgpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLmN1dE1hdGNoU3RhbmRhcmRMaXN0ID0gcmVzLmRhdGE7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgJ2RpYWxvZ0Zvcm0udmlzaWJsZScobmV4dCwgcHJldikgew0KICAgICAgaWYgKG5leHQgJiYgdGhpcy5hY3RpdmUgPT09ICdpbmdyZWRpZW50cycpIHsNCiAgICAgICAgY2hpbGREaWN0aW9uYXJ5KCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHJlcy5kYXRhOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIC8vIOaWueazlembhuWQiA0KICBtZXRob2RzOiB7DQogICAgZm9ybWF0SW5wdXQsDQoNCiAgICAvLyDov4fmu6Tpo5/mnZDlkI3np7ANCiAgICBkYXRhRmlsdGVyKHZhbCkgew0KICAgICAgcmV0dXJuIHV0aWxzLmRlYm91bmNlKHZhbCA9PiB7DQogICAgICAgIGNoaWxkRGljdGlvbmFyeSh7IG5hbWVPclBpbnlpbkhlYWRlcjogdmFsIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSByZXMuZGF0YTsNCiAgICAgICAgfSk7DQogICAgICB9LCAxMDAwKTsNCiAgICB9LA0KICAgIC8vIOWKoOWFpeaIkeeahOiPnOWNlQ0KICAgIGFkZFRvTXlNZW51KHJvdykgew0KICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWU7DQogICAgICBhZGRUb015TWVudShyb3cuaWQpDQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WKoOWFpeaIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgLy8g5pu05pawYlRhYmxlDQogICAgICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIC8v6K+35rGCdGFibGXmlbDmja4NCiAgICBhamF4R2V0RGF0YShwYXJhbXMpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXJhbXM6JywgcGFyYW1zKTsNCiAgICAgIHJldHVybiBxdWVyeUFwaVt0aGlzLmFjdGl2ZV0ocGFyYW1zKTsNCiAgICB9LA0KICAgIHJlZnJlc2hUYWJsZSgpIHsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy5iVGFibGVbMF0NCiAgICAgICAgICA/IHRoaXMuJHJlZnMuYlRhYmxlWzBdLm9uUmVmcmVzaFRhYmxlKCkNCiAgICAgICAgICA6IHRoaXMuJHJlZnMuYlRhYmxlLm9uUmVmcmVzaFRhYmxlKCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKSB7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIGlmICh0aGlzLmFjdGl2ZSAhPT0gJ21lbnUnKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy5iVGFibGVbMF0NCiAgICAgICAgICAgID8gdGhpcy4kcmVmcy5iVGFibGVbMF0uYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpDQogICAgICAgICAgICA6IHRoaXMuJHJlZnMuYlRhYmxlLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRyZWZzLnN1YkJUYWJsZVswXS5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/lr7zlhaVleGNlbGluZGV4DQogICAgb25DbGlja0ltcG9ydCgpIHsNCiAgICAgIEJJbXBvcnREYXRhKHsNCiAgICAgICAgdGVtcGxhdGVVcmw6DQogICAgICAgICAgJy9jYXRlcmluZy1hZG1pbicgKw0KICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNldHRpbmdzLm1lYWxzVXJsW3RoaXMuYWN0aXZlXS50bXBsLA0KICAgICAgICBhamF4SW1wb3J0OiBmb3JtRGF0YSA9PiB7DQogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdleHBvcnRUeXBlJywgMik7IC8vMj3lr7zlh7rplJnor6/miqXlkYoNCiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGltcG9ydEV4Y2VsKA0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5ncy5tZWFsc1VybFt0aGlzLmFjdGl2ZV0uaW1wb3J0VXJsLA0KICAgICAgICAgICAgICBmb3JtRGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhYmxlKCk7DQogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgcmVzb2x2ZShlKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkge30sDQogICAgaGFuZGxlU2l6ZUNoYW5nZSgpIHt9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoKSB7fSwNCg0KICAgIG9uQWRkKCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzRWRpdCA9IGZhbHNlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzWydlbEZvcm0nXSAmJiB0aGlzLiRyZWZzWydlbEZvcm0nXS5pbml0KCk7DQogICAgICB9KTsNCg0KICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAnZGlzaGVzJykgew0KICAgICAgICB0aGlzLmdldFVuZGlzdCgpOw0KICAgICAgICB0aGlzLmlubmVyVmlzaWJsZSA9IHRydWU7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDnvJbovpENCiAgICBlZGl0Q3Jvd2Qocm93KSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1EYXRhID0geyAuLi5yb3cgfTsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc0VkaXQgPSB0cnVlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzWydlbEZvcm0nXSAmJiB0aGlzLiRyZWZzWydlbEZvcm0nXS5pbml0KCk7DQogICAgICB9KTsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gJ2Rpc2hlcycpIHsNCiAgICAgICAgdGhpcy5nZXREaXN0KCk7DQogICAgICAgIHRoaXMuaW5uZXJWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOafpeeciw0KICAgIG9uTG9vayhyb3cpIHsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEgPSB7IC4uLnJvdyB9Ow0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzRWRpdCA9IGZhbHNlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IHRydWU7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gZmFsc2U7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnNbJ2VsRm9ybSddICYmIHRoaXMuJHJlZnNbJ2VsRm9ybSddLmluaXQoKTsNCiAgICAgIH0pOw0KICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAnZGlzaGVzJykgew0KICAgICAgICB0aGlzLmdldERpc3QoKTsNCiAgICAgICAgdGhpcy5pbm5lclZpc2libGUgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0sDQogICAgZGlzYWJsZWRDcm93ZChyb3cpIHsNCiAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlOw0KICAgICAgc3RhdHVzQXBpW3RoaXMuYWN0aXZlXSh7IHN0YXR1czogLTEsIGlkczogW3Jvdy5pZF0gfSkNCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn56aB55So5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICAvLyDmm7TmlrBiVGFibGUNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLmJUYWJsZVswXSk7DQogICAgICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOWQr+eUqA0KICAgIGFibGVkQ3Jvd2Qocm93KSB7DQogICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHN0YXR1c0FwaVt0aGlzLmFjdGl2ZV0oeyBzdGF0dXM6IDEsIGlkczogW3Jvdy5pZF0gfSkNCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5ZCv55So5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICAvLyDmm7TmlrBiVGFibGUNCiAgICAgICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5Yig6ZmkDQogICAgZGVsQ3Jvd2Qocm93KSB7DQogICAgICB0aGlzLiRjb25maXJtKCfliKDpmaTlkI7kuI3lj6/mgaLlpI3vvIznoa7lrprliKDpmaTvvJ8nLCAn5Yig6Zmk56Gu6K6kJywgew0KICAgICAgICBjdXN0b21DbGFzczogJ2JveC1kYW5nZXInLA0KICAgICAgICBjZW50ZXI6IHRydWUNCiAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICBkZWxBcGlbdGhpcy5hY3RpdmVdKFtyb3cuaWRdKQ0KICAgICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIC8vIOWFs+mXreiPnOWNleeahOW8ueeqlw0KICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICB0aGlzLm9uU2F2ZU1lbnUoKTsNCiAgICAgICAgICAgICAgLy8g5pu05pawYlRhYmxlDQogICAgICAgICAgICAgIHRoaXMuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBpbml0RGlhbG9nRm9ybURhdGEoKSB7DQogICAgICBjb25zdCBpdGVtcyA9IHsNCiAgICAgICAgcHJvdmlkZUluZ3JlZGllbnRzOiB7DQogICAgICAgICAgZGljdGlvbmFyeUlkOiAnJywNCiAgICAgICAgICBwcm92aW5jZUNvZGU6ICcnLA0KICAgICAgICAgIGNpdHlDb2RlOiAnJywNCiAgICAgICAgICBkaXN0cmljdENvZGU6ICcnLA0KICAgICAgICAgIG9yaWdpbmFsVmVnZXRhYmxlUHJpY2U6ICcnLA0KICAgICAgICAgIGNsZWFuVmVnZXRhYmxlUHJpY2U6ICcnDQogICAgICAgIH0sDQogICAgICAgIGluZ3JlZGllbnRzOiB7DQogICAgICAgICAgZGljdGlvbmFyeUlkOiAnJywNCiAgICAgICAgICBjbGVhblZlZ2V0YWJsZVJhdGlvOiAnJw0KICAgICAgICB9LA0KICAgICAgICBydWxlczogew0KICAgICAgICAgIG5hbWU6ICcnLA0KICAgICAgICAgIGxlbmd0aDogJycsDQogICAgICAgICAgd2lkdGg6ICcnLA0KICAgICAgICAgIGhlaWdodDogJycNCiAgICAgICAgfSwNCiAgICAgICAgZGlzaGVzOiB7DQogICAgICAgICAgbmFtZTogJycsDQogICAgICAgICAgZGlzaGVzU3R5bGVJZDogJycsDQogICAgICAgICAgY3Jvd2RJZDogJycsDQogICAgICAgICAgcHJpY2U6ICcnLA0KICAgICAgICAgIGRpc2hlc0NvbnRlbnRMaXN0OiBbXQ0KICAgICAgICB9LA0KICAgICAgICBjdWlzaW5lOiB7DQogICAgICAgICAgbmFtZTogJycNCiAgICAgICAgfSwNCiAgICAgICAgY3Jvd2Q6IHsNCiAgICAgICAgICBsb2dvZ3JhbTogJycsDQogICAgICAgICAgbmFtZTogJycNCiAgICAgICAgfSwNCiAgICAgICAgbWVudTogew0KICAgICAgICAgIGxvZ29ncmFtOiAnJywNCiAgICAgICAgICBtZW51TmFtZTogJycsDQogICAgICAgICAgYXBwbGljYWJsZVBlb3BsZTogJycNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICAgIHRoaXMubWVudURldGFpbC53ZWVrVGFibGVEYXRhID0gdGhpcy5oYW5kbGVNZWFsRGF0YShbXSk7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1EYXRhID0gaXRlbXNbdGhpcy5hY3RpdmVdOw0KICAgIH0sDQogICAgLy/ooajljZXlhbPpl63liY3muIXpmaTmoKHpqozlubbph43nva7mlbDmja4NCiAgICBvbkNsb3NlRm9ybSgpIHsNCiAgICAgIHRoaXMuaW5pdERpYWxvZ0Zvcm1EYXRhKCk7DQogICAgICB0aGlzLiRyZWZzWydlbEZvcm0nXSAmJiB0aGlzLiRyZWZzWydlbEZvcm0nXS5yZXNldEZpZWxkcygpOw0KICAgICAgdGhpcy5jdWlzaW5lID0gew0KICAgICAgICAvL+W3suWIhumFjemjn+adkA0KICAgICAgICBwYWdpbjogew0KICAgICAgICAgIHJvbGVJZDogdGhpcy4kcm91dGUucXVlcnkucm9sZUlkLA0KICAgICAgICAgIGxpbWl0OiA1MCwNCiAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgIG9mZnNldDogMA0KICAgICAgICB9LA0KICAgICAgICBzdGFmZk5hbWU6ICcnLCAvL+aQnOe0ouWtl+autQ0KICAgICAgICBjaGVja2VkOiBbXSwNCiAgICAgICAgbGlzdDogW10NCiAgICAgIH07DQogICAgICB0aGlzLmluZ3JlZGllbnQgPSB7DQogICAgICAgIC8v5pyq5YiG6YWN6aOf5p2QDQogICAgICAgIHBhZ2luOiB7DQogICAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQsDQogICAgICAgICAgbGltaXQ6IDUwLA0KICAgICAgICAgIHBhZ2U6IDEsDQogICAgICAgICAgb2Zmc2V0OiAwDQogICAgICAgIH0sDQogICAgICAgIG5hbWVPclBpbnlpbkhlYWRlcjogJycsDQogICAgICAgIGNoZWNrZWQ6IFtdLA0KICAgICAgICBsaXN0OiBbDQogICAgICAgICAgLy8geyBpZDogMSwgbmFtZTogIuW8oOS4iSIsIG51bWJlcjogIjEwMDAxMSIgfQ0KICAgICAgICBdLA0KICAgICAgICBmaWx0ZXJMaXN0OiBbXQ0KICAgICAgfTsNCiAgICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gW107DQogICAgICB0aGlzLmlubmVyVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgLy/mj5DkuqTooajljZUNCiAgICBvblN1Ym1pdEZvcm0oKSB7DQogICAgICAvLyDmoKHpqozooajljZUNCiAgICAgIHRoaXMuJHJlZnNbJ2VsRm9ybSddLnZhbGlkYXRlKCkudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgIC8vIOagoemqjOaIkOWKnw0KICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0ubG9hZGluZyA9IHRydWU7DQogICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PSAnZGlzaGVzJykgew0KICAgICAgICAgIGxldCBmbGFnID0gYXdhaXQgdGhpcy5vblN1Ym1pdElubmVyRm9ybSgpOw0KICAgICAgICAgIGlmICghZmxhZykgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGF3YWl0IGFwaVt0aGlzLmFjdGl2ZV0odGhpcy5kaWFsb2dGb3JtRGF0YSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpOw0KICAgICAgICAgICAgLy8g5pu05paw5by556qX5pWw5o2uDQogICAgICAgICAgICB0aGlzLmluaXREaWFsb2dGb3JtRGF0YSgpOw0KICAgICAgICAgICAgLy8g5YWz6Zet56qX5Y+jDQogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgLy8g5pu05pawYlRhYmxlDQogICAgICAgICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEuYWRkID0gW107DQogICAgICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZSA9IFtdOw0KICAgICAgICAgICAgdGhpcy5pbmdyZWRpZW50Lmxpc3QgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gW107DQogICAgICAgICAgICB0aGlzLmluZ3JlZGllbnQubmFtZU9yUGlueWluSGVhZGVyID0gJyc7DQogICAgICAgICAgICB0aGlzLmlubmVyVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgLy8gKHRoaXMuZGlhbG9nRm9ybS5pc0VkaXQgPyB1cGRhdGVGaW5TaHV0dGxlRmVlQnlJZCA6IHNhdmVGaW5TaHV0dGxlRmVlKSgNCiAgICAgICAgLy8gICB0aGlzLmRpYWxvZ0Zvcm1EYXRhDQogICAgICAgIC8vICkNCiAgICAgICAgLy8gICAudGhlbigoKSA9PiB7DQogICAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpOw0KICAgICAgICAvLyAgICAgLy8g5YWz6Zet56qX5Y+jDQogICAgICAgIC8vICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAvLyAgICAgdGhpcy4kcmVmcy5iVGFibGVbMF0uYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOw0KICAgICAgICAvLyAgIH0pDQogICAgICAgIC8vICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAvLyAgICAgdGhpcy5kaWFsb2dGb3JtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgLy8gICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5o+Q5Lqk6I+c5ZOB6K+m5oOFDQogICAgb25TdWJtaXRJbm5lckZvcm0oKSB7DQogICAgICBpZiAodGhpcy5jdWlzaW5lLmxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+iHs+Wwkea3u+WKoOS4gOadoemjn+adkCcpOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICBpZiAoDQogICAgICAgIHRoaXMuY3Vpc2luZS5saXN0LmZpbHRlcigNCiAgICAgICAgICAoeyBjbGVhblZlZ2V0YWJsZSwgY3V0TWF0Y2hTdGFuZGFyZElkLCBpbmdyZWRpZW50SWQgfSkgPT4NCiAgICAgICAgICAgIGNsZWFuVmVnZXRhYmxlICYmIGN1dE1hdGNoU3RhbmRhcmRJZCAmJiBpbmdyZWRpZW50SWQNCiAgICAgICAgKS5sZW5ndGggPT09IHRoaXMuY3Vpc2luZS5saXN0Lmxlbmd0aCAmJg0KICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1EYXRhLm5hbWUNCiAgICAgICkgew0KICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1EYXRhLmRpc2hlc0NvbnRlbnRMaXN0ID0gdGhpcy5jdWlzaW5lLmxpc3Q7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3Vpc2luZS5saXN0KTsNCiAgICAgICAgdGhpcy5pbm5lclZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pbmdyZWRpZW50Lm5hbWVPclBpbnlpbkhlYWRlciA9ICcnOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+WPguaVsOS4jeWujOaVtOWZon4nKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgb25DaGFuZ2VNb2RlbChtb2RlbCkge30sDQogICAgYmF0Y2hEZWwocm93cykgew0KICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+ivt+iHs+WwkemAieaLqeS4gOadoeaVsOaNricpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRjb25maXJtKA0KICAgICAgICAn5oKo5Y2z5bCG5om56YeP5Yig6ZmkJyArIHJvd3MubGVuZ3RoICsgJ+adoeaVsOaNru+8jOaYr+WQpue7p+e7re+8nycsDQogICAgICAgICfmj5DnpLonLA0KICAgICAgICB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9DQogICAgICApLnRoZW4oKCkgPT4gew0KICAgICAgICBsZXQgZGF0YSA9IFtdOw0KICAgICAgICByb3dzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgZGF0YS5wdXNoKGl0ZW0uaWQpOw0KICAgICAgICB9KTsNCiAgICAgICAgZGVsQXBpW3RoaXMuYWN0aXZlXShkYXRhKS50aGVuKCh7IGRhdGEgfSkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gYmF0Y2hVcGdyYWRlQ2hlY2socm93cykudGhlbigoKSA9PiB7DQogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAvLyAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgLy8gICBtZXNzYWdlOiAn5oiQ5YqfIScNCiAgICAgICAgLy8gfSk7DQogICAgICAgIC8vIHRoaXMucmVmcmVzaFRhYmxlKCk7DQogICAgICAgIC8vIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBiYXRjaE9mZihyb3dzKSB7DQogICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6K+36Iez5bCR6YCJ5oup5LiA5p2h5pWw5o2uJyk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuJGNvbmZpcm0oDQogICAgICAgICfmgqjljbPlsIbmibnph4/npoHnlKgnICsgcm93cy5sZW5ndGggKyAn5p2h5pWw5o2u77yM5piv5ZCm57un57ut77yfJywNCiAgICAgICAgJ+aPkOekuicsDQogICAgICAgIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgIH0NCiAgICAgICkudGhlbigoKSA9PiB7DQogICAgICAgIGxldCBkYXRhID0gW107DQogICAgICAgIHJvd3MuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBkYXRhLnB1c2goaXRlbS5pZCk7DQogICAgICAgIH0pOw0KICAgICAgICBzdGF0dXNBcGlbdGhpcy5hY3RpdmVdKHsgc3RhdHVzOiAtMSwgaWRzOiBkYXRhIH0pLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLnJlZnJlc2hUYWJsZSgpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBiYXRjaFVwZ3JhZGVDaGVjayhyb3dzKS50aGVuKCgpID0+IHsNCiAgICAgICAgLy8gICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgLy8gICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgLy8gICAgIG1lc3NhZ2U6ICfmiJDlip8hJw0KICAgICAgICAvLyAgIH0pOw0KICAgICAgICAvLyAgIHRoaXMucmVmcmVzaFRhYmxlKCk7DQogICAgICAgIC8vIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBiYXRjaE9uKHJvd3MpIHsNCiAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKCfor7foh7PlsJHpgInmi6nkuIDmnaHmlbDmja4nKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy4kY29uZmlybSgNCiAgICAgICAgJ+aCqOWNs+WwhuaJuemHj+WQr+eUqCcgKyByb3dzLmxlbmd0aCArICfmnaHmlbDmja7vvIzmmK/lkKbnu6fnu63vvJ8nLA0KICAgICAgICAn5o+Q56S6JywNCiAgICAgICAgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfQ0KICAgICAgKS50aGVuKCgpID0+IHsNCiAgICAgICAgbGV0IGRhdGEgPSBbXTsNCiAgICAgICAgcm93cy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGRhdGEucHVzaChpdGVtLmlkKTsNCiAgICAgICAgfSk7DQogICAgICAgIHN0YXR1c0FwaVt0aGlzLmFjdGl2ZV0oeyBzdGF0dXM6IDEsIGlkczogZGF0YSB9KS50aGVuKCh7IGRhdGEgfSkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgc2Nyb2xsKGV2LCB0eXBlKSB7DQogICAgICAvL3R5cGU6MOacquWIhumFjQ0KICAgICAgdmFyIGVsID0gZXYudGFyZ2V0IHx8IGV2LnNyY0VsZW1lbnQ7DQogICAgICB2YXIgbWF4ID0gZWwuc2Nyb2xsSGVpZ2h0IC0gTWF0aC5tYXgoZWwuY2xpZW50SGVpZ2h0LCBlbC5vZmZzZXRIZWlnaHQpOw0KICAgICAgLy8gY29uc29sZS5sb2cobWF4LGVsLnNjcm9sbFRvcCk7DQogICAgICBpZiAobWF4IC0gZWwuc2Nyb2xsVG9wIDw9IDEwKSB7DQogICAgICAgIGlmICh0aGlzWydfbG9jaycgKyB0eXBlXSkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzWydfbG9jaycgKyB0eXBlXSA9IHRydWU7DQogICAgICAgIHRoaXMuX2VsID0gZWw7DQogICAgICAgIHRoaXMuX3Njcm9sbFRvcCA9IGVsLnNjcm9sbFRvcDsNCiAgICAgICAgdHlwZSA/IHRoaXMuY3Vpc2luZS5wYWdpbi5wYWdlKysgOiB0aGlzLmluZ3JlZGllbnQucGFnaW4ucGFnZSsrOw0KICAgICAgICB0eXBlDQogICAgICAgICAgPyAodGhpcy5jdWlzaW5lLnBhZ2luLm9mZnNldCA9DQogICAgICAgICAgICAgICh0aGlzLmN1aXNpbmUucGFnaW4ucGFnZSAtIDEpICogdGhpcy5jdWlzaW5lLnBhZ2luLmxpbWl0KQ0KICAgICAgICAgIDogKHRoaXMuaW5ncmVkaWVudC5wYWdpbi5vZmZzZXQgPQ0KICAgICAgICAgICAgICAodGhpcy5pbmdyZWRpZW50LnBhZ2luLnBhZ2UgLSAxKSAqIHRoaXMuaW5ncmVkaWVudC5wYWdpbi5saW1pdCk7DQogICAgICAgIHR5cGUgPyB0aGlzLmdldERpc3QoKSA6IHRoaXMuZ2V0VW5kaXN0KCk7DQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyhNYXRoLnJhbmRvbSgpKTsNCiAgICB9LA0KICAgIGxvY2sodHlwZSkgew0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXNbJ19sb2NrJyArIHR5cGVdID0gZmFsc2U7DQogICAgICB9LCA1MCk7DQogICAgfSwNCiAgICBnZXRVbmRpc3Qoa2V5KSB7DQogICAgICBjb25zdCBmaWx0ZXJEYXRhID0gdGhpcy5zYXZlRGF0YS5yZW1vdmUucmVkdWNlKChzdW0sIGN1ciwgaW5kZXgpID0+IHsNCiAgICAgICAgY29uc3QgaWR4ID0gc3VtLmluZGV4T2YoY3VyKTsNCiAgICAgICAgIX5pZHggJiYgc3VtLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgIHJldHVybiBzdW07DQogICAgICB9LCB0aGlzLnNhdmVEYXRhLmFkZCk7DQogICAgICAvL+acquWIhumFjQ0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbmdyZWRpZW50LnBhZ2luLm9mZnNldCk7DQogICAgICByZXR1cm4gaW5ncmVkaWVudExpc3Qoew0KICAgICAgICBuYW1lT3JQaW55aW5IZWFkZXI6IHRoaXMuaW5ncmVkaWVudC5uYW1lT3JQaW55aW5IZWFkZXIsDQogICAgICAgIHR5cGU6IHRoaXMuYWN0aXZlLA0KICAgICAgICBpZDogdGhpcy5kaWFsb2dGb3JtRGF0YS5pZCwNCiAgICAgICAgc3RhdHVzOiAxDQogICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgW107DQogICAgICAgICAgZGF0YSA9IGRhdGENCiAgICAgICAgICAgIC5maWx0ZXIoaXRlbSA9PiAhZmlsdGVyRGF0YS5pbmNsdWRlcyhpdGVtLmlkKSkNCiAgICAgICAgICAgIC5tYXAoaXRlbSA9PiAoew0KICAgICAgICAgICAgICBwaW55aW5IZWFkZXI6IGl0ZW0ucGlueWluSGVhZGVyLA0KICAgICAgICAgICAgICBpbmdyZWRpZW50SWQ6IGl0ZW0uaWQsDQogICAgICAgICAgICAgIGluZ3JlZGllbnROYW1lOiBpdGVtLmluZ3JlZGllbnROYW1lLA0KICAgICAgICAgICAgICBjdXRNYXRjaFN0YW5kYXJkSWQ6ICcnLA0KICAgICAgICAgICAgICBjbGVhblZlZ2V0YWJsZTogJycNCiAgICAgICAgICAgIH0pKTsNCiAgICAgICAgICB0aGlzLmluZ3JlZGllbnQubGlzdCA9IGRhdGE7DQogICAgICAgICAgdGhpcy5fZWwgJiYgKHRoaXMuX2VsLnNjcm9sbFRvcCA9IHRoaXMuX3Njcm9sbFRvcCk7DQogICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09IHRoaXMuaW5ncmVkaWVudC5wYWdpbi5saW1pdCkgew0KICAgICAgICAgICAgdGhpcy5sb2NrKDApOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAvL3RoaXMubG9jaygwKQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGdldERpc3Qoa2V5KSB7DQogICAgICBpZiAodGhpcy5kaWFsb2dGb3JtLmlzRWRpdCB8fCB0aGlzLmRpYWxvZ0Zvcm0uaXNMb29rKSB7DQogICAgICAgIHJldHVybiBnZXREaXNoZXNDb250ZW50TGlzdEJ5RGlzaGVzSWQoew0KICAgICAgICAgIGRpc2hlc0lkOiB0aGlzLmRpYWxvZ0Zvcm1EYXRhLmlkDQogICAgICAgIH0pDQogICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgW107DQogICAgICAgICAgICAvLyB0aGlzLmN1aXNpbmUubGlzdCA9IHRoaXMuY3Vpc2luZS5saXN0LmNvbmNhdChkYXRhKTsNCiAgICAgICAgICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gdGhpcy5kaWFsb2dGb3JtRGF0YS5kaXNoZXNDb250ZW50TGlzdCA9IGRhdGE7DQogICAgICAgICAgICAvLyB0aGlzLmRpYWxvZ0Zvcm1EYXRhLmRpc2hlc0NvbnRlbnRMaXN0ID0gdGhpcy5jdWlzaW5lLmxpc3Q7DQogICAgICAgICAgICB0aGlzLl9lbCAmJiAodGhpcy5fZWwuc2Nyb2xsVG9wID0gdGhpcy5fc2Nyb2xsVG9wKTsNCiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PSB0aGlzLmN1aXNpbmUucGFnaW4ubGltaXQpIHsNCiAgICAgICAgICAgICAgdGhpcy5sb2NrKDEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgIC8vIHRoaXMubG9jaygxKTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNlYXJjaChldiwgdHlwZSkgew0KICAgICAgaWYgKGV2LndoaWNoID09IDEzKSB7DQogICAgICAgIHRoaXMuaW5ncmVkaWVudC5wYWdpbi5wYWdlID0gMTsNCiAgICAgICAgdGhpcy5pbmdyZWRpZW50LnBhZ2luLm9mZnNldCA9IDA7DQogICAgICAgIGlmICh0eXBlID09PSAxKSB7DQogICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRpYWxvZ0Zvcm1EYXRhLmRpc2hlc0NvbnRlbnRMaXN0Ow0KICAgICAgICAgIGlmIChldi50YXJnZXQudmFsdWUpIHsNCiAgICAgICAgICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gZGF0YS5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgIHJldHVybiAoDQogICAgICAgICAgICAgICAgaXRlbS5waW55aW5IZWFkZXINCiAgICAgICAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpDQogICAgICAgICAgICAgICAgICAuaW5jbHVkZXMoZXYudGFyZ2V0LnZhbHVlLnRvVXBwZXJDYXNlKCkpIHx8DQogICAgICAgICAgICAgICAgaXRlbS5pbmdyZWRpZW50TmFtZS5pbmNsdWRlcyhldi50YXJnZXQudmFsdWUpDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5jdWlzaW5lLmxpc3QgPSBkYXRhOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmluZ3JlZGllbnQubGlzdCA9IFtdOw0KICAgICAgICAgIHRoaXMuZ2V0VW5kaXN0KCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZCgpIHsNCiAgICAgIC8vY29uc29sZS5sb2codGhpcy5pbmdyZWRpZW50LmNoZWNrZWQpOw0KICAgICAgaWYgKCEodGhpcy5pbmdyZWRpZW50LmNoZWNrZWQgJiYgdGhpcy5pbmdyZWRpZW50LmNoZWNrZWQubGVuZ3RoID4gMCkpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5p2h6aOf5p2QJyk7DQogICAgICB9DQoNCiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5pbmdyZWRpZW50LmNoZWNrZWQpIHsNCiAgICAgICAgdmFyIG0gPSB0aGlzLmluZ3JlZGllbnQuY2hlY2tlZFtpXTsNCiAgICAgICAgdGhpcy5jdWlzaW5lLmxpc3QudW5zaGlmdChtKTsNCiAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuaW5ncmVkaWVudC5saXN0LCBtLCAnJywgMCk7DQoNCiAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEucmVtb3ZlLCBtLmluZ3JlZGllbnRJZCwgJycsIDApOw0KICAgICAgICAvLyB2YXIgcmVzID0gZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEuYWRkLCBtLmluZ3JlZGllbnRJZCwgJycsIDAsIDEpOw0KICAgICAgICAvLyBpZiAocmVzLmxlbmd0aCA8IDEpIHsNCiAgICAgICAgdGhpcy5zYXZlRGF0YS5hZGQucHVzaChtLmlkKTsNCiAgICAgICAgLy8gfQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVtb3ZlKCkgew0KICAgICAgaWYgKCEodGhpcy5jdWlzaW5lLmNoZWNrZWQgJiYgdGhpcy5jdWlzaW5lLmNoZWNrZWQubGVuZ3RoID4gMCkpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5p2h6aOf5p2QJyk7DQogICAgICB9DQogICAgICBmb3IgKHZhciBpIGluIHRoaXMuY3Vpc2luZS5jaGVja2VkKSB7DQogICAgICAgIHZhciBtID0gdGhpcy5jdWlzaW5lLmNoZWNrZWRbaV07DQogICAgICAgIHRoaXMuaW5ncmVkaWVudC5saXN0LnVuc2hpZnQobSk7DQogICAgICAgIGRlbGV0ZU9yRmluZEFycih0aGlzLmN1aXNpbmUubGlzdCwgbSwgJycsIDApOw0KDQogICAgICAgIGRlbGV0ZU9yRmluZEFycih0aGlzLnNhdmVEYXRhLmFkZCwgbS5pZCwgJycsIDApOw0KICAgICAgICAvLyB2YXIgcmVzID0gZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEucmVtb3ZlLCBtLmlkLCAnJywgMCwgMSk7DQogICAgICAgIC8vIGlmIChyZXMubGVuZ3RoIDwgMSkgew0KICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZS5wdXNoKG0uaWQpOw0KICAgICAgICAvLyB9DQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDmm7TmlrDliIbphY3mlbDmja4NCiAgICAgKiBAcGFyYW0ge0FycmF5fSBhZGQg5re75Yqg5YiG6YWNDQogICAgICogQHBhcmFtIHtBcnJheX0gcmVtb3ZlIOenu+mZpOWIhumFjQ0KICAgICAqLw0KICAgIC8vIHVwZGF0ZUN1aXNpbmVEYXRhKGFkZCwgcmVtb3ZlKSB7DQogICAgLy8gICBpZiAoYWRkLmxlbmd0aCkgew0KICAgIC8vICAgICBjb25zdCBhZGRJdGVtID0gdGhpcy5pbmdyZWRpZW50Lmxpc3QNCiAgICAvLyAgICAgICAuZmlsdGVyKGl0ZW0gPT4gYWRkLmluY2x1ZGVzKGl0ZW0uZGljdGlvbmFyeUlkKSkNCiAgICAvLyAgICAgICAubWFwKGl0ZW0gPT4gKHsNCiAgICAvLyAgICAgICAgIHBpbnlpbkhlYWRlcjogaXRlbS5waW55aW5IZWFkZXIsDQogICAgLy8gICAgICAgICBpbmdyZWRpZW50SWQ6IGl0ZW0uZGljdGlvbmFyeUlkLA0KICAgIC8vICAgICAgICAgaW5ncmVkaWVudE5hbWU6IGl0ZW0uaW5ncmVkaWVudE5hbWUsDQogICAgLy8gICAgICAgICBjdXRNYXRjaFN0YW5kYXJkSWQ6ICcnLA0KICAgIC8vICAgICAgICAgY2xlYW5WZWdldGFibGU6ICcnDQogICAgLy8gICAgICAgfSkpOw0KICAgIC8vICAgICB0aGlzLmN1aXNpbmUubGlzdCA9IHRoaXMuY3Vpc2luZS5saXN0LmNvbmNhdChhZGRJdGVtKTsNCiAgICAvLyAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdWlzaW5lLmxpc3QsIGFkZEl0ZW0sICdjdWlzaW5lLmxpc3QnKTsNCiAgICAvLyAgICAgdGhpcy5pbmdyZWRpZW50Lmxpc3QgPSB0aGlzLmluZ3JlZGllbnQubGlzdC5maWx0ZXIoDQogICAgLy8gICAgICAgaXRlbSA9PiAhYWRkLmluY2x1ZGVzKGl0ZW0uZGljdGlvbmFyeUlkKQ0KICAgIC8vICAgICApOw0KICAgIC8vICAgICB0aGlzLnNhdmVEYXRhLmFkZCA9IFtdOw0KICAgIC8vICAgICB0aGlzLmN1aXNpbmVMb2FkaW5nID0gZmFsc2U7DQogICAgLy8gICB9DQogICAgLy8gICBpZiAocmVtb3ZlLmxlbmd0aCkgew0KICAgIC8vICAgICBjb25zdCByZW1vdmVJdGVtID0gdGhpcy5jdWlzaW5lLmxpc3QuZmlsdGVyKGl0ZW0gPT4NCiAgICAvLyAgICAgICByZW1vdmUuaW5jbHVkZXMoaXRlbS5pZCkNCiAgICAvLyAgICAgKTsNCiAgICAvLyAgICAgdGhpcy5pbmdyZWRpZW50Lmxpc3QgPSB0aGlzLmluZ3JlZGllbnQubGlzdC5jb25jYXQocmVtb3ZlSXRlbSk7DQogICAgLy8gICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gdGhpcy5jdWlzaW5lLmxpc3QuZmlsdGVyKA0KICAgIC8vICAgICAgIGl0ZW0gPT4gIXJlbW92ZS5pbmNsdWRlcyhpdGVtLmlkKQ0KICAgIC8vICAgICApOw0KICAgIC8vICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZSA9IFtdOw0KICAgIC8vICAgICB0aGlzLmluZ3JlZGllbnRMb2FkaW5nID0gZmFsc2U7DQogICAgLy8gICB9DQogICAgLy8gfSwNCiAgICBkb3duTWVudShyb3cpIHsNCiAgICAgIGxldCBuZXdRdWVyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4kcm91dGUucXVlcnkpKTsNCiAgICAgIG5ld1F1ZXJ5LmlkID0gcm93LmlkOw0KICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2Uoew0KICAgICAgICBxdWVyeTogbmV3UXVlcnkNCiAgICAgIH0pOw0KICAgICAgdGhpcy4kcmVmcy5pc3N1ZS50b2dnbGVWaXNpYmxlKCk7DQogICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7IHF1cmV5OiB7IGlkOiByb3cuaWQgfSB9KTsNCiAgICB9LA0KICAgIC8vIOafpeeciw0KICAgIGNoZWNrTWVudShyb3csIGluZGV4KSB7DQogICAgICB0aGlzLm9uTG9vaygpOw0KICAgICAgdGhpcy5nZXREaXNoZXNMaXN0RGV0YWlsKHJvdy5pZCk7DQogICAgICB0aGlzLm1lbnVJZCA9IHJvdy5pZDsNCiAgICB9LA0KICAgIGdldERpc2hlc0xpc3REZXRhaWwoaWQpIHsNCiAgICAgIHJldHVybiBkaXNoZXNMaXN0RGV0YWlsKGlkIHx8IHRoaXMuJHJvdXRlLmlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMubWVudURldGFpbCA9IHsNCiAgICAgICAgICAuLi5yZXMuZGF0YSwNCiAgICAgICAgICBjcm93ZElkczogcmVzLmRhdGEuY3Jvd2RJZHNbMF0sDQogICAgICAgICAgd2Vla1RhYmxlRGF0YTogdGhpcy5oYW5kbGVNZWFsRGF0YShyZXMuZGF0YS5tZWFsRGF5TGlzdCkNCiAgICAgICAgfTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgaW5pdE1lbnVEZXRhaWwoKSB7DQogICAgICBjb25zdCBpbml0RGF0YSA9IHsNCiAgICAgICAgY3Jvd2RJZHM6ICcnLA0KICAgICAgICBuYW1lOiAnJywNCiAgICAgICAgdHlwZToNCiAgICAgICAgICB0aGlzLmFsbE1lbnVJdGVtc1t0aGlzLnN1YkFjdGl2ZV0gJiYNCiAgICAgICAgICB0aGlzLmFsbE1lbnVJdGVtc1t0aGlzLnN1YkFjdGl2ZV0udHlwZSwNCiAgICAgICAgbWVhbERheUxpc3Q6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBtZWFsRGF5OiAxLA0KICAgICAgICAgICAgbWVhbERheVN0cmluZzogJ+aYn+acn+S4gCcsDQogICAgICAgICAgICBtZWFsVHlwZUxpc3Q6IFsNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMSwgY29udGVudExpc3Q6IFtdIH0sDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDIsIGNvbnRlbnRMaXN0OiBbXSB9LA0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAzLCBjb250ZW50TGlzdDogW10gfQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbWVhbERheTogMiwNCiAgICAgICAgICAgIG1lYWxEYXlTdHJpbmc6ICfmmJ/mnJ/kuownLA0KICAgICAgICAgICAgbWVhbFR5cGVMaXN0OiBbDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDEsIGNvbnRlbnRMaXN0OiBbXSB9LA0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAyLCBjb250ZW50TGlzdDogW10gfSwNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMywgY29udGVudExpc3Q6IFtdIH0NCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG1lYWxEYXk6IDMsDQogICAgICAgICAgICBtZWFsRGF5U3RyaW5nOiAn5pif5pyf5LiJJywNCiAgICAgICAgICAgIG1lYWxUeXBlTGlzdDogWw0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAxLCBjb250ZW50TGlzdDogW10gfSwNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMiwgY29udGVudExpc3Q6IFtdIH0sDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDMsIGNvbnRlbnRMaXN0OiBbXSB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtZWFsRGF5OiA0LA0KICAgICAgICAgICAgbWVhbERheVN0cmluZzogJ+aYn+acn+WbmycsDQogICAgICAgICAgICBtZWFsVHlwZUxpc3Q6IFsNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMSwgY29udGVudExpc3Q6IFtdIH0sDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDIsIGNvbnRlbnRMaXN0OiBbXSB9LA0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAzLCBjb250ZW50TGlzdDogW10gfQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbWVhbERheTogNSwNCiAgICAgICAgICAgIG1lYWxEYXlTdHJpbmc6ICfmmJ/mnJ/kupQnLA0KICAgICAgICAgICAgbWVhbFR5cGVMaXN0OiBbDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDEsIGNvbnRlbnRMaXN0OiBbXSB9LA0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAyLCBjb250ZW50TGlzdDogW10gfSwNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMywgY29udGVudExpc3Q6IFtdIH0NCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG1lYWxEYXk6IDYsDQogICAgICAgICAgICBtZWFsRGF5U3RyaW5nOiAn5pif5pyf5YWtJywNCiAgICAgICAgICAgIG1lYWxUeXBlTGlzdDogWw0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAxLCBjb250ZW50TGlzdDogW10gfSwNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMiwgY29udGVudExpc3Q6IFtdIH0sDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDMsIGNvbnRlbnRMaXN0OiBbXSB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtZWFsRGF5OiA3LA0KICAgICAgICAgICAgbWVhbERheVN0cmluZzogJ+aYn+acn+aXpScsDQogICAgICAgICAgICBtZWFsVHlwZUxpc3Q6IFsNCiAgICAgICAgICAgICAgeyBtZWFsVHlwZTogMSwgY29udGVudExpc3Q6IFtdIH0sDQogICAgICAgICAgICAgIHsgbWVhbFR5cGU6IDIsIGNvbnRlbnRMaXN0OiBbXSB9LA0KICAgICAgICAgICAgICB7IG1lYWxUeXBlOiAzLCBjb250ZW50TGlzdDogW10gfQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfTsNCiAgICAgIHRoaXMubWVudURldGFpbCA9IHRoaXMuZGlhbG9nRm9ybS5pc0VkaXQNCiAgICAgICAgPyB7IC4uLnRoaXMubWVudURldGFpbCwgLi4uaW5pdERhdGEgfQ0KICAgICAgICA6IGluaXREYXRhOw0KICAgIH0sDQogICAgaW5pdE1lYWxEYXlMaXN0KHBhcmFtcykgew0KICAgICAgaWYgKHBhcmFtcykgew0KICAgICAgICB0aGlzLm1lbnVEZXRhaWwuY3Jvd2RJZHMgPSBwYXJhbXM7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGNvbnN0IHsgY3Jvd2RJZHMsIG5hbWUsIHR5cGUgfSA9IHRoaXMubWVudURldGFpbDsNCiAgICAgIGNvbnN0IF9vYmogPSB7IGNyb3dkSWRzLCBuYW1lLCB0eXBlIH07DQogICAgICB0aGlzLmluaXRNZW51RGV0YWlsKCk7DQogICAgICB0aGlzLm1lbnVEZXRhaWwgPSB7IC4uLnRoaXMubWVudURldGFpbCwgLi4uX29iaiB9Ow0KICAgIH0sDQogICAgYXN5bmMgZWRpdE1lbnUocm93LCBpc0FkZCkgew0KICAgICAgbGV0IG5ld1F1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiRyb3V0ZS5xdWVyeSkpOw0KICAgICAgbmV3UXVlcnkuaWQgPSBpc0FkZCA/ICcnIDogcm93LmlkOw0KICAgICAgbmV3UXVlcnkudHlwZSA9IHRoaXMuYWxsTWVudUl0ZW1zW3RoaXMuc3ViQWN0aXZlXS50eXBlOw0KICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2Uoew0KICAgICAgICBxdWVyeTogbmV3UXVlcnkNCiAgICAgIH0pOw0KICAgICAgLy8g5by55qGGDQogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gaXNBZGQgPT09IHRydWUgPyBmYWxzZSA6IHRydWU7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOw0KDQogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0DQogICAgICAgID8gYXdhaXQgdGhpcy5nZXREaXNoZXNMaXN0RGV0YWlsKHJvdy5pZCkNCiAgICAgICAgOiBhd2FpdCB0aGlzLmluaXRNZW51RGV0YWlsKCk7DQogICAgICAvLyBjb25zb2xlLmxvZygnbWVudURldGFpbDE6JywgdGhpcy5tZW51RGV0YWlsKTsNCiAgICAgIC8vIG1lbnXmiY3mnInov5nkuKoNCiAgICAgIHRoaXMuaXNNZW51RGV0YWlsID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOS/neWtmOiPnOWNlQ0KICAgIG9uU2F2ZU1lbnUoKSB7DQogICAgICB0aGlzLmluaXRNZW51RGV0YWlsKCk7DQogICAgICB0aGlzLmlzTWVudURldGFpbCA9IGZhbHNlOw0KICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgfSwNCiAgICAvL+WkhOeQhuiPnOWNleaVsOaNrg0KICAgIGhhbmRsZU1lYWxEYXRhLA0KICAgIHB1c2hUb1BhcmVudChyb3cpIHsNCiAgICAgIGlmICh0aGlzLmRpYWxvZ0Zvcm0uaXNMb29rKSB7DQogICAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc0xvb2sgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHRoaXMucHVzaFBhbmVsVmlzaWJsZSA9IHRydWU7DQogICAgICBpZiAocm93LmlkKSB7DQogICAgICAgIHRoaXMubWVudUlkID0gcm93LmlkOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlQ2xvc2VGb3JtKCkgew0KICAgICAgdGhpcy5wdXNoUGFuZWxWaXNpYmxlID0gZmFsc2U7DQogICAgfSwNCiAgICBnb3RvUHVzaFJlY29yZCgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc2V0dGluZy9wdXNoUmVjb3JkcycpOw0KICAgIH0NCiAgfSwNCiAgLy8g55Sf5ZG95ZGo5pyfIC0g5Yib5bu65a6M5oiQ77yI5Y+v5Lul6K6/6Zeu5b2T5YmNdGhpc+WunuS+i++8iQ0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIC8vIGNvbnNvbGUubG9nKGFyZWEuYXJlYUxpc3QpOw0KICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsgcXVlcnk6IHsgaWQ6ICcnIH0gfSk7DQogICAgLy8g5Yid5aeL5YyW5p2D6ZmQDQogICAgLy8gaWYgKHRoaXMucm9sZVR5cGUuaW5jbHVkZXMoNikgfHwgdGhpcy5yb2xlVHlwZS5pbmNsdWRlcyg3KSkgew0KICAgIC8vICAgdGhpcy5hY3RpdmUgPSAncHJvdmlkZUluZ3JlZGllbnRzJzsNCiAgICAvLyAgIHRoaXMucm9sZSA9IDE7DQogICAgLy8gfSBlbHNlIHsNCiAgICAvLyAgIHRoaXMuYWN0aXZlID0gJ2luZ3JlZGllbnRzJzsNCiAgICAvLyAgIHRoaXMucm9sZSA9IDA7DQogICAgLy8gfQ0KICAgIC8vIHRoaXMuYWN0aXZlID0gJ3Byb3ZpZGVJbmdyZWRpZW50cyc7DQogICAgLy8gdGhpcy5yb2xlID0gMTsNCiAgICAvLyDliJ3lp4vljJbmlbDmja4NCiAgICBsZXQgaWR4ID0gMDsNCiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5tZW51TGlzdCkgew0KICAgICAgaWYgKGlkeCA9PT0gMCkgew0KICAgICAgICB0aGlzLnN1YkFjdGl2ZSA9IGtleTsNCiAgICAgICAgaWR4Kys7DQogICAgICB9DQogICAgfQ0KICAgIHRoaXMuaW5pdERpYWxvZ0Zvcm1EYXRhKCk7DQogICAgY3V0TWF0Y2hTdGFuZGFyZExpc3QoKS50aGVuKHJlcyA9PiB7DQogICAgICB0aGlzLmN1dE1hdGNoU3RhbmRhcmRMaXN0ID0gcmVzLmRhdGE7DQogICAgfSk7DQogIH0sDQogIC8vIOeUn+WRveWRqOacnyAtIOaMgui9veWujOaIkO+8iOWPr+S7peiuv+mXrkRPTeWFg+e0oO+8iQ0KICBtb3VudGVkKCkge30NCn07DQo="},null]}