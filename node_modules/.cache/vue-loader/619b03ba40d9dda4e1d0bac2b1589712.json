{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/newTask/components/ChooseRole.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/newTask/components/ChooseRole.vue","mtime":1627979214256},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IERpYWxvZywgQnV0dG9uLCBDaGVja2JveCwgQ2hlY2tib3hHcm91cCB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBnZXRTY2hvb2xzIH0gZnJvbSAnLi4vLi4vLi4vYXBpL3Rhc2snOwpjb25zdCBjaXR5T3B0aW9ucyA9IFsn5LiK5rW3JywgJ+WMl+S6rCcsICflub/lt54nLCAn5rex5ZyzJ107CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hvb3NlUm9sZScsCiAgY29tcG9uZW50czogewogICAgW0RpYWxvZy5uYW1lXTogRGlhbG9nLAogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgW0NoZWNrYm94Lm5hbWVdOiBDaGVja2JveCwKICAgIFtDaGVja2JveEdyb3VwLm5hbWVdOiBDaGVja2JveEdyb3VwCiAgfSwKICBwcm9wczogewogICAgdGFza05hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IGZhbHNlLCAvLyDpu5jorqTpmpDol48KICAgICAgbG9hZGluZzogZmFsc2UsIC8vIOaVsOaNruaPkOS6pAogICAgICBkYXRhTG9hZGluZzogZmFsc2UsIC8vIOaVsOaNruWKoOi9vQogICAgICBjaGVja0FsbDogZmFsc2UsIC8vIOWFqOmAie+8jOm7mOiupOS4jemAiQogICAgICBjaGVja2VkU2Nob29sczogW10sIC8vIOmAieS4reeahOWtpuagoQogICAgICBhbGxTY2hvb2xzOiBbXSwgLy8g5YWo6YOo5a2m5qChCiAgICAgIGlzSW5kZXRlcm1pbmF0ZTogdHJ1ZSwKICAgICAgc2Nob29sTGlzdDogW10sIC8vIOWPr+mAieWtpuagoQogICAgICBjaGVja2VkU2Nob29sTGlzdDogW10gLy8g6YCJ5Lit55qE5a2m5qChCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBjcmVhdGVkKCkge30sCiAgbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog5Yid5aeL5YyW5pWw5o2uCiAgICAgKi8KICAgIGluaXREYXRhKCkgewogICAgICB0aGlzLmNoZWNrZWRTY2hvb2xzID0gW107IC8vIOmAieS4reeahOWtpuagoQogICAgICB0aGlzLmFsbFNjaG9vbHMgPSBbXTsgLy8g5YWo6YOo5a2m5qChCiAgICAgIHRoaXMuc2Nob29sTGlzdCA9IFtdOyAvLyDlj6/pgInlrabmoKEKICAgICAgdGhpcy5jaGVja2VkU2Nob29sTGlzdCA9IFtdOyAvLyDpgInkuK3nmoTlrabmoKEKICAgIH0sCiAgICAvKioKICAgICAqIOiOt+WPluWtpuagoeaVsOaNrgogICAgICovCiAgICBnZXRTY2hvb2xzKCkgewogICAgICBnZXRTY2hvb2xzKCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICBmb3IgKGxldCBpIGluIGRhdGEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGksIGRhdGFbaV0pOwogICAgICAgICAgdGhpcy5zY2hvb2xMaXN0LnB1c2goewogICAgICAgICAgICBzY2hvb2xOYW1lOiBpLAogICAgICAgICAgICBhc3NvY2lhdGVkQWNjb3VudDogZGF0YVtpXQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmFsbFNjaG9vbHMucHVzaChkYXRhW2ldKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5YWo6YCJCiAgICAgKi8KICAgIGhhbmRsZUNoZWNrQWxsQ2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgICB0aGlzLmNoZWNrZWRTY2hvb2xzID0gdmFsID8gdGhpcy5hbGxTY2hvb2xzIDogW107CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlID0gZmFsc2U7CiAgICB9LAogICAgLyoqCiAgICAgKiDljZXpgIkKICAgICAqLwogICAgb25DaGVja2VkU2Nob29sc0NoYW5nZSh2YWx1ZSkgewogICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgIGxldCBjaGVja2VkQ291bnQgPSB2YWx1ZS5sZW5ndGg7CiAgICAgIHRoaXMuY2hlY2tBbGwgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuYWxsU2Nob29scy5sZW5ndGg7CiAgICAgIGNvbnNvbGUubG9nKCdjaGVja0FsbCcsIHRoaXMuY2hlY2tBbGwpOwogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9CiAgICAgICAgY2hlY2tlZENvdW50ID4gMCAmJiBjaGVja2VkQ291bnQgPCB0aGlzLmFsbFNjaG9vbHMubGVuZ3RoOwogICAgfSwKICAgIC8qKgogICAgICog5by55qGG5pi+56S6CiAgICAgKi8KICAgIHNob3coKSB7CiAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgICAgdGhpcy5nZXRTY2hvb2xzKCk7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLyoqCiAgICAgKiDlvLnmoYbpmpDol48KICAgICAqLwogICAgaGlkZSgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgLyoqCiAgICAgKiDojrflj5bpgInkuK3lrabmoKEKICAgICAqLwogICAgZ2V0U2Nob29sTGlzdCgpIHsKICAgICAgdGhpcy5jaGVja2VkU2Nob29sTGlzdCA9IHRoaXMuc2Nob29sTGlzdAogICAgICAgIC5maWx0ZXIoCiAgICAgICAgICBpdGVtID0+IHRoaXMuY2hlY2tlZFNjaG9vbHMuaW5kZXhPZihpdGVtLmFzc29jaWF0ZWRBY2NvdW50KSAhPT0gLTEKICAgICAgICApCiAgICAgICAgLm1hcChpdGVtID0+ICh7IC4uLml0ZW0sIHRhc2tOYW1lOiB0aGlzLnRhc2tOYW1lLCBib251czogbnVsbCB9KSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDmj5DkuqTop5LoibIKICAgICAqLwogICAgb25Db25maXJtKCkgewogICAgICB0aGlzLmhpZGUoKTsKICAgICAgdGhpcy5nZXRTY2hvb2xMaXN0KCk7CiAgICAgIHRoaXMuJGVtaXQoJ2NoZWNrZWRTY2hvb2wnLCB0aGlzLmNoZWNrZWRTY2hvb2xMaXN0KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["ChooseRole.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChooseRole.vue","sourceRoot":"src/pages/bonus-tool-admin/views/newTask/components","sourcesContent":["<template>\n  <!-- 参与角色选择 -->\n  <el-dialog :visible.sync=\"visible\" title=\"参与角色选择\" center>\n    <div class=\"checkbox-box\">\n      <el-checkbox\n        :indeterminate=\"isIndeterminate\"\n        v-model=\"checkAll\"\n        @change=\"handleCheckAllChange\"\n        >全部</el-checkbox\n      >\n      <div style=\"margin: 15px 0;\"></div>\n      <el-checkbox-group\n        v-model=\"checkedSchools\"\n        @change=\"onCheckedSchoolsChange\"\n      >\n        <el-checkbox\n          v-for=\"(item, index) in schoolList\"\n          :label=\"item.associatedAccount\"\n          :key=\"index\"\n          >{{ item.schoolName }}</el-checkbox\n        >\n      </el-checkbox-group>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button\n        size=\"small\"\n        :loading=\"loading || dataLoading\"\n        @click=\"visible = false\"\n      >\n        取消\n      </el-button>\n      <el-button\n        size=\"small\"\n        :loading=\"loading || dataLoading\"\n        type=\"primary\"\n        @click=\"onConfirm\"\n      >\n        确定\n      </el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { Dialog, Button, Checkbox, CheckboxGroup } from 'element-ui';\nimport { getSchools } from '../../../api/task';\nconst cityOptions = ['上海', '北京', '广州', '深圳'];\nexport default {\n  name: 'ChooseRole',\n  components: {\n    [Dialog.name]: Dialog,\n    [Button.name]: Button,\n    [Checkbox.name]: Checkbox,\n    [CheckboxGroup.name]: CheckboxGroup\n  },\n  props: {\n    taskName: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      visible: false, // 默认隐藏\n      loading: false, // 数据提交\n      dataLoading: false, // 数据加载\n      checkAll: false, // 全选，默认不选\n      checkedSchools: [], // 选中的学校\n      allSchools: [], // 全部学校\n      isIndeterminate: true,\n      schoolList: [], // 可选学校\n      checkedSchoolList: [] // 选中的学校\n    };\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {},\n  methods: {\n    /**\n     * 初始化数据\n     */\n    initData() {\n      this.checkedSchools = []; // 选中的学校\n      this.allSchools = []; // 全部学校\n      this.schoolList = []; // 可选学校\n      this.checkedSchoolList = []; // 选中的学校\n    },\n    /**\n     * 获取学校数据\n     */\n    getSchools() {\n      getSchools().then(({ data }) => {\n        console.log(data);\n        for (let i in data) {\n          console.log(i, data[i]);\n          this.schoolList.push({\n            schoolName: i,\n            associatedAccount: data[i]\n          });\n          this.allSchools.push(data[i]);\n        }\n      });\n    },\n    /**\n     * 全选\n     */\n    handleCheckAllChange(val) {\n      console.log(val);\n      this.checkedSchools = val ? this.allSchools : [];\n      this.isIndeterminate = false;\n    },\n    /**\n     * 单选\n     */\n    onCheckedSchoolsChange(value) {\n      console.log(value);\n      let checkedCount = value.length;\n      this.checkAll = checkedCount === this.allSchools.length;\n      console.log('checkAll', this.checkAll);\n      this.isIndeterminate =\n        checkedCount > 0 && checkedCount < this.allSchools.length;\n    },\n    /**\n     * 弹框显示\n     */\n    show() {\n      this.initData();\n      this.getSchools();\n      this.visible = true;\n    },\n    /**\n     * 弹框隐藏\n     */\n    hide() {\n      this.visible = false;\n    },\n    /**\n     * 获取选中学校\n     */\n    getSchoolList() {\n      this.checkedSchoolList = this.schoolList\n        .filter(\n          item => this.checkedSchools.indexOf(item.associatedAccount) !== -1\n        )\n        .map(item => ({ ...item, taskName: this.taskName, bonus: null }));\n    },\n    /**\n     * 提交角色\n     */\n    onConfirm() {\n      this.hide();\n      this.getSchoolList();\n      this.$emit('checkedSchool', this.checkedSchoolList);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .el-checkbox-group {\n  .el-checkbox {\n    display: block;\n    margin-left: 14px;\n  }\n}\n.dialog-footer {\n  button:nth-child(2) {\n    margin-left: 66px;\n  }\n  .el-button--default,\n  .el-button--primary {\n    min-width: 88px;\n    height: 36px;\n    border-radius: 4px;\n    font-size: 14px;\n  }\n  .el-button--default {\n    color: #fff;\n    background: #d0d0d0;\n  }\n}\n.checkbox-box {\n  background: #f7f7f7;\n  padding: 13px 34px;\n}\n</style>\n"]}]}