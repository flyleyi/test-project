{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/resourceTask/index.vue?vue&type=style&index=0&id=5e616d35&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/resourceTask/index.vue","mtime":1645176309828},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1haW4tYm94IHsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogMDsKfQouaGVhZC1iYWNrZ3JvdW5kIHsKICBtaW4td2lkdGg6IDgwMHB4OwogIGJhY2tncm91bmQ6IHVybCgnLi4vLi4vYXNzZXRzL2ltYWdlcy9uYXZiZy53ZWJwJykgbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLmxvZ28taW1nIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgcGFkZGluZzogMTBweCAwOwp9Ci5uYXYgewogIHdpZHRoOiAzNTBweDsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5OwogIG1hcmdpbi10b3A6IDE1cHg7CiAgZmxvYXQ6IHJpZ2h0Owp9Ci5uYXYgaW1nIHsKICB3aWR0aDogMjVweDsKICBoZWlnaHQ6IDI1cHg7Cn0KLnRhc2stbWFpbiB7CiAgcGFkZGluZy10b3A6IDIwcHg7CiAgcGFkZGluZy1ib3R0b206IDUwcHg7CiAgd2lkdGg6IDgwdnc7CiAgbWluLXdpZHRoOiA4MDBweDsKICBtYXJnaW46IGF1dG87CiAgZGlzcGxheTogZmxleDsKICAvL2hlaWdodDogODB2aDsKfQoudGlwcy1mb250IHsKICBtYXJnaW4tdG9wOiAxMHB4OwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogYm9sZDsKICBjb2xvcjogcmdiYSgxNywgMTcsIDE3LCAwLjQpOwp9Ci50YXNrLXNpZGUgewogIHdpZHRoOiA5NXB4OwogIHBhZGRpbmc6IDUwcHggNXB4IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIC5sZWZ0LXRvcCB7CiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQ1KTsKICAgIGhlaWdodDogNTBweDsKICAgIGxpbmUtaGVpZ2h0OiA1MHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogIH0KICAubGVmdC1pdGVtIHsKICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjY1KTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGhlaWdodDogMzBweDsKICAgIGxpbmUtaGVpZ2h0OiAzMHB4OwogICAgZm9udC1zaXplOiAxNHB4OwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmY7CiAgICBib3gtc2hhZG93OiAxcHggMXB4IDJweCAycHggI2FmYzllYzFjOwogICAgJjpob3ZlciB7CiAgICAgIGJveC1zaGFkb3c6IDFweCAxcHggMnB4IDJweCAjYjdiZmNhNzc7CiAgICAgIC8vY29sb3I6ICNmZmY7CiAgICB9CiAgfQogIC5hY3RpdmUgewogICAgYm9yZGVyOiAxcHggc29saWQgIzQzOTNmZDsKICAgIGJhY2tncm91bmQ6ICM0MzkzZmQ7CiAgICBjb2xvcjogI2ZmZjsKICB9Cn0KLnRhc2stbGlzdCB7CiAgZmxleDogMTsKfQoudGFzay1jYXJkIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDMzMHB4OwogIGhlaWdodDogMTkwcHg7CiAgbWFyZ2luOiAxMHB4OwogIGZvbnQtc2l6ZTogMTRweDsKfQoudGFzay1kcmF3ZXItY2FyZCB7CiAgaGVpZ2h0OiAxNzBweDsKICBtYXJnaW46IDEwcHg7CiAgZm9udC1zaXplOiAxM3B4Owp9Ci50YXNrLXB1Ymxpc2hlciB7CiAgbGluZS1oZWlnaHQ6IDI4cHg7Cn0KLnRhc2stdGl0bGUgewogIGZvbnQtc2l6ZTogMThweDsKICBmb250LXdlaWdodDogNjAwOwogIGxpbmUtaGVpZ2h0OiAzNXB4Owp9Ci50YXNrLWNvbnRlbnQgewogIGhlaWdodDogNjBweDsKICBvdmVyZmxvdzogYXV0bzsKfQoudGFzay1kcmF3ZS10aXRsZSB7CiAgaGVpZ2h0OiAyOHB4OwogIGxpbmUtaGVpZ2h0OiAyOHB4OwogIC50YXNrLXRpdGxlLWxlZnQgewogICAgZmxvYXQ6IGxlZnQ7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBmb250LXdlaWdodDogNjAwOwogIH0KICAudGFzay1zdGF0dXMgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgY29sb3I6IHJlZDsKICB9Cn0KLnRhc2stZHJhd2VyLWNvbnRlbnQgewogIGhlaWdodDogNDBweDsKICBvdmVyZmxvdzogYXV0bzsKfQoudGFzay10aW1lIHsKICBwYWRkaW5nLXRvcDogNXB4OwogIGNvbG9yOiBncmF5OwogIGxpbmUtaGVpZ2h0OiAzMHB4Owp9Ci50b3AtY2xhc3MgewogIGhlaWdodDogNDBweDsKICBsaW5lLWhlaWdodDogNDBweDsKICBwYWRkaW5nLWxlZnQ6IDEycHg7Cn0KLnRvcC1sZWZ0IHsKICBmbG9hdDogbGVmdDsKfQoudG9wLXJpZ2h0IHsKICBmbG9hdDogcmlnaHQ7Cn0KLmRyYXctdG9wLWNsYXNzIHsKICBoZWlnaHQ6IDIwcHg7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgcGFkZGluZzogNXB4IDEycHggMDsKICBjb2xvcjogZ3JheTsKICBtaW4td2lkdGg6IDIzMHB4Owp9Ci50YXNrLXBhZ2UgewogIGhlaWdodDogNTBweDsKICBwb3NpdGlvbjogZml4ZWQ7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgYmFja2dyb3VuZDogI2ZmZjsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLm5vLXJlc3VsdCB7CiAgbWFyZ2luLXRvcDogMTAwcHg7CiAgbWFyZ2luLWxlZnQ6IDQwJTsKfQovZGVlcC8uZWwtZHJhd2VyX19oZWFkZXIgewogIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogYm9sZDsKICBjb2xvcjogIzAwMDsKfQovZGVlcC8uZWwtZHJhd2VyX19ib2R5IHsKICBvdmVyZmxvdzogYXV0bzsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQzLCAyNDIsIDI0Mik7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAg5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-front/views/resourceTask","sourcesContent":["<template>\n  <div class=\"main-box\">\n    <div class=\"head-background\">\n      <div class=\"logo-img\">\n        <a href=\"#\">\n          <img :src=\"imagelogo\" alt=\"\" @click=\"goPage('1')\" />\n        </a>\n      </div>\n      <div class=\"nav\">\n        <a href=\"#\">\n          <img\n            :src=\"imgSrcHome\"\n            alt=\"返回首页\"\n            title=\"返回首页\"\n            @click=\"goPage('1')\"\n          />\n        </a>\n        <a href=\"#\">\n          <img\n            :src=\"imgSrcOne\"\n            alt=\"我的需求\"\n            title=\"我的需求\"\n            @click=\"goPage('2')\"\n          />\n        </a>\n        <el-badge :is-dot=\"ismessageDot\">\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcTwo\"\n              alt=\"我的消息\"\n              title=\"我的消息\"\n              @click=\"goPage('3')\"\n            />\n          </a>\n        </el-badge>\n        <el-badge :is-dot=\"isDot\">\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcThree\"\n              alt=\"个人中心\"\n              title=\"个人中心\"\n              @click=\"goPage('4')\"\n            />\n          </a>\n        </el-badge>\n        <el-button type=\"primary\" size=\"mini\" @click.native=\"logOut\"\n          >退出</el-button\n        >\n      </div>\n    </div>\n    <div class=\"task-main\">\n      <div class=\"task-side\">\n        <!-- <div class=\"left-top\">搜索结果筛选</div> -->\n        <div\n          :class=\"['left-item', { active: currentId === '' }]\"\n          @click=\"changeTab('全部')\"\n        >\n          全部内容\n        </div>\n        <div\n          :class=\"['left-item', { active: currentId === item.id }]\"\n          v-for=\"(item, index) in firstLableListRes\"\n          :key=\"index\"\n          @click=\"changeTab(item)\"\n        >\n          {{ item.resourceName }}({{ item.count >= 100 ? '99+' : item.count }})\n        </div>\n      </div>\n      <div class=\"task-list\">\n        <div class=\"top-class\">\n          <div class=\"top-left\" v-if=\"isShow\">\n            共有{{ taskList.total }}个资源互助任务\n          </div>\n          <div class=\"top-right\">\n            <el-button type=\"\" size=\"mini\" @click=\"myTaskBtn\"\n              >我的任务</el-button\n            >\n            <el-button type=\"primary\" size=\"mini\" @click=\"publishTask\"\n              >发布任务</el-button\n            >\n          </div>\n        </div>\n        <!-- 无资源时显示 -->\n        <div v-if=\"!isShow\" class=\"no-result\">\n          <img :src=\"noResultImg\" alt=\"\" />\n          <p class=\"tips-font\">暂无相关资源</p>\n        </div>\n        <div v-else>\n          <el-card\n            class=\"task-card\"\n            shadow=\"hover\"\n            v-for=\"item in taskList.records\"\n            :key=\"item.id\"\n          >\n            <p class=\"task-title\">\n              {{ item.taskName }}\n            </p>\n            <p class=\"task-publisher\">发布人： {{ item.creatorName }}</p>\n            <p class=\"task-content\">\n              {{ item.taskDetail }}\n            </p>\n            <p class=\"task-time\">\n              <span style=\"\">发布时间： {{ item.createTime }}</span\n              ><el-button\n                style=\"float:right;\"\n                type=\"\"\n                size=\"mini\"\n                @click=\"receiveTask(item.id)\"\n                >领取</el-button\n              >\n            </p>\n          </el-card>\n        </div>\n      </div>\n    </div>\n    <div class=\"task-page\" v-if=\"isShow\">\n      <el-pagination\n        style=\"text-align:center;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"taskList.total\"\n      >\n      </el-pagination>\n    </div>\n    <!--我的任务列表 -->\n    <div class=\"task-popup\">\n      <el-drawer\n        title=\"我的任务\"\n        :visible.sync=\"taskDrawer\"\n        direction=\"rtl\"\n        size=\"550px\"\n      >\n        <div class=\"drawer-content\">\n          <div v-if=\"!mytaskList\">\n            <p>无数据</p>\n          </div>\n          <div v-if=\"mytaskList\">\n            <div class=\"draw-top-class\">\n              <p class=\"top-left\">共有{{ mytaskList.length }}个资源互助任务</p>\n              <div class=\"top-right\">\n                <p>今日已发布({{ pushedTaskCount }}/3)</p>\n              </div>\n            </div>\n            <el-card\n              class=\"task-drawer-card\"\n              shadow=\"hover\"\n              v-for=\"item in mytaskList\"\n              :key=\"item.id\"\n            >\n              <div class=\"task-drawe-title\">\n                <p class=\"task-title-left\">\n                  {{ item.taskName }}\n                </p>\n                <p class=\"task-status\">\n                  {{\n                    item.status === 3\n                      ? '已过期'\n                      : item.status === 2\n                      ? '审核不通过，已下架'\n                      : ''\n                  }}\n                </p>\n              </div>\n              <p class=\"task-publisher\">发布人： {{ item.creatorName }}</p>\n              <p class=\"task-drawer-content\">\n                {{ item.taskDetail }}\n              </p>\n              <div class=\"task-time\">\n                <span style=\"\">发布时间： {{ item.createTime }}</span>\n                <div style=\"float:right;\">\n                  <el-button\n                    type=\"\"\n                    v-if=\"item.status === 3\"\n                    size=\"mini\"\n                    @click=\"reInsertTask(item)\"\n                    >重新发布</el-button\n                  >\n                  <el-button\n                    type=\"\"\n                    v-if=\"item.status != 4\"\n                    size=\"mini\"\n                    @click=\"changeTask(item)\"\n                    >编辑</el-button\n                  >\n                  <el-button type=\"\" size=\"mini\" @click=\"deleteTask(item.id)\"\n                    >删除</el-button\n                  >\n                </div>\n              </div>\n            </el-card>\n          </div>\n        </div>\n      </el-drawer>\n    </div>\n    <!-- 新增任务弹窗 -->\n    <el-dialog\n      width=\"650px\"\n      center\n      :visible.sync=\"forbiddenDialog.visible\"\n      :title=\"forbiddenDialog.dialogTitle\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"beforeCloseFbDialog\"\n    >\n      <el-form\n        ref=\"fbDialogForm\"\n        :model=\"forbiddenDialog\"\n        :rules=\"forbiddenDialog.rules\"\n      >\n        <el-form-item prop=\"firstLableValue\">\n          <el-select\n            v-model=\"forbiddenDialog.firstLableValue\"\n            placeholder=\"一级资源任务标签\"\n            @change=\"lableChange\"\n          >\n            <el-option\n              v-for=\"item in forbiddenDialog.firstLableOptions\"\n              :key=\"item.id\"\n              :label=\"item.resourcesName\"\n              :value=\"item.id\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <div v-if=\"forbiddenDialog.isOtherFirstLable\" style=\"width:300px;\">\n          <el-form-item prop=\"otherFistLable\">\n            <el-input\n              v-model.trim=\"forbiddenDialog.otherFistLable\"\n              placeholder=\"自定义一级资源任务标签名\"\n              maxlength=\"5\"\n              show-word-limit\n            ></el-input>\n          </el-form-item>\n          <el-form-item prop=\"otherSecondLable\">\n            <el-input\n              v-model.trim=\"forbiddenDialog.otherSecondLable\"\n              placeholder=\"自定义二级资源任务标签名\"\n              maxlength=\"15\"\n              show-word-limit\n            ></el-input>\n          </el-form-item>\n        </div>\n        <div v-if=\"forbiddenDialog.isOtherSecondLable\">\n          <el-form-item prop=\"secondLableValue\">\n            <el-select\n              v-model=\"forbiddenDialog.secondLableValue\"\n              placeholder=\"二级资源任务标签\"\n              @change=\"lableSecondChange\"\n            >\n              <el-option\n                v-for=\"item in forbiddenDialog.secondLableOptions\"\n                :key=\"item.id\"\n                :label=\"item.resourcesName\"\n                :value=\"item.id\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <div\n          v-if=\"forbiddenDialog.isOtherSecondLableInput\"\n          style=\"width:300px;\"\n        >\n          <el-form-item prop=\"otherSecondLable\">\n            <el-input\n              v-model.trim=\"forbiddenDialog.otherSecondLable\"\n              placeholder=\"自定义二级资源任务标签名\"\n              maxlength=\"15\"\n              show-word-limit\n              @click:change=\"isShelfLable('secondB')\"\n            ></el-input>\n          </el-form-item>\n        </div>\n        <el-form-item prop=\"reason\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请填写您想寻求的资源帮助内容，描述尽可能详细！着急请备注时间节点（50字以内）\"\n            v-model=\"forbiddenDialog.reason\"\n            maxlength=\"50\"\n            show-word-limit\n          >\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseFbDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"forbiddenDialog.loading\"\n          @click.stop.prevent=\"onSubmitFbDialog\"\n          v-if=\"!isRecInsert\"\n          >确定</el-button\n        >\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"forbiddenDialog.loading\"\n          @click.stop.prevent=\"onSubmitFbDialog\"\n          v-if=\"isRecInsert\"\n          >重新发布</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  getTasksPage,\n  getTasksByStaffCode,\n  postReceiveTask,\n  getTaskListToday,\n  deleteTask,\n  insertTask,\n  updateTask,\n  releaseTask\n} from '@/pages/share-platform-front/api/resourceTask';\nimport {\n  getLabelAdjusted,\n  getReadMessage,\n  getAllLableList,\n  getSecondLableList\n} from '@/pages/share-platform-front/api/user';\nimport {\n  Pagination,\n  Collapse,\n  CollapseItem,\n  Badge,\n  Dialog,\n  Input,\n  Select,\n  Option\n} from 'element-ui';\nexport default {\n  name: 'ResourceTask',\n  components: {\n    [Pagination.name]: Pagination,\n    [Collapse.name]: Collapse,\n    [CollapseItem.name]: CollapseItem,\n    [Badge.name]: Badge,\n    [Dialog.name]: Dialog,\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option\n  },\n  data() {\n    return {\n      imagelogo: require('../../assets/images/newlogo.png'),\n      imgSrcHome: require('../../assets/images/home.webp'),\n      imgSrcOne: require('../../assets/images/need.webp'),\n      imgSrcTwo: require('../../assets/images/message.webp'),\n      imgSrcThree: require('../../assets/images/personal.webp'),\n      noResultImg: require('../../assets/images/noResult.webp'),\n      // 任务列表\n      taskList: [],\n      // 侧边标签列表\n      firstLableListRes: [],\n      // 按钮状态标识\n      currentId: '',\n      // 任务id\n      taskId: '',\n      // 我的任务抽屉\n      taskDrawer: false,\n      // 一天内发布的任务次数\n      pushedTaskCount: '',\n      // 用户角色\n      accountType: '',\n      isShow: true,\n      // 角标标识\n      isActive: true,\n      isDot: false,\n      ismessageDot: false,\n      currentPage: 1, //当前页码\n      pageSize: 10, //每页的数据数量\n      // 我的任务列表\n      mytaskList: [],\n      isRecInsert: false,\n      forbiddenDialog: {\n        visible: false, //弹窗是否可见\n        dialogTitle: '发布任务',\n        loading: false, //是否在请求中\n        reason: '',\n        firstLableValue: '',\n        secondLableValue: '',\n        otherFistLable: '',\n        otherSecondLable: '',\n        // 一级标签列表\n        firstLableOptions: [],\n        // 二级标签列表\n        secondLableOptions: [],\n        isOtherSecondLable: true,\n        isOtherFirstLable: false,\n        isOtherSecondLableInput: false,\n        rules: {\n          //校验效果\n          firstLableValue: {\n            required: true,\n            trigger: 'blur',\n            //message: '请填写完整标签内容'\n            message: '请选择一级资源标签'\n          },\n          otherFistLable: {\n            required: true,\n            trigger: 'blur',\n            message: '请填写一级资源标签'\n          },\n          otherSecondLable: {\n            required: true,\n            trigger: 'blur',\n            message: '请填写二级资源标签'\n          },\n          secondLableValue: {\n            required: true,\n            trigger: 'blur',\n            message: '请选择二级资源标签'\n          },\n          reason: {\n            required: true,\n            trigger: 'blur',\n            message: '任务细节描述未填写'\n          }\n        }\n      }\n    };\n  },\n  created() {\n    this.accountType = window.sessionStorage.getItem('accountType');\n    this.getSignTip();\n    this.getTasks();\n  },\n  mounted() {\n    const params = {\n      limit: this.pageSize,\n      offset: this.currentPage\n    };\n    console.log('this.$route.params.id', this.$route.params.id);\n    if (!this.$route.params.id) {\n      this.currentId = '';\n    } else {\n      this.currentId = this.$route.params.id;\n    }\n\n    if (this.$route.params.id == '其他') {\n      params.searchName = '其他';\n    } else {\n      params.resourceId = this.$route.params.id;\n    }\n    getTasksPage(params).then(res => {\n      if (!res.data.value) {\n        this.taskList = [];\n        this.isShow = false;\n      } else {\n        this.taskList = res.data.value;\n        this.isShow = true;\n      }\n    });\n  },\n  methods: {\n    //点击图标跳转页面\n    goPage(key) {\n      switch (key) {\n        case '1':\n          this.$router.push('/Search');\n          break;\n        case '2':\n          this.$router.push('/Demand');\n          break;\n        case '3':\n          this.$router.push('/Message');\n          break;\n        case '4':\n          this.$router.push('/Personal');\n          break;\n      }\n    },\n    //获取个人中心是否有待办事项\n    getSignTip() {\n      getLabelAdjusted(this.accountType).then(res => {\n        if (res.data == '0') {\n          this.isDot = false;\n        } else {\n          this.isDot = true;\n        }\n      });\n      getReadMessage(this.accountType).then(res => {\n        if (res.data.length) {\n          this.ismessageDot = true;\n        }\n      });\n    },\n    //退出登录\n    async logOut() {\n      window.localStorage.clear();\n      window.sessionStorage.clear();\n      await this.$store.dispatch('user/logout');\n      this.$router.push(`/login?redirect=${this.$route.fullPath}`);\n    },\n    //分页切换每页总条数\n    handleSizeChange(pagesize) {\n      this.pageSize = pagesize;\n      this.currentPage = 1;\n      const params = {\n        limit: this.pageSize,\n        offset: this.currentPage\n      };\n      getTasksPage(params).then(res => {\n        this.taskList = res.data.value;\n      });\n    },\n    //分页切换页码\n    handleCurrentChange(currentPage) {\n      this.currentPage = currentPage;\n      const params = {\n        limit: this.pageSize,\n        offset: (this.currentPage - 1) * this.pageSize\n      };\n      getTasksPage(params).then(res => {\n        this.taskList = res.data.value;\n      });\n    },\n    // 任务列表查询\n    getTasks() {\n      const params = {\n        limit: this.pageSize,\n        offset: this.currentPage\n      };\n      getTasksPage(params).then(res => {\n        if (!res.data.value) {\n          this.isShow = false;\n        } else {\n          this.isShow = true;\n        }\n        this.firstLableListRes = res.data.key;\n        this.firstLableListRes.forEach(item => {\n          if (item.resourceName == '其他') {\n            item.id = '其他';\n          }\n        });\n        this.taskList = res.data.value;\n      });\n    },\n    // 按钮切换\n    changeTab(item) {\n      if (item === '全部') {\n        this.filterList = [];\n        this.currentId = '';\n        this.currentTab = {};\n        this.getTasks();\n      } else {\n        this.filterList = item.child;\n        this.currentId = item.id;\n        this.currentTab = item;\n        const params = {\n          limit: this.pageSize,\n          offset: this.currentPage\n        };\n        if (item.resourceName == '其他') {\n          params.searchName = '其他';\n        } else {\n          params.resourceId = item.id;\n        }\n        getTasksPage(params).then(res => {\n          if (!res.data.value) {\n            this.taskList = [];\n            this.isShow = false;\n          } else {\n            this.taskList = res.data.value;\n            this.isShow = true;\n          }\n        });\n      }\n    },\n    // 我的任务抽屉展开\n    myTaskBtn() {\n      getTasksByStaffCode(this.accountType)\n        .then(res => {\n          if (res.data == '' || res.data == null) {\n            this.mytaskList = [];\n            this.$message({\n              type: 'info',\n              message: '您暂无自己的任务资源!'\n            });\n          } else {\n            this.mytaskList = res.data;\n            this.taskDrawer = true;\n            // 一天内发布的任务次数\n            getTaskListToday(this.accountType).then(res => {\n              this.pushedTaskCount = res.data;\n            });\n          }\n        })\n        .catch(res => {\n          this.$message({\n            type: 'error',\n            message: res.message\n          });\n        });\n    },\n    // 领取任务\n    receiveTask(data) {\n      const queryParams = {\n        id: data,\n        accountType: this.accountType\n      };\n      this.$confirm('确定领取该任务吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          postReceiveTask(queryParams).then(res => {\n            this.$message({\n              type: 'success',\n              message: '领取成功!'\n            });\n            this.getTasks();\n            this.currentId = '';\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消操作!'\n          });\n        });\n    },\n    // 删除任务\n    deleteTask(data) {\n      this.$confirm('确定删除该任务吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          deleteTask(data).then(res => {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n            this.getTasks();\n            setTimeout(() => {\n              getTasksByStaffCode(this.accountType).then(res => {\n                if (res.data == '' || res.data == null) {\n                  this.mytaskList = [];\n                  this.taskDrawer = false;\n                } else {\n                  this.mytaskList = res.data;\n                }\n              });\n            }, 500);\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除!'\n          });\n        });\n    },\n    // 重新发布\n    reInsertTask(item) {\n      const query = {\n        id: item.id,\n        accountType: this.accountType\n      };\n      this.$confirm('确定重新发布该任务吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          releaseTask(query).then(res => {\n            this.$message({\n              type: 'success',\n              message: '发布成功!'\n            });\n            this.myTaskBtn();\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '操作已取消!'\n          });\n        });\n    },\n    //获取所有一级标签列表\n    getAllFirstLable() {\n      const queryFirst = '1'; //入参:1、一级，2、二级\n      getAllLableList(queryFirst).then(res => {\n        this.forbiddenDialog.firstLableOptions = res.data;\n        this.forbiddenDialog.firstLableOptions.push({\n          id: '-100',\n          resourcesName: '+其他'\n        }); //拼接一级‘其他’选项\n      });\n    },\n    //选择一类标签触发事件\n    lableChange(data) {\n      let obj = {};\n      obj = this.forbiddenDialog.firstLableOptions.find(item => {\n        //遍历数据源\n        return item.id === data; //筛选出匹配数据\n      });\n      //this.firstLable = obj.resourcesName; //得到value对应的lable值\n      //根据一级标签获取二级列表\n      getSecondLableList(data).then(res => {\n        this.forbiddenDialog.secondLableOptions = res.data;\n        this.forbiddenDialog.secondLableOptions.push({\n          id: '-200',\n          resourcesName: '+其他'\n        }); //拼接二级‘其他’选项\n      });\n      //控制input框和二级选择框的显示隐藏\n      if (data == '-100') {\n        this.forbiddenDialog.isOtherFirstLable = true;\n        this.forbiddenDialog.isOtherSecondLable = false;\n        this.forbiddenDialog.isOtherSecondLableInput = false;\n        this.forbiddenDialog.secondLableValue = '';\n        this.forbiddenDialog.otherSecondLable = '';\n        this.forbiddenDialog.otherFistLable = '';\n      } else {\n        this.forbiddenDialog.isOtherFirstLable = false;\n        this.forbiddenDialog.isOtherSecondLable = true;\n        this.forbiddenDialog.isOtherSecondLableInput = false;\n        this.forbiddenDialog.secondLableValue = '';\n        this.forbiddenDialog.otherSecondLable = '';\n        this.forbiddenDialog.otherFistLable = '';\n      }\n    },\n    //选择二级标签触发事件\n    lableSecondChange(data) {\n      let obj = {};\n      obj = this.forbiddenDialog.secondLableOptions.find(item => {\n        return item.id === data;\n      });\n      //this.secondLable = obj.resourcesName;\n      //控制二级Input框显示隐藏\n      if (data == '-200') {\n        this.forbiddenDialog.isOtherSecondLableInput = true;\n        this.forbiddenDialog.otherSecondLable = '';\n      } else {\n        this.forbiddenDialog.isOtherSecondLableInput = false;\n        this.forbiddenDialog.otherSecondLable = '';\n      }\n    },\n    // 编辑任务\n    changeTask(item) {\n      this.getAllFirstLable();\n      this.forbiddenDialog.dialogTitle = '编辑任务';\n      this.forbiddenDialog.reason = item.taskDetail;\n      this.taskId = item.id;\n      if (item.status === 2) {\n        this.isRecInsert = true;\n      } else {\n        this.isRecInsert = false;\n      }\n      if (!item.firstReId) {\n        this.forbiddenDialog.firstLableValue = '-100';\n        this.lableChange(this.forbiddenDialog.firstLableValue);\n        this.forbiddenDialog.otherFistLable = item.firstOther;\n        this.forbiddenDialog.otherSecondLable = item.secondOther;\n      } else {\n        this.forbiddenDialog.firstLableValue = item.firstReId;\n        this.lableChange(item.firstReId);\n\n        if (!item.secondReId) {\n          this.forbiddenDialog.secondLableValue = '-200';\n          this.lableSecondChange('-200');\n          this.forbiddenDialog.otherSecondLable = item.secondOther;\n        } else {\n          this.forbiddenDialog.secondLableValue = item.secondReId;\n          this.lableSecondChange(item.secondReId);\n        }\n      }\n      this.forbiddenDialog.visible = true;\n    },\n    // 发布任务\n    publishTask() {\n      this.getAllFirstLable();\n      this.forbiddenDialog.dialogTitle = '发布任务';\n      this.forbiddenDialog.visible = true;\n    },\n    // 弹窗关闭前调用\n    beforeCloseFbDialog(done) {\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      //重置数据\n      this.forbiddenDialog.secondLableOptions = [];\n      this.forbiddenDialog.otherFistLable = '';\n      this.forbiddenDialog.otherSecondLable = '';\n      this.forbiddenDialog.secondLableValue = '';\n      this.forbiddenDialog.firstLableValue = '';\n      this.forbiddenDialog.isOtherFirstLable = false;\n      this.forbiddenDialog.isOtherSecondLable = true;\n      this.forbiddenDialog.isOtherSecondLableInput = false;\n      this.forbiddenDialog.reason = '';\n      this.forbiddenDialog.dialogTitle = '';\n      this.isRecInsert = false;\n      done();\n    },\n    // 弹窗取消操作\n    onCloseFbDialog() {\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['fbDialogForm'].resetFields();\n      //重置数据\n      this.forbiddenDialog.secondLableOptions = [];\n      this.forbiddenDialog.otherFistLable = '';\n      this.forbiddenDialog.otherSecondLable = '';\n      this.forbiddenDialog.secondLableValue = '';\n      this.forbiddenDialog.firstLableValue = '';\n      this.forbiddenDialog.isOtherFirstLable = false;\n      this.forbiddenDialog.isOtherSecondLable = true;\n      this.forbiddenDialog.isOtherSecondLableInput = false;\n      this.forbiddenDialog.reason = '';\n      this.forbiddenDialog.visible = false;\n      this.forbiddenDialog.dialogTitle = '';\n      this.isRecInsert = false;\n    },\n    // 提交发布任务\n    onSubmitFbDialog() {\n      this.$refs['fbDialogForm'].validate((valid, obj) => {\n        if (!valid) return; // 部分输入框校验未通过\n        this.forbiddenDialog.loading = true;\n        if (this.forbiddenDialog.dialogTitle === '发布任务') {\n          const query = {\n            accountType: this.accountType,\n            taskDetail: this.forbiddenDialog.reason\n          };\n          if (this.forbiddenDialog.firstLableValue == '-100') {\n            query.firstOther = this.forbiddenDialog.otherFistLable;\n            query.secondOther = this.forbiddenDialog.otherSecondLable;\n          } else {\n            query.firstReId = this.forbiddenDialog.firstLableValue;\n            if (this.forbiddenDialog.secondLableValue == '-200')\n              query.secondOther = this.forbiddenDialog.otherSecondLable;\n            else query.secondReId = this.forbiddenDialog.secondLableValue;\n          }\n          insertTask(query).then(res => {\n            if (res.success && res.errType == '1') {\n              this.$message({\n                type: 'success',\n                message: '新增成功!'\n              });\n              //ajax test\n              setTimeout(() => {\n                this.getTasks(); //提交一次即刷新列表\n                this.forbiddenDialog.loading = false;\n                this.onCloseFbDialog();\n              }, 500);\n            }\n          });\n          this.forbiddenDialog.loading = false;\n          // .catch(res => {\n          //   this.$message({\n          //     type: 'error',\n          //     message: res.message\n          //   });\n          //   this.forbiddenDialog.loading = false;\n          // });\n        } else {\n          const query = {\n            accountType: this.accountType,\n            id: this.taskId,\n            taskDetail: this.forbiddenDialog.reason\n          };\n          if (this.forbiddenDialog.firstLableValue == '-100') {\n            query.firstOther = this.forbiddenDialog.otherFistLable;\n            query.secondOther = this.forbiddenDialog.otherSecondLable;\n          } else {\n            query.firstReId = this.forbiddenDialog.firstLableValue;\n            if (this.forbiddenDialog.secondLableValue == '-200')\n              query.secondOther = this.forbiddenDialog.otherSecondLable;\n            else query.secondReId = this.forbiddenDialog.secondLableValue;\n          }\n          updateTask(query).then(res => {\n            if (res.success && res.errType == '1') {\n              this.$message({\n                type: 'success',\n                message: '修改成功!'\n              });\n              //ajax test\n              setTimeout(() => {\n                this.myTaskBtn(); //提交一次即刷新列表\n                this.forbiddenDialog.loading = false;\n                this.onCloseFbDialog();\n              }, 500);\n            }\n          });\n          // .catch(res => {\n          //   this.$message({\n          //     type: 'error',\n          //     message: res.message\n          //   });\n          //   this.forbiddenDialog.loading = false;\n          // });\n          this.forbiddenDialog.loading = false;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.main-box {\n  margin: 0;\n  padding: 0;\n}\n.head-background {\n  min-width: 800px;\n  background: url('../../assets/images/navbg.webp') no-repeat;\n  background-size: cover;\n}\n.logo-img {\n  display: inline-block;\n  margin-left: 20px;\n  padding: 10px 0;\n}\n.nav {\n  width: 350px;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: 15px;\n  float: right;\n}\n.nav img {\n  width: 25px;\n  height: 25px;\n}\n.task-main {\n  padding-top: 20px;\n  padding-bottom: 50px;\n  width: 80vw;\n  min-width: 800px;\n  margin: auto;\n  display: flex;\n  //height: 80vh;\n}\n.tips-font {\n  margin-top: 10px;\n  font-size: 14px;\n  font-weight: bold;\n  color: rgba(17, 17, 17, 0.4);\n}\n.task-side {\n  width: 95px;\n  padding: 50px 5px 0;\n  text-align: center;\n  .left-top {\n    color: rgba(0, 0, 0, 0.45);\n    height: 50px;\n    line-height: 50px;\n    text-align: center;\n  }\n  .left-item {\n    background: #ffffff;\n    border-radius: 6px;\n    color: rgba(0, 0, 0, 0.65);\n    text-align: center;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    margin-bottom: 10px;\n    cursor: pointer;\n    border: 1px solid #fff;\n    box-shadow: 1px 1px 2px 2px #afc9ec1c;\n    &:hover {\n      box-shadow: 1px 1px 2px 2px #b7bfca77;\n      //color: #fff;\n    }\n  }\n  .active {\n    border: 1px solid #4393fd;\n    background: #4393fd;\n    color: #fff;\n  }\n}\n.task-list {\n  flex: 1;\n}\n.task-card {\n  display: inline-block;\n  width: 330px;\n  height: 190px;\n  margin: 10px;\n  font-size: 14px;\n}\n.task-drawer-card {\n  height: 170px;\n  margin: 10px;\n  font-size: 13px;\n}\n.task-publisher {\n  line-height: 28px;\n}\n.task-title {\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 35px;\n}\n.task-content {\n  height: 60px;\n  overflow: auto;\n}\n.task-drawe-title {\n  height: 28px;\n  line-height: 28px;\n  .task-title-left {\n    float: left;\n    font-size: 16px;\n    font-weight: 600;\n  }\n  .task-status {\n    float: right;\n    color: red;\n  }\n}\n.task-drawer-content {\n  height: 40px;\n  overflow: auto;\n}\n.task-time {\n  padding-top: 5px;\n  color: gray;\n  line-height: 30px;\n}\n.top-class {\n  height: 40px;\n  line-height: 40px;\n  padding-left: 12px;\n}\n.top-left {\n  float: left;\n}\n.top-right {\n  float: right;\n}\n.draw-top-class {\n  height: 20px;\n  line-height: 20px;\n  padding: 5px 12px 0;\n  color: gray;\n  min-width: 230px;\n}\n.task-page {\n  height: 50px;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: #fff;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.no-result {\n  margin-top: 100px;\n  margin-left: 40%;\n}\n/deep/.el-drawer__header {\n  margin-bottom: 10px;\n  text-align: center;\n  font-size: 14px;\n  font-weight: bold;\n  color: #000;\n}\n/deep/.el-drawer__body {\n  overflow: auto;\n  background-color: rgb(243, 242, 242);\n}\n</style>\n"]}]}