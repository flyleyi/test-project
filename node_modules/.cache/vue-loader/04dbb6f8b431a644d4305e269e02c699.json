{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorAppointment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorAppointment.vue","mtime":1645178321201},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBldmVudEJ1cyBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvcGx1Z2lucy9jb21tb24vZXZlbnRCdXMuanMnOwppbXBvcnQgeyB0aW1lUXVlcnkgfSBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvYXBpL215VmlzaXRvcic7CmltcG9ydCB2aXNpdG9yUGFuZWwgZnJvbSAnLi9WaXNpdG9yUGFuZWwudnVlJzsKaW1wb3J0IHRlYW1QYW5lbCBmcm9tICcuL1RlYW1QYW5lbC52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHZpc2l0b3JQYW5lbCwKICAgIHRlYW1QYW5lbAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZTogdGhpcy4kcm91dGUucXVlcnkudHlwZSwKICAgICAgbWFrZUFuQXBwb2ludG1lbnQ6IDAsCiAgICAgIHRlcm1PZlZhbGlkaXR5OiA1LAogICAgICB0eXBlOiB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdGltZVF1ZXJ5KCkgewogICAgICB0aW1lUXVlcnkoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IG9iaiA9IHJlcy5kYXRhWzBdOwogICAgICAgIHRoaXMubWFrZUFuQXBwb2ludG1lbnQgPSBvYmoubWFrZUFuQXBwb2ludG1lbnQ7CiAgICAgICAgdGhpcy50ZXJtT2ZWYWxpZGl0eSA9IG9iai50ZXJtT2ZWYWxpZGl0eTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3Zpc2l0b3IvU0VUX1RJTUVPQkonLCB7CiAgICAgICAgICB0ZXJtT2ZWYWxpZGl0eTogdGhpcy50ZXJtT2ZWYWxpZGl0eSwKICAgICAgICAgIG1ha2VBbkFwcG9pbnRtZW50OiB0aGlzLm1ha2VBbkFwcG9pbnRtZW50CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldFR5cGUoKSB7CiAgICAgIHRoaXMuc2V0SW5mbygpOwogICAgfSwKICAgIG9uQ2xpY2sobmFtZSwgdGl0bGUpIHsKICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0ID0gMDsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7CiAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDsKICAgICAgdGhpcy50eXBlID0gbmFtZTsKICAgICAgdGhpcy5hY3RpdmUgPSBuYW1lOwogICAgfSwKICAgIHNldEluZm8oKSB7CiAgICAgIGV2ZW50QnVzLiRvZmYoJ3NldGN1clR5cGUnKTsKICAgICAgZXZlbnRCdXMuJG9uKCdzZXRjdXJUeXBlJywgcmVzID0+IHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHJlczsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy50aW1lUXVlcnkoKTsKICAgIHRoaXMuc2V0VHlwZSgpOwogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgLy8g5LuO5YiX6KGo6Lez6L2s6L+H5p2l55qE6aG16Z2i5a6a5L2N5Yiw5a+555So5Zui5L2T5oiW6ICF6K6/5a6i6aG1562+CiAgICB0aGlzLnNldFR5cGUoKTsKICB9LAogIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGlmIChmcm9tLnBhdGggPT09ICcvdmlzaXRvci1saXN0JykgewogICAgICBuZXh0KHZtID0+IHsKICAgICAgICBpZiAodm0uYWN0aXZlID09PSAndGVhbVZpc2l0b3InKSB7CiAgICAgICAgICB2bS4kcmVmcy50ZWFtUGFuZWwgJiYgdm0uJHJlZnMudGVhbVBhbmVsLmluaXQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uJHJlZnMudmlzaXRvclBhbmVsICYmIHZtLiRyZWZzLnZpc2l0b3JQYW5lbC5pbml0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIG5leHQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgdGhpcy5zZXRUeXBlKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["VisitorAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisitorAppointment.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor","sourcesContent":["<template>\n  <div>\n    <van-tabs v-model=\"active\" color=\"#3388FF\" @click=\"onClick\">\n      <van-tab title=\"访客邀请\" name=\"visitor\">\n        <visitor-panel\n          ref=\"visitorPanel\"\n          v-if=\"active == 'visitor'\"\n          :type=\"type\"\n        ></visitor-panel>\n      </van-tab>\n      <van-tab title=\"团体邀请\" name=\"teamVisitor\">\n        <team-panel\n          ref=\"teamPanel\"\n          v-if=\"active == 'teamVisitor'\"\n          :type=\"type\"\n        ></team-panel>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport { timeQuery } from '@/pages/visitor-h5/api/myVisitor';\nimport visitorPanel from './VisitorPanel.vue';\nimport teamPanel from './TeamPanel.vue';\n\nexport default {\n  components: {\n    visitorPanel,\n    teamPanel\n  },\n  data() {\n    return {\n      active: this.$route.query.type,\n      makeAnAppointment: 0,\n      termOfValidity: 5,\n      type: this.$route.query.type\n    };\n  },\n  methods: {\n    timeQuery() {\n      timeQuery().then(res => {\n        let obj = res.data[0];\n        this.makeAnAppointment = obj.makeAnAppointment;\n        this.termOfValidity = obj.termOfValidity;\n        this.$store.commit('visitor/SET_TIMEOBJ', {\n          termOfValidity: this.termOfValidity,\n          makeAnAppointment: this.makeAnAppointment\n        });\n      });\n    },\n    setType() {\n      this.setInfo();\n    },\n    onClick(name, title) {\n      window.pageYOffset = 0;\n      document.documentElement.scrollTop = 0;\n      document.body.scrollTop = 0;\n      this.type = name;\n      this.active = name;\n    },\n    setInfo() {\n      eventBus.$off('setcurType');\n      eventBus.$on('setcurType', res => {\n        this.active = res;\n      });\n    }\n  },\n  created() {\n    this.timeQuery();\n    this.setType();\n  },\n  activated() {\n    // 从列表跳转过来的页面定位到对用团体或者访客页签\n    this.setType();\n  },\n  beforeRouteEnter(to, from, next) {\n    if (from.path === '/visitor-list') {\n      next(vm => {\n        if (vm.active === 'teamVisitor') {\n          vm.$refs.teamPanel && vm.$refs.teamPanel.init();\n        } else {\n          vm.$refs.visitorPanel && vm.$refs.visitorPanel.init();\n        }\n      });\n    }\n    next();\n  },\n  watch: {\n    $route(to, from) {\n      this.setType();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-tab--active {\n  color: #3388ff;\n}\n</style>\n"]}]}