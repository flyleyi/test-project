{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/course-research/search.vue?vue&type=style&index=0&id=0dc428ef&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/course-research/search.vue","mtime":1627979214411},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5zZWFyY2gtcGFnZSB7DQogIGJhY2tncm91bmQ6ICNmNmY2ZjY7DQogIGhlaWdodDogMTAwJTsNCiAgL2RlZXAvIC52YW4tc2VhcmNoX19jb250ZW50IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICB9DQogIC9kZWVwLyAudmFuLXNlYXJjaCB7DQogICAgaGVpZ2h0OiAxLjA4cmVtOw0KICB9DQogIC5saXN0LWNvbnRlbnQgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDIuMTZyZW0pOw0KICAgIG92ZXJmbG93LXk6IGF1dG87DQogIH0NCiAgLmxpc3QtZGF0YSB7DQogICAgcGFkZGluZy10b3A6IDAuNHJlbTsNCiAgICAubGlzdC10aCB7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBwYWRkaW5nOiAwIDAuM3JlbSAwLjJyZW0gMC4zcmVtOw0KICAgICAgZm9udC1zaXplOiAwLjMycmVtOw0KICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgdGggew0KICAgICAgICB3aWR0aDogMjIuNSU7DQogICAgICAgIHRleHQtYWxpZ246IHN0YXJ0Ow0KICAgICAgfQ0KICAgICAgdGg6Zmlyc3QtY2hpbGQgew0KICAgICAgICB3aWR0aDogNTUlOw0KICAgICAgfQ0KICAgIH0NCiAgICAvZGVlcC8gLnZhbi1saXN0IHsNCiAgICAgID4gZGwgew0KICAgICAgICBwYWRkaW5nOiAwIDAuM3JlbTsNCiAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44NSk7DQogICAgICAgIGZvbnQtc2l6ZTogMC4yOHJlbTsNCiAgICAgICAgPiBkZCB7DQogICAgICAgICAgcGFkZGluZzogMC4zcmVtIDA7DQogICAgICAgICAgYm9yZGVyLWJvdHRvbTogMC4wMnJlbSBzb2xpZCByZ2JhKDI1LCAzMSwgMzcsIDAuMDgpOw0KICAgICAgICAgID4gcCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXA7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgc3BhbiB7DQogICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgICAgd2lkdGg6IDIyLjUlOw0KICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDAuMnJlbTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNwYW46Zmlyc3QtY2hpbGQgew0KICAgICAgICAgICAgICB3aWR0aDogNTUlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLm5vLWJjLWxpc3Qgew0KICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/pages/teaching-points-h5/views/course-research","sourcesContent":["<template>\r\n  <div class=\"search-page\">\r\n    <p>\r\n      <van-search\r\n        v-model=\"searchWord\"\r\n        @search=\"onRefresh\"\r\n        shape=\"round\"\r\n        background=\"#F6F6F6\"\r\n        placeholder=\"请输入课题名称/学校名/教师姓名\"\r\n      />\r\n    </p>\r\n    <div class=\"list-data\">\r\n      <tr v-show=\"active === '课题'\" class=\"list-th\">\r\n        <th>课题名称</th>\r\n        <th>负责人</th>\r\n        <th>状态</th>\r\n      </tr>\r\n      <tr v-show=\"active === '论文'\" class=\"list-th\">\r\n        <th>论文名称</th>\r\n        <th>作者</th>\r\n        <th>级别</th>\r\n      </tr>\r\n      <div class=\"list-content\">\r\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n          <van-list\r\n            v-model=\"loading\"\r\n            :finished=\"finished\"\r\n            :offset=\"20\"\r\n            :error.sync=\"error\"\r\n            error-text=\"请求失败，点击重新加载\"\r\n            :finished-text=\"finishedText\"\r\n            @load=\"onLoad\"\r\n          >\r\n            <dl\r\n              :class=\"{\r\n                'no-bc-list': finished && teacherTableData.length === 0\r\n              }\"\r\n            >\r\n              <cList\r\n                :finished=\"finished\"\r\n                :active=\"active\"\r\n                :teacherTableData=\"teacherTableData\"\r\n              ></cList>\r\n            </dl>\r\n          </van-list>\r\n        </van-pull-refresh>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cList from './components/list';\r\nimport { getTableData } from '../../api/base/course-all';\r\nimport { Search, List, PullRefresh } from 'vant';\r\nexport default {\r\n  name: 'courseResearchSearch',\r\n  components: {\r\n    [Search.name]: Search,\r\n    [List.name]: List,\r\n    [PullRefresh.name]: PullRefresh,\r\n    cList\r\n  },\r\n  data: function() {\r\n    return {\r\n      teacherTableData: [],\r\n      active: this.$route.query.active,\r\n      searchWord: '',\r\n      pageInfo: {\r\n        //填报信息总页数\r\n        total: 0\r\n      },\r\n      pagingParams: {\r\n        //填报分页参数\r\n        limit: 17,\r\n        offset: 0\r\n      },\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      error: false\r\n    };\r\n  },\r\n  computed: {\r\n    finishedText() {\r\n      if (this.pageInfo.total === 0) {\r\n        return '';\r\n      } else {\r\n        return '没有更多了';\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.$dd.biz.navigation.setRight({\r\n        show: false //控制按钮显示， true 显示， false 隐藏， 默认true\r\n      });\r\n    },\r\n    onLoad() {\r\n      if (this.refreshing) {\r\n        this.teacherTableData = [];\r\n        this.refreshing = false;\r\n      }\r\n      this.loading = true;\r\n      this.getData();\r\n    },\r\n    onRefresh() {\r\n      this.teacherTableData = [];\r\n      this.finished = false;\r\n      this.loading = true;\r\n      this.pageInfo.total = 0;\r\n      this.pagingParams.offset = 0;\r\n      this.onLoad();\r\n    },\r\n    /**\r\n     * 获取列表数据\r\n     */\r\n    getData() {\r\n      if (this.pagingParams.offset > this.pageInfo.total) return;\r\n      this.load = true;\r\n      let promiseData;\r\n      let type;\r\n      if (this.active === '课题') {\r\n        type = 1;\r\n      } else if (this.active === '论文') {\r\n        type = 2;\r\n      }\r\n      promiseData = getTableData({\r\n        searchWord: this.searchWord,\r\n        ...this.pagingParams,\r\n        type\r\n      });\r\n      promiseData\r\n        .then(({ data }) => {\r\n          if (data.current == 1 && data.records.length == 0) {\r\n            this.teacherTableData = [];\r\n            this.finished = true;\r\n          }\r\n          this.teacherTableData = this.teacherTableData.concat(data.records);\r\n          this.pageInfo.total = data.total || 0;\r\n          if (this.pageInfo.total <= data.current * data.size) {\r\n            this.finished = true;\r\n          } else {\r\n            this.pagingParams.offset =\r\n              (Math.floor(this.pagingParams.offset / this.pagingParams.limit) +\r\n                1) *\r\n              this.pagingParams.limit;\r\n          }\r\n          this.loading = false;\r\n          setTimeout(() => {\r\n            this.load = false;\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.error = true;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-page {\r\n  background: #f6f6f6;\r\n  height: 100%;\r\n  /deep/ .van-search__content {\r\n    background-color: #fff;\r\n  }\r\n  /deep/ .van-search {\r\n    height: 1.08rem;\r\n  }\r\n  .list-content {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: calc(100% - 2.16rem);\r\n    overflow-y: auto;\r\n  }\r\n  .list-data {\r\n    padding-top: 0.4rem;\r\n    .list-th {\r\n      display: flex;\r\n      width: 100%;\r\n      padding: 0 0.3rem 0.2rem 0.3rem;\r\n      font-size: 0.32rem;\r\n      color: rgba(0, 0, 0, 0.65);\r\n      box-sizing: border-box;\r\n      th {\r\n        width: 22.5%;\r\n        text-align: start;\r\n      }\r\n      th:first-child {\r\n        width: 55%;\r\n      }\r\n    }\r\n    /deep/ .van-list {\r\n      > dl {\r\n        padding: 0 0.3rem;\r\n        background: #fff;\r\n        color: rgba(0, 0, 0, 0.85);\r\n        font-size: 0.28rem;\r\n        > dd {\r\n          padding: 0.3rem 0;\r\n          border-bottom: 0.02rem solid rgba(25, 31, 37, 0.08);\r\n          > p {\r\n            display: flex;\r\n            flex-wrap: nowrap;\r\n            align-items: center;\r\n            span {\r\n              display: inline-block;\r\n              width: 22.5%;\r\n              padding-left: 0.2rem;\r\n            }\r\n            span:first-child {\r\n              width: 55%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .no-bc-list {\r\n        background: transparent;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}