{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/demand/taskCheck/index.vue?vue&type=style&index=0&id=53e57b5b&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/demand/taskCheck/index.vue","mtime":1645176309821},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kcmF3ZXItaGVhZGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZzogMDsKICBib3JkZXI6IDA7Cn0KLmRyYXdlci1jb250ZW50IHsKICBtaW4td2lkdGg6IDQwMHB4OwogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KLmVsLXJvdyB7CiAgcGFkZGluZzogMTBweCAxMHB4IDAgMTBweDsKICAmOmxhc3QtY2hpbGQgewogICAgbWFyZ2luLWJvdHRvbTogMDsKICB9Cn0KLmVsLWNvbCB7CiAgYm9yZGVyLXJhZGl1czogOHB4Owp9Ci5iZy1wdXJwbGUtZGFyayB7CiAgYmFja2dyb3VuZDogI2ZmZjsKfQouYmctcHVycGxlIHsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9Ci5iZy1wdXJwbGUtbGlnaHQgewogIGJhY2tncm91bmQ6ICNlNWU5ZjI7Cn0KLmdyaWQtY29udGVudCB7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIG1pbi1oZWlnaHQ6IDM2cHg7Cn0KLnJvdy1iZyB7CiAgcGFkZGluZzogMTBweCAwOwogIGJhY2tncm91bmQtY29sb3I6ICNmOWZhZmM7Cn0KLmJveC1jYXJkIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBtYXJnaW46IDA7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQouYm94LWNhcmQtaXRlbSB7CiAgd2lkdGg6IDEwMCU7Cn0KLmJveC1jYXJkLXRvcCB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7CiAgZmxleC13cmFwOiB3cmFwOwogIG1hcmdpbjogMDsKICB3aWR0aDogMTAwJTsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Ci5ib3gtY2FyZC1jb250ZW50IHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogIGZsZXgtd3JhcDogd3JhcDsKICBtYXJnaW46IDA7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQoudGl0dGxlLXN0eWxlIHsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGZvbnQtc2l6ZTogMTVweDsKICBmb250LXdlaWdodDogYm9sZDsKICBwYWRkaW5nOiAxMHB4OwogIG1hcmdpbi1sZWZ0OiA1JTsKfQoubG9va19jYXJkIHsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgbWFyZ2luOiAwIDEwcHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQoucC1jb250ZW50IHsKICBmb250LXdlaWdodDogYm9sZDsKICBmb250LXNpemU6IDIwcHg7Cn0Kc3BhbiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHBhZGRpbmctdG9wOiA1cHg7CiAgZm9udC1zaXplOiAxMHB4OwogIGZvbnQtd2VpZ2h0OiAxMDA7CiAgY29sb3I6IHJnYigxMzMsIDEzMSwgMTMxKTsKfQouc3Bhbi10aXR0bGUsCi5zcGFuLWNvbnRlbnQgewogIGRpc3BsYXk6IGJsb2NrOwogIHBhZGRpbmctdG9wOiA1cHg7Cn0KLnNwYW4tdGl0dGxlIHsKICBjb2xvcjogIzAwMDsKfQouaXRlbS1jb250ZW50IHsKICBwYWRkaW5nLWJvdHRvbTogMTVweDsKICB3aWR0aDogMTAwcHg7Cn0KLmxhc3Qtb25lIHsKICB3aWR0aDogMjAwcHg7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7Cn0KLml0ZW0tY29udGVudC10b3AgewogIHBhZGRpbmctbGVmdDogMTVweDsKICBwYWRkaW5nLXRvcDogMTBweDsKICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICBtYXJnaW4tbGVmdDogNSU7Cn0KLmVsLWRpdmlkZXItLXZlcnRpY2FsIHsKICBoZWlnaHQ6IDQwcHg7CiAgdmVydGljYWwtYWxpZ246IHRleHQtdG9wOwp9Ci5pdGVtLWNvbnRlbnQtaW5mbyB7CiAgZGlzcGxheTogaW5saW5lLWdyaWQ7Cn0KLnNwYW4tYm94IHsKICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDsKICBwYWRkaW5nOiA1cHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-admin/views/demand/taskCheck","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <b-table\n      ref=\"bTable\"\n      loading\n      empty-text=\"暂无数据\"\n      :headers=\"headers\"\n      :form-items=\"formItems\"\n      :ajax-get-data=\"getCheckTasks\"\n      :show-column=\"false\"\n      :show-refresh=\"false\"\n      :pageLimit=\"10\"\n    >\n      <template slot=\"column|status\" slot-scope=\"{ row }\">\n        <p :style=\"{ color: typeColors[row.status] }\">\n          {{\n            row.status === 0 ? '待审核' : row.status === 2 ? '不通过' : '通过'\n          }}\n        </p>\n      </template>\n    </b-table>\n    <!--查看-->\n    <el-drawer\n      class=\"drawer-header\"\n      title=\"任务发布审核\"\n      :visible.sync=\"lookOver\"\n      direction=\"rtl\"\n      size=\"40%\"\n    >\n      <div class=\"drawer-content\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\"\n            ><div class=\"grid-content bg-purple\">\n              <div class=\"box-card-top\">\n                <div class=\"item-content-top\">\n                  <div class=\"item-content-info\">\n                    <span>审核状态</span>\n                    <p class=\"p-content\">\n                      {{\n                        sourceInfo.status === 0\n                          ? '待审核'\n                          : sourceInfo.status === 2\n                          ? '审核未通过'\n                          : '审核通过'\n                      }}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div></el-col\n          >\n        </el-row>\n        <div>\n          <p class=\"tittle-style\">基本信息</p>\n          <el-card shadow=\"naver\" class=\"look_card\">\n            <el-row type=\"flex\">\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">提交人</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.creatorName\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">工号</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.creatorCode\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n              <el-col :span=\"8\">\n                <div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">联系方式</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.createPhone\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n            </el-row>\n            <el-row type=\"flex\">\n              <el-col :span=\"8\"\n                ><div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">一类资源任务标签</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.taskFirstName\n                    }}</span>\n                  </div>\n                </div></el-col\n              >\n              <el-col :span=\"16\"\n                ><div class=\"grid-content\">\n                  <el-divider\n                    direction=\"vertical\"\n                    content-position=\"center\"\n                  ></el-divider>\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">二类资源任务标签</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.taskSecName\n                    }}</span>\n                  </div>\n                </div></el-col\n              >\n            </el-row>\n            <el-row type=\"flex\">\n              <el-col :span=\"24\">\n                <div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">提交时间</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.createTime\n                    }}</span>\n                  </div>\n                </div>\n              </el-col>\n            </el-row>\n\n            <el-row type=\"flex\">\n              <el-col :span=\"24\"\n                ><div class=\"grid-content\">\n                  <div class=\"span-box\">\n                    <span class=\"span-tittle\">资源任务具体内容描述</span\n                    ><span class=\"span-content\">{{\n                      sourceInfo.taskDetail\n                    }}</span>\n                  </div>\n                </div></el-col\n              >\n            </el-row>\n          </el-card>\n        </div>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\"\n            ><div class=\"grid-content bg-purple\">\n              <p class=\"tittle-style\">日志</p>\n              <el-table\n                :data=\"LogInfo\"\n                style=\"font-size: 13px; width: 100%\"\n                tooltip-effect=\"light\"\n              >\n                <el-table-column prop=\"\" width=\"30\" label=\"\"></el-table-column>\n                <el-table-column prop=\"createTime\" width=\"200\" label=\"操作时间\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"reason\"\n                  label=\"操作内容\"\n                  show-overflow-tooltip\n                  ><template slot-scope=\"props\">\n                    <p>{{ props.row.rejectReason }}</p>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </div></el-col\n          >\n        </el-row>\n        <el-row :gutter=\"20\" v-if=\"sourceInfo.status === 0\">\n          <el-col :span=\"24\"\n            ><div class=\"grid-content bg-purple\" style=\"height:50px;\">\n              <div style=\"padding: 10px;\">\n                <el-button size=\"small\" @click=\"passCheck\">通过</el-button>\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  @click.stop.prevent=\"noPassCheck\"\n                  >不通过</el-button\n                >\n              </div>\n            </div></el-col\n          >\n        </el-row>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n<script>\nimport { Input, Dialog, Form, FormItem } from 'element-ui';\nimport BTable from '@/components/business/BTable';\nimport {\n  getCheckTasks,\n  getTaskDetail,\n  postAuditTask\n} from '@/pages/share-platform-admin/api/demand';\nexport default {\n  name: 'TaskCheck',\n  components: {\n    [Input.name]: Input,\n    [Dialog.name]: Dialog,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    BTable\n  },\n  data() {\n    return {\n      lookOver: false,\n      LogInfo: [],\n      sourceInfo: {},\n      typeColors: {\n        0: 'red'\n      },\n      headers: [\n        {\n          label: '序号',\n          type: 'index'\n        },\n        {\n          label: '提交人',\n          prop: 'creatorName',\n          width: '100'\n        },\n        {\n          label: '工号',\n          width: '100',\n          prop: 'creatorCode'\n        },\n        {\n          label: '联系方式',\n          width: '120',\n          prop: 'createPhone'\n        },\n        {\n          label: '任务归属',\n          prop: 'taskName'\n        },\n        {\n          label: '任务标签内容',\n          prop: 'taskDetail'\n        },\n        {\n          label: '提交时间',\n          prop: 'createTime',\n          width: '150',\n          formatter: (r, c, v) =>\n            this.$util.dateConverter('yyyy-MM-dd hh:mm', v)\n        },\n        {\n          label: '审核状态',\n          prop: 'status',\n          required: true,\n          width: '80',\n          colType: 'column',\n          slotName: 'status'\n        },\n        {\n          label: '操作',\n          colType: 'btns',\n          width: '50px',\n          btns: [\n            {\n              label: '查看',\n              type: 'text',\n              size: 'mini',\n              click: this.onLook\n            }\n          ]\n        }\n      ],\n      //表单查询项\n      formItems: [\n        {\n          type: 'input',\n          label: '工号',\n          prop: 'staffCode',\n          attrs: {\n            placeholder: '请输入工号',\n            clearable: true\n          }\n        },\n        {\n          type: 'input',\n          label: '联系方式',\n          prop: 'mobile',\n          attrs: {\n            placeholder: '请输入手机号',\n            clearable: true\n          }\n        },\n        {\n          type: 'select',\n          label: '审核状态',\n          prop: 'status',\n          options: [\n            {\n              label: '待审核',\n              value: 0\n            },\n            {\n              label: '通过',\n              value: 1\n            },\n            {\n              label: '不通过',\n              value: 2\n            }\n          ]\n        }\n      ]\n    };\n  },\n  methods: {\n    getCheckTasks,\n    refreshTable() {\n      this.$nextTick(() => {\n        this.$refs.bTable.onRefreshTable();\n      });\n    },\n    //点击查看按钮\n    onLook(row) {\n      this.lookOver = true;\n      getTaskDetail(row.id)\n        .then(res => {\n          if (res.data == '' || res.data == null) {\n            this.sourceInfo = {};\n          } else {\n            this.sourceInfo = res.data;\n            this.sourceInfo.taskFirstName = res.data.taskName.split('-')[0];\n            this.sourceInfo.taskSecName = res.data.taskName.split('-')[1];\n          }\n        })\n        .catch(res => {\n          this.sourceInfo = {};\n          this.$message({\n            type: 'error',\n            message: '审核信息获取失败！'\n          });\n        });\n    },\n    //审核不通过\n    noPassCheck() {\n      let queryData = {\n        status: 2,\n        taskId: this.sourceInfo.id,\n        content: '',\n        time: this.sourceInfo.createTime\n      };\n      this.$prompt('确定拒绝该请求吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        inputType: 'textarea',\n        inputPlaceholder: '请填写拒绝原因',\n        closeOnClickModal: false\n      })\n        .then(({ value }) => {\n          queryData.content = value;\n          if (value == null) {\n            this.$message({\n              type: 'info',\n              message: '请填写拒绝原因！'\n            });\n            return false;\n          } else {\n            postAuditTask(queryData).then(res => {\n              this.refreshTable();\n              this.$message({\n                type: 'success',\n                message: '审核成功'\n              });\n              this.lookOver = false;\n            });\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '取消操作'\n          });\n        });\n    },\n    //审核通过\n    passCheck() {\n      let queryData = {\n        taskId: String(this.sourceInfo.id),\n        status: 1,\n        time: this.sourceInfo.createTime\n      };\n      this.$confirm('确定通过该申请吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        closeOnClickModal: false,\n        type: 'warning'\n      })\n        .then(() => {\n          debugger;\n          postAuditTask(queryData).then(res => {\n            console.log('query', queryData);\n            this.refreshTable();\n            this.$message({\n              type: 'success',\n              message: '审核成功'\n            });\n            this.lookOver = false;\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '取消操作'\n          });\n        });\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.drawer-header {\n  text-align: center;\n  padding: 0;\n  border: 0;\n}\n.drawer-content {\n  min-width: 400px;\n  margin-bottom: 10px;\n}\n.el-row {\n  padding: 10px 10px 0 10px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n.el-col {\n  border-radius: 8px;\n}\n.bg-purple-dark {\n  background: #fff;\n}\n.bg-purple {\n  background: #fff;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 8px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.box-card {\n  display: flex;\n  justify-content: space-between;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.box-card-item {\n  width: 100%;\n}\n.box-card-top {\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.box-card-content {\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  margin: 0;\n  width: 100%;\n  text-align: left;\n}\n.tittle-style {\n  text-align: left;\n  font-size: 15px;\n  font-weight: bold;\n  padding: 10px;\n  margin-left: 5%;\n}\n.look_card {\n  border-radius: 8px;\n  margin: 0 10px;\n  text-align: left;\n}\n.p-content {\n  font-weight: bold;\n  font-size: 20px;\n}\nspan {\n  display: inline-block;\n  padding-top: 5px;\n  font-size: 10px;\n  font-weight: 100;\n  color: rgb(133, 131, 131);\n}\n.span-tittle,\n.span-content {\n  display: block;\n  padding-top: 5px;\n}\n.span-tittle {\n  color: #000;\n}\n.item-content {\n  padding-bottom: 15px;\n  width: 100px;\n}\n.last-one {\n  width: 200px;\n  margin-left: 20px;\n}\n.item-content-top {\n  padding-left: 15px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  margin-left: 5%;\n}\n.el-divider--vertical {\n  height: 40px;\n  vertical-align: text-top;\n}\n.item-content-info {\n  display: inline-grid;\n}\n.span-box {\n  display: inline-grid;\n  padding: 5px;\n}\n</style>\n<style>\n.el-drawer__body {\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: rgb(243, 242, 242);\n}\n.el-drawer__header {\n  margin-bottom: 10px;\n  font-size: 15px;\n  font-weight: bolder;\n}\n</style>\n"]}]}