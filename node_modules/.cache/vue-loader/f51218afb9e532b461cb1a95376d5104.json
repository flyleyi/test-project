{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/student/components/CostManagement/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/student/components/CostManagement/index.vue","mtime":1645176309715},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxvZ291dCB9IGZyb20gJy4uLy4uLy4uLy4uL2FwaS91c2VyL2luZGV4JzsKaW1wb3J0IHsKICBDYXJkLAogIEJ1dHRvbiwKICBVcGxvYWQsCiAgVGFibGUsCiAgVGFibGVDb2x1bW4sCiAgSW5wdXQsCiAgU2VsZWN0LAogIE9wdGlvbgp9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgewogIGRvd25sb2FkSW5wdXRVc2VyVGVtcGxhdGUsCiAgZmVlWWVhckxpc3QsCiAgZmVlTW9udGhMaXN0LAogIG90aGVyRmVlTW9udGhMaXN0LAogIG90aGVyRmVlWWVhckxpc3QsCiAgZmVlSW1wb3J0LAogIGZlZUV4cG9ydCwKICBmZWVJc0NhbkltcG9ydCwKICBzYXZlRmVlTWFuYWdlbWVudCwKICBkZWxldGVGZWVNYW5hZ2VtZW50Cn0gZnJvbSAnQC9wYWdlcy9jaGFyaXR5LWZvdW5kYXRpb24vYXBpL2ZlZU1hbmFnZW1lbnQvaW5kZXgnOwpsZXQgVlVFOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Nvc3RNYW5hZ2VtZW50JywKICBjb21wb25lbnRzOiB7CiAgICBbQ2FyZC5uYW1lXTogQ2FyZCwKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbiwKICAgIFtVcGxvYWQubmFtZV06IFVwbG9hZCwKICAgIFtUYWJsZS5uYW1lXTogVGFibGUsCiAgICBbVGFibGVDb2x1bW4ubmFtZV06IFRhYmxlQ29sdW1uLAogICAgW0lucHV0Lm5hbWVdOiBJbnB1dCwKICAgIFtTZWxlY3QubmFtZV06IFNlbGVjdCwKICAgIFtPcHRpb24ubmFtZV06IE9wdGlvbgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzZWNvbmRUYWJsZUxvYWRpbmc6IGZhbHNlLAogICAgICB0aGlyZFRhYmxlTG9hZGluZzogZmFsc2UsCiAgICAgIHllYXJMaXN0OiBbXSwgLy8g5bm05Lu96YCJ5oup5YiX6KGoCiAgICAgIGlzVGFibGVFZGl0OiBmYWxzZSwKICAgICAgeWVhclRhYmxlSGVhZGVyOiBbXSwgLy8g5pyI5Lu9dGFibGXooajlpLQKICAgICAgeWVhclRhYmxlRGF0YTogW10sIC8vIOaciOS7vXRhYmxl5pWw5o2uCiAgICAgIHNlbGVjdGlvbkZpcnN0VGFibGU6IFtdLCAvL+aciOW6pui0ueeUqOW5tOS7veWIl+ihqOmAieS4rQogICAgICBzZWNvbmRUYWJsZTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuesrOS6jOWxgnRhYmxlCiAgICAgIHNlY29uZFRhYmxlSGVhZGVyOiBbXSwgLy8g56ys5LqM5bGCdGFibGXooajlpLQKICAgICAgc2Vjb25kVGFibGVEYXRhOiBbXSwgLy8g56ys5LqM5bGCdGFibGXmlbDmja4KICAgICAgc2VsZWN0aW9uU2Vjb25kVGFibGU6IFtdLCAvL+esrOS6jOWxguWIl+ihqOmAieS4rQogICAgICB0aGlyZFRhYmxlOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S656ys5LiJ5bGCdGFibGUKICAgICAgdGhpcmRUYWJsZUhlYWRlcjogW10sIC8v56ys5LiJ5bGCdGFibGXooajlpLQKICAgICAgdGhpcmRUYWJsZURhdGE6IFtdLCAvLyDmmL7npLrnrKzkuInlsYLmlbDmja4KICAgICAgc2VsZWN0aW9uVGhpcmRUYWJsZTogW10sIC8v56ys5LiJ5bGC5YiX6KGo6YCJ5LitCiAgICAgIGZpcnN0VGFibGVDbGlja0RhdGE6IHt9LCAvLyDnrKzkuIDlsYLngrnlh7vnmoTmlbDmja4KICAgICAgc2Vjb25kVGFibGVDbGlja0RhdGE6IHt9IC8vIOesrOS6jOWxgueCueWHu+eahOaVsOaNrgogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBzdHVkZW50RGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkKICAgIH0KICB9LAogIGJlZm9yZUNyZWF0ZSgpIHsKICAgIFZVRSA9IHRoaXM7CiAgfSwKICBmaWx0ZXJzOiB7CiAgICB0b3RhbCh2YWwpIHsKICAgICAgLyoqCiAgICAgICAqIEBwYXJhbSB7aWRlbnRpZmljYXRpb259fTDmmK/mnIjku73ooaggMeaYr+WFtuS7luihqAogICAgICAgKiBAcGFyYW0ge3N0dWRlbnREYXRhLnByb2plY3RUeXBlfX0g5Yik5pat5bel56iL57G75Z6LIDIy6ZuP6bmwIDIz6Iux5omNCiAgICAgICAqIOmAmui/h+S4jeWQjOeahOihqOagvOeul+WHuuebuOWvueaAu+aVsAogICAgICAgKi8KICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgaWYgKFZVRS5zdHVkZW50RGF0YS5wcm9qZWN0VHlwZSA9PT0gMjIgJiYgdmFsLmlkZW50aWZpY2F0aW9uID09PSAwKSB7CiAgICAgICAgdG90YWwgPQogICAgICAgICAgTnVtYmVyKHZhbC5tZWRpY2FsRmVlKSArCiAgICAgICAgICBOdW1iZXIodmFsLnN0dWR5SG90ZWxGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwubGVzc29uc0ZlZSkgKwogICAgICAgICAgTnVtYmVyKHZhbC5wb2NrZXRNb25leSkgKwogICAgICAgICAgTnVtYmVyKHZhbC52aXNpdGluZ1JlbGF0aXZlc0ZlZSkgKwogICAgICAgICAgTnVtYmVyKHZhbC5oYWlyY3V0RmVlKSArCiAgICAgICAgICBOdW1iZXIodmFsLm90aGVyRmVlKTsKICAgICAgfSBlbHNlIGlmICgKICAgICAgICBWVUUuc3R1ZGVudERhdGEucHJvamVjdFR5cGUgPT09IDIzICYmCiAgICAgICAgdmFsLmlkZW50aWZpY2F0aW9uID09PSAwCiAgICAgICkgewogICAgICAgIHRvdGFsID0KICAgICAgICAgIE51bWJlcih2YWwuc3R1ZHlGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwucmVjcnVpdG1lbnRGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwudHJhZmZpY0ZlZSkgKwogICAgICAgICAgTnVtYmVyKHZhbC5mYW1pbHlGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwub3RoZXJGZWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRvdGFsID0KICAgICAgICAgIE51bWJlcih2YWwueWVhck1vbmV5KSArCiAgICAgICAgICBOdW1iZXIodmFsLm9mZmljZU1vbmV5KSArCiAgICAgICAgICBOdW1iZXIodmFsLnByb2plY3RNb25leSkgKwogICAgICAgICAgTnVtYmVyKHZhbC5zdHVkeVRvb2xGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwuZGVkVGhpbmdGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwuYm9hcmRGZWUpICsKICAgICAgICAgIE51bWJlcih2YWwuYWN0aXZlRmVlKSArCiAgICAgICAgICBOdW1iZXIodmFsLmVwaWRlbWljRmVlKTsKICAgICAgfQogICAgICBWVUUuJHNldCh2YWwsICd0b3RhbEZlZScsIE1hdGgucm91bmQodG90YWwudG9GaXhlZCgyKSAqIDEwMCkgLyAxMDApOwogICAgICByZXR1cm4gTWF0aC5yb3VuZCh0b3RhbC50b0ZpeGVkKDIpICogMTAwKSAvIDEwMDsKICAgIH0KICAgIC8vIEZpcnN0VG90YWwodmFsKSB7CiAgICAvLyAgIGNvbnNvbGUubG9nKHZhbC50b3RhbEZlZSwgVlVFLnllYXJUYWJsZURhdGEpOwogICAgLy8gICByZXR1cm4gMDsKICAgIC8vIH0KICB9LAogIHdhdGNoOiB7fSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0RGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDliJ3lp4vljJbmlbDmja4KICAgICAqLwogICAgaW5pdERhdGEoKSB7CiAgICAgIGlmICh0aGlzLnN0dWRlbnREYXRhLnByb2plY3RUeXBlID09PSAyMikgewogICAgICAgIHRoaXMueWVhclRhYmxlSGVhZGVyID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6LS555So5bm05Lu9JywKICAgICAgICAgICAgdHlwZTogJ3llYXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5bCx5Yy76LS555SoJywKICAgICAgICAgICAgdHlwZTogJ21lZGljYWxGZWUnCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5a2m6LS5KOWQq+S9j+Wuv+i0uSknLAogICAgICAgICAgICB0eXBlOiAnc3R1ZHlIb3RlbEZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICfooaXor77otLnvvIjlpI/ku6TokKXjgIHor77lpJbvvIknLAogICAgICAgICAgICB0eXBlOiAnbGVzc29uc0ZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICfpm7bnlKjpkrEnLAogICAgICAgICAgICB0eXBlOiAncG9ja2V0TW9uZXknCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5o6i5Lqy6Lev6LS5JywKICAgICAgICAgICAgdHlwZTogJ3Zpc2l0aW5nUmVsYXRpdmVzRmVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+eQhuWPkScsCiAgICAgICAgICAgIHR5cGU6ICdoYWlyY3V0RmVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+WFtuS7licsCiAgICAgICAgICAgIHR5cGU6ICdvdGhlckZlZScKICAgICAgICAgIH0KICAgICAgICBdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMueWVhclRhYmxlSGVhZGVyID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6LS555So5bm05Lu9JywKICAgICAgICAgICAgdHlwZTogJ3llYXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5a2m6LS5JywKICAgICAgICAgICAgdHlwZTogJ3N0dWR5RmVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+aLm+WLn+W3ruaXhei0uScsCiAgICAgICAgICAgIHR5cGU6ICdyZWNydWl0bWVudEZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICfkuqTpgJrotLknLAogICAgICAgICAgICB0eXBlOiAndHJhZmZpY0ZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICflrrblsZ7kvY/lrr/otLnlj4rppJDotLknLAogICAgICAgICAgICB0eXBlOiAnZmFtaWx5RmVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+WFtuS7licsCiAgICAgICAgICAgIHR5cGU6ICdvdGhlckZlZScKICAgICAgICAgIH0KICAgICAgICBdOwogICAgICB9CiAgICAgIGxldCB5YWVyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgICBsZXQgeWVhckxpc3QgPSBbeWFlcl07CiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgMTA7IGkrKykgewogICAgICAgIHllYXJMaXN0LnVuc2hpZnQoeWFlciAtIGkpOwogICAgICAgIHllYXJMaXN0LnB1c2goeWFlciArIGkpOwogICAgICB9CiAgICAgIHRoaXMueWVhckxpc3QgPSB5ZWFyTGlzdDsKICAgICAgZmVlWWVhckxpc3QoeyBzdHVkZW50SWQ6IHRoaXMuc3R1ZGVudERhdGEuaWQgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMueWVhclRhYmxlRGF0YSA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gcmVzLmRhdGEgOiBbXTsKICAgICAgICB0aGlzLnllYXJUYWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGlmICh0aGlzLnllYXJMaXN0LmZpbmRJbmRleCh2ID0+IHYgPT09IGl0ZW0ueWVhcikgIT09IC0xKSB7CiAgICAgICAgICAgIHRoaXMueWVhckxpc3Quc3BsaWNlKAogICAgICAgICAgICAgIHRoaXMueWVhckxpc3QuZmluZEluZGV4KHYgPT4gdiA9PT0gaXRlbS55ZWFyKSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5bCGcm93LWtleeWAvOWumuS4umlkCiAgICAgKi8KICAgIGdldFJvd0tleShyb3cpIHsKICAgICAgcmV0dXJuIHJvdy5pZDsKICAgIH0sCiAgICAvKioKICAgICAqIOeCueWHu+mhueebrueahOi0ueeUqOW5tOi0uQogICAgICovCiAgICBzaG93TW9udGhUYWJsZShpdGVtKSB7CiAgICAgIGlmICghaXRlbS55ZWFyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35YWI57yW6L6R5bm05Lu9Jyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMuJHNldCh0aGlzLmZpcnN0VGFibGVDbGlja0RhdGEsICdpc1Nob3dUYWJsZScsICdzaG93TW9udGhUYWJsZScpOwogICAgICB0aGlzLiRzZXQodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLCAnc2hvd1RhYmxlRGF0YScsIGl0ZW0pOwogICAgICB0aGlzLnNlY29uZFRhYmxlSGVhZGVyID0gW107CiAgICAgIHRoaXMuc2Vjb25kVGFibGVEYXRhID0gW107CiAgICAgIHRoaXMuc2VsZWN0aW9uU2Vjb25kVGFibGUgPSBbXTsKICAgICAgdGhpcy50aGlyZFRhYmxlID0gZmFsc2U7CiAgICAgIHRoaXMudGhpcmRUYWJsZUhlYWRlciA9IFtdOwogICAgICB0aGlzLnRoaXJkVGFibGVEYXRhID0gW107CiAgICAgIHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZSA9IFtdOwogICAgICB0aGlzLnNlY29uZFRhYmxlID0gdHJ1ZTsgLy8g5piv5ZCm5pi+56S656ys5LqM5bGCdGFibGUKICAgICAgdGhpcy5zZWNvbmRUYWJsZUxvYWRpbmcgPSB0cnVlOwogICAgICBpZiAodGhpcy5zdHVkZW50RGF0YS5wcm9qZWN0VHlwZSA9PT0gMjIpIHsKICAgICAgICB0aGlzLnNlY29uZFRhYmxlSGVhZGVyID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6LS555So5pyI5Lu9JywKICAgICAgICAgICAgdHlwZTogJ21vbnRoJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+WwseWMu+i0ueeUqCcsCiAgICAgICAgICAgIHR5cGU6ICdtZWRpY2FsRmVlJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+Wtpui0uSjlkKvkvY/lrr/otLkpJywKICAgICAgICAgICAgdHlwZTogJ3N0dWR5SG90ZWxGZWUnCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6KGl6K++6LS577yI5aSP5Luk6JCl44CB6K++5aSW77yJJywKICAgICAgICAgICAgdHlwZTogJ2xlc3NvbnNGZWUnCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6Zu255So6ZKxJywKICAgICAgICAgICAgdHlwZTogJ3BvY2tldE1vbmV5JwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+aOouS6sui3r+i0uScsCiAgICAgICAgICAgIHR5cGU6ICd2aXNpdGluZ1JlbGF0aXZlc0ZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICfnkIblj5EnLAogICAgICAgICAgICB0eXBlOiAnaGFpcmN1dEZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICflhbbku5YnLAogICAgICAgICAgICB0eXBlOiAnb3RoZXJGZWUnCiAgICAgICAgICB9CiAgICAgICAgXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlY29uZFRhYmxlSGVhZGVyID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6LS555So5pyI5Lu9JywKICAgICAgICAgICAgdHlwZTogJ21vbnRoJwogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogJ+Wtpui0uScsCiAgICAgICAgICAgIHR5cGU6ICdzdHVkeUZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICfmi5vli5/lt67ml4XotLknLAogICAgICAgICAgICB0eXBlOiAncmVjcnVpdG1lbnRGZWUnCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5Lqk6YCa6LS5JywKICAgICAgICAgICAgdHlwZTogJ3RyYWZmaWNGZWUnCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn5a625bGe5L2P5a6/6LS55Y+K6aSQ6LS5JywKICAgICAgICAgICAgdHlwZTogJ2ZhbWlseUZlZScKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG5hbWU6ICflhbbku5YnLAogICAgICAgICAgICB0eXBlOiAnb3RoZXJGZWUnCiAgICAgICAgICB9CiAgICAgICAgXTsKICAgICAgfQogICAgICBsZXQgcGFybWFzID0gewogICAgICAgIHN0dWRlbnRJZDogdGhpcy5zdHVkZW50RGF0YS5pZCwKICAgICAgICB5ZWFyOiBpdGVtLnllYXIKICAgICAgfTsKICAgICAgZmVlTW9udGhMaXN0KHBhcm1hcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2Vjb25kVGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5zZWNvbmRUYWJsZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnNlY29uZFRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdpZGVudGlmaWNhdGlvbicsIDApOyAvLyDmt7vliqDkuIDkuKrnsbvlnovlgLzvvIww5piv5pyI5Lu96KGoIDHmmK/lhbbku5booagKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDngrnlh7vpobnnm67nmoTlhbbku5YKICAgICAqLwogICAgc2hvd090aGVyVGFibGUoY29sdW1uLCBldmVudCkgewogICAgICB0aGlzLiRzZXQodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLCAnaXNTaG93VGFibGUnLCAnc2hvd090aGVyVGFibGUnKTsKICAgICAgdGhpcy4kc2V0KHRoaXMuZmlyc3RUYWJsZUNsaWNrRGF0YSwgJ3Nob3dUYWJsZURhdGEnLCAnJyk7CiAgICAgIHRoaXMuc2Vjb25kVGFibGVIZWFkZXIgPSBbXTsKICAgICAgdGhpcy5zZWNvbmRUYWJsZURhdGEgPSBbXTsKICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZSA9IFtdOwogICAgICB0aGlzLnRoaXJkVGFibGUgPSBmYWxzZTsKICAgICAgdGhpcy50aGlyZFRhYmxlSGVhZGVyID0gW107CiAgICAgIHRoaXMudGhpcmRUYWJsZURhdGEgPSBbXTsKICAgICAgdGhpcy5zZWxlY3Rpb25UaGlyZFRhYmxlID0gW107CiAgICAgIHRoaXMuc2Vjb25kVGFibGUgPSB0cnVlOyAvLyDmmK/lkKbmmL7npLrnrKzkuozlsYJ0YWJsZQogICAgICB0aGlzLnNlY29uZFRhYmxlTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuc2Vjb25kVGFibGVIZWFkZXIgPSBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+i0ueeUqOW5tOS7vScsCiAgICAgICAgICB0eXBlOiAneWVhcicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICflkZjlt6Xlt6XotYTjgIHnpo/liKnotLnjgIHljovlsoHpkrEnLAogICAgICAgICAgdHlwZTogJ3llYXJNb25leScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICflip7lhazotLnjgIHmi5vlvoXotLnjgIHmi5vli5/otLnjgIHpk7booYzmiYvnu63otLnjgIHmnInnur/nlLXop4botLnjgIHpgJrkv6HotLknLAogICAgICAgICAgdHlwZTogJ29mZmljZU1vbmV5JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+W3peeoi+asvuOAgeWutuWFt+asvuOAgeS/rueQhui0ueOAgeWbuuWumui1hOS6pycsCiAgICAgICAgICB0eXBlOiAncHJvamVjdE1vbmV5JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+WtpuS5oOeUqOWTgei0ueOAgeaXpeW4uOeUqOWTgei0uScsCiAgICAgICAgICB0eXBlOiAnc3R1ZHlUb29sRmVlJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+mineWklui0ueeUqCcsCiAgICAgICAgICB0eXBlOiAnZGVkVGhpbmdGZWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn5LyZ6aOf6LS5JywKICAgICAgICAgIHR5cGU6ICdib2FyZEZlZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfmtLvliqjotLknLAogICAgICAgICAgdHlwZTogJ2FjdGl2ZUZlZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfnlqvmg4Xnm7jlhbPotLknLAogICAgICAgICAgdHlwZTogJ2VwaWRlbWljRmVlJwogICAgICAgIH0KICAgICAgXTsKICAgICAgb3RoZXJGZWVZZWFyTGlzdCh7IHN0dWRlbnRCYXNlSWQ6IHRoaXMuc3R1ZGVudERhdGEuaWQgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2Vjb25kVGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5zZWNvbmRUYWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAnaWRlbnRpZmljYXRpb24nLCAxKTsgLy8g5re75Yqg5LiA5Liq57G75Z6L5YC877yMMOaYr+aciOS7veihqCAx5piv5YW25LuW6KGoCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZWNvbmRUYWJsZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlhbPpl63nrKzkuozlsYJ0YWJsZQogICAgICovCiAgICBjbG9zZVNlY29uZFRhYmxlKCkgewogICAgICB0aGlzLnNlY29uZFRhYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuc2Vjb25kVGFibGVEYXRhID0gW107CiAgICAgIHRoaXMuc2Vjb25kVGFibGVIZWFkZXIgPSBbXTsKICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZSA9IFtdOwogICAgICB0aGlzLnRoaXJkVGFibGUgPSBmYWxzZTsKICAgICAgdGhpcy50aGlyZFRhYmxlSGVhZGVyID0gW107CiAgICAgIHRoaXMudGhpcmRUYWJsZURhdGEgPSBbXTsKICAgICAgdGhpcy5zZWxlY3Rpb25UaGlyZFRhYmxlID0gW107CiAgICB9LAogICAgLyoqCiAgICAgKiDngrnlh7vnrKzkuozlsYJ0YWJsZeW5tOi0uQogICAgICovCiAgICBzaG93U2Vjb25kVGFibGUoaXRlbSwgdHlwZSkgewogICAgICB0aGlzLiRzZXQodGhpcy5zZWNvbmRUYWJsZUNsaWNrRGF0YSwgJ2l0ZW0nLCBpdGVtKTsKICAgICAgdGhpcy4kc2V0KHRoaXMuc2Vjb25kVGFibGVDbGlja0RhdGEsICd0eXBlJywgdHlwZSk7CiAgICAgIHRoaXMuJHNldCgKICAgICAgICB0aGlzLnNlY29uZFRhYmxlQ2xpY2tEYXRhLAogICAgICAgICd5ZWFyJywKICAgICAgICBpdGVtLnllYXIKICAgICAgICAgID8gaXRlbS55ZWFyCiAgICAgICAgICA6IHRoaXMuZmlyc3RUYWJsZUNsaWNrRGF0YS5zaG93VGFibGVEYXRhLnllYXIgfHwgJycKICAgICAgKTsKICAgICAgdGhpcy50aGlyZFRhYmxlSGVhZGVyID0gW107CiAgICAgIHRoaXMudGhpcmRUYWJsZURhdGEgPSBbXTsKICAgICAgdGhpcy5zZWxlY3Rpb25UaGlyZFRhYmxlID0gW107CiAgICAgIHRoaXMudGhpcmRUYWJsZSA9IHRydWU7IC8vIOaYr+WQpuaYvuekuuesrOS6jOWxgnRhYmxlCiAgICAgIHRoaXMudGhpcmRUYWJsZUxvYWRpbmcgPSB0cnVlOwogICAgICAvLyDpgJrov4d0eXBlID09PSByb3cg5Yik5pat54K55Ye755qE5YW25LuW6L+Y5piv5YW35L2T5bm05Lu9CiAgICAgIC8vIGhlYWRlci1jbGljayDmnInpu5jorqTlj4LmlbDvvIxjb2x1bW4sIGV2ZW50CiAgICAgIHRoaXMudGhpcmRUYWJsZUhlYWRlciA9IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn6LS555So5pyI5Lu9JywKICAgICAgICAgIHR5cGU6ICdtb250aCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICflkZjlt6Xlt6XotYTjgIHnpo/liKnotLnjgIHljovlsoHpkrEnLAogICAgICAgICAgdHlwZTogJ3llYXJNb25leScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICflip7lhazotLnjgIHmi5vlvoXotLnjgIHmi5vli5/otLnjgIHpk7booYzmiYvnu63otLnjgIHmnInnur/nlLXop4botLnjgIHpgJrkv6HotLknLAogICAgICAgICAgdHlwZTogJ29mZmljZU1vbmV5JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+W3peeoi+asvuOAgeWutuWFt+asvuOAgeS/rueQhui0ueOAgeWbuuWumui1hOS6pycsCiAgICAgICAgICB0eXBlOiAncHJvamVjdE1vbmV5JwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+WtpuS5oOeUqOWTgei0ueOAgeaXpeW4uOeUqOWTgei0uScsCiAgICAgICAgICB0eXBlOiAnc3R1ZHlUb29sRmVlJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+mineWklui0ueeUqCcsCiAgICAgICAgICB0eXBlOiAnZGVkVGhpbmdGZWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn5LyZ6aOf6LS5JywKICAgICAgICAgIHR5cGU6ICdib2FyZEZlZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfmtLvliqjotLknLAogICAgICAgICAgdHlwZTogJ2FjdGl2ZUZlZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfnlqvmg4Xnm7jlhbPotLknLAogICAgICAgICAgdHlwZTogJ2VwaWRlbWljRmVlJwogICAgICAgIH0KICAgICAgXTsKICAgICAgbGV0IHBhcmFtcyA9IHt9OwogICAgICBpZiAodHlwZSA9PT0gJ3JvdycpIHsKICAgICAgICBwYXJhbXMueWVhciA9IGl0ZW0ueWVhcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbXMueWVhciA9IHRoaXMuc2Vjb25kVGFibGVEYXRhWzBdLnllYXIKICAgICAgICAgID8gdGhpcy5zZWNvbmRUYWJsZURhdGFbMF0ueWVhcgogICAgICAgICAgOiAnJzsKICAgICAgfQogICAgICBwYXJhbXMuc3R1ZGVudEJhc2VJZCA9IHRoaXMuc3R1ZGVudERhdGEuaWQ7CiAgICAgIG90aGVyRmVlTW9udGhMaXN0KHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGhpcmRUYWJsZURhdGEgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnRoaXJkVGFibGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy50aGlyZFRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdpZGVudGlmaWNhdGlvbicsIDEpOyAvLyDmt7vliqDkuIDkuKrnsbvlnovlgLzvvIww5piv5pyI5Lu96KGoIDHmmK/lhbbku5booagKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlhbPpl63nrKzkuInlsYJ0YWJsZQogICAgICovCiAgICBjbG9zZVRoaXJkVGFibGUoKSB7CiAgICAgIHRoaXMudGhpcmRUYWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnRoaXJkVGFibGVIZWFkZXIgPSBbXTsKICAgICAgdGhpcy50aGlyZFRhYmxlRGF0YSA9IFtdOwogICAgICB0aGlzLnNlbGVjdGlvblRoaXJkVGFibGUgPSBbXTsKICAgIH0sCiAgICAvKioKICAgICAqIOS4i+i9vei0ueeUqOeuoeeQhuaooeadvwogICAgICovCiAgICBkb3dubG9hZCgpIHsKICAgICAgZG93bmxvYWRJbnB1dFVzZXJUZW1wbGF0ZSh7CiAgICAgICAgcHJvamVjdFR5cGU6IHRoaXMuc3R1ZGVudERhdGEucHJvamVjdFR5cGUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVzXSwgewogICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcKICAgICAgICB9KTsKICAgICAgICBsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICfotLnnlKjnrqHnkIblr7zlhaXmqKHmnb8ueGxzJyk7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIGxpbmsgPSBudWxsOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5a+85Ye65oiQ5YqfJyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5a+85YWl5oiQ57up6KGo5qC8CiAgICAgKi8KICAgIGltcG9ydEFjaGlldmVtZW50KGZpbGUpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZS5sZW5ndGggPiAxKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO96YCJ5oup5LiA6aG56L+b6KGM5a+85YWlJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25GaXJzdFRhYmxlWzBdLnllYXIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjloavlhpnlubTku70nKTsKICAgICAgICB0aGlzLmlzVGFibGVFZGl0ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUuZmlsZSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgneWVhcicsIHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZVswXS55ZWFyKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdwcm9qZWN0VHlwZScsIHRoaXMuc3R1ZGVudERhdGEucHJvamVjdFR5cGUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3N0dWRlbnRCYXNlSWQnLCB0aGlzLnN0dWRlbnREYXRhLmlkKTsKICAgICAgZmVlSXNDYW5JbXBvcnQoZm9ybURhdGEpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGZlZUltcG9ydChmb3JtRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmlzVGFibGVFZGl0ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSk7CiAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIGlmIChlLnN0YXR1cyA9PT0gLTMwMykgewogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfkuI7liJfooajmnInph43lpI3mlbDmja7vvIzmmK/lkKbnoa7lrpropobnm5Y/JywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgIGNsb3NlT25DbGlja01vZGFsOiBmYWxzZSwKICAgICAgICAgICAgICBjbG9zZU9uUHJlc3NFc2NhcGU6IGZhbHNlCiAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgIGZlZUltcG9ydChmb3JtRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pc1RhYmxlRWRpdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlr7zlh7rmiJDnu6nooajmoLwKICAgICAqLwogICAgZXhwb3J0QWNoaWV2ZW1lbnQoKSB7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgc3R1ZGVudEJhc2VJZDogdGhpcy5zdHVkZW50RGF0YS5pZCwKICAgICAgICBwcm9qZWN0VHlwZTogdGhpcy5zdHVkZW50RGF0YS5wcm9qZWN0VHlwZQogICAgICB9OwogICAgICBsZXQgc2Vjb25kU2hvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWNvbmRUYWJsZSkpOwogICAgICBsZXQgdGhpcmRTaG93ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnRoaXJkVGFibGUpKTsKICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZS5sZW5ndGggPiAwKSB7CiAgICAgICAgcGFyYW1zLmZlZVR5cGUgPSAxOwogICAgICAgIGxldCB5ZWFycyA9IFtdOwogICAgICAgIHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgeWVhcnMucHVzaChpdGVtLnllYXIpOwogICAgICAgIH0pOwogICAgICAgIHBhcmFtcy55ZWFyTGlzdCA9IHllYXJzOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uU2Vjb25kVGFibGUubGVuZ3RoID4gMCkgewogICAgICAgIGlmIChzZWNvbmRTaG93KSB7CiAgICAgICAgICBpZiAodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLmlzU2hvd1RhYmxlID09PSAnc2hvd01vbnRoVGFibGUnKSB7CiAgICAgICAgICAgIHBhcmFtcy5mZWVUeXBlID0gMzsKICAgICAgICAgICAgcGFyYW1zLmZlZU1vbnRoRHRvcyA9IHRoaXMuc2VsZWN0aW9uU2Vjb25kVGFibGU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZmVlVHlwZSA9IDI7CiAgICAgICAgICAgIGxldCB5ZWFycyA9IFtdOwogICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlY29uZFRhYmxlLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgeWVhcnMucHVzaChpdGVtLnllYXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFyYW1zLnllYXJMaXN0ID0geWVhcnM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZS5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKHRoaXJkU2hvdykgewogICAgICAgICAgcGFyYW1zLmZlZVR5cGUgPSA0OwogICAgICAgICAgcGFyYW1zLm90aGVyRmVlRHRvcyA9IHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc29sZS5sb2cocGFyYW1zLCAnZXhwb3J0Jyk7CiAgICAgIGZlZUV4cG9ydChwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3Jlc10sIHsKICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnCiAgICAgICAgfSk7CiAgICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAn6LS555So566h55CG5a+85Ye65qih5p2/LnhscycpOwogICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICBsaW5rID0gbnVsbDsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WvvOWHuuaIkOWKnycpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWIoOmZpAogICAgICovCiAgICBkZWxldGVBY2hpZXZlbWVudCgpIHsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICBzdHVkZW50QmFzZUlkOiB0aGlzLnN0dWRlbnREYXRhLmlkCiAgICAgIH07CiAgICAgIC8vIOesrOS6jOS4quihqOagvOaYr+WQpuWxleekugogICAgICBsZXQgc2Vjb25kU2hvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWNvbmRUYWJsZSkpOwogICAgICAvLyDnrKzkuInkuKrooajmoLzmmK/lkKblsZXnpLoKICAgICAgbGV0IHRoaXJkU2hvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy50aGlyZFRhYmxlKSk7CiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbkZpcnN0VGFibGUubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3Rpb25GaXJzdFRhYmxlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAvLyDnrKzkuIDkuKrooajmoLzmmK/lkKbliKDpmaTnqbrnmoQKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25GaXJzdFRhYmxlW2ldICYmCiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZVtpXS55ZWFyID09PSAnJwogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIHRoaXMueWVhclRhYmxlRGF0YS5zcGxpY2UoMCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHBhcmFtcy5mZWVUeXBlID0gMTsKICAgICAgICBsZXQgeWVhcnMgPSBbXTsKICAgICAgICB0aGlzLnNlbGVjdGlvbkZpcnN0VGFibGUuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHllYXJzLnB1c2goaXRlbS55ZWFyKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoeWVhcnMgJiYgeWVhcnMubGVuZ3RoIDw9IDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLmNhbmNlbCgpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBwYXJhbXMueWVhckxpc3QgPSB5ZWFyczsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvblNlY29uZFRhYmxlLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyDnrKzkuozkuKrooajmoLzliKDpmaTnmoTmmK/lubTov5jmmK/mnIjku73liKTmlq0KICAgICAgICBpZiAoc2Vjb25kU2hvdykgewogICAgICAgICAgaWYgKHRoaXMuZmlyc3RUYWJsZUNsaWNrRGF0YS5pc1Nob3dUYWJsZSA9PT0gJ3Nob3dNb250aFRhYmxlJykgewogICAgICAgICAgICBwYXJhbXMuZmVlVHlwZSA9IDM7CiAgICAgICAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFyYW1zLmZlZU1vbnRoSURzID0gaWRzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zLmZlZVR5cGUgPSAyOwogICAgICAgICAgICBsZXQgeWVhcnMgPSBbXTsKICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgIHllYXJzLnB1c2goaXRlbS55ZWFyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtcy55ZWFyTGlzdCA9IHllYXJzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGlvblRoaXJkVGFibGUubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOesrOS4ieS4quihqOagvOWPquacieWFtuS7luaciOS7vQogICAgICAgIGlmICh0aGlyZFNob3cpIHsKICAgICAgICAgIHBhcmFtcy5mZWVUeXBlID0gNDsKICAgICAgICAgIC8vIHBhcmFtcy55ZWFyTGlzdCA9IHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZTsKICAgICAgICAgIGxldCBpZHMgPSBbXTsKICAgICAgICAgIHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZHMucHVzaChpdGVtLmlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcGFyYW1zLm90aGVyRmVlSURzID0gaWRzOwogICAgICAgIH0KICAgICAgfQogICAgICBkZWxldGVGZWVNYW5hZ2VtZW50KHBhcmFtcykudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZS5sZW5ndGggPiAwICYmIHNlY29uZFNob3cpIHsKICAgICAgICAgIC8vIOWmguaenOmAieS4reWIoOmZpOesrOS4gOS4quihqOagvO+8jOW5tuS4lOesrOS6jOS4quihqOagvOaJk+W8gOeKtuaAge+8jOiAjOS4lOaYr+WIoOmZpOeahOW5tOS7ve+8jOWImeWFs+mXrQogICAgICAgICAgLy8g5Yik5pat5piv5ZCm5omT5byA55qE5piv5bm05Lu96KGoIOW5tOS7veihqOWFqOWIoOWImeS4i+mdouihqOagvOmakOiXjyDlpoLmnpzmmK/lhbbku5booajvvIzliJnliKTmlq3liKDpmaTnmoTlk6rkuIDlubTlnKjpgInmi6nlhbPpl60KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlyc3RUYWJsZUNsaWNrRGF0YSk7CiAgICAgICAgICBpZiAodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLmlzU2hvd1RhYmxlID09PSAnc2hvd01vbnRoVGFibGUnKSB7CiAgICAgICAgICAgIHBhcmFtcy55ZWFyTGlzdC5maW5kSW5kZXgoCiAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtID09PSB0aGlzLmZpcnN0VGFibGVDbGlja0RhdGEuc2hvd1RhYmxlRGF0YS55ZWFyCiAgICAgICAgICAgICkgIT09IC0xCiAgICAgICAgICAgICAgPyB0aGlzLmNsb3NlU2Vjb25kVGFibGUoKQogICAgICAgICAgICAgIDogJyc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocGFyYW1zLnllYXJMaXN0Lmxlbmd0aCA9PT0gdGhpcy55ZWFyVGFibGVEYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWNvbmRUYWJsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChzZWNvbmRTaG93ICYmIHRoaXMuc2VsZWN0aW9uU2Vjb25kVGFibGUubGVuZ3RoKSB7CiAgICAgICAgICAvLyDlpoLmnpzpgInkuK3liKDpmaTnrKzkuozkuKrooajmoLzvvIzlubbkuJTnrKzkuozkuKrooajmoLzmiZPlvIDnirbmgIHogIzkuJTlhajpg6jliKDpmaTliJnnrKzkuozkuKrnrKzkuInkuKrooajmoLzlhbPpl60KICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuaJk+W8gOeahOaYr+W5tOS7veihqCDlubTku73ooajlhajliKDliJnkuIvpnaLooajmoLzpmpDol48g5aaC5p6c5piv5YW25LuW6KGo77yM5YiZ5Yik5pat5Yig6Zmk55qE5ZOq5LiA5bm05Zyo6YCJ5oup5YWz6ZetCiAgICAgICAgICBpZiAodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLmlzU2hvd1RhYmxlID09PSAnc2hvd01vbnRoVGFibGUnKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvblNlY29uZFRhYmxlLmxlbmd0aCA9PT0gdGhpcy5zZWNvbmRUYWJsZURhdGEubGVuZ3RoCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWNvbmRUYWJsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZS5sZW5ndGggPT09IHRoaXMuc2Vjb25kVGFibGVEYXRhLmxlbmd0aAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLmNsb3NlU2Vjb25kVGFibGUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMueWVhckxpc3QuZmluZEluZGV4KAogICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtID09PSB0aGlzLnNlY29uZFRhYmxlQ2xpY2tEYXRhLnllYXIKICAgICAgICAgICAgICApICE9PSAtMQogICAgICAgICAgICAgICAgPyB0aGlzLmNsb3NlVGhpcmRUYWJsZSgpCiAgICAgICAgICAgICAgICA6ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0aGlyZFNob3cpIHsKICAgICAgICAgIC8vIOWmguaenOmAieS4reWIoOmZpOesrOS4ieS4quihqOagvO+8jOW5tuS4lOesrOS4ieS4quihqOagvOaJk+W8gOeKtuaAgeiAjOS4lOWFqOmDqOWIoOmZpOWImeesrOS4ieS4quihqOagvOWFs+mXrQogICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uVGhpcmRUYWJsZS5sZW5ndGggPT09IHRoaXMudGhpcmRUYWJsZURhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMuY2xvc2VUaGlyZFRhYmxlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGF3YWl0IHRoaXMuY2FuY2VsKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5paw5aKeCiAgICAgKi8KICAgIGFkZFllYXJUYWJsZSgpIHsKICAgICAgaWYgKEFycmF5KHRoaXMueWVhclRhYmxlRGF0YSkgJiYgdGhpcy55ZWFyVGFibGVEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMueWVhclRhYmxlRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMueWVhclRhYmxlRGF0YVtpXSAmJiB0aGlzLnllYXJUYWJsZURhdGFbaV0ueWVhciA9PT0gJycpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5oKo6L+Y5pyJ5LiA5p2h56m65pWw5o2u5pyq57yW6L6RJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy55ZWFyVGFibGVEYXRhLnVuc2hpZnQoeyB5ZWFyOiAnJyB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOWvvOWFpeaIkOe7qeihqOagvAogICAgICovCiAgICB0YWJsZUVkaXQoKSB7CiAgICAgIHRoaXMuaXNUYWJsZUVkaXQgPSB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICog5L+d5a2Y5oiQ57up6KGo5qC8CiAgICAgKi8KICAgIHByZXNlcnZhdGlvbigpIHsKICAgICAgdGhpcy5pc1RhYmxlRWRpdCA9IGZhbHNlOwogICAgICBsZXQgc2Vjb25kU2hvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWNvbmRUYWJsZSkpOwogICAgICBsZXQgdGhpcmRTaG93ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnRoaXJkVGFibGUpKTsKICAgICAgbGV0IHBhcmFtcyA9IHt9OwogICAgICBpZiAoc2Vjb25kU2hvdykgewogICAgICAgIGlmICh0aGlzLmZpcnN0VGFibGVDbGlja0RhdGEuaXNTaG93VGFibGUgPT09ICdzaG93TW9udGhUYWJsZScpIHsKICAgICAgICAgIHBhcmFtcy5mZWVNb250aHMgPSB0aGlzLnNlY29uZFRhYmxlRGF0YTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXJkU2hvdykgewogICAgICAgIHBhcmFtcy5vdGhlckZlZXMgPSB0aGlzLnRoaXJkVGFibGVEYXRhOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcywgJ3BhcmFtcycpOwogICAgICBzYXZlRmVlTWFuYWdlbWVudChwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaWsOaIkOWKnycpOwogICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog56ys5LiA5Liq6KGo5qC85aSa6YCJ6aG55pS55Y+YCiAgICAgKi8KICAgIGhhbmRsZVNlbGVjdGlvbkZpcnN0VGFibGVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9uRmlyc3RUYWJsZSA9IHZhbDsKICAgIH0sCiAgICAvKioKICAgICAqIOesrOS4gOS4quihqOagvOWkmumAiemhueaYr+WQpuWPr+mAiQogICAgICovCiAgICBzZWxlY3RBYmxlRmlyc3Qocm93LCBpbmRleCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5zZWxlY3Rpb25TZWNvbmRUYWJsZS5sZW5ndGggPiAwIHx8CiAgICAgICAgdGhpcy5zZWxlY3Rpb25UaGlyZFRhYmxlLmxlbmd0aCA+IDAKICAgICAgKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDnrKzkuozkuKrooajmoLzlpJrpgInpobnmlLnlj5gKICAgICAqLwogICAgaGFuZGxlU2VsZWN0aW9uU2Vjb25kQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnNlbGVjdGlvblNlY29uZFRhYmxlID0gdmFsOwogICAgfSwKICAgIC8qKgogICAgICog56ys5LqM5Liq6KGo5qC85aSa6YCJ6aG55piv5ZCm5Y+v6YCJCiAgICAgKi8KICAgIHNlbGVjdEFibGVTZWNvbmQocm93LCBpbmRleCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5zZWxlY3Rpb25GaXJzdFRhYmxlLmxlbmd0aCA+IDAgfHwKICAgICAgICB0aGlzLnNlbGVjdGlvblRoaXJkVGFibGUubGVuZ3RoID4gMAogICAgICApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOesrOS4ieS4quihqOagvOWkmumAiemhueaUueWPmAogICAgICovCiAgICBoYW5kbGVTZWxlY3Rpb25UaGlyZENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5zZWxlY3Rpb25UaGlyZFRhYmxlID0gdmFsOwogICAgfSwKICAgIC8qKgogICAgICog56ys5LiJ5Liq6KGo5qC85aSa6YCJ6aG55piv5ZCm5Y+v6YCJCiAgICAgKi8KICAgIHNlbGVjdEFibGVUaGlyZChyb3csIGluZGV4KSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnNlbGVjdGlvbkZpcnN0VGFibGUubGVuZ3RoID4gMCB8fAogICAgICAgIHRoaXMuc2VsZWN0aW9uU2Vjb25kVGFibGUubGVuZ3RoID4gMAogICAgICApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOWPlua2iO+8jOS8muagueaNruS5i+WJjeaJk+W8gOabtOaWsOaJk+W8gOeahOaJgOacieihqOagvAogICAgICovCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJHJlZnMuRmlyc3RUYWJsZS5jbGVhclNlbGVjdGlvbigpOyAvL+a4hemZpOmAieS4reeahOaVsOaNrgogICAgICB0aGlzLmlzVGFibGVFZGl0ID0gZmFsc2U7CiAgICAgIC8vIOiusOW9leeUqOaIt+S5i+WJjeaJk+W8gOeahOmhtemdogogICAgICBsZXQgc2Vjb25kU2hvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWNvbmRUYWJsZSkpOwogICAgICBsZXQgdGhpcmRTaG93ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnRoaXJkVGFibGUpKTsKICAgICAgaWYgKHNlY29uZFNob3cpIHsKICAgICAgICB0aGlzLiRyZWZzLnNlY29uZFRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7IC8v5riF6Zmk6YCJ5Lit55qE5pWw5o2uCiAgICAgICAgLy8g5Yik5pat5LmL5YmN56ys5LqM5LiqdGFibGXnlKjmiLfmiZPlvIDnmoTmmK/lhbbku5bov5jmmK/mnIjku70KICAgICAgICBpZiAodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLmlzU2hvd1RhYmxlID09PSAnc2hvd090aGVyVGFibGUnKSB7CiAgICAgICAgICB0aGlzLnNob3dPdGhlclRhYmxlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd01vbnRoVGFibGUodGhpcy5maXJzdFRhYmxlQ2xpY2tEYXRhLnNob3dUYWJsZURhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcmRTaG93KSB7CiAgICAgICAgdGhpcy4kcmVmcy50aGlyZFRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7IC8v5riF6Zmk6YCJ5Lit55qE5pWw5o2uCiAgICAgICAgdGhpcy50aGlyZFRhYmxlID0gdGhpcmRTaG93OwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2Vjb25kVGFibGVDbGlja0RhdGEpOwogICAgICAgIGxldCB5ZWFyRGF0YSA9IHsKICAgICAgICAgIHllYXI6IHRoaXMuc2Vjb25kVGFibGVDbGlja0RhdGEueWVhcgogICAgICAgIH07CiAgICAgICAgdGhpcy5zZWNvbmRUYWJsZURhdGEgPQogICAgICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLnNlY29uZFRhYmxlRGF0YSkgJiYgdGhpcy5zZWNvbmRUYWJsZURhdGEubGVuZ3RoID4gMAogICAgICAgICAgICA/IHRoaXMuc2Vjb25kVGFibGVEYXRhCiAgICAgICAgICAgIDogW3llYXJEYXRhXTsKICAgICAgICB0aGlzLnNob3dTZWNvbmRUYWJsZSgKICAgICAgICAgIHRoaXMuc2Vjb25kVGFibGVDbGlja0RhdGEuaXRlbSwKICAgICAgICAgIHRoaXMuc2Vjb25kVGFibGVDbGlja0RhdGEudHlwZQogICAgICAgICk7CiAgICAgIH0KICAgICAgLy8gdGhpcy5jbG9zZVNlY29uZFRhYmxlKCk7CiAgICAgIHRoaXMuaW5pdERhdGEoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOi/lOWbngogICAgICovCiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9zdHVkZW50L2Jhc2ljLWluZm8nIH0pOwogICAgfSwKICAgIC8vIOebkeWQrOi+k+WFpeexu+Wei+WPquiDveS4uuato+aVtOaVsOWSjOWwj+aVsO+8jOesrOS4gOS9jeS4jeiDveaYry4KICAgIHByb3ZpbmcoaXRlbSwgZGF0YSwgbmFtZSkgewogICAgICBpdGVtID0gaXRlbQogICAgICAgIC5yZXBsYWNlKC9bXlxkLl0vZywgJycpIC8vIOa4hemZpOKAnOaVsOWtl+KAneWSjOKAnC7igJ3ku6XlpJbnmoTlrZfnrKYKICAgICAgICAucmVwbGFjZSgvXC57Mix9L2csICcuJykgLy8g5Y+q5L+d55WZ56ys5LiA5LiqLiDmuIXpmaTlpJrkvZnnmoQKICAgICAgICAucmVwbGFjZSgvXlwuL2csICcnKSAvL+S/neivgeesrOS4gOS4quS4uuaVsOWtl+iAjOS4jeaYry4KICAgICAgICAucmVwbGFjZSgnLicsICckIyQnKQogICAgICAgIC5yZXBsYWNlKC9cLi9nLCAnJykKICAgICAgICAucmVwbGFjZSgnJCMkJywgJy4nKQogICAgICAgIC5yZXBsYWNlKC9eKFxkKylcLihcZFxkKS4qJC8sICckMS4kMicpOwogICAgICB0aGlzLiRzZXQoZGF0YSwgbmFtZSwgaXRlbSk7CiAgICB9LAogICAgLy8g55uR5ZCs6L6T5YWl57G75Z6L5Y+q6IO95Li65q2j5pW05pWwCiAgICBwcm92aW5nTnVtYmVyKGl0ZW0sIGRhdGEsIG5hbWUpIHsKICAgICAgaXRlbSA9IGl0ZW0ucmVwbGFjZSgvW15cZF0vZywgJycpOwogICAgICB0aGlzLiRzZXQoZGF0YSwgbmFtZSwgaXRlbSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/student/components/CostManagement","sourcesContent":["<template>\n  <div class=\"CostManagementBox\" v-loading=\"loading\">\n    <div class=\"BtnBox\">\n      <el-button type=\"primary\" size=\"small\" @click=\"download\"\n        >下载模板</el-button\n      >\n\n      <el-upload\n        :disabled=\"\n          Array.isArray(this.selectionFirstTable) &&\n            this.selectionFirstTable.length <= 0\n        \"\n        class=\"avatar-uploader\"\n        action=\"\"\n        :show-file-list=\"false\"\n        :multiple=\"false\"\n        :http-request=\"importAchievement\"\n        accept=\".xls,.xlsx.XLS,.XLSX\"\n      >\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          :disabled=\"\n            Array.isArray(this.selectionFirstTable) &&\n              this.selectionFirstTable.length <= 0\n          \"\n          >导入</el-button\n        >\n      </el-upload>\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        @click=\"exportAchievement\"\n        :disabled=\"\n          !Array.isArray(this.selectionFirstTable) ||\n            (this.selectionFirstTable.length === 1 &&\n              this.selectionFirstTable[0].year === '') ||\n            this.selectionFirstTable.length <= 0\n        \"\n        >导出</el-button\n      >\n      <el-button type=\"primary\" size=\"small\" @click=\"addYearTable\"\n        >新增</el-button\n      >\n      <el-button\n        type=\"danger\"\n        size=\"small\"\n        @click=\"deleteAchievement\"\n        :disabled=\"\n          this.selectionFirstTable.length <= 0 &&\n            this.selectionSecondTable.length <= 0 &&\n            this.selectionThirdTable.length <= 0\n        \"\n        >删除</el-button\n      >\n    </div>\n    <!-- 培养项目表格 -->\n    <div\n      class=\"YearTable\"\n      v-if=\"Array.isArray(this.yearTableData) && this.yearTableData.length > 0\"\n    >\n      <el-table\n        ref=\"FirstTable\"\n        :data=\"yearTableData\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n        border\n        @selection-change=\"handleSelectionFirstTableChange\"\n        :row-key=\"row => row.year\"\n        @header-click=\"showOtherTable()\"\n      >\n        <el-table-column\n          type=\"selection\"\n          width=\"40\"\n          :selectable=\"selectAbleFirst\"\n        >\n        </el-table-column>\n        <el-table-column\n          v-for=\"(item, index) in yearTableHeader\"\n          :key=\"index\"\n          :label=\"item.name\"\n          :prop=\"item.type\"\n          :label-class-name=\"item.type === 'otherFee' ? 'linkColumn' : ''\"\n        >\n          <template slot-scope=\"scope\">\n            <div v-if=\"item.type === 'year'\" class=\"linkColumn\">\n              <el-select\n                v-show=\"isTableEdit\"\n                v-model=\"scope.row[item.type]\"\n                placeholder=\"请选择年份\"\n              >\n                <el-option\n                  v-for=\"(yaerItem, yaerIndex) in yearList\"\n                  :key=\"yaerIndex\"\n                  :label=\"yaerItem\"\n                  :value=\"yaerItem\"\n                >\n                </el-option>\n              </el-select>\n              <p v-show=\"!isTableEdit\" @click=\"showMonthTable(scope.row)\">\n                {{ scope.row[item.type] ? scope.row[item.type] : '--' }}\n              </p>\n            </div>\n            <p v-else>\n              {{ scope.row[item.type] ? scope.row[item.type] : 0 }}\n            </p>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"totalFee\"\n          label=\"合计\"\n          width=\"80\"\n          show-overflow-tooltip\n        >\n          <!-- <template slot-scope=\"scope\">\n            {{ scope.row | FirstTotal }}\n          </template> -->\n        </el-table-column>\n      </el-table>\n    </div>\n    <!-- 第二级其他和月季表格 -->\n    <div class=\"YearTable\" v-if=\"secondTable\" v-loading=\"secondTableLoading\">\n      <i class=\"el-icon-error closed\" @click=\"closeSecondTable\"></i>\n      <el-table\n        ref=\"secondTable\"\n        :data=\"secondTableData\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n        border\n        @selection-change=\"handleSelectionSecondChange\"\n        :row-key=\"row => row.id || row.year\"\n        @header-click=\"showSecondTable\"\n      >\n        <el-table-column\n          type=\"selection\"\n          width=\"40\"\n          :selectable=\"selectAbleSecond\"\n        >\n        </el-table-column>\n        <el-table-column\n          v-for=\"(secondItem, secondIndex) in secondTableHeader\"\n          :key=\"secondIndex\"\n          :label=\"secondItem.name\"\n          :prop=\"secondItem.type\"\n          :label-class-name=\"secondItem.type === 'otherFee' ? 'linkColumn' : ''\"\n        >\n          <template slot-scope=\"scope\">\n            <div\n              v-if=\"\n                secondTableHeader.findIndex(\n                  header => header.type === 'year'\n                ) !== -1\n              \"\n            >\n              <p\n                v-if=\"secondItem.type === 'year'\"\n                class=\"linkColumn\"\n                @click=\"showSecondTable(scope.row, 'row')\"\n              >\n                {{ scope.row[secondItem.type] }}\n              </p>\n              <p v-else>\n                {{\n                  scope.row[secondItem.type] ? scope.row[secondItem.type] : 0\n                }}\n              </p>\n            </div>\n            <div v-else>\n              <p\n                v-if=\"secondItem.type === 'year'\"\n                class=\"linkColumn\"\n                @click=\"showSecondTable(scope.row, 'row')\"\n              >\n                {{ scope.row[secondItem.type] }}\n              </p>\n              <p\n                v-else-if=\"\n                  secondItem.type === 'otherFee' || secondItem.type === 'month'\n                \"\n              >\n                {{\n                  scope.row[secondItem.type] ? scope.row[secondItem.type] : 0\n                }}\n              </p>\n              <div v-else>\n                <el-input\n                  v-show=\"isTableEdit\"\n                  v-model.trim=\"scope.row[secondItem.type]\"\n                  @keyup.native=\"\n                    proving(\n                      scope.row[secondItem.type],\n                      secondTableData[scope.$index],\n                      secondItem.type\n                    )\n                  \"\n                >\n                </el-input>\n                <p v-show=\"!isTableEdit\">\n                  {{\n                    scope.row[secondItem.type] ? scope.row[secondItem.type] : 0\n                  }}\n                </p>\n              </div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"name\"\n          label=\"合计\"\n          width=\"80\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            {{ scope.row | total }}\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <!-- 第三级其他和月季表格 -->\n    <div class=\"YearTable\" v-if=\"thirdTable\" v-loading=\"thirdTableLoading\">\n      <i class=\"el-icon-error closed\" @click=\"closeThirdTable\"></i>\n      <el-table\n        ref=\"thirdTable\"\n        :data=\"thirdTableData\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%\"\n        border\n        @selection-change=\"handleSelectionThirdChange\"\n        :row-key=\"row => row.id || row.year\"\n      >\n        <el-table-column\n          type=\"selection\"\n          width=\"40\"\n          :selectable=\"selectAbleThird\"\n        >\n        </el-table-column>\n        <el-table-column\n          v-for=\"(thirdItem, thirdIndex) in thirdTableHeader\"\n          :key=\"thirdIndex\"\n          :label=\"thirdItem.name\"\n          :prop=\"thirdItem.type\"\n        >\n          <template slot-scope=\"scope\">\n            <p v-if=\"thirdItem.type === 'month'\">\n              {{ scope.row[thirdItem.type] }}\n            </p>\n            <div v-else>\n              <el-input\n                v-show=\"isTableEdit\"\n                v-model.trim=\"scope.row[thirdItem.type]\"\n                @keyup.native=\"\n                  proving(\n                    scope.row[thirdItem.type],\n                    thirdTableData[scope.$index],\n                    thirdItem.type\n                  )\n                \"\n              >\n              </el-input>\n              <p v-show=\"!isTableEdit\">\n                {{ scope.row[thirdItem.type] ? scope.row[thirdItem.type] : 0 }}\n              </p>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"name\"\n          label=\"合计\"\n          width=\"80\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            {{ scope.row | total }}\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div\n      class=\"tableBtn\"\n      v-if=\"Array.isArray(this.yearTableData) && this.yearTableData.length > 0\"\n    >\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        :disabled=\"isTableEdit\"\n        @click=\"tableEdit\"\n        >编辑</el-button\n      >\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        :disabled=\"!isTableEdit\"\n        @click=\"cancel\"\n        >取消</el-button\n      >\n      <el-button type=\"primary\" size=\"small\" @click=\"preservation\"\n        >保存</el-button\n      >\n      <el-button type=\"primary\" size=\"small\" @click=\"goBack\">返回</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { logout } from '../../../../api/user/index';\nimport {\n  Card,\n  Button,\n  Upload,\n  Table,\n  TableColumn,\n  Input,\n  Select,\n  Option\n} from 'element-ui';\nimport {\n  downloadInputUserTemplate,\n  feeYearList,\n  feeMonthList,\n  otherFeeMonthList,\n  otherFeeYearList,\n  feeImport,\n  feeExport,\n  feeIsCanImport,\n  saveFeeManagement,\n  deleteFeeManagement\n} from '@/pages/charity-foundation/api/feeManagement/index';\nlet VUE;\nexport default {\n  name: 'CostManagement',\n  components: {\n    [Card.name]: Card,\n    [Button.name]: Button,\n    [Upload.name]: Upload,\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option\n  },\n  data() {\n    return {\n      loading: false,\n      secondTableLoading: false,\n      thirdTableLoading: false,\n      yearList: [], // 年份选择列表\n      isTableEdit: false,\n      yearTableHeader: [], // 月份table表头\n      yearTableData: [], // 月份table数据\n      selectionFirstTable: [], //月度费用年份列表选中\n      secondTable: false, // 是否显示第二层table\n      secondTableHeader: [], // 第二层table表头\n      secondTableData: [], // 第二层table数据\n      selectionSecondTable: [], //第二层列表选中\n      thirdTable: false, // 是否显示第三层table\n      thirdTableHeader: [], //第三层table表头\n      thirdTableData: [], // 显示第三层数据\n      selectionThirdTable: [], //第三层列表选中\n      firstTableClickData: {}, // 第一层点击的数据\n      secondTableClickData: {} // 第二层点击的数据\n    };\n  },\n  props: {\n    studentData: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  beforeCreate() {\n    VUE = this;\n  },\n  filters: {\n    total(val) {\n      /**\n       * @param {identification}}0是月份表 1是其他表\n       * @param {studentData.projectType}} 判断工程类型 22雏鹰 23英才\n       * 通过不同的表格算出相对总数\n       */\n      let total = 0;\n      if (VUE.studentData.projectType === 22 && val.identification === 0) {\n        total =\n          Number(val.medicalFee) +\n          Number(val.studyHotelFee) +\n          Number(val.lessonsFee) +\n          Number(val.pocketMoney) +\n          Number(val.visitingRelativesFee) +\n          Number(val.haircutFee) +\n          Number(val.otherFee);\n      } else if (\n        VUE.studentData.projectType === 23 &&\n        val.identification === 0\n      ) {\n        total =\n          Number(val.studyFee) +\n          Number(val.recruitmentFee) +\n          Number(val.trafficFee) +\n          Number(val.familyFee) +\n          Number(val.otherFee);\n      } else {\n        total =\n          Number(val.yearMoney) +\n          Number(val.officeMoney) +\n          Number(val.projectMoney) +\n          Number(val.studyToolFee) +\n          Number(val.dedThingFee) +\n          Number(val.boardFee) +\n          Number(val.activeFee) +\n          Number(val.epidemicFee);\n      }\n      VUE.$set(val, 'totalFee', Math.round(total.toFixed(2) * 100) / 100);\n      return Math.round(total.toFixed(2) * 100) / 100;\n    }\n    // FirstTotal(val) {\n    //   console.log(val.totalFee, VUE.yearTableData);\n    //   return 0;\n    // }\n  },\n  watch: {},\n  mounted() {\n    this.initData();\n  },\n  methods: {\n    /**\n     * 初始化数据\n     */\n    initData() {\n      if (this.studentData.projectType === 22) {\n        this.yearTableHeader = [\n          {\n            name: '费用年份',\n            type: 'year'\n          },\n          {\n            name: '就医费用',\n            type: 'medicalFee'\n          },\n          {\n            name: '学费(含住宿费)',\n            type: 'studyHotelFee'\n          },\n          {\n            name: '补课费（夏令营、课外）',\n            type: 'lessonsFee'\n          },\n          {\n            name: '零用钱',\n            type: 'pocketMoney'\n          },\n          {\n            name: '探亲路费',\n            type: 'visitingRelativesFee'\n          },\n          {\n            name: '理发',\n            type: 'haircutFee'\n          },\n          {\n            name: '其他',\n            type: 'otherFee'\n          }\n        ];\n      } else {\n        this.yearTableHeader = [\n          {\n            name: '费用年份',\n            type: 'year'\n          },\n          {\n            name: '学费',\n            type: 'studyFee'\n          },\n          {\n            name: '招募差旅费',\n            type: 'recruitmentFee'\n          },\n          {\n            name: '交通费',\n            type: 'trafficFee'\n          },\n          {\n            name: '家属住宿费及餐费',\n            type: 'familyFee'\n          },\n          {\n            name: '其他',\n            type: 'otherFee'\n          }\n        ];\n      }\n      let yaer = new Date().getFullYear();\n      let yearList = [yaer];\n      for (let i = 1; i < 10; i++) {\n        yearList.unshift(yaer - i);\n        yearList.push(yaer + i);\n      }\n      this.yearList = yearList;\n      feeYearList({ studentId: this.studentData.id }).then(res => {\n        this.yearTableData = Array.isArray(res.data) ? res.data : [];\n        this.yearTableData.forEach(item => {\n          if (this.yearList.findIndex(v => v === item.year) !== -1) {\n            this.yearList.splice(\n              this.yearList.findIndex(v => v === item.year),\n              1\n            );\n          }\n        });\n      });\n    },\n    /**\n     * 将row-key值定为id\n     */\n    getRowKey(row) {\n      return row.id;\n    },\n    /**\n     * 点击项目的费用年费\n     */\n    showMonthTable(item) {\n      if (!item.year) {\n        this.$message.error('请先编辑年份');\n        return false;\n      }\n      this.$set(this.firstTableClickData, 'isShowTable', 'showMonthTable');\n      this.$set(this.firstTableClickData, 'showTableData', item);\n      this.secondTableHeader = [];\n      this.secondTableData = [];\n      this.selectionSecondTable = [];\n      this.thirdTable = false;\n      this.thirdTableHeader = [];\n      this.thirdTableData = [];\n      this.selectionThirdTable = [];\n      this.secondTable = true; // 是否显示第二层table\n      this.secondTableLoading = true;\n      if (this.studentData.projectType === 22) {\n        this.secondTableHeader = [\n          {\n            name: '费用月份',\n            type: 'month'\n          },\n          {\n            name: '就医费用',\n            type: 'medicalFee'\n          },\n          {\n            name: '学费(含住宿费)',\n            type: 'studyHotelFee'\n          },\n          {\n            name: '补课费（夏令营、课外）',\n            type: 'lessonsFee'\n          },\n          {\n            name: '零用钱',\n            type: 'pocketMoney'\n          },\n          {\n            name: '探亲路费',\n            type: 'visitingRelativesFee'\n          },\n          {\n            name: '理发',\n            type: 'haircutFee'\n          },\n          {\n            name: '其他',\n            type: 'otherFee'\n          }\n        ];\n      } else {\n        this.secondTableHeader = [\n          {\n            name: '费用月份',\n            type: 'month'\n          },\n          {\n            name: '学费',\n            type: 'studyFee'\n          },\n          {\n            name: '招募差旅费',\n            type: 'recruitmentFee'\n          },\n          {\n            name: '交通费',\n            type: 'trafficFee'\n          },\n          {\n            name: '家属住宿费及餐费',\n            type: 'familyFee'\n          },\n          {\n            name: '其他',\n            type: 'otherFee'\n          }\n        ];\n      }\n      let parmas = {\n        studentId: this.studentData.id,\n        year: item.year\n      };\n      feeMonthList(parmas).then(res => {\n        this.secondTableData = res.data;\n        this.secondTableLoading = false;\n        this.secondTableData.forEach(item => {\n          this.$set(item, 'identification', 0); // 添加一个类型值，0是月份表 1是其他表\n        });\n      });\n    },\n    /**\n     * 点击项目的其他\n     */\n    showOtherTable(column, event) {\n      this.$set(this.firstTableClickData, 'isShowTable', 'showOtherTable');\n      this.$set(this.firstTableClickData, 'showTableData', '');\n      this.secondTableHeader = [];\n      this.secondTableData = [];\n      this.selectionSecondTable = [];\n      this.thirdTable = false;\n      this.thirdTableHeader = [];\n      this.thirdTableData = [];\n      this.selectionThirdTable = [];\n      this.secondTable = true; // 是否显示第二层table\n      this.secondTableLoading = true;\n      this.secondTableHeader = [\n        {\n          name: '费用年份',\n          type: 'year'\n        },\n        {\n          name: '员工工资、福利费、压岁钱',\n          type: 'yearMoney'\n        },\n        {\n          name: '办公费、招待费、招募费、银行手续费、有线电视费、通信费',\n          type: 'officeMoney'\n        },\n        {\n          name: '工程款、家具款、修理费、固定资产',\n          type: 'projectMoney'\n        },\n        {\n          name: '学习用品费、日常用品费',\n          type: 'studyToolFee'\n        },\n        {\n          name: '额外费用',\n          type: 'dedThingFee'\n        },\n        {\n          name: '伙食费',\n          type: 'boardFee'\n        },\n        {\n          name: '活动费',\n          type: 'activeFee'\n        },\n        {\n          name: '疫情相关费',\n          type: 'epidemicFee'\n        }\n      ];\n      otherFeeYearList({ studentBaseId: this.studentData.id }).then(res => {\n        this.secondTableData = res.data;\n        this.secondTableData.forEach(item => {\n          this.$set(item, 'identification', 1); // 添加一个类型值，0是月份表 1是其他表\n        });\n        this.secondTableLoading = false;\n      });\n    },\n    /**\n     * 关闭第二层table\n     */\n    closeSecondTable() {\n      this.secondTable = false;\n      this.secondTableData = [];\n      this.secondTableHeader = [];\n      this.selectionSecondTable = [];\n      this.thirdTable = false;\n      this.thirdTableHeader = [];\n      this.thirdTableData = [];\n      this.selectionThirdTable = [];\n    },\n    /**\n     * 点击第二层table年费\n     */\n    showSecondTable(item, type) {\n      this.$set(this.secondTableClickData, 'item', item);\n      this.$set(this.secondTableClickData, 'type', type);\n      this.$set(\n        this.secondTableClickData,\n        'year',\n        item.year\n          ? item.year\n          : this.firstTableClickData.showTableData.year || ''\n      );\n      this.thirdTableHeader = [];\n      this.thirdTableData = [];\n      this.selectionThirdTable = [];\n      this.thirdTable = true; // 是否显示第二层table\n      this.thirdTableLoading = true;\n      // 通过type === row 判断点击的其他还是具体年份\n      // header-click 有默认参数，column, event\n      this.thirdTableHeader = [\n        {\n          name: '费用月份',\n          type: 'month'\n        },\n        {\n          name: '员工工资、福利费、压岁钱',\n          type: 'yearMoney'\n        },\n        {\n          name: '办公费、招待费、招募费、银行手续费、有线电视费、通信费',\n          type: 'officeMoney'\n        },\n        {\n          name: '工程款、家具款、修理费、固定资产',\n          type: 'projectMoney'\n        },\n        {\n          name: '学习用品费、日常用品费',\n          type: 'studyToolFee'\n        },\n        {\n          name: '额外费用',\n          type: 'dedThingFee'\n        },\n        {\n          name: '伙食费',\n          type: 'boardFee'\n        },\n        {\n          name: '活动费',\n          type: 'activeFee'\n        },\n        {\n          name: '疫情相关费',\n          type: 'epidemicFee'\n        }\n      ];\n      let params = {};\n      if (type === 'row') {\n        params.year = item.year;\n      } else {\n        params.year = this.secondTableData[0].year\n          ? this.secondTableData[0].year\n          : '';\n      }\n      params.studentBaseId = this.studentData.id;\n      otherFeeMonthList(params).then(res => {\n        this.thirdTableData = res.data;\n        this.thirdTableLoading = false;\n        this.thirdTableData.forEach(item => {\n          this.$set(item, 'identification', 1); // 添加一个类型值，0是月份表 1是其他表\n        });\n      });\n    },\n    /**\n     * 关闭第三层table\n     */\n    closeThirdTable() {\n      this.thirdTable = false;\n      this.thirdTableHeader = [];\n      this.thirdTableData = [];\n      this.selectionThirdTable = [];\n    },\n    /**\n     * 下载费用管理模板\n     */\n    download() {\n      downloadInputUserTemplate({\n        projectType: this.studentData.projectType\n      }).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', '费用管理导入模板.xls');\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    },\n    /**\n     * 导入成绩表格\n     */\n    importAchievement(file) {\n      if (this.selectionFirstTable.length > 1) {\n        this.$message.error('只能选择一项进行导入');\n        return false;\n      }\n      if (!this.selectionFirstTable[0].year) {\n        this.$message.error('请先填写年份');\n        this.isTableEdit = true;\n        return false;\n      }\n      let formData = new FormData();\n      formData.append('file', file.file);\n      formData.append('year', this.selectionFirstTable[0].year);\n      formData.append('projectType', this.studentData.projectType);\n      formData.append('studentBaseId', this.studentData.id);\n      feeIsCanImport(formData)\n        .then(res => {\n          feeImport(formData).then(res => {\n            this.isTableEdit = false;\n            this.$message.success(res.message);\n            this.cancel();\n          });\n        })\n        .catch(e => {\n          if (e.status === -303) {\n            this.$confirm('与列表有重复数据，是否确定覆盖?', '提示', {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              type: 'warning',\n              closeOnClickModal: false,\n              closeOnPressEscape: false\n            }).then(async () => {\n              feeImport(formData).then(res => {\n                this.isTableEdit = false;\n                this.$message.success(res.message);\n                this.cancel();\n              });\n            });\n            return false;\n          }\n        });\n    },\n    /**\n     * 导出成绩表格\n     */\n    exportAchievement() {\n      let params = {\n        studentBaseId: this.studentData.id,\n        projectType: this.studentData.projectType\n      };\n      let secondShow = JSON.parse(JSON.stringify(this.secondTable));\n      let thirdShow = JSON.parse(JSON.stringify(this.thirdTable));\n      if (this.selectionFirstTable.length > 0) {\n        params.feeType = 1;\n        let years = [];\n        this.selectionFirstTable.forEach(item => {\n          years.push(item.year);\n        });\n        params.yearList = years;\n      } else if (this.selectionSecondTable.length > 0) {\n        if (secondShow) {\n          if (this.firstTableClickData.isShowTable === 'showMonthTable') {\n            params.feeType = 3;\n            params.feeMonthDtos = this.selectionSecondTable;\n          } else {\n            params.feeType = 2;\n            let years = [];\n            this.selectionSecondTable.forEach(item => {\n              years.push(item.year);\n            });\n            params.yearList = years;\n          }\n        }\n      } else if (this.selectionThirdTable.length > 0) {\n        if (thirdShow) {\n          params.feeType = 4;\n          params.otherFeeDtos = this.selectionThirdTable;\n        }\n      }\n      console.log(params, 'export');\n      feeExport(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', '费用管理导出模板.xls');\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    },\n    /**\n     * 删除\n     */\n    deleteAchievement() {\n      let params = {\n        studentBaseId: this.studentData.id\n      };\n      // 第二个表格是否展示\n      let secondShow = JSON.parse(JSON.stringify(this.secondTable));\n      // 第三个表格是否展示\n      let thirdShow = JSON.parse(JSON.stringify(this.thirdTable));\n      if (this.selectionFirstTable.length > 0) {\n        for (let i = 0; i < this.selectionFirstTable.length; i++) {\n          // 第一个表格是否删除空的\n          if (\n            this.selectionFirstTable[i] &&\n            this.selectionFirstTable[i].year === ''\n          ) {\n            this.selectionFirstTable.splice(i, 1);\n            this.yearTableData.splice(0, 1);\n          }\n        }\n        params.feeType = 1;\n        let years = [];\n        this.selectionFirstTable.forEach(item => {\n          years.push(item.year);\n        });\n        if (years && years.length <= 0) {\n          this.$message.success('删除成功');\n          this.cancel();\n          return false;\n        }\n        params.yearList = years;\n      } else if (this.selectionSecondTable.length > 0) {\n        // 第二个表格删除的是年还是月份判断\n        if (secondShow) {\n          if (this.firstTableClickData.isShowTable === 'showMonthTable') {\n            params.feeType = 3;\n            let ids = [];\n            this.selectionSecondTable.forEach(item => {\n              ids.push(item.id);\n            });\n            params.feeMonthIDs = ids;\n          } else {\n            params.feeType = 2;\n            let years = [];\n            this.selectionSecondTable.forEach(item => {\n              years.push(item.year);\n            });\n            params.yearList = years;\n          }\n        }\n      } else if (this.selectionThirdTable.length > 0) {\n        // 第三个表格只有其他月份\n        if (thirdShow) {\n          params.feeType = 4;\n          // params.yearList = this.selectionThirdTable;\n          let ids = [];\n          this.selectionThirdTable.forEach(item => {\n            ids.push(item.id);\n          });\n          params.otherFeeIDs = ids;\n        }\n      }\n      deleteFeeManagement(params).then(async res => {\n        this.$message.success('删除成功');\n        if (this.selectionFirstTable.length > 0 && secondShow) {\n          // 如果选中删除第一个表格，并且第二个表格打开状态，而且是删除的年份，则关闭\n          // 判断是否打开的是年份表 年份表全删则下面表格隐藏 如果是其他表，则判断删除的哪一年在选择关闭\n          console.log(this.firstTableClickData);\n          if (this.firstTableClickData.isShowTable === 'showMonthTable') {\n            params.yearList.findIndex(\n              item => item === this.firstTableClickData.showTableData.year\n            ) !== -1\n              ? this.closeSecondTable()\n              : '';\n          } else {\n            if (params.yearList.length === this.yearTableData.length) {\n              this.closeSecondTable();\n            }\n          }\n        }\n        if (secondShow && this.selectionSecondTable.length) {\n          // 如果选中删除第二个表格，并且第二个表格打开状态而且全部删除则第二个第三个表格关闭\n          // 判断是否打开的是年份表 年份表全删则下面表格隐藏 如果是其他表，则判断删除的哪一年在选择关闭\n          if (this.firstTableClickData.isShowTable === 'showMonthTable') {\n            if (\n              this.selectionSecondTable.length === this.secondTableData.length\n            ) {\n              this.closeSecondTable();\n            }\n          } else {\n            if (\n              this.selectionSecondTable.length === this.secondTableData.length\n            ) {\n              this.closeSecondTable();\n            } else {\n              params.yearList.findIndex(\n                item => item === this.secondTableClickData.year\n              ) !== -1\n                ? this.closeThirdTable()\n                : '';\n            }\n          }\n        }\n        if (thirdShow) {\n          // 如果选中删除第三个表格，并且第三个表格打开状态而且全部删除则第三个表格关闭\n          if (this.selectionThirdTable.length === this.thirdTableData.length) {\n            this.closeThirdTable();\n          }\n        }\n        await this.cancel();\n      });\n    },\n    /**\n     * 新增\n     */\n    addYearTable() {\n      if (Array(this.yearTableData) && this.yearTableData.length > 0) {\n        for (let i = 0; i < this.yearTableData.length; i++) {\n          if (this.yearTableData[i] && this.yearTableData[i].year === '') {\n            this.$message.error('您还有一条空数据未编辑');\n            return false;\n          }\n        }\n      }\n      this.yearTableData.unshift({ year: '' });\n    },\n    /**\n     * 导入成绩表格\n     */\n    tableEdit() {\n      this.isTableEdit = true;\n    },\n    /**\n     * 保存成绩表格\n     */\n    preservation() {\n      this.isTableEdit = false;\n      let secondShow = JSON.parse(JSON.stringify(this.secondTable));\n      let thirdShow = JSON.parse(JSON.stringify(this.thirdTable));\n      let params = {};\n      if (secondShow) {\n        if (this.firstTableClickData.isShowTable === 'showMonthTable') {\n          params.feeMonths = this.secondTableData;\n        }\n      }\n      if (thirdShow) {\n        params.otherFees = this.thirdTableData;\n      }\n      console.log(params, 'params');\n      saveFeeManagement(params).then(res => {\n        this.$message.success('更新成功');\n        this.cancel();\n      });\n    },\n    /**\n     * 第一个表格多选项改变\n     */\n    handleSelectionFirstTableChange(val) {\n      this.selectionFirstTable = val;\n    },\n    /**\n     * 第一个表格多选项是否可选\n     */\n    selectAbleFirst(row, index) {\n      if (\n        this.selectionSecondTable.length > 0 ||\n        this.selectionThirdTable.length > 0\n      ) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    /**\n     * 第二个表格多选项改变\n     */\n    handleSelectionSecondChange(val) {\n      this.selectionSecondTable = val;\n    },\n    /**\n     * 第二个表格多选项是否可选\n     */\n    selectAbleSecond(row, index) {\n      if (\n        this.selectionFirstTable.length > 0 ||\n        this.selectionThirdTable.length > 0\n      ) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    /**\n     * 第三个表格多选项改变\n     */\n    handleSelectionThirdChange(val) {\n      this.selectionThirdTable = val;\n    },\n    /**\n     * 第三个表格多选项是否可选\n     */\n    selectAbleThird(row, index) {\n      if (\n        this.selectionFirstTable.length > 0 ||\n        this.selectionSecondTable.length > 0\n      ) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    /**\n     * 取消，会根据之前打开更新打开的所有表格\n     */\n    cancel() {\n      this.$refs.FirstTable.clearSelection(); //清除选中的数据\n      this.isTableEdit = false;\n      // 记录用户之前打开的页面\n      let secondShow = JSON.parse(JSON.stringify(this.secondTable));\n      let thirdShow = JSON.parse(JSON.stringify(this.thirdTable));\n      if (secondShow) {\n        this.$refs.secondTable.clearSelection(); //清除选中的数据\n        // 判断之前第二个table用户打开的是其他还是月份\n        if (this.firstTableClickData.isShowTable === 'showOtherTable') {\n          this.showOtherTable();\n        } else {\n          this.showMonthTable(this.firstTableClickData.showTableData);\n        }\n      }\n      if (thirdShow) {\n        this.$refs.thirdTable.clearSelection(); //清除选中的数据\n        this.thirdTable = thirdShow;\n        console.log(this.secondTableClickData);\n        let yearData = {\n          year: this.secondTableClickData.year\n        };\n        this.secondTableData =\n          Array.isArray(this.secondTableData) && this.secondTableData.length > 0\n            ? this.secondTableData\n            : [yearData];\n        this.showSecondTable(\n          this.secondTableClickData.item,\n          this.secondTableClickData.type\n        );\n      }\n      // this.closeSecondTable();\n      this.initData();\n    },\n    /**\n     * 返回\n     */\n    goBack() {\n      this.$router.push({ path: '/student/basic-info' });\n    },\n    // 监听输入类型只能为正整数和小数，第一位不能是.\n    proving(item, data, name) {\n      item = item\n        .replace(/[^\\d.]/g, '') // 清除“数字”和“.”以外的字符\n        .replace(/\\.{2,}/g, '.') // 只保留第一个. 清除多余的\n        .replace(/^\\./g, '') //保证第一个为数字而不是.\n        .replace('.', '$#$')\n        .replace(/\\./g, '')\n        .replace('$#$', '.')\n        .replace(/^(\\d+)\\.(\\d\\d).*$/, '$1.$2');\n      this.$set(data, name, item);\n    },\n    // 监听输入类型只能为正整数\n    provingNumber(item, data, name) {\n      item = item.replace(/[^\\d]/g, '');\n      this.$set(data, name, item);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.CostManagementBox {\n  min-height: 200px;\n  .BtnBox {\n    display: flex;\n    align-items: center;\n    .avatar-uploader {\n      margin: 0 10px;\n    }\n  }\n  .YearTable {\n    margin-top: 20px;\n    position: relative;\n    .linkColumn {\n      color: #409eff;\n      cursor: pointer;\n    }\n    /deep/.el-table th > .cell.linkColumn {\n      color: #409eff;\n      cursor: pointer;\n    }\n    .closed {\n      font-size: 30px;\n      position: absolute;\n      top: -15px;\n      right: -15px;\n      z-index: 2;\n      color: #f00;\n      cursor: pointer;\n    }\n  }\n  .tableBtn {\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}