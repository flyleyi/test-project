{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-secret/views/questDetail/index.vue?vue&type=style&index=0&id=1470ac0a&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-secret/views/questDetail/index.vue","mtime":1627979214339},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0IHVybCgnLi4vLi4vYXNzZXRzL2xlc3MvZ2xvYmFsL3ZhcmlhYmxlLmxlc3MnKTsKLmFuc3dlci1saXN0LWJveCB7CiAgbGVmdDogMDsKICBwYWRkaW5nOiAyMHB4OwogIG92ZXJmbG93LXk6IGF1dG87Cn0KLnRpcC10aXRsZSB7CiAgd2lkdGg6IGZpdC1jb250ZW50OwogIGhlaWdodDogMzBweDsKICBsaW5lLWhlaWdodDogMzBweDsKICBtYXJnaW4tdG9wOiAxMHB4OwogIHBhZGRpbmc6IDAgMTVweDsKICBiYWNrZ3JvdW5kOiByZ2JhKDE4NywgMjIyLCAyNTEsIDAuMyk7CiAgYm9yZGVyLXJhZGl1czogMTVweDsKICBjb2xvcjogcmdiYSgzOCwgMTUxLCAyNTUsIDEpOwp9Ci5tb3JlIHsKICBjb2xvcjogQG9yYW5nZUNvbG9yOwogIGN1cnNvcjogcG9pbnRlcjsKICBsaW5lLWhlaWdodDogMzBweDsKfQouYm90dG9tVGV4dCB7CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDEwMCU7CiAgY29sb3I6IEBtYWluQ29sb3I7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5udWxsLXRpcCB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxpbmUtaGVpZ2h0OiA2MHB4Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/school-secret/views/questDetail","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <logo></logo>\n    <div class=\"common-main answer-list-box\">\n      <search-nav\n        class=\"common-header\"\n        @quest=\"getQuestStatus\"\n        @questionInput=\"getParams\"\n        :isDetail=\"true\"\n        :placeholder=\"'请输入回答关键字'\"\n      ></search-nav>\n      <div class=\"tip-title\">{{ model.questionType }}</div>\n      <quest-item\n        @writeAnswer=\"getAnswerStatus\"\n        @refresh=\"onRefreshQuest\"\n        :model=\"model\"\n        :isSeeCount=\"false\"\n      ></quest-item>\n      <div v-if=\"data.length === 0\" class=\"null-tip\">\n        快来积极回答问题吧！\n      </div>\n      <div v-else>\n        <answer-item\n          v-for=\"(item, index) of data\"\n          :key=\"'answer' + index\"\n          :model=\"item\"\n          @refresh=\"onRefreshAnswer\"\n        ></answer-item>\n        <div class=\"more\" @click=\"showMore\">\n          <span v-if=\"current < pages\">加载更多</span>\n          <span v-else class=\"bottomText\">已经到底了哦</span>\n        </div>\n      </div>\n    </div>\n    <answer-dialog\n      ref=\"answerDialog\"\n      :model=\"model\"\n      @refresh=\"onRefreshAnswer\"\n    ></answer-dialog>\n    <quest-dialog ref=\"questDialog\"></quest-dialog>\n  </div>\n</template>\n\n<script>\nimport SearchNav from '../components/searchNav';\nimport QuestItem from '../components/questItem';\nimport AnswerDialog from '../components/answerDialog';\nimport QuestDialog from '../components/questDialog.vue';\nimport AnswerItem from './components/answerItem.vue';\nimport Logo from '../components/logo';\nimport { getQuesDetails, getAnswers } from '../../api/question';\nexport default {\n  name: 'QuestDetail',\n  components: {\n    SearchNav,\n    QuestItem,\n    AnswerDialog,\n    QuestDialog,\n    AnswerItem,\n    Logo\n  },\n  props: {},\n  data() {\n    return {\n      model: {}, // 问题详情\n      data: [], // 问题对应回答\n      params: {\n        // id: '',\n        // answer: '',\n        current: 1, // 当前页\n        size: 20 // 每页显示条数\n      },\n      current: 1, // 当前也吗\n      pages: 1 // 总页数\n    };\n  },\n  computed: {\n    // 问题id\n    id() {\n      return this.$route.query.id;\n    }\n  },\n  watch: {\n    id: {\n      handler() {\n        this.getQuesDetails();\n        this.getAnswers();\n      },\n      immediate: true\n    },\n    'params.answer'() {\n      this.data = [];\n      this.params.current = 1; // 当前页\n      this.getQuesDetails();\n      this.getAnswers();\n    },\n    'params.current'() {\n      this.getAnswers();\n    }\n  },\n  created() {},\n  mounted() {},\n  methods: {\n    /**\n     * 获取查询条件\n     */\n    getParams(data) {\n      this.params.answer = data;\n      this.params = Object.assign({}, this.params);\n    },\n    /**\n     * 获取问题详情\n     */\n    getQuesDetails() {\n      getQuesDetails({ id: this.id }).then(({ data }) => {\n        this.model = data[0];\n      });\n    },\n    /**\n     * 获取问题对应的所有回答\n     */\n    getAnswers() {\n      this.params.id = this.id;\n      getAnswers(this.params).then(({ data }) => {\n        this.data.push(...data.records);\n        this.current = data.current;\n        this.pages = data.pages;\n      });\n    },\n    /**\n     * 点击写回答显示的弹框\n     */\n    getAnswerStatus(val) {\n      val && this.$refs.answerDialog.show();\n    },\n    /**\n     * 点击提问后显示的弹框\n     */\n    getQuestStatus(val) {\n      val && this.$refs.questDialog.show();\n    },\n    /**\n     * 监听是否有新回答\n     */\n    onRefreshAnswer(data) {\n      if (data) {\n        this.data = [];\n        this.params.current = 1; // 当前页\n        this.getAnswers();\n      }\n    },\n    /**\n     * 监听删除回答\n     * 问题删除成功后刷新页面\n     */\n    onRefreshQuest(data) {\n      if (data) {\n        this.onBackList();\n      }\n    },\n    /**\n     * 返回问答列表\n     */\n    onBackList() {\n      this.$router.replace({\n        path: '/quest-list'\n      });\n    },\n    /**\n     * 加载更多\n     */\n    showMore() {\n      this.params.current++;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url('../../assets/less/global/variable.less');\n.answer-list-box {\n  left: 0;\n  padding: 20px;\n  overflow-y: auto;\n}\n.tip-title {\n  width: fit-content;\n  height: 30px;\n  line-height: 30px;\n  margin-top: 10px;\n  padding: 0 15px;\n  background: rgba(187, 222, 251, 0.3);\n  border-radius: 15px;\n  color: rgba(38, 151, 255, 1);\n}\n.more {\n  color: @orangeColor;\n  cursor: pointer;\n  line-height: 30px;\n}\n.bottomText {\n  display: block;\n  width: 100%;\n  color: @mainColor;\n  text-align: center;\n}\n.null-tip {\n  text-align: center;\n  line-height: 60px;\n}\n</style>\n"]}]}