{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/VerifySearchList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/VerifySearchList.vue","mtime":1646020538186},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAnQHZhbnQvdG91Y2gtZW11bGF0b3InOwppbXBvcnQgeyBnZXRXcml0ZU9mZkJ5VmlzaXRvckNvZGUgfSBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvYXBpL3ZlcmlmeSc7CmltcG9ydCB2ZXJpZnlTZWFyY2hDYXJkIGZyb20gJy4vY29tcG9uZW50cy9WZXJpZnlDYXJkLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IHZlcmlmeVNlYXJjaENhcmQgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJyOiBuZXcgQXJyYXkoNCksCiAgICAgIGNvbmZpcm1TZWFyY2g6IGZhbHNlLAogICAgICBzaG93OiBmYWxzZSwKICAgICAgdmFsdWU6ICcnLAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOagvOW8j+WMluafpeivouaVsOaNriDlr7nlupTlsZXnpLrnrb7liLDnrb7nprsKICAgIGZvcm1hdEl0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS52aXNpdG9yTGlzdFswXS52aXNpdG9yQ2FtZVR5cGUgPT0gMSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkb3JyOiBpdGVtLmRvb3IsCiAgICAgICAgICBndWVzdFRpbWVCZWdpbjogaXRlbS5ndWVzdFRpbWVCZWdpbiwKICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgbGVhdmVWaXNpdG9yTGlzdDogaXRlbS52aXNpdG9yTGlzdAogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAoaXRlbS52aXNpdG9yTGlzdFswXS52aXNpdG9yQ2FtZVR5cGUgPT0gMykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkb3JyOiBpdGVtLmRvb3IsCiAgICAgICAgICBndWVzdFRpbWVCZWdpbjogaXRlbS5ndWVzdFRpbWVCZWdpbiwKICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgb2ZmVmlzaXRvckxpc3Q6IGl0ZW0udmlzaXRvckxpc3QKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9CiAgICB9LAogICAgc2hvd0tleWJvYXJkKCkgewogICAgICAvLyB0aGlzLiRyZWZzLmlucHV0RmllbGQuZm9jdXMoKTsKICAgICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgIH0sCiAgICBjbGlja0NhcmQoaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy92ZXJpZnktZGV0YWlsJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGl0ZW0uaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuY29uZmlybVNlYXJjaCA9IGZhbHNlOwogICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSA0KSB7CiAgICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTsKICAgICAgICAgIC8vIHRoaXMuJHJlZnMuaW5wdXRGaWVsZC5ibHVyKCk7CiAgICAgICAgICBnZXRXcml0ZU9mZkJ5VmlzaXRvckNvZGUoeyB2aXNpdG9yQ29kZTogdGhpcy52YWx1ZSB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuY29uZmlybVNlYXJjaCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkRlbGV0ZSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuY29uZmlybVNlYXJjaCA9IGZhbHNlOwogICAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICB9KTsKICAgIH0sCiAgICBvbkJsdXIoKSB7CiAgICAgIHRoaXMuc2hvdyA9IGZhbHNlOwogICAgfSwKICAgIG9uU2VhcmNoQ2xvc2UoKSB7CiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICBnZXRXcml0ZU9mZkJ5VmlzaXRvckNvZGUoeyB2aXNpdG9yQ29kZTogdGhpcy52YWx1ZSB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2hvdyA9IHRydWU7CiAgfQp9Owo="},{"version":3,"sources":["VerifySearchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VerifySearchList.vue","sourceRoot":"src/pages/visitor-h5/views/verify-visitor","sourcesContent":["<template>\n  <div class=\"verify-search-wrapper\">\n    <div class=\"hint\">输入访客码查找访客立即核销</div>\n    <div>\n      <ul class=\"input-wrapper\" @click=\"showKeyboard\">\n        <li\n          :class=\"index == value.length ? 'active' : ''\"\n          v-for=\"(item, index) in arr\"\n          :key=\"index\"\n        >\n          {{ value[index] }}\n        </li>\n        <!--  <van-field\n          v-model=\"value\"\n          type=\"digit\"\n          class=\"digit-input\"\n          autofocus\n          @input=\"search\"\n          ref=\"inputField\"\n        /> -->\n      </ul>\n      <van-number-keyboard\n        v-model=\"value\"\n        :show=\"show\"\n        :maxlength=\"4\"\n        @blur=\"onBlur\"\n        @input=\"search\"\n        @delete=\"onDelete\"\n        safe-area-inset-bottom\n      />\n    </div>\n    <div v-if=\"confirmSearch && list.length == 0\" class=\"error-notice\">\n      访客码有误，请确认后再输入\n    </div>\n    <div class=\"list\">\n      <ul>\n        <li v-for=\"item in list\" :key=\"item.id\">\n          <verify-search-card\n            :item=\"formatItem(item)\"\n            @clickCard=\"clickCard(item)\"\n            @onSearchClose=\"onSearchClose\"\n          ></verify-search-card>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport '@vant/touch-emulator';\nimport { getWriteOffByVisitorCode } from '@/pages/visitor-h5/api/verify';\nimport verifySearchCard from './components/VerifyCard.vue';\nexport default {\n  components: { verifySearchCard },\n  data() {\n    return {\n      arr: new Array(4),\n      confirmSearch: false,\n      show: false,\n      value: '',\n      list: []\n    };\n  },\n  methods: {\n    // 格式化查询数据 对应展示签到签离\n    formatItem(item) {\n      if (item.visitorList[0].visitorCameType == 1) {\n        return {\n          dorr: item.door,\n          guestTimeBegin: item.guestTimeBegin,\n          id: item.id,\n          leaveVisitorList: item.visitorList\n        };\n      } else if (item.visitorList[0].visitorCameType == 3) {\n        return {\n          dorr: item.door,\n          guestTimeBegin: item.guestTimeBegin,\n          id: item.id,\n          offVisitorList: item.visitorList\n        };\n      } else {\n        return item;\n      }\n    },\n    showKeyboard() {\n      // this.$refs.inputField.focus();\n      this.show = true;\n    },\n    clickCard(item) {\n      this.$router.push({\n        path: '/verify-detail',\n        query: {\n          id: item.id\n        }\n      });\n    },\n    search() {\n      this.$nextTick(() => {\n        this.confirmSearch = false;\n        if (this.value.length == 4) {\n          this.show = false;\n          // this.$refs.inputField.blur();\n          getWriteOffByVisitorCode({ visitorCode: this.value }).then(res => {\n            this.confirmSearch = true;\n            this.list = res.data;\n          });\n        }\n      });\n    },\n    onDelete() {\n      this.$nextTick(() => {\n        this.confirmSearch = false;\n        this.list = [];\n      });\n    },\n    onBlur() {\n      this.show = false;\n    },\n    onSearchClose() {\n      this.list = [];\n      getWriteOffByVisitorCode({ visitorCode: this.value }).then(res => {\n        this.list = res.data;\n      });\n    }\n  },\n  created() {\n    this.show = true;\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.verify-search-wrapper {\n  padding: 15px;\n  .hint {\n    font-size: 12px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.45);\n    line-height: 20px;\n    margin-bottom: 7px;\n    margin-left: 20px;\n  }\n  .error-notice {\n    font-size: 12px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: #ff5756;\n    line-height: 20px;\n    margin-bottom: 7px;\n    margin-left: 20px;\n  }\n  .list {\n    margin-top: 23px;\n  }\n  .input-wrapper {\n    margin: 0 auto;\n    width: 311px;\n    height: 120px;\n    padding: 30px 20px;\n    box-sizing: border-box;\n    background: rgba(51, 136, 255, 0.1);\n    border-radius: 5px;\n    display: flex;\n    justify-content: space-between;\n    position: relative;\n    font-size: 36px;\n    li {\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      background: #ffffff;\n      border-radius: 5px;\n      border: 1px solid #979797;\n      text-align: center;\n      &.active {\n        border-color: #3388ff;\n      }\n    }\n    .digit-input {\n      position: absolute;\n      background: transparent;\n      opacity: 0;\n      width: 100%;\n      height: 100%;\n      top: 30px;\n      left: 20px;\n    }\n  }\n}\n</style>\n"]}]}