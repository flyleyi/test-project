{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/views/components/ExamManage/PaperManage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/views/components/ExamManage/PaperManage/index.vue","mtime":1645176309787},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnLi8uLi8uLi8uLi8uLi9hcGkvcGFwZXJNYW5hZ2UnOwpmdW5jdGlvbiBtZXJnZURlZmF1bHQoKSB7CiAgdmFyIGYgPSB7fSwKICAgIG0gPSBhcmd1bWVudHMubGVuZ3RoLAogICAgbyA9IGFyZ3VtZW50c1ttIC0gMV0sCiAgICBiID0gMCwKICAgIGssCiAgICBoLAogICAgZCwKICAgIGc7CiAgaWYgKHR5cGVvZiBvID09ICdib29sZWFuJykgewogICAgYisrOwogICAgaCA9IG87CiAgfQogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnRzWzBdKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgZCA9IHRydWU7CiAgICBnID0gYXJndW1lbnRzWzBdOwogICAgayA9IGFyZ3VtZW50c1sxXTsKICB9IGVsc2UgewogICAgayA9IGFyZ3VtZW50c1swXSB8fCB7fTsKICB9CiAgZm9yICh2YXIgYyA9IDA7IGMgPCBtIC0gYjsgYysrKSB7CiAgICB2YXIgYSA9IGFyZ3VtZW50c1tjXTsKICAgIGZvciAodmFyIGUgaW4gZCA/IGcgOiBrKSB7CiAgICAgIHZhciBuID0gZCA/IGdbZV0gOiBlOwogICAgICBpZiAoYSAmJiBhW25dICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBoID8gKGZbbl0gPSBhW25dKSA6IChrW25dID0gYVtuXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaCAmJiBjID09IDAgJiYgKGZbbl0gPSBrW25dKTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gaCA/IGYgOiBrOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGFwZXJNYW5hZ2UnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBkaWFsb2c6IHsKICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICBpc2VkaXQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIG1hcmtTdWJqZWN0RGlhbG9nOiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UKICAgICAgfSwKICAgICAgdGlwRGlhbG9nOiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UKICAgICAgfSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBwYXBlck5hbWU6ICcnLAogICAgICAgIGV4YW1JZDogJycsCiAgICAgICAgc3ViamVjdElkOiAnJywKICAgICAgICBzdWJqZWN0TmFtZTogJycsIC8v56eR55uu5Yir5ZCNCiAgICAgICAgdG90YWxTY29yZTogbnVsbAogICAgICB9LAogICAgICBtYXJrRm9ybTogewogICAgICAgIG1hcmtUeXBlOiBudWxsLAogICAgICAgIG51bTogbnVsbCwKICAgICAgICBzdGFnZUlkOiAnJywKICAgICAgICBzdWJqZWN0SWQ6ICcnCiAgICAgIH0sCiAgICAgIHN0YWdlTGlzdDogW10sIC8v5a2m5q61bGlzdAogICAgICBzdGFnZVNlbGVjdERpc2FibGVkOiBmYWxzZSwgLy/lrabmrrXmmK/lkKbnpoHnlKgKICAgICAgY3VycmVudE1hcmtSb3c6IHt9LCAvL+aJk+agh3JvdwogICAgICBydWxlczogewogICAgICAgIHN1YmplY3RJZDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnp5Hnm64nCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwYXBlck5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgbWVzc2FnZTogJ+ivt+Whq+WGmeivleWNt+WQjeensCcgfSwKICAgICAgICAgIHsgbWF4OiAzMCwgdHJpZ2dlcjogJycsIG1lc3NhZ2U6ICfmnIDlpKfplb/luqYzMOS4quWtl+espicgfQogICAgICAgIF0sCiAgICAgICAgc3ViamVjdE5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgbWVzc2FnZTogJ+ivt+Whq+WGmeenkeebruWIq+WQjScgfQogICAgICAgIF0sCiAgICAgICAgdG90YWxTY29yZTogW3sgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgbWVzc2FnZTogJ+ivt+Whq+WGmea7oeWIhicgfV0KICAgICAgfSwKICAgICAgbWFya1J1bGVzOiB7CiAgICAgICAgbWFya1R5cGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdjaGFuZ2UnLCBtZXNzYWdlOiAn6K+36YCJ5oup5omT5qCH5qih5byPJyB9CiAgICAgICAgXSwKICAgICAgICBudW06IFt7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICfor7fovpPlhaXpopjnm67mlbDph48nIH1dLAogICAgICAgIHN0YWdlSWQ6IFt7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnY2hhbmdlJywgbWVzc2FnZTogJ+ivt+mAieaLqeWtpuautScgfV0KICAgICAgfSwKICAgICAgc3ViamVjdExpc3Q6IFtdLAogICAgICBjb25maXJtTG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICByYWRpb0FycjogWwogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfpgInmi6nmqKHlvI8nLAogICAgICAgICAgbGFiZWw6IDEKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICflvZXlhaXmqKHlvI8nLAogICAgICAgICAgbGFiZWw6IDAKICAgICAgICB9CiAgICAgIF0sCiAgICAgIGVycm9yQXJyOiBbXSwKICAgICAgdGlwVGFibGU6IFtdLCAvL+aPkOekuuaVsOaNruWIl+ihqAogICAgICBlcnJvclRpcFJvdzoge30sIC8v5o+Q56S65pWZ5Yqh57O757uf54+t57qn5LiN57uf5LiA55qE6KGMCiAgICAgIGNoYW5nZU5vc2F2ZTogZmFsc2UsCiAgICAgIGlzRGVzdHJveTogZmFsc2UsCiAgICAgIHQ6IG51bGwgLy/lrprml7blmagKICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCgogIGNvbXB1dGVkOiB7CiAgICAvLyDmmK/lkKbmmL7npLrmj5DkuqTmiJDnu6nmjInpkq4KICAgIGlzU2hvdygpIHsKICAgICAgbGV0IHRhYmxlRGF0YU51bGwgPSB0aGlzLnRhYmxlRGF0YS5maWx0ZXIoCiAgICAgICAgaXRlbSA9PgogICAgICAgICAgaXRlbS5wYXBlclN0YXR1cyA9PT0gMCB8fAogICAgICAgICAgaXRlbS5wYXBlclN0YXR1cyA9PT0gMSB8fAogICAgICAgICAgaXRlbS5wYXBlclN0YXR1cyA9PT0gMgogICAgICApOwogICAgICBpZiAodGFibGVEYXRhTnVsbC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRTdWJqZWN0TGlzdCgpOwogICAgdGhpcy5nZXRQYXBlcigpOwogICAgdGhpcy50ID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICB0aGlzLmdldFBhcGVyKCk7CiAgICB9LCAyMDAwKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgcmV0dXJuIGNvbmZpcm0oJ+ehruWumumAgOWHuuWQlycpOwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIl+ihqOaVsOaNrgogICAgZ2V0UGFwZXIoKSB7CiAgICAgIGFwaS5nZXRQYXBlcih0aGlzLiRyb3V0ZS5xdWVyeS5pZCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAvLyDliJ3lp4vljJbmlbDmja4KICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBpdGVtLmJ0bkxvYWRpbmcgPSBmYWxzZTsgLy/lr7zlh7psb2FkaW5nCiAgICAgICAgICBpdGVtLmltcG9ydExvYWRpbmcgPSBmYWxzZTsgLy/lr7zlhaVsb2FkaW5nCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGl0ZW0uaW1wb3J0UHJvY2Vzc1Jlc3VsdCAmJgogICAgICAgICAgICBpdGVtLmltcG9ydFByb2Nlc3NSZXN1bHQucHJvZ3Jlc3NSYXRlIDwgMAogICAgICAgICAgKSB7CiAgICAgICAgICAgIGl0ZW0ub3RoZXJQZW9wbGVJbXBvcnRpbmcgPSB0cnVlOyAvL+WFtuS7luS6uuWvvOWFpeS4rQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXRlbS5vdGhlclBlb3BsZUltcG9ydGluZyA9IGZhbHNlOyAvL+WFtuS7luS6uuWvvOWFpeS4rQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YTsKCiAgICAgICAgLy8g5rKh5pyJ5Zyo5LiK5Lyg55qEIOWBnOatouWumuaXtuWZqAogICAgICAgIGxldCB0YWJsZURhdGFOdWxsID0gdGhpcy50YWJsZURhdGEuZmlsdGVyKAogICAgICAgICAgaXRlbSA9PiBpdGVtLmltcG9ydFByb2Nlc3NSZXN1bHQgIT09IG51bGwKICAgICAgICApOwogICAgICAgIGlmICh0YWJsZURhdGFOdWxsLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy5jaGFuZ2VOb3NhdmUgPSBmYWxzZTsKICAgICAgICAgIC8vIHRoaXMuY2xlYXJJbnRlcnZhbEZuKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIOacieato+WcqOS4iuS8oOeahAogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmNoYW5nZU5vc2F2ZSA9IHRydWU7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgaXRlbS5pbXBvcnRQcm9jZXNzUmVzdWx0ICYmCiAgICAgICAgICAgICAgaXRlbS5pbXBvcnRQcm9jZXNzUmVzdWx0LnByb2dyZXNzUmF0ZSA+IDAKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgLy8g5LmL5YmN5piv5ZCm5a+85YWl5LqG5q2k5p2hcm93CiAgICAgICAgICAgICAgbGV0IHJvd0luZGV4ID0gdGhpcy5lcnJvckFyci5maW5kSW5kZXgoZSA9PiBpdGVtLmlkID09PSBlLmlkKTsKICAgICAgICAgICAgICAvLyDmnInplJnor6/kv6Hmga8KICAgICAgICAgICAgICBpZiAoaXRlbS5pbXBvcnRQcm9jZXNzUmVzdWx0Lmhhc0Vycm9yKSB7CiAgICAgICAgICAgICAgICBpdGVtLmltcG9ydExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgLy8g6ZSZ6K+v5pWw5o2u5aSE55CGCiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yQXJyKAogICAgICAgICAgICAgICAgICByb3dJbmRleCwKICAgICAgICAgICAgICAgICAgaXRlbSwKICAgICAgICAgICAgICAgICAgaXRlbS5pbXBvcnRQcm9jZXNzUmVzdWx0LmNoZWNrUmVzdWx0CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgLy8gdGhpcy5jbGVhckludGVydmFsRm4oKTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuZ2V0UGFwZXIoKTsKICAgICAgICAgICAgICAgIGl0ZW0uaW1wb3J0UHJvY2Vzc1Jlc3VsdCA9IG51bGw7CiAgICAgICAgICAgICAgICBpdGVtLmltcG9ydExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIOa7muWKqOWIsOmhtemdouW6lemDqOmUmeivr+aPkOekugogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsVG9wID0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWydhbGVydFJlZicgKyBpdGVtLmlkXVswXS4kZWwub2Zmc2V0VG9wIC0gMjA7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuY29udGFpbmVyUmVmLnNjcm9sbFRvKDAsIHNjcm9sbFRvcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8g5a+85YWl5oiQ5YqfCiAgICAgICAgICAgICAgaWYgKGl0ZW0uaW1wb3J0UHJvY2Vzc1Jlc3VsdC5wcm9ncmVzc1JhdGUgPT09IDEwMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKAogICAgICAgICAgICAgICAgICBgJHtpdGVtLnN1YmplY3ROYW1lfS0ke2l0ZW0ucGFwZXJOYW1lfSDlr7zlhaXmiJDlip9gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4ID49IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckFyci5zcGxpY2Uocm93SW5kZXgsIDEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyDmlbDmja7kuI3ljLnphY0t5by556qXCiAgICAgICAgICAgICAgaWYgKGl0ZW0uaW1wb3J0UHJvY2Vzc1Jlc3VsdC5jbGFzc0NoZWNrTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRpcERpYWxvZy52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudGlwVGFibGUgPSBpdGVtLmltcG9ydFByb2Nlc3NSZXN1bHQuY2xhc3NDaGVja0xpc3Q7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yVGlwUm93ID0gaXRlbTsKICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbEZuKCk7CgogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluaMiemSruaYvuekuuaWh+WtlwogICAgZ2V0QnV0dG9uVGV4dChyb3cpIHsKICAgICAgaWYgKHJvdy5wYXBlclN0YXR1cyA9PT0gMSAmJiByb3cuaW1wb3J0UHJvY2Vzc1Jlc3VsdCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAn5a+85YWl5oiQ57upJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocm93LnBhcGVyU3RhdHVzID09PSAyICYmIHJvdy5pbXBvcnRQcm9jZXNzUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gJ+mHjeaWsOWvvOWFpSc7CiAgICAgICAgfQogICAgICAgIGlmIChyb3cuaW1wb3J0UHJvY2Vzc1Jlc3VsdC5wcm9ncmVzc1JhdGUgPiAwKSB7CiAgICAgICAgICByZXR1cm4gYOaVsOaNruajgOafpeS4rSR7cm93LmltcG9ydFByb2Nlc3NSZXN1bHQucHJvZ3Jlc3NSYXRlfSVgOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJ+aIkOe7qeWvvOWFpeS4rSc7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5qC55o2u5a2m5q615p+l6K+i56eR55uu5YiX6KGoCiAgICBnZXRTdWJqZWN0TGlzdCgpIHsKICAgICAgYXBpLmdldFN1YmplY3RMaXN0KCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLnN1YmplY3RMaXN0ID0gZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5paw5aKeCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMuZGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZy5pc2VkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5ydWxlRm9ybSA9IHRoaXMuJG9wdGlvbnMuZGF0YSgpLnJ1bGVGb3JtOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5jbGVhckRpYWxvZ0Zvcm0oKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g57yW6L6RCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmRpYWxvZy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2cuaXNlZGl0ID0gdHJ1ZTsKICAgICAgbWVyZ2VEZWZhdWx0KHRoaXMucnVsZUZvcm0sIHJvdyk7CiAgICAgIHRoaXMucnVsZUZvcm0uaWQgPSByb3cuaWQ7CiAgICB9LAogICAgY2hhbmdlU3ViamVjdCh2YWwpIHsKICAgICAgbGV0IHN1YmplY3RJdGVtID0gdGhpcy5zdWJqZWN0TGlzdC5maW5kKAogICAgICAgIGl0ZW0gPT4gaXRlbS5zdWJqZWN0SWQgPT0gdGhpcy5ydWxlRm9ybS5zdWJqZWN0SWQKICAgICAgKTsKICAgICAgdGhpcy5ydWxlRm9ybS5zdWJqZWN0TmFtZSA9IHN1YmplY3RJdGVtLnN1YmplY3ROYW1lOwogICAgfSwKICAgIC8vIOehruiupAogICAgc3VyZURpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHJldHVybjsKICAgICAgICB0aGlzLnJ1bGVGb3JtLmV4YW1JZCA9IE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeS5pZCk7CiAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWU7CiAgICAgICAgbGV0IHNlbmREYXRhID0gewogICAgICAgICAgLi4udGhpcy5ydWxlRm9ybQogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMuZGlhbG9nLmlzZWRpdCkgewogICAgICAgICAgc2VuZERhdGEuaWQgPSBOdW1iZXIodGhpcy5ydWxlRm9ybS5pZCk7CiAgICAgICAgfQogICAgICAgIGxldCBzdWJqZWN0SXRlbSA9IHRoaXMuc3ViamVjdExpc3QuZmluZCgKICAgICAgICAgIGl0ZW0gPT4gaXRlbS5zdWJqZWN0SWQgPT0gdGhpcy5ydWxlRm9ybS5zdWJqZWN0SWQKICAgICAgICApOwogICAgICAgIHNlbmREYXRhLnN1YmplY3ROYW1lT3JpZ2luYWwgPSBzdWJqZWN0SXRlbS5zdWJqZWN0TmFtZTsKICAgICAgICBhcGkKICAgICAgICAgIC5zYXZlUGFwZXIoc2VuZERhdGEpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+d5a2Y5oiQ5YqfIScKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2cudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmdldFBhcGVyKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yig6ZmkCiAgICBkZWwoaWQpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5Yig6Zmk5ZCO5LiN5Y+v5oGi5aSN77yM56Gu5a6a5Yig6Zmk77yfJywgJ+WIoOmZpOehruiupCcsIHsKICAgICAgICBjdXN0b21DbGFzczogJ2JveC1kYW5nZXInLAogICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBhcGkKICAgICAgICAgICAgLnJlbW92ZVBhcGVyKGlkKQogICAgICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuZ2V0UGFwZXIoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOmimOebruaJk+aghwogICAgaGFuZGxlTWFya1N1YmplY3Qocm93KSB7CiAgICAgIHRoaXMuY3VycmVudE1hcmtSb3cgPSByb3c7CiAgICAgIC8vIOWIpOaWreaYr+WQpuW9leWFpei/hwogICAgICBsZXQgaGFzSW5wdXRWYWwgPSBmYWxzZTsKICAgICAgbGV0IHN0YWdlSWQgPSAnJzsKICAgICAgbGV0IGxvY2FsQXJyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxBcnInKSk7CiAgICAgIGNvbnNvbGUubG9nKGxvY2FsQXJyLCAn5omT5qCH5YmNJyk7CiAgICAgIGxvY2FsQXJyICYmCiAgICAgICAgbG9jYWxBcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0ucGFwZXJJZCwgcm93LmlkLCAnaWTmnInkuoYnKTsKICAgICAgICAgIGlmIChpdGVtLnBhcGVySWQgPT0gcm93LmlkKSB7CiAgICAgICAgICAgIGhhc0lucHV0VmFsID0gaXRlbS5oYXNJbnB1dFZhbDsKICAgICAgICAgICAgc3RhZ2VJZCA9IGl0ZW0uc3RhZ2VJZDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgY29uc29sZS5sb2cocm93LnBhcGVyU3RhdHVzID09PSAwLCBoYXNJbnB1dFZhbCwgJ2hhc0lucHV0VmFsJyk7CiAgICAgIC8vIOacquW9leWFpQogICAgICBpZiAocm93LnBhcGVyU3RhdHVzID09PSAwICYmICFoYXNJbnB1dFZhbCkgewogICAgICAgIHRoaXMubWFya1N1YmplY3REaWFsb2cudmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5tYXJrRm9ybS5zdWJqZWN0SWQgPSB0aGlzLmN1cnJlbnRNYXJrUm93LnN1YmplY3RJZDsKICAgICAgICAvLyDlrabmrrXkuIvmi4nliJfooagKICAgICAgICB0aGlzLmdldFN0YWdlTGlzdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOW9leWFpei/hwogICAgICAgIGxldCByb3V0ZU5hbWUgPSAnTWFya1N1YmplY3RJbnB1dE1vZGUnOwogICAgICAgIGlmICh0aGlzLmN1cnJlbnRNYXJrUm93Lm1hcmtUeXBlID09PSAxKSB7CiAgICAgICAgICByb3V0ZU5hbWUgPSAnTWFya1N1YmplY3RDaG9vc2VNb2RlJzsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogcm91dGVOYW1lLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgbWFya1R5cGU6IHRoaXMuY3VycmVudE1hcmtSb3cubWFya1R5cGUsCiAgICAgICAgICAgIG51bTogMCwKICAgICAgICAgICAgdG90YWxTY29yZTogdGhpcy5jdXJyZW50TWFya1Jvdy50b3RhbFNjb3JlLAogICAgICAgICAgICBwYXBlcklkOiB0aGlzLmN1cnJlbnRNYXJrUm93LmlkLAogICAgICAgICAgICBzdWJqZWN0SWQ6IHRoaXMuY3VycmVudE1hcmtSb3cuc3ViamVjdElkLAogICAgICAgICAgICBzdWJqZWN0TmFtZTogdGhpcy5jdXJyZW50TWFya1Jvdy5zdWJqZWN0TmFtZSwKICAgICAgICAgICAgZ3JhZGVOYW1lTGlzdDogdGhpcy4kcm91dGUucXVlcnkuZ3JhZGVOYW1lTGlzdCwKICAgICAgICAgICAgZXhhbU5hbWU6IHRoaXMuJHJvdXRlLnF1ZXJ5LmV4YW1OYW1lLAogICAgICAgICAgICBwYXBlck5hbWU6IHRoaXMuY3VycmVudE1hcmtSb3cucGFwZXJOYW1lLAogICAgICAgICAgICBzdGFnZUlkOiB0aGlzLmN1cnJlbnRNYXJrUm93LnN0YWdlSWQgfHwgc3RhZ2VJZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g6aKY55uu5omT5qCH5by556qXIOehruiupAogICAgbGlua1RvTWFyaygpIHsKICAgICAgdGhpcy4kcmVmc1snZWxNYXJrRm9ybSddLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm47CiAgICAgICAgdGhpcy5tYXJrU3ViamVjdERpYWxvZy52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgbGV0IHNlbmREYXRhID0gewogICAgICAgICAgaWQ6ICcnLAogICAgICAgICAgcGFwZXJOYW1lOiAnJywKICAgICAgICAgIGV4YW1JZDogJycsCiAgICAgICAgICBzdWJqZWN0SWQ6ICcnLAogICAgICAgICAgdG90YWxTY29yZTogMTAwCiAgICAgICAgfTsKICAgICAgICBtZXJnZURlZmF1bHQoc2VuZERhdGEsIHRoaXMuY3VycmVudE1hcmtSb3cpOwogICAgICAgIHNlbmREYXRhLm1hcmtUeXBlID0gdGhpcy5tYXJrRm9ybS5tYXJrVHlwZTsKICAgICAgICAvLyDlsIbmiZPmoIfmqKHlvI/kvKDlhaXlkI7lj7AKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5zYXZlUGFwZXIoc2VuZERhdGEpOwogICAgICAgIGxldCByb3V0ZU5hbWUgPSAnTWFya1N1YmplY3RJbnB1dE1vZGUnOwogICAgICAgIGlmICh0aGlzLm1hcmtGb3JtLm1hcmtUeXBlID09PSAxKSB7CiAgICAgICAgICByb3V0ZU5hbWUgPSAnTWFya1N1YmplY3RDaG9vc2VNb2RlJzsKICAgICAgICB9CiAgICAgICAgbGV0IHF1ZXJ5ID0gewogICAgICAgICAgLi4udGhpcy5tYXJrRm9ybSwKICAgICAgICAgIHRvdGFsU2NvcmU6IHRoaXMuY3VycmVudE1hcmtSb3cudG90YWxTY29yZSwKICAgICAgICAgIHBhcGVySWQ6IHRoaXMuY3VycmVudE1hcmtSb3cuaWQsCiAgICAgICAgICBzdWJqZWN0TmFtZTogdGhpcy5jdXJyZW50TWFya1Jvdy5zdWJqZWN0TmFtZSwKICAgICAgICAgIGdyYWRlTmFtZUxpc3Q6IHRoaXMuJHJvdXRlLnF1ZXJ5LmdyYWRlTmFtZUxpc3QsCiAgICAgICAgICBleGFtTmFtZTogdGhpcy4kcm91dGUucXVlcnkuZXhhbU5hbWUsCiAgICAgICAgICBwYXBlck5hbWU6IHRoaXMuY3VycmVudE1hcmtSb3cucGFwZXJOYW1lLAogICAgICAgICAgaGFzSW5wdXRWYWw6IGZhbHNlCiAgICAgICAgfTsKICAgICAgICBsZXQgbG9jYWxBcnIgPSBbXTsKICAgICAgICBsZXQgaGFzUm93ID0gZmFsc2U7CiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbEFycicpKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5pyJ5q2k5p2hcm93Jyk7CiAgICAgICAgICBsb2NhbEFyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsQXJyJykpOwogICAgICAgICAgbG9jYWxBcnIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0ucGFwZXJJZCA9PSB0aGlzLmN1cnJlbnRNYXJrUm93LmlkKSB7CiAgICAgICAgICAgICAgaGFzUm93ID0gdHJ1ZTsKICAgICAgICAgICAgICBsb2NhbEFyci5zcGxpY2UoaW5kZXgsIDEsIHsgLi4ucXVlcnksIHRhYmxlRGF0YTogW10gfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCFoYXNSb3cpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+ayoeacieatpOadoXJvdycpOwogICAgICAgICAgICBsb2NhbEFyci5wdXNoKHsKICAgICAgICAgICAgICAuLi5xdWVyeSwKICAgICAgICAgICAgICB0YWJsZURhdGE6IFtdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5rKh5pyJbG9jYWxBcnInKTsKICAgICAgICAgIGxvY2FsQXJyLnB1c2goewogICAgICAgICAgICAuLi5xdWVyeSwKICAgICAgICAgICAgdGFibGVEYXRhOiBbXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbEFycicsIEpTT04uc3RyaW5naWZ5KGxvY2FsQXJyKSk7CiAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbEFycicpKSwKICAgICAgICAgICfor5XljbfpobXpnaJsb2NhbEFycicKICAgICAgICApOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6IHJvdXRlTmFtZSwKICAgICAgICAgIHF1ZXJ5CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOafpeeci+mimOebrgogICAgaGFuZGxlVmlld1N1YmplY3Qocm93LCByb3V0ZU5hbWUpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6IHJvdXRlTmFtZSwKICAgICAgICBxdWVyeTogewogICAgICAgICAgcGFwZXJJZDogcm93LmlkLAogICAgICAgICAgbWFya1R5cGU6IHJvdy5tYXJrVHlwZSwKICAgICAgICAgIGdyYWRlTmFtZUxpc3Q6IHRoaXMuJHJvdXRlLnF1ZXJ5LmdyYWRlTmFtZUxpc3QsCiAgICAgICAgICBleGFtTmFtZTogdGhpcy4kcm91dGUucXVlcnkuZXhhbU5hbWUsCiAgICAgICAgICBwYXBlck5hbWU6IHRoaXMuY3VycmVudE1hcmtSb3cucGFwZXJOYW1lCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmuIXnqbrooajljZUKICAgIGNsZWFyRGlhbG9nRm9ybSgpIHsKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgfSwKICAgIGNsZWFyTWFya0RpYWxvZ0Zvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2VsTWFya0Zvcm0nXS5jbGVhclZhbGlkYXRlKCk7CiAgICB9LAogICAgLy8g6K6+5a6a5pWw5a2X6L6T5YWl6IyD5Zu0CiAgICBudW1iZXJDaGFuZ2UodHlwZSwgdmFsLCBtYXhOdW0pIHsKICAgICAgdmFsID0gdmFsLnJlcGxhY2UoL1teMC05XS9nLCAnJyk7CiAgICAgIGlmICh2YWwgPT09ICcnKSB7CiAgICAgICAgdHlwZSA9PSAncGFwZXInCiAgICAgICAgICA/ICh0aGlzLnJ1bGVGb3JtLnRvdGFsU2NvcmUgPSAnJykKICAgICAgICAgIDogKHRoaXMubWFya0Zvcm0ubnVtID0gJycpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IG51bSA9IE1hdGgubWluKE51bWJlcih2YWwpLCBtYXhOdW0pOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSAncGFwZXInOgogICAgICAgICAgICBpZiAobnVtID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS50b3RhbFNjb3JlID0gbWF4TnVtOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0udG90YWxTY29yZSA9IG51bTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ21hcmsnOgogICAgICAgICAgICBpZiAobnVtID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5tYXJrRm9ybS5udW0gPSBtYXhOdW07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5tYXJrRm9ybS5udW0gPSBudW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvLyBkZWZhdWx0OgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+85Ye6ZXhjZWwKICAgIGV4cG9ydEV4Y2VsKHJvdykgewogICAgICByb3cuYnRuTG9hZGluZyA9IHRydWU7CiAgICAgIGFwaS5nZXRFeGNlbChyb3cuaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgIGlmIChyZXMudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7CiAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KHJlcywgJ3V0Zi04Jyk7CiAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGxldCBtc2cgPSBKU09OLnBhcnNlKHJlYWRlci5yZXN1bHQpLm1zZyB8fCAn5LiL6L295aSx6LSlJzsKICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uud2FybmluZyhtc2cpOwogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtyZXNdLCB7CiAgICAgICAgICB0eXBlOiAocmVzLnR5cGUgJiYgcmVzLnR5cGUpIHx8ICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnCiAgICAgICAgfSk7CiAgICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICdkb3dubG9hZCcsCiAgICAgICAgICBg5oiQ57up5a+85YWl5qih5p2/LSR7cm93LnN1YmplY3ROYW1lfS0ke3Jvdy5wYXBlck5hbWV9YAogICAgICAgICk7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIGxpbmsgPSBudWxsOwogICAgICAgIHJvdy5idG5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIvovb3miJDlip8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+85YWl5oyJ6ZKu54K55Ye7CiAgICBmbihldmVudCwgcm93KSB7CiAgICAgIGlmIChyb3cub3RoZXJQZW9wbGVJbXBvcnRpbmcpIHJldHVybjsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdoaWRkZW5JbnB1dCcpWzBdLmNsaWNrKCk7CiAgICB9LAogICAgLy8g5a+85YWlZXhjZWwKICAgIGltcG9ydEV4Y2VsKGV2ZW50LCByb3cpIHsKICAgICAgdGhpcy5jaGFuZ2VOb3NhdmUgPSB0cnVlOwoKICAgICAgbGV0IHsgZmlsZXMgfSA9IGV2ZW50LnRhcmdldDsKICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICByb3cuaW1wb3J0TG9hZGluZyA9IHRydWU7CiAgICAgIGxldCBmaWxlID0gZmlsZXNbMF07CiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTsKICAgICAgLy8g5LmL5YmN5piv5ZCm5a+85YWl5LqG5q2k5p2hcm93CiAgICAgIGxldCByb3dJbmRleCA9IHRoaXMuZXJyb3JBcnIuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gcm93LmlkKTsKICAgICAgLy8g5a+85YWl5ZCO5Y+wCiAgICAgIGFwaQogICAgICAgIC5pbXBvcnRFeGNlbChyb3cuaWQsIGZvcm1EYXRhKQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7CiAgICAgICAgICAvLyDmnInplJnor6/mj5DnpLoKICAgICAgICAgIGlmIChkYXRhLmhhc0Vycm9yKSB7CiAgICAgICAgICAgIC8vIOmUmeivr+aVsOaNruWkhOeQhgogICAgICAgICAgICByb3cuaW1wb3J0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yQXJyKHJvd0luZGV4LCByb3csIGRhdGEuY2hlY2tSZXN1bHQpOwogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHNjcm9sbFRvcCA9CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWydhbGVydFJlZicgKyByb3cuaWRdWzBdLiRlbC5vZmZzZXRUb3AgLSAyMDsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNvbnRhaW5lclJlZi5zY3JvbGxUbygwLCBzY3JvbGxUb3ApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOaXoOmUmeivr+aPkOekuiDlr7zlhaXov4fmraTmnaHnmoTplJnor6/kv6Hmga/liKDpmaQKICAgICAgICAgICAgaWYgKHJvd0luZGV4ID49IDApIHsKICAgICAgICAgICAgICB0aGlzLmVycm9yQXJyLnNwbGljZShyb3dJbmRleCwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5a+85YWl6L+b5bqmCiAgICAgICAgICAgIHJvdy5pbXBvcnRQcm9jZXNzUmVzdWx0ID0ge307CiAgICAgICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgICAgICByb3cuaW1wb3J0UHJvY2Vzc1Jlc3VsdCwKICAgICAgICAgICAgICAncHJvZ3Jlc3NSYXRlJywKICAgICAgICAgICAgICBkYXRhLnByb2dyZXNzUmF0ZQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyDliLfmlrDliJfooagKICAgICAgICAgICAgdGhpcy5jbGVhckludGVydmFsRm4oKTsKICAgICAgICAgICAgdGhpcy50ID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLmlzRGVzdHJveSkgewogICAgICAgICAgICAgICAgdGhpcy5jbGVhckludGVydmFsRm4oKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5nZXRQYXBlcigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnOwogICAgICAgICAgcm93LmltcG9ydExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbPpl63plJnor6/mlbDmja7mj5DnpLoKICAgIGNsb3NlRXJyb3IoaW5kZXgpIHsKICAgICAgdGhpcy5lcnJvckFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOa4hemZpOWumuaXtuWZqAogICAgY2xlYXJJbnRlcnZhbEZuKCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMudCk7CiAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGhpcy50Mik7CiAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGhpcy50Myk7CiAgICAgIC8vIGNsZWFySW50ZXJ2YWwodGhpcy50NCk7CiAgICB9LAogICAgLy8g5aSE55CG6ZSZ6K+v5pWw5o2uCiAgICBoYW5kbGVFcnJvckFycihyb3dJbmRleCwgcm93LCBkZXNjcmlwdGlvbikgewogICAgICAvLyDmsqHmnInlr7zlhaXov4fmraTmnaFyb3cKICAgICAgaWYgKHJvd0luZGV4IDwgMCkgewogICAgICAgIHRoaXMuZXJyb3JBcnIucHVzaCh7CiAgICAgICAgICBpZDogcm93LmlkLAogICAgICAgICAgdGl0bGU6IGAke3Jvdy5zdWJqZWN0TmFtZX0tJHtyb3cucGFwZXJOYW1lfSDmiJDnu6nlr7zlhaXmnInor69gLAogICAgICAgICAgZGVzY3JpcHRpb24KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlr7zlhaXov4fmraTmnaFyb3cg5pu/5o2i6ZSZ6K+v5L+h5oGvCiAgICAgICAgdGhpcy5lcnJvckFyci5zcGxpY2Uocm93SW5kZXgsIDEsIHsKICAgICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgICB0aXRsZTogYCR7cm93LnN1YmplY3ROYW1lfS0ke3Jvdy5wYXBlck5hbWV9IOaIkOe7qeWvvOWFpeacieivr2AsCiAgICAgICAgICBkZXNjcmlwdGlvbgogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu6K6k5a+85YWl5oiQ57upCiAgICBzdXJlSW1wb3J0RXhjZWwodHlwZSkgewogICAgICB0aGlzLnRpcERpYWxvZy52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlOwogICAgICBhcGkuc3VyZUltcG9ydEV4Y2VsKHRoaXMuZXJyb3JUaXBSb3cuaWQsIHR5cGUpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgLy8g5Yi35paw5YiX6KGoCiAgICAgICAgdGhpcy5jbGVhckludGVydmFsRm4oKTsKICAgICAgICB0aGlzLnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldFBhcGVyKCk7CiAgICAgICAgfSwgMjAwMCk7CgogICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5oiQ57upCiAgICBzdWJtaXRFeGFtKCkgewogICAgICBpZiAodGhpcy50YWJsZURhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5pyq5a+85YWl5oiQ57up77yM5peg5rOV5o+Q5LqkJyk7CiAgICAgIH0KICAgICAgbGV0IHRhYmxlRGF0YU51bGwgPSB0aGlzLnRhYmxlRGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLnBhcGVyU3RhdHVzICE9PSAyKTsKICAgICAgaWYgKHRhYmxlRGF0YU51bGwubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5a2Y5Zyo5pyq5a+85YWl5oiQ57up55qE6K+V5Y2377yM5peg5rOV5o+Q5LqkJyk7CiAgICAgIH0KICAgICAgLy8g5LuF5YWB6K645ZyoN+eCueiHszI054K55LmL6Ze05o+Q5Lqk77yM5ZCm5YiZ5o+Q56S677ya4oCc5pqC5LiN5YWB6K645o+Q5Lqk77yM6K+35LqON+eCueiHszI054K55o+Q5Lqk4oCdCiAgICAgIGxldCBteURhdGUgPSBuZXcgRGF0ZSgpOwogICAgICBsZXQgaCA9IG15RGF0ZS5nZXRIb3VycygpOwogICAgICBpZiAoaCA8IDcpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmmoLkuI3lhYHorrjmj5DkuqTvvIzor7fkuo4354K56IezMjTngrnmj5DkuqQnKTsKICAgICAgfQogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprlkI7miJDnu6nml6Dms5Xlho3kv67mlLnvvIzmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJwogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICBhcGkKICAgICAgICAgICAgLnN1Ym1pdEV4YW0odGhpcy4kcm91dGUucXVlcnkuaWQpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy5nZXRQYXBlcigpOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOe7qeaIkOWKnycpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOaPkOS6pOaIkOe7qScKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWtpuauteS4i+aLieWIl+ihqAogICAgZ2V0U3RhZ2VMaXN0KCkgewogICAgICBhcGkuZ2V0U3RhZ2VMaXN0KCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLnN0YWdlTGlzdCA9IGRhdGE7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudE1hcmtSb3cuc3RhZ2VJZCkgewogICAgICAgICAgdGhpcy5tYXJrRm9ybS5zdGFnZUlkID0gTnVtYmVyKHRoaXMucm91dGVQYXJhbXMuc3RhZ2VJZCk7CiAgICAgICAgICB0aGlzLnN0YWdlU2VsZWN0RGlzYWJsZWQgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDpu5jorqTpgInmi6npq5jkuK0KICAgICAgICAgIHRoaXMubWFya0Zvcm0uc3RhZ2VJZCA9IDQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsKICAgIHRoaXMuaXNEZXN0cm95ID0gdHJ1ZTsKICAgIHRoaXMuY2xlYXJJbnRlcnZhbEZuKCk7CiAgICBpZiAodGhpcy5jaGFuZ2VOb3NhdmUpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5pyJ5oiQ57up5q2j5Zyo5a+85YWl5Lit77yM56Gu5a6a56a75byA5ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICBkaXN0aW5ndWlzaENhbmNlbEFuZENsb3NlOiBmYWxzZQogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIG5leHQoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBuZXh0KGZhbHNlKTsKICAgICAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbEZuKCk7CiAgICAgICAgICB0aGlzLnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZ2V0UGFwZXIoKTsKICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/score-analysis-admin/views/components/ExamManage/PaperManage","sourcesContent":["<!-- PaperManage 试卷管理 -->\n<template>\n  <div class=\"paperManage\" ref=\"containerRef\">\n    <h2>{{ $route.query.examName }}</h2>\n    <div class=\"toolbars\">\n      <el-button\n        type=\"primary\"\n        size=\"mini\"\n        v-auth=\"['paper-add']\"\n        @click=\"handleAdd\"\n        v-show=\"isShow || tableData.length === 0\"\n        >添加试卷</el-button\n      >\n    </div>\n    <div class=\"table\">\n      <el-table\n        :data=\"tableData\"\n        border\n        style=\"width: 100%\"\n        size=\"small\"\n        v-loading=\"loading\"\n      >\n        <el-table-column prop=\"subjectName\" label=\"科目\"> </el-table-column>\n        <el-table-column prop=\"paperName\" label=\"试卷名称\"> </el-table-column>\n        <el-table-column prop=\"totalScore\" label=\"满分\"> </el-table-column>\n        <el-table-column prop=\"paperStatus\" label=\"进展\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.paperStatus === 0\">未打标</span>\n            <span v-else-if=\"scope.row.paperStatus === 1\">已打标</span>\n            <span v-else-if=\"scope.row.paperStatus === 2\">已导入成绩</span>\n            <span v-else-if=\"scope.row.paperStatus === 3\">等待生成报告</span>\n            <span v-else-if=\"scope.row.paperStatus === 4\">已生成报告</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"500\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-mark']\"\n              @click=\"handleMarkSubject(scope.row)\"\n              v-if=\"scope.row.paperStatus === 0 || scope.row.paperStatus === 1\"\n              >题目打标</el-button\n            >\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-view']\"\n              @click=\"handleViewSubject(scope.row, 'ViewSubject')\"\n              v-if=\"scope.row.paperStatus !== 0 && scope.row.paperStatus !== 1\"\n              >查看题目</el-button\n            >\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-score']\"\n              @click=\"handleViewSubject(scope.row, 'ViewScore')\"\n              v-if=\"scope.row.paperStatus !== 0 && scope.row.paperStatus !== 1\"\n              >查看成绩</el-button\n            >\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-down']\"\n              @click=\"exportExcel(scope.row)\"\n              :loading=\"scope.row.btnLoading\"\n              v-if=\"scope.row.paperStatus === 1 || scope.row.paperStatus === 2\"\n              >下载模板</el-button\n            >\n\n            <el-tooltip\n              class=\"item\"\n              effect=\"dark\"\n              content=\"其他人正在导入试卷成绩，无法操作\"\n              placement=\"top\"\n              :disabled=\"!scope.row.otherPeopleImporting\"\n            >\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                :disabled=\"\n                  scope.row.importProcessResult !== null &&\n                    !scope.row.otherPeopleImporting\n                \"\n                :loading=\"scope.row.importLoading\"\n                v-auth=\"['paper-up']\"\n                v-if=\"\n                  scope.row.paperStatus === 1 || scope.row.paperStatus === 2\n                \"\n                @click.stop=\"fn($event, scope.row)\"\n              >\n                {{ getButtonText(scope.row) }}\n                <input\n                  class=\"hiddenInput\"\n                  v-show=\"false\"\n                  type=\"file\"\n                  accept=\".xls,.xlsx\"\n                  value=\"\"\n                  @change=\"importExcel($event, scope.row)\"\n                />\n              </el-button>\n            </el-tooltip>\n\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-edit']\"\n              @click=\"handleEdit(scope.row)\"\n              v-if=\"scope.row.paperStatus === 0 || scope.row.paperStatus === 1\"\n              >编辑</el-button\n            >\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              v-auth=\"['paper-del']\"\n              @click=\"del(scope.row.id)\"\n              v-if=\"scope.row.paperStatus === 0 || scope.row.paperStatus === 1\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"submit-box\" v-show=\"isShow\">\n      <el-button type=\"primary\" size=\"mini\" @click=\"submitExam\" ref=\"submitRef\"\n        >提交成绩</el-button\n      >\n    </div>\n    <div class=\"submit-tip\" v-show=\"isShow\">\n      *提交成绩后将于明天凌晨1-2点生成报告\n    </div>\n    <!-- 添加、编辑试卷 start -->\n    <el-dialog\n      :title=\"dialog.isedit ? '编辑试卷' : '新建试卷'\"\n      width=\"540px\"\n      center\n      :visible.sync=\"dialog.visible\"\n      @close=\"clearDialogForm\"\n    >\n      <el-form\n        ref=\"elForm\"\n        label-width=\"110px\"\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n      >\n        <el-form-item label=\"科目\" prop=\"subjectId\">\n          <el-select\n            :disabled=\"dialog.isedit\"\n            v-model=\"ruleForm.subjectId\"\n            filterable\n            placeholder=\"请选择科目\"\n            @change=\"changeSubject\"\n          >\n            <el-option\n              v-for=\"(item, index) in subjectList\"\n              :key=\"index\"\n              :value=\"item.subjectId\"\n              :label=\"item.subjectName\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"科目别名\" prop=\"subjectName\">\n          <el-input\n            type=\"input\"\n            v-model.trim=\"ruleForm.subjectName\"\n            maxlength=\"10\"\n            placeholder=\"请填写科目别名\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"试卷名称\" prop=\"paperName\">\n          <el-input\n            type=\"input\"\n            v-model.trim=\"ruleForm.paperName\"\n            maxlength=\"30\"\n            placeholder=\"请填写试卷名称,如：语文-自命题卷\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"满分\" prop=\"totalScore\">\n          <el-input\n            placeholder=\"请填写满分\"\n            :disabled=\"dialog.isedit\"\n            v-model.number=\"ruleForm.totalScore\"\n            @input=\"numberChange('paper', arguments[0], 300)\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"dialog.visible = false\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          @click=\"sureDialog\"\n          :loading=\"confirmLoading\"\n          >确认</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 添加、编辑试卷 end -->\n    <!-- 题目打标 start -->\n    <el-dialog\n      title=\"题目打标设置\"\n      width=\"460px\"\n      center\n      :visible.sync=\"markSubjectDialog.visible\"\n      @close=\"clearMarkDialogForm\"\n      class=\"mark-dialog\"\n    >\n      <el-form\n        ref=\"elMarkForm\"\n        label-width=\"110px\"\n        :model=\"markForm\"\n        :rules=\"markRules\"\n      >\n        <el-form-item label=\"打标模式：\" prop=\"markType\">\n          <el-radio-group v-model=\"markForm.markType\">\n            <el-radio\n              v-for=\"(item, index) in radioArr\"\n              :label=\"item.label\"\n              :key=\"index\"\n              >{{ item.name }}</el-radio\n            >\n          </el-radio-group>\n          <div class=\"tip\">\n            <div>（使用知识树进行打标）</div>\n            <div>（录入知识点进行打标）</div>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"题目数量：\" prop=\"num\">\n          <el-input\n            v-model.number=\"markForm.num\"\n            @input=\"numberChange('mark', arguments[0], 100)\"\n            placeholder=\"请输入题目数量\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"标签体系：\" prop=\"stageId\">\n          <el-select\n            v-model=\"markForm.stageId\"\n            filterable\n            placeholder=\"请选择学段\"\n            :disabled=\"stageSelectDisabled\"\n          >\n            <el-option\n              v-for=\"item in stageList\"\n              :key=\"item.id\"\n              :value=\"item.id\"\n              :label=\"item.name\"\n            />\n          </el-select>\n          <el-select\n            v-model=\"markForm.subjectId\"\n            filterable\n            disabled\n            placeholder=\"请选择学科\"\n          >\n            <el-option\n              v-for=\"(item, index) in subjectList\"\n              :key=\"index\"\n              :value=\"item.subjectId\"\n              :label=\"item.subjectName\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"markSubjectDialog.visible = false\"\n          >取消</el-button\n        >\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          @click=\"linkToMark\"\n          :loading=\"confirmLoading\"\n          >确认</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 题目打标 end -->\n    <!-- 错误文案 -->\n    <div class=\"error-box\" v-if=\"errorArr.length > 0\">\n      <el-alert\n        size=\"mini\"\n        v-for=\"(item, index) in errorArr\"\n        :key=\"item.id\"\n        :title=\"item.title\"\n        type=\"error\"\n        show-icon\n        @close=\"closeError(index)\"\n        :ref=\"'alertRef' + item.id\"\n      >\n        <template>\n          <span v-html=\"item.description\"></span>\n        </template>\n      </el-alert>\n    </div>\n    <!-- 提示 start -->\n    <el-dialog\n      title=\"提示\"\n      width=\"560px\"\n      center\n      :visible.sync=\"tipDialog.visible\"\n      :show-close=\"false\"\n      class=\"tip-dialog\"\n    >\n      <div class=\"tip-title\">\n        {{\n          errorTipRow.paperName\n        }}导入表格中，以下学生所在班级与教务系统不统一，继续导入将按导入的班级关系生成班级报告\n      </div>\n      <el-table :data=\"tipTable\" border style=\"width: 100%\">\n        <el-table-column prop=\"stuNum\" label=\"学号\"> </el-table-column>\n        <el-table-column prop=\"stuName\" label=\"姓名\"> </el-table-column>\n        <el-table-column prop=\"importClass\" label=\"导入班级\"> </el-table-column>\n        <el-table-column prop=\"sysClass\" label=\"教务系统班级\">\n        </el-table-column>\n      </el-table>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"sureImportExcel(0)\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          @click=\"sureImportExcel(1)\"\n          :loading=\"confirmLoading\"\n          >确认</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 提示 end -->\n  </div>\n</template>\n\n<script>\nimport api from './../../../../api/paperManage';\nfunction mergeDefault() {\n  var f = {},\n    m = arguments.length,\n    o = arguments[m - 1],\n    b = 0,\n    k,\n    h,\n    d,\n    g;\n  if (typeof o == 'boolean') {\n    b++;\n    h = o;\n  }\n  if (Object.prototype.toString.call(arguments[0]) === '[object Array]') {\n    d = true;\n    g = arguments[0];\n    k = arguments[1];\n  } else {\n    k = arguments[0] || {};\n  }\n  for (var c = 0; c < m - b; c++) {\n    var a = arguments[c];\n    for (var e in d ? g : k) {\n      var n = d ? g[e] : e;\n      if (a && a[n] !== undefined) {\n        h ? (f[n] = a[n]) : (k[n] = a[n]);\n      } else {\n        h && c == 0 && (f[n] = k[n]);\n      }\n    }\n  }\n  return h ? f : k;\n}\nexport default {\n  name: 'PaperManage',\n  data() {\n    return {\n      tableData: [],\n      dialog: {\n        visible: false,\n        isedit: false\n      },\n      markSubjectDialog: {\n        visible: false\n      },\n      tipDialog: {\n        visible: false\n      },\n      ruleForm: {\n        paperName: '',\n        examId: '',\n        subjectId: '',\n        subjectName: '', //科目别名\n        totalScore: null\n      },\n      markForm: {\n        markType: null,\n        num: null,\n        stageId: '',\n        subjectId: ''\n      },\n      stageList: [], //学段list\n      stageSelectDisabled: false, //学段是否禁用\n      currentMarkRow: {}, //打标row\n      rules: {\n        subjectId: [\n          {\n            required: true,\n            trigger: 'change',\n            message: '请选择科目'\n          }\n        ],\n        paperName: [\n          { required: true, trigger: 'blur', message: '请填写试卷名称' },\n          { max: 30, trigger: '', message: '最大长度30个字符' }\n        ],\n        subjectName: [\n          { required: true, trigger: 'blur', message: '请填写科目别名' }\n        ],\n        totalScore: [{ required: true, trigger: 'blur', message: '请填写满分' }]\n      },\n      markRules: {\n        markType: [\n          { required: true, trigger: 'change', message: '请选择打标模式' }\n        ],\n        num: [{ required: true, trigger: 'blur', message: '请输入题目数量' }],\n        stageId: [{ required: true, trigger: 'change', message: '请选择学段' }]\n      },\n      subjectList: [],\n      confirmLoading: false,\n      loading: false,\n      radioArr: [\n        {\n          name: '选择模式',\n          label: 1\n        },\n        {\n          name: '录入模式',\n          label: 0\n        }\n      ],\n      errorArr: [],\n      tipTable: [], //提示数据列表\n      errorTipRow: {}, //提示教务系统班级不统一的行\n      changeNosave: false,\n      isDestroy: false,\n      t: null //定时器\n    };\n  },\n\n  components: {},\n\n  computed: {\n    // 是否显示提交成绩按钮\n    isShow() {\n      let tableDataNull = this.tableData.filter(\n        item =>\n          item.paperStatus === 0 ||\n          item.paperStatus === 1 ||\n          item.paperStatus === 2\n      );\n      if (tableDataNull.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  created() {\n    this.getSubjectList();\n    this.getPaper();\n    this.t = setInterval(() => {\n      this.getPaper();\n    }, 2000);\n  },\n\n  mounted() {\n    window.onbeforeunload = function(event) {\n      return confirm('确定退出吗');\n    };\n  },\n  methods: {\n    // 列表数据\n    getPaper() {\n      api.getPaper(this.$route.query.id).then(({ data }) => {\n        // 初始化数据\n        data.forEach(item => {\n          item.btnLoading = false; //导出loading\n          item.importLoading = false; //导入loading\n          if (\n            item.importProcessResult &&\n            item.importProcessResult.progressRate < 0\n          ) {\n            item.otherPeopleImporting = true; //其他人导入中\n          } else {\n            item.otherPeopleImporting = false; //其他人导入中\n          }\n        });\n        this.tableData = data;\n\n        // 没有在上传的 停止定时器\n        let tableDataNull = this.tableData.filter(\n          item => item.importProcessResult !== null\n        );\n        if (tableDataNull.length === 0) {\n          this.changeNosave = false;\n          // this.clearIntervalFn();\n          return;\n        }\n        // 有正在上传的\n        try {\n          this.changeNosave = true;\n          this.tableData.forEach(item => {\n            if (\n              item.importProcessResult &&\n              item.importProcessResult.progressRate > 0\n            ) {\n              // 之前是否导入了此条row\n              let rowIndex = this.errorArr.findIndex(e => item.id === e.id);\n              // 有错误信息\n              if (item.importProcessResult.hasError) {\n                item.importLoading = true;\n                // 错误数据处理\n                this.handleErrorArr(\n                  rowIndex,\n                  item,\n                  item.importProcessResult.checkResult\n                );\n                // this.clearIntervalFn();\n                // this.getPaper();\n                item.importProcessResult = null;\n                item.importLoading = false;\n                // 滚动到页面底部错误提示\n                this.$nextTick(() => {\n                  let scrollTop =\n                    this.$refs['alertRef' + item.id][0].$el.offsetTop - 20;\n                  this.$refs.containerRef.scrollTo(0, scrollTop);\n                });\n              }\n              // 导入成功\n              if (item.importProcessResult.progressRate === 100) {\n                this.$message.success(\n                  `${item.subjectName}-${item.paperName} 导入成功`\n                );\n                if (rowIndex >= 0) {\n                  this.errorArr.splice(rowIndex, 1);\n                }\n              }\n              // 数据不匹配-弹窗\n              if (item.importProcessResult.classCheckList.length > 0) {\n                this.tipDialog.visible = true;\n                this.tipTable = item.importProcessResult.classCheckList;\n                this.errorTipRow = item;\n                this.clearIntervalFn();\n\n                throw Error();\n              }\n            }\n          });\n        } catch (e) {}\n      });\n    },\n    // 获取按钮显示文字\n    getButtonText(row) {\n      if (row.paperStatus === 1 && row.importProcessResult === null) {\n        return '导入成绩';\n      } else {\n        if (row.paperStatus === 2 && row.importProcessResult === null) {\n          return '重新导入';\n        }\n        if (row.importProcessResult.progressRate > 0) {\n          return `数据检查中${row.importProcessResult.progressRate}%`;\n        } else {\n          return '成绩导入中';\n        }\n      }\n    },\n    // 根据学段查询科目列表\n    getSubjectList() {\n      api.getSubjectList().then(({ data }) => {\n        this.subjectList = data;\n      });\n    },\n    // 新增\n    handleAdd() {\n      this.dialog.visible = true;\n      this.dialog.isedit = false;\n      this.ruleForm = this.$options.data().ruleForm;\n      this.$nextTick(() => {\n        this.clearDialogForm();\n      });\n    },\n    // 编辑\n    handleEdit(row) {\n      this.dialog.visible = true;\n      this.dialog.isedit = true;\n      mergeDefault(this.ruleForm, row);\n      this.ruleForm.id = row.id;\n    },\n    changeSubject(val) {\n      let subjectItem = this.subjectList.find(\n        item => item.subjectId == this.ruleForm.subjectId\n      );\n      this.ruleForm.subjectName = subjectItem.subjectName;\n    },\n    // 确认\n    sureDialog() {\n      this.$refs['elForm'].validate(valid => {\n        if (!valid) return;\n        this.ruleForm.examId = Number(this.$route.query.id);\n        this.confirmLoading = true;\n        let sendData = {\n          ...this.ruleForm\n        };\n        if (this.dialog.isedit) {\n          sendData.id = Number(this.ruleForm.id);\n        }\n        let subjectItem = this.subjectList.find(\n          item => item.subjectId == this.ruleForm.subjectId\n        );\n        sendData.subjectNameOriginal = subjectItem.subjectName;\n        api\n          .savePaper(sendData)\n          .then(() => {\n            this.$message({\n              type: 'success',\n              message: '保存成功!'\n            });\n            this.confirmLoading = false;\n            this.dialog.visible = false;\n            this.getPaper();\n          })\n          .finally(() => {\n            this.confirmLoading = false;\n          });\n      });\n    },\n    // 删除\n    del(id) {\n      this.$confirm('删除后不可恢复，确定删除？', '删除确认', {\n        customClass: 'box-danger',\n        center: true,\n        type: 'warning'\n      })\n        .then(() => {\n          api\n            .removePaper(id)\n            .then(({ data }) => {\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n              this.getPaper();\n            })\n            .finally(() => {\n              this.confirmLoading = false;\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n    },\n    // 题目打标\n    handleMarkSubject(row) {\n      this.currentMarkRow = row;\n      // 判断是否录入过\n      let hasInputVal = false;\n      let stageId = '';\n      let localArr = JSON.parse(localStorage.getItem('localArr'));\n      console.log(localArr, '打标前');\n      localArr &&\n        localArr.forEach(item => {\n          console.log(item.paperId, row.id, 'id有了');\n          if (item.paperId == row.id) {\n            hasInputVal = item.hasInputVal;\n            stageId = item.stageId;\n          }\n        });\n      console.log(row.paperStatus === 0, hasInputVal, 'hasInputVal');\n      // 未录入\n      if (row.paperStatus === 0 && !hasInputVal) {\n        this.markSubjectDialog.visible = true;\n        this.markForm.subjectId = this.currentMarkRow.subjectId;\n        // 学段下拉列表\n        this.getStageList();\n      } else {\n        // 录入过\n        let routeName = 'MarkSubjectInputMode';\n        if (this.currentMarkRow.markType === 1) {\n          routeName = 'MarkSubjectChooseMode';\n        }\n        this.$router.push({\n          name: routeName,\n          query: {\n            markType: this.currentMarkRow.markType,\n            num: 0,\n            totalScore: this.currentMarkRow.totalScore,\n            paperId: this.currentMarkRow.id,\n            subjectId: this.currentMarkRow.subjectId,\n            subjectName: this.currentMarkRow.subjectName,\n            gradeNameList: this.$route.query.gradeNameList,\n            examName: this.$route.query.examName,\n            paperName: this.currentMarkRow.paperName,\n            stageId: this.currentMarkRow.stageId || stageId\n          }\n        });\n      }\n    },\n    // 题目打标弹窗 确认\n    linkToMark() {\n      this.$refs['elMarkForm'].validate(async valid => {\n        if (!valid) return;\n        this.markSubjectDialog.visible = false;\n        let sendData = {\n          id: '',\n          paperName: '',\n          examId: '',\n          subjectId: '',\n          totalScore: 100\n        };\n        mergeDefault(sendData, this.currentMarkRow);\n        sendData.markType = this.markForm.markType;\n        // 将打标模式传入后台\n        const { data } = await api.savePaper(sendData);\n        let routeName = 'MarkSubjectInputMode';\n        if (this.markForm.markType === 1) {\n          routeName = 'MarkSubjectChooseMode';\n        }\n        let query = {\n          ...this.markForm,\n          totalScore: this.currentMarkRow.totalScore,\n          paperId: this.currentMarkRow.id,\n          subjectName: this.currentMarkRow.subjectName,\n          gradeNameList: this.$route.query.gradeNameList,\n          examName: this.$route.query.examName,\n          paperName: this.currentMarkRow.paperName,\n          hasInputVal: false\n        };\n        let localArr = [];\n        let hasRow = false;\n        if (localStorage.getItem('localArr')) {\n          console.log('有此条row');\n          localArr = JSON.parse(localStorage.getItem('localArr'));\n          localArr.forEach((item, index) => {\n            if (item.paperId == this.currentMarkRow.id) {\n              hasRow = true;\n              localArr.splice(index, 1, { ...query, tableData: [] });\n            }\n          });\n          if (!hasRow) {\n            console.log('没有此条row');\n            localArr.push({\n              ...query,\n              tableData: []\n            });\n          }\n        } else {\n          console.log('没有localArr');\n          localArr.push({\n            ...query,\n            tableData: []\n          });\n        }\n        localStorage.setItem('localArr', JSON.stringify(localArr));\n        console.log(\n          JSON.parse(localStorage.getItem('localArr')),\n          '试卷页面localArr'\n        );\n        this.$router.push({\n          name: routeName,\n          query\n        });\n      });\n    },\n    // 查看题目\n    handleViewSubject(row, routeName) {\n      this.$router.push({\n        name: routeName,\n        query: {\n          paperId: row.id,\n          markType: row.markType,\n          gradeNameList: this.$route.query.gradeNameList,\n          examName: this.$route.query.examName,\n          paperName: this.currentMarkRow.paperName\n        }\n      });\n    },\n    // 清空表单\n    clearDialogForm() {\n      this.$refs['elForm'].clearValidate();\n    },\n    clearMarkDialogForm() {\n      this.$refs['elMarkForm'].clearValidate();\n    },\n    // 设定数字输入范围\n    numberChange(type, val, maxNum) {\n      val = val.replace(/[^0-9]/g, '');\n      if (val === '') {\n        type == 'paper'\n          ? (this.ruleForm.totalScore = '')\n          : (this.markForm.num = '');\n        return;\n      }\n      this.$nextTick(() => {\n        let num = Math.min(Number(val), maxNum);\n        switch (type) {\n          case 'paper':\n            if (num === 0) {\n              this.ruleForm.totalScore = maxNum;\n            } else {\n              this.ruleForm.totalScore = num;\n            }\n            break;\n          case 'mark':\n            if (num === 0) {\n              this.markForm.num = maxNum;\n            } else {\n              this.markForm.num = num;\n            }\n            break;\n          // default:\n        }\n      });\n    },\n    // 导出excel\n    exportExcel(row) {\n      row.btnLoading = true;\n      api.getExcel(row.id).then(res => {\n        let _this = this;\n        if (res.type === 'application/json') {\n          let reader = new FileReader();\n          reader.readAsText(res, 'utf-8');\n          reader.onload = function() {\n            let msg = JSON.parse(reader.result).msg || '下载失败';\n            _this.$message.warning(msg);\n          };\n          return;\n        }\n        const blob = new Blob([res], {\n          type: (res.type && res.type) || 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute(\n          'download',\n          `成绩导入模板-${row.subjectName}-${row.paperName}`\n        );\n        link.click();\n        link = null;\n        row.btnLoading = false;\n        this.$message.success('下载成功');\n      });\n    },\n    // 导入按钮点击\n    fn(event, row) {\n      if (row.otherPeopleImporting) return;\n      event.currentTarget.getElementsByClassName('hiddenInput')[0].click();\n    },\n    // 导入excel\n    importExcel(event, row) {\n      this.changeNosave = true;\n\n      let { files } = event.target;\n      if (files.length === 0) return;\n      row.importLoading = true;\n      let file = files[0];\n      let formData = new FormData();\n      formData.append('file', file);\n      // 之前是否导入了此条row\n      let rowIndex = this.errorArr.findIndex(item => item.id === row.id);\n      // 导入后台\n      api\n        .importExcel(row.id, formData)\n        .then(({ data }) => {\n          event.target.value = '';\n          // 有错误提示\n          if (data.hasError) {\n            // 错误数据处理\n            row.importLoading = false;\n            this.handleErrorArr(rowIndex, row, data.checkResult);\n            this.$nextTick(() => {\n              let scrollTop =\n                this.$refs['alertRef' + row.id][0].$el.offsetTop - 20;\n              this.$refs.containerRef.scrollTo(0, scrollTop);\n            });\n          } else {\n            // 无错误提示 导入过此条的错误信息删除\n            if (rowIndex >= 0) {\n              this.errorArr.splice(rowIndex, 1);\n            }\n            // 导入进度\n            row.importProcessResult = {};\n            this.$set(\n              row.importProcessResult,\n              'progressRate',\n              data.progressRate\n            );\n            // 刷新列表\n            this.clearIntervalFn();\n            this.t = setInterval(() => {\n              if (this.isDestroy) {\n                this.clearIntervalFn();\n              } else {\n                this.getPaper();\n              }\n            }, 2000);\n          }\n        })\n        .catch(err => {\n          event.target.value = '';\n          row.importLoading = false;\n        });\n    },\n    // 关闭错误数据提示\n    closeError(index) {\n      this.errorArr.splice(index, 1);\n    },\n    // 清除定时器\n    clearIntervalFn() {\n      clearInterval(this.t);\n      // clearInterval(this.t2);\n      // clearInterval(this.t3);\n      // clearInterval(this.t4);\n    },\n    // 处理错误数据\n    handleErrorArr(rowIndex, row, description) {\n      // 没有导入过此条row\n      if (rowIndex < 0) {\n        this.errorArr.push({\n          id: row.id,\n          title: `${row.subjectName}-${row.paperName} 成绩导入有误`,\n          description\n        });\n      } else {\n        // 导入过此条row 替换错误信息\n        this.errorArr.splice(rowIndex, 1, {\n          id: row.id,\n          title: `${row.subjectName}-${row.paperName} 成绩导入有误`,\n          description\n        });\n      }\n    },\n    // 确认导入成绩\n    sureImportExcel(type) {\n      this.tipDialog.visible = false;\n      this.confirmLoading = true;\n      api.sureImportExcel(this.errorTipRow.id, type).then(({ data }) => {\n        // 刷新列表\n        this.clearIntervalFn();\n        this.t = setInterval(() => {\n          this.getPaper();\n        }, 2000);\n\n        this.confirmLoading = false;\n      });\n    },\n    // 提交成绩\n    submitExam() {\n      if (this.tableData.length === 0) {\n        return this.$message.warning('未导入成绩，无法提交');\n      }\n      let tableDataNull = this.tableData.filter(item => item.paperStatus !== 2);\n      if (tableDataNull.length !== 0) {\n        return this.$message.warning('存在未导入成绩的试卷，无法提交');\n      }\n      // 仅允许在7点至24点之间提交，否则提示：“暂不允许提交，请于7点至24点提交”\n      let myDate = new Date();\n      let h = myDate.getHours();\n      if (h < 7) {\n        return this.$message.warning('暂不允许提交，请于7点至24点提交');\n      }\n      this.$confirm('确定后成绩无法再修改，是否继续？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      })\n        .then(() => {\n          this.loading = true;\n          api\n            .submitExam(this.$route.query.id)\n            .then(res => {\n              this.getPaper();\n              this.loading = false;\n              return this.$message.success('提交成绩成功');\n            })\n            .catch(err => {\n              this.loading = false;\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消提交成绩'\n          });\n        });\n    },\n    // 学段下拉列表\n    getStageList() {\n      api.getStageList().then(({ data }) => {\n        this.stageList = data;\n        if (this.currentMarkRow.stageId) {\n          this.markForm.stageId = Number(this.routeParams.stageId);\n          this.stageSelectDisabled = true;\n        } else {\n          // 默认选择高中\n          this.markForm.stageId = 4;\n        }\n      });\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    this.isDestroy = true;\n    this.clearIntervalFn();\n    if (this.changeNosave) {\n      this.$confirm('有成绩正在导入中，确定离开吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        distinguishCancelAndClose: false\n      })\n        .then(() => {\n          next();\n        })\n        .catch(() => {\n          next(false);\n          this.clearIntervalFn();\n          this.t = setInterval(() => {\n            this.getPaper();\n          }, 2000);\n        });\n    } else {\n      next();\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.paperManage {\n  /deep/ label {\n    cursor: initial !important;\n  }\n  h2 {\n    font-size: 16px;\n    margin-bottom: 20px;\n    font-weight: 600;\n  }\n  .toolbars {\n    margin-bottom: 20px;\n  }\n  /deep/ .el-input__inner,\n  .el-select {\n    width: 100%;\n  }\n  /deep/ .el-button {\n    background: rgba(0, 0, 0, 0.15);\n    border-radius: 2px;\n    border: none;\n    color: #fff;\n    font-weight: normal;\n    font-size: 14px;\n  }\n  /deep/ .el-button--primary {\n    background: #5481e9;\n    border-color: #5481e9;\n    border-radius: 2px;\n  }\n  /deep/ .el-button--text {\n    color: #5481e9;\n    font-size: 14px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    background: none;\n  }\n  /deep/ .is-disabled {\n    color: #ccc;\n  }\n  /deep/ .el-table {\n    font-size: 14px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.65);\n  }\n  /deep/ .el-table thead,\n  /deep/ .el-table th {\n    background-color: #fafafa;\n    font-size: 14px;\n    font-family: PingFangSC-Medium, PingFang SC;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  /deep/ .el-table th {\n    padding: 12px 0;\n  }\n  /deep/ .el-pagination {\n    text-align: right;\n    .btn-prev,\n    .btn-next,\n    li {\n      background: none !important;\n    }\n    .el-pager li:not(.disabled).active {\n      background-color: #5481e9 !important;\n      border-radius: 50%;\n    }\n    .el-pagination .el-select .el-input {\n      width: 110px;\n    }\n    .el-pagination__editor.el-input {\n      width: 76px;\n      padding: 0 8px;\n    }\n  }\n  /deep/ .el-dialog {\n    .el-dialog__header {\n      text-align: left;\n      border-bottom: 1px solid #f5f5f5;\n    }\n    .el-button--default {\n      border: 1px solid #5481e9;\n      background: #fff;\n      color: #5481e9;\n    }\n    .el-button + .el-button {\n      margin-left: 12px;\n    }\n    .el-radio {\n      display: block;\n      margin-right: 5px;\n      &:first-child {\n        margin-bottom: 17px;\n      }\n    }\n  }\n  /deep/ .el-form-item__label {\n    text-align: left;\n    width: 100px !important;\n  }\n  /deep/ .el-form-item__content {\n    margin-left: 100px !important;\n  }\n  .mark-dialog {\n    /deep/ .el-form-item:first-child {\n      margin-bottom: 30px;\n      .el-form-item__label {\n        line-height: 20px;\n      }\n      .tip {\n        font-size: 14px;\n        font-family: PingFangSC-Regular, PingFang SC;\n        font-weight: 400;\n        color: #c0c4cc;\n        line-height: 14px;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n      }\n      .el-form-item__content {\n        display: flex;\n        margin-left: 0 !important;\n      }\n    }\n    /deep/ .el-form-item {\n      margin-bottom: 30px;\n      &:last-child {\n        margin-bottom: 0px;\n        .el-select {\n          width: 45%;\n          &:first-child {\n            width: 50%;\n            margin-right: 5%;\n          }\n        }\n      }\n    }\n  }\n  .error-box {\n    margin-top: 50px;\n    max-height: 253px;\n    overflow-y: auto;\n  }\n  /deep/ .el-alert {\n    margin-top: 10px;\n    align-items: flex-start;\n  }\n  .submit-box {\n    text-align: center;\n    margin-top: 25px;\n  }\n  .submit-tip {\n    text-align: center;\n    color: #ccc;\n    margin-top: 10px;\n  }\n  .tip-title {\n    margin-bottom: 20px;\n  }\n}\n</style>\n"]}]}