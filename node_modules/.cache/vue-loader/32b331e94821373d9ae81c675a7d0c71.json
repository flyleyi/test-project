{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorList.vue","mtime":1645178321201},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBldmVudEJ1cyBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvcGx1Z2lucy9jb21tb24vZXZlbnRCdXMuanMnOwppbXBvcnQgeyBjb2xvck9iaiB9IGZyb20gJ0AvcGFnZXMvdmlzaXRvci1oNS92aWV3cy9teS12aXNpdG9yL2NvbW1vbic7CmltcG9ydCB2aXNpdG9yU2VsZWN0IGZyb20gJ0AvcGFnZXMvdmlzaXRvci1oNS9jb21wb25lbnRzL1NlYXJjaFNlbGVjdC52dWUnOwppbXBvcnQgcmVmcmVzaExpc3QgZnJvbSAnLi4vcmVmcmVzaC1saXN0JzsKaW1wb3J0IHZpc2l0b3JDYXJkIGZyb20gJy4vY29tcG9uZW50cy9WaXNpdG9yQ2FyZC52dWUnOwppbXBvcnQgdmVyaWZ5Q2FyZCBmcm9tICcuLi92ZXJpZnktdmlzaXRvci9jb21wb25lbnRzL1ZlcmlmeUNhcmQudnVlJzsKaW1wb3J0IHsKICBnZXRSZWNvcmRTdGF0dXNNc2csCiAgZ2V0T3BlcmF0aW9uU3RhdHVzTXNnLAogIGdldFZpc2l0b3JMaXN0LAogIGdldE15VmlzaXRvclByb2Nlc3MKfSBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvYXBpL215VmlzaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICB2aXNpdG9yU2VsZWN0LAogICAgcmVmcmVzaExpc3QsCiAgICB2aXNpdG9yQ2FyZAogICAgLy8gdmVyaWZ5Q2FyZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZU5hbWU6ICd2aXNpdG9yJywKICAgICAgc3RhdHVzOiAnJywKICAgICAgb3B0aW9uMTogW10sCiAgICAgIHZpc2l0b3JMaXN0OiBbXSwKICAgICAgb3BlcmF0ZU9iajogbnVsbCwKICAgICAgc3RhdHVzT2JqOiBudWxsLAogICAgICBjb2xvck9iajogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlZnJlc2hEYXRhKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5yZWZyZXNoTGlzdC5vblJlZnJlc2goKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlVmFsdWUoaXRlbSkgewogICAgICB0aGlzLnN0YXR1cyA9IGl0ZW0udmFsdWU7CiAgICAgIHRoaXMucmVmcmVzaERhdGEoKTsKICAgIH0sCiAgICBnZXRWaXNpdG9yTGlzdCwKICAgIGNsaWNrQ2FyZChpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3Zpc2l0b3ItZGV0YWlsJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGl0ZW0uaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdvdG9WaXNpdG9yQXBwb2ludG1lbnQoKSB7CiAgICAgIGV2ZW50QnVzLiRlbWl0KCdzZXRjdXJUeXBlJywgdGhpcy5hY3RpdmVOYW1lKTsKICAgICAgLy8g5Yik5pat5piv5ZCm6K6+572u6buY6K6k5pe26Ze0CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndmlzaXRvci9TRVRfSU5JVElBTERBVEUnLCB0cnVlKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvdmlzaXRvci1hcHBvaW50bWVudCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHR5cGU6IHRoaXMuYWN0aXZlTmFtZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0TXlWaXNpdG9yUHJvY2VzcygpIHsKICAgICAgZ2V0TXlWaXNpdG9yUHJvY2VzcygpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGxldCBkYXRhID0gT2JqZWN0LmVudHJpZXMocmVzLmRhdGEpOwogICAgICAgIHRoaXMub3B0aW9uMSA9IGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGV4dDogaXRlbVswXSwKICAgICAgICAgICAgdmFsdWU6IGl0ZW1bMV0uam9pbignLCcpCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIHRoaXMub3B0aW9uMS51bnNoaWZ0KHsgdGV4dDogJ+WFqOmDqOeUs+ivtycsIHZhbHVlOiAnJyB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U3RhdHVzT2JqKCkgewogICAgICB0aGlzLmNvbG9yT2JqID0gY29sb3JPYmooKTsKICAgICAgZ2V0T3BlcmF0aW9uU3RhdHVzTXNnKCkudGhlbihyZXMgPT4gewogICAgICAgIGxldCBhcnIgPSByZXMuZGF0YTsKICAgICAgICBsZXQgb2JqID0ge307CiAgICAgICAgYXJyLm1hcChpdGVtID0+IHsKICAgICAgICAgIG9ialtpdGVtLmNvZGVdID0gaXRlbS5tc2c7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5vcGVyYXRlT2JqID0gb2JqOwogICAgICB9KTsKICAgICAgZ2V0UmVjb3JkU3RhdHVzTXNnKCkudGhlbihyZXMgPT4gewogICAgICAgIGxldCBhcnIgPSByZXMuZGF0YTsKICAgICAgICBsZXQgb2JqID0ge307CiAgICAgICAgYXJyLm1hcChpdGVtID0+IHsKICAgICAgICAgIG9ialtpdGVtLmNvZGVdID0gaXRlbS5tc2c7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zdGF0dXNPYmogPSBvYmo7CiAgICAgIH0pOwogICAgfQogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmlzUmVmcmVzaCkgewogICAgICB0aGlzLnJlZnJlc2hEYXRhKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0TXlWaXNpdG9yUHJvY2VzcygpLCB0aGlzLmdldFN0YXR1c09iaigpXSk7CiAgfQp9Owo="},{"version":3,"sources":["VisitorList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisitorList.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor","sourcesContent":["<template>\n  <div>\n    <div class=\"visitor-header\">\n      <div class=\"select-wrapper\">\n        <div class=\"header-select\">\n          <visitor-select\n            :actions=\"option1\"\n            :value=\"status\"\n            @changeValue=\"changeValue\"\n          ></visitor-select>\n        </div>\n      </div>\n    </div>\n    <div>\n      <van-tabs v-model=\"activeName\" color=\"#3388FF\">\n        <van-tab title=\"访客\" name=\"visitor\">\n          <div class=\"visitor-main\">\n            <refresh-list\n              v-if=\"activeName == 'visitor'\"\n              ref=\"refreshList\"\n              :getListData=\"getVisitorList\"\n              :otherParams=\"{ guestType: 0, status: status }\"\n              :hasNotice=\"true\"\n            >\n              <template slot-scope=\"{ item }\">\n                <visitor-card\n                  :item=\"item\"\n                  :operateObj=\"operateObj\"\n                  :statusObj=\"statusObj\"\n                  :colorObj=\"colorObj\"\n                  @clickCard=\"clickCard\"\n                ></visitor-card>\n              </template>\n            </refresh-list>\n          </div>\n        </van-tab>\n        <van-tab title=\"团体\" name=\"teamVisitor\">\n          <div class=\"visitor-main\">\n            <refresh-list\n              v-if=\"activeName == 'teamVisitor'\"\n              ref=\"refreshList\"\n              :getListData=\"getVisitorList\"\n              :otherParams=\"{ guestType: 1, status: status }\"\n              :hasNotice=\"true\"\n            >\n              <template slot-scope=\"{ item }\">\n                <visitor-card\n                  :item=\"item\"\n                  :operateObj=\"operateObj\"\n                  :statusObj=\"statusObj\"\n                  :colorObj=\"colorObj\"\n                  @clickCard=\"clickCard\"\n                ></visitor-card>\n              </template>\n            </refresh-list>\n          </div>\n        </van-tab>\n        <van-tab title=\"物资外运\" name=\"outward\">\n          <div class=\"visitor-main\">\n            <refresh-list\n              v-if=\"activeName == 'outward'\"\n              ref=\"refreshList\"\n              :getListData=\"getVisitorList\"\n              :otherParams=\"{ guestType: 2, status: status }\"\n              :hasNotice=\"true\"\n            >\n              <template slot-scope=\"{ item }\">\n                <!--                <verify-card\n                  :item=\"item\"\n                  type=\"outward\"\n                  @clickCard=\"clickCard(item)\"\n                  @onRefresh=\"refreshData\"\n                ></verify-card> -->\n                <visitor-card\n                  :item=\"item\"\n                  :operateObj=\"operateObj\"\n                  :statusObj=\"statusObj\"\n                  :colorObj=\"colorObj\"\n                  type=\"outward\"\n                  @clickCard=\"clickCard\"\n                ></visitor-card>\n              </template>\n            </refresh-list>\n          </div>\n        </van-tab>\n      </van-tabs>\n    </div>\n    <div class=\"btn-appointment\">\n      <van-button type=\"info\" size=\"large\" @click=\"gotoVisitorAppointment\"\n        >预约访客</van-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport { colorObj } from '@/pages/visitor-h5/views/my-visitor/common';\nimport visitorSelect from '@/pages/visitor-h5/components/SearchSelect.vue';\nimport refreshList from '../refresh-list';\nimport visitorCard from './components/VisitorCard.vue';\nimport verifyCard from '../verify-visitor/components/VerifyCard.vue';\nimport {\n  getRecordStatusMsg,\n  getOperationStatusMsg,\n  getVisitorList,\n  getMyVisitorProcess\n} from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  components: {\n    visitorSelect,\n    refreshList,\n    visitorCard\n    // verifyCard\n  },\n  data() {\n    return {\n      activeName: 'visitor',\n      status: '',\n      option1: [],\n      visitorList: [],\n      operateObj: null,\n      statusObj: null,\n      colorObj: null\n    };\n  },\n  methods: {\n    refreshData() {\n      this.$nextTick(() => {\n        this.$refs.refreshList.onRefresh();\n      });\n    },\n    changeValue(item) {\n      this.status = item.value;\n      this.refreshData();\n    },\n    getVisitorList,\n    clickCard(item) {\n      this.$router.push({\n        path: '/visitor-detail',\n        query: {\n          id: item.id\n        }\n      });\n    },\n    gotoVisitorAppointment() {\n      eventBus.$emit('setcurType', this.activeName);\n      // 判断是否设置默认时间\n      this.$store.commit('visitor/SET_INITIALDATE', true);\n      this.$router.push({\n        path: '/visitor-appointment',\n        query: {\n          type: this.activeName\n        }\n      });\n    },\n    getMyVisitorProcess() {\n      getMyVisitorProcess().then(res => {\n        console.log(res);\n        let data = Object.entries(res.data);\n        this.option1 = data.map(item => {\n          return {\n            text: item[0],\n            value: item[1].join(',')\n          };\n        });\n        this.option1.unshift({ text: '全部申请', value: '' });\n      });\n    },\n    getStatusObj() {\n      this.colorObj = colorObj();\n      getOperationStatusMsg().then(res => {\n        let arr = res.data;\n        let obj = {};\n        arr.map(item => {\n          obj[item.code] = item.msg;\n        });\n        this.operateObj = obj;\n      });\n      getRecordStatusMsg().then(res => {\n        let arr = res.data;\n        let obj = {};\n        arr.map(item => {\n          obj[item.code] = item.msg;\n        });\n        this.statusObj = obj;\n      });\n    }\n  },\n  activated() {\n    if (this.$route.query.isRefresh) {\n      this.refreshData();\n    }\n  },\n  created() {\n    Promise.all([this.getMyVisitorProcess(), this.getStatusObj()]);\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-tabs__nav--line {\n  width: 70%;\n}\n/deep/ .van-tab--active {\n  color: #3388ff;\n}\n.visitor-header {\n  // width: calc(100vw - 200px);\n  position: absolute;\n  height: 45px;\n  right: 0;\n  background: #fff;\n  .select-wrapper {\n    display: flex;\n    justify-content: center;\n    width: 95%;\n    .header-select {\n      margin-top: 7.5px;\n      background: #fff;\n      width: 115px;\n      height: 30px;\n      border-radius: 4px;\n      font-size: 13px;\n      font-family: PingFangSC-Regular, PingFang SC;\n      font-weight: 400;\n      color: rgba(0, 0, 0, 0.65);\n      option {\n        border: none;\n      }\n    }\n  }\n}\n\n.visitor-main {\n  width: 100vw;\n}\n.btn-appointment {\n  position: fixed;\n  bottom: 0;\n  left: 12px;\n  // width: 351px;\n  width: 93.6533vw;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n}\n</style>\n"]}]}