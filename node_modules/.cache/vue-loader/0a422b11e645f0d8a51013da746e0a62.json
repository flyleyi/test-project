{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/resourceLabel/labelManage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/views/resourceLabel/labelManage/index.vue","mtime":1645176309822},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgSW5wdXQsCiAgRGlhbG9nLAogIEZvcm0sCiAgRm9ybUl0ZW0sCiAgU2VsZWN0LAogIE9wdGlvbiwKICBNZXNzYWdlQm94LAogIE1lc3NhZ2UsCiAgTG9hZGluZywKICBQYWdpbmF0aW9uCn0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBCVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2J1c2luZXNzL0JUYWJsZSc7CmltcG9ydCB7CiAgZ2V0TGFiZWxMaXN0LAogIHBvc3RVcGRhdGVMYWJsZU5hbWUsCiAgZ2V0RGVsZXRlTGFibGVOYW1lLAogIHBvc3RBZGRMYWJsZU5hbWUsCiAgZ2V0QWxsRmlyc3RMYWJsZU5hbWUsCiAgZ2V0U2VjTGFiZWxMaXN0LAogIGRlbGV0ZVNlY0xhYmxlTmFtZSwKICBnZXRUZW1wbGF0ZSwKICBwb3N0SW1wb3J0LAogIGNoZWNrRGF0YUltcG9ydCwKICBwb3N0U3ViSW1wb3J0LAogIHBvc3REZWxldGVJbXBvcnQKfSBmcm9tICdAL3BhZ2VzL3NoYXJlLXBsYXRmb3JtLWFkbWluL2FwaS9yZXNvdXJjZUxhYmVsJzsKLyoqCiAqIOiOt+WPluaWh+S7tuWcsOWdgOWQjue8gOWQjQogKiBAcGFyYW0ge3N0cmluZ30gdXJsIHVybOWcsOWdgAogKi8KZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKHVybCkgewogIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlCiAgdmFyIHJlcyA9IC9cLihbMC05YS16QS1aXSspKD86W1w/I118JCkvaS5leGVjKHVybCk7CiAgaWYgKCFyZXMpIHJldHVybiAnJzsKICByZXR1cm4gcmVzWzFdOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmVzb3VyY2VMYWJlbE1hbmFnZScsCiAgY29tcG9uZW50czogewogICAgW0lucHV0Lm5hbWVdOiBJbnB1dCwKICAgIFtEaWFsb2cubmFtZV06IERpYWxvZywKICAgIFtGb3JtLm5hbWVdOiBGb3JtLAogICAgW1NlbGVjdC5uYW1lXTogU2VsZWN0LAogICAgW09wdGlvbi5uYW1lXTogT3B0aW9uLAogICAgW0Zvcm1JdGVtLm5hbWVdOiBGb3JtSXRlbSwKICAgIFtQYWdpbmF0aW9uLm5hbWVdOiBQYWdpbmF0aW9uLAogICAgQlRhYmxlCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZUNvbG9yczogewogICAgICAgIDE6ICdyZWQnLAogICAgICAgIDA6ICdibGFjaycKICAgICAgfSwKICAgICAgYWN0aXZlTmFtZTogJ2ZpcnN0JywKICAgICAgaW5wdXREYXRhOiAnJywKICAgICAgdmlzaWJsZUltcG9ydDogZmFsc2UsCiAgICAgIGlzV2hhdDogJycsCiAgICAgIG1heGxlbmd0aDogJzUnLAogICAgICBpc0Vycm9yOiBmYWxzZSwKICAgICAgaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5qCH562+5ZCN56ewJywKICAgICAgICAgIHByb3A6ICdyZXNvdXJjZXNOYW1lJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfor7TmmI4nLAogICAgICAgICAgcHJvcDogJ3Jlc291cmNlRXhwbGFpbicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIHdpZHRoOiAnMTUwcHgnLAogICAgICAgICAgYnRuczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICfnvJbovpEnLAogICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICBzaXplOiAnbWluaScsCiAgICAgICAgICAgICAgY2xpY2s6IHRoaXMub25VcGRhdGUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAn5Yig6ZmkJywKICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgc2l6ZTogJ21pbmknLAogICAgICAgICAgICAgIGNsaWNrOiB0aGlzLm9uRGVsZXRlCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CiAgICAgIF0sCiAgICAgIHNlY0hlYWRlcnM6IHt9LAogICAgICBjdXJyZW50UGFnZTogMSwgLy/lvZPliY3pobXnoIEKICAgICAgcGFnZXNpemU6IDEwLCAvL+avj+mhteeahOaVsOaNruaVsOmHjwogICAgICBzZWNBZGRMYWJsZUlkOiAnJywKICAgICAgc2VjQWRkTGFibGVOYW1lOiAnJywKICAgICAgdXBkYXRlVHlwZTogJycsCiAgICAgIC8v5L+u5pS544CB5paw5aKe6LWE5rqQ5qCH562+5by556qX6YWN572uCiAgICAgIGZvcmJpZGRlblRpdGxlOiAnJywKICAgICAgbGFibGVUaXRsZTogJycsCiAgICAgIGN1cnJlbnRJZDogJycsCiAgICAgIC8vIOaYr+WQpueCueWHu+aQnOe0ogogICAgICBpc0NsaWNrU2VhcmNoOiBmYWxzZSwKICAgICAgcmVzb3VyY2VOYW1lTm93OiAnJywKICAgICAgZmlzdExhYmxlRmxhZzogZmFsc2UsCiAgICAgIGZvcmJpZGRlbkRpYWxvZzogewogICAgICAgIHJvdzogbnVsbCwgLy/lvLnnqpflr7nlupTnmoR0YWJsZSDooYzmlbDmja4KICAgICAgICB2aXNpYmxlOiBmYWxzZSwgLy/lvLnnqpfmmK/lkKblj6/op4EKICAgICAgICBsb2FkaW5nOiBmYWxzZSwgLy/mmK/lkKblnKjor7fmsYLkuK0KICAgICAgICByZXNvdXJjZXNOYW1lOiAnJywKICAgICAgICBmaXJzdExhYmxlVmFsdWU6ICcnLAogICAgICAgIHJlc291cmNlc1JlbWFyazogJycsCiAgICAgICAgaWQ6ICcnLAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAvL+agoemqjOaViOaenAogICAgICAgICAgZmlyc3RMYWJsZVZhbHVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIDnuqfmoIfnrb7kuI3lj6/kuLrnqbonCiAgICAgICAgICB9LAogICAgICAgICAgcmVzb3VyY2VzTmFtZTogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgICBtZXNzYWdlOiAn5LqM57qn5qCH562+5ZCN56ew5LiN5Y+v5Li656m6JwogICAgICAgICAgfSwKICAgICAgICAgIHJlc291cmNlc1JlbWFyazogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgICBtZXNzYWdlOiAn5qCH562+6K+05piO5LiN5Y+v5Li656m6JwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgY2hlY2tlZDogZmFsc2UsCiAgICAgIGFkZFR5cGU6ICcnLAogICAgICBhZGROb0RpYWxvZ1RpdGxlOiAnJywKICAgICAgYWRkbGFibGVUaXRsZTogJycsCiAgICAgIHBsYWNlaG9sZGVyOiAnJywKICAgICAgYWRkTm9EaWFsb2c6IHsKICAgICAgICAvL3JvdzogbnVsbCwKICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICByZXNvdXJjZXNOYW1lOiAnJywKICAgICAgICByZXNvdXJjZXNSZW1hcms6ICcnLAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICByZXNvdXJjZXNOYW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfotYTmupDmoIfnrb7kuI3lj6/kuLrnqbonCiAgICAgICAgICB9LAogICAgICAgICAgcmVzb3VyY2VzUmVtYXJrOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmoIfnrb7or7TmmI7kuI3lj6/kuLrnqbonCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBhbGxGaXJzdExhYmxlOiBbXSwKICAgICAgZmlsZTogbnVsbCwgLy8g5paH5Lu2CiAgICAgIHJlbmRlckZpbGU6IHRydWUsIC8vIOa4suafk+aWh+S7tuS4iuS8oOihqOWNlQogICAgICBkaWFsb2dUYWJsZVZpc2libGU6IGZhbHNlLAogICAgICBpbXBvcnREYXRhVGFibGU6IFtdLAogICAgICByb3dJbXBvcnREYXRhOiB7fSwKICAgICAgaW1wb3J0Q2hhbmdlRGlhbG9nOiB7CiAgICAgICAgdmlzaWJsZTogZmFsc2UsIC8v5by556qX5piv5ZCm5Y+v6KeBCiAgICAgICAgZmlyc3RMYWJsZVZhbHVlOiAnJywKICAgICAgICBTZWNvbmRMYWJsZTogJycsCiAgICAgICAgaWQ6ICcnLAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAvL+agoemqjOaViOaenAogICAgICAgICAgZmlyc3RMYWJsZVZhbHVlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIDnuqfotYTmupDmoIfnrb7kuI3lj6/kuLrnqbonCiAgICAgICAgICB9LAogICAgICAgICAgU2Vjb25kTGFibGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgICAgbWVzc2FnZTogJ+S6jOe6p+i1hOa6kOagh+etvuS4jeWPr+S4uuepuicKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBbGxGaXJzdExhYmxlTmFtZSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbGVOYW1lKCkgewogICAgICByZXR1cm4gKHRoaXMuZmlsZSAmJiB0aGlzLmZpbGUubmFtZSkgfHwgJyc7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluS4gOexu+agh+etvuWIl+ihqAogICAgZ2V0TGFiZWxMaXN0LAogICAgLy/liLfmlrDnu4Tku7bliJfooagKICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuYlRhYmxlLm9uUmVmcmVzaFRhYmxlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5om56YeP5a+85YWlCiAgICAgKi8KICAgIC8vIOS4i+i9veaooeadvwogICAgZG93bmxvYWRUZW1wbGF0ZSgpIHsKICAgICAgZ2V0VGVtcGxhdGUoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtyZXNdLCB7CiAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJwogICAgICAgIH0pOwogICAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgJ+aWsOWinuS6jOe6p+i1hOa6kOagh+etvuaooeadvy54bHMnKTsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgbGluayA9IG51bGw7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIvovb3miJDlip8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lhbPpl63mqKHmgIHmoYbliqjnlLvnu5PmnZ8KICAgIG9uQ2xvc2VkKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgfSwKICAgIC8vIOmAieaLqeaWh+S7tgogICAgb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgbGV0IHsgZmlsZXMgfSA9IGV2ZW50LnRhcmdldDsKICAgICAgbGV0IGZpbGUgPSBmaWxlc1swXTsKICAgICAgdGhpcy5yZXNldEZpbGUoKTsKICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHJldHVybjsKICAgICAgaWYgKCF0aGlzLmNoZWNrRmlsZShmaWxlc1swXSkpIHJldHVybjsKICAgICAgdGhpcy5maWxlID0gZmlsZTsKICAgIH0sCiAgICAvKioKICAgICAqIOagoemqjOaWh+S7tgogICAgICovCiAgICBjaGVja0ZpbGUoZmlsZSkgewogICAgICAvLyDmoKHpqozmlofku7bnsbvlnosKICAgICAgbGV0IGlzRXhjZWwgPQogICAgICAgIFsneGxzJywgJ3hsc3gnXS5pbmRleE9mKGdldEV4dGVuc2lvbihmaWxlLm5hbWUpLnRvTG93ZXJDYXNlKCkpICE9PSAtMTsKICAgICAgLy8g5qCh6aqM5paH5Lu25aSn5bCPCiAgICAgIC8vbGV0IGlzTHQgPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IHRoaXMubWF4RmlsZVNpemU7CiAgICAgIGlmICghaXNFeGNlbCkgTWVzc2FnZS53YXJuaW5nKCfkuIrkvKDmlofku7blj6rog73mmK94bHPjgIF4bHN45qC85byPJyk7CiAgICAgIC8vaWYgKCFpc0x0KSBNZXNzYWdlLndhcm5pbmcoJ+S4iuS8oOaWh+S7tuWPquiDveacgOWkpzJNQicpOwogICAgICByZXR1cm4gaXNFeGNlbDsgLy8mJiBpc0x0OwogICAgfSwKICAgIC8qKgogICAgICog6YeN572uZmlsZeihqOWNle+8jOino+WGs+mHjeWkjemAieaLqeWQjOS4gOS4quaWh+S7tuS4jeinpuWPkWNoYW5nZeS6i+S7tumXrumimAogICAgICovCiAgICByZXNldEZpbGUoKSB7CiAgICAgIHRoaXMucmVuZGVyRmlsZSA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5yZW5kZXJGaWxlID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgLy/noa7orqTkuIrkvKAKICAgIHN0YXJ0VXBhbG9kRmlsZSgpIHsKICAgICAgaWYgKCF0aGlzLmZpbGUgfHwgISh0aGlzLmZpbGUgaW5zdGFuY2VvZiBGaWxlKSkKICAgICAgICByZXR1cm4gTWVzc2FnZS53YXJuaW5nKCfor7fmt7vliqDmlofku7YnKTsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZSwgdGhpcy5maWxlTmFtZSk7IC8vZmlsZW5hbWXmmK/plK7vvIxmaWxl5piv6KaB5Lyg55qE5paH5Lu2CiAgICAgIGxldCBsb2FkaW5nID0gTG9hZGluZy5zZXJ2aWNlKHsKICAgICAgICB0ZXh0OiAn5a+85YWl5LitLi4uJwogICAgICB9KTsKICAgICAgcG9zdEltcG9ydCgnL3Jlc291cmNlcy9pbXBvcnQnLCBmb3JtRGF0YSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIHRoaXMuaW1wb3J0RGF0YVRhYmxlID0gcmVzLmRhdGE7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICflr7zlhaXmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVJbXBvcnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGUgPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGUgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ2UnLCBlKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7IC8v5aSE55CG5ZCO5YWz6Zet5by556qXCiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+aVsOaNruWkhOeQhi0t57yW6L6R5oyJ6ZKuCiAgICBjaGFuZ2VJbmZvKGRhdGEpIHsKICAgICAgdGhpcy5pbXBvcnRDaGFuZ2VEaWFsb2cudmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuaW1wb3J0Q2hhbmdlRGlhbG9nLlNlY29uZExhYmxlID0gZGF0YS5yb3cuc2Vjb25kTGV2ZWxMYWJlbDsKICAgICAgaWYgKGRhdGEucm93LmlzRmlyc3RMZXZlbExhYmVsID09ICcwJykgewogICAgICAgIHRoaXMuaW1wb3J0Q2hhbmdlRGlhbG9nLmZpcnN0TGFibGVWYWx1ZSA9IGRhdGEucm93LmZpcnN0TGV2ZWxMYWJlbDsKICAgICAgfQogICAgICB0aGlzLnJvd0ltcG9ydERhdGEgPSBkYXRhOwogICAgfSwKICAgIG9uRGVsZXRlQ2xpY2soZGF0YSkgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTor6XnrJTmlbDmja7lkJc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgdmFsdWUgfSkgPT4gewogICAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgICBpZDogZGF0YS5yb3cuaWQsCiAgICAgICAgICAgIGZpcnN0TGV2ZWxMYWJlbDogZGF0YS5yb3cuZmlyc3RMZXZlbExhYmVsLAogICAgICAgICAgICBzZWNvbmRMZXZlbExhYmVsOiBkYXRhLnJvdy5zZWNvbmRMZXZlbExhYmVsLAogICAgICAgICAgICByYW5kSWQ6IGRhdGEucm93LnJhbmRJZCwKICAgICAgICAgICAgaXNGaXJzdExldmVsTGFiZWw6IGRhdGEucm93LmlzRmlyc3RMZXZlbExhYmVsLAogICAgICAgICAgICBpc1NlY29uZExldmVsTGFiZWw6IGRhdGEucm93LmlzU2Vjb25kTGV2ZWxMYWJlbAogICAgICAgICAgfTsKICAgICAgICAgIHBvc3REZWxldGVJbXBvcnQocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuaW1wb3J0RGF0YVRhYmxlLnNwbGljZShkYXRhLiRpbmRleCwgMSk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5Yqf77yBJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5pbXBvcnREYXRhVGFibGUgPSByZXMuZGF0YTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflj5bmtognCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBvbkNsb3NlSW1EaWFsb2coKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2ltcG9ydEZvcm0nXS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmltcG9ydENoYW5nZURpYWxvZy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgb25TdWJtaXRJbURpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmc1snaW1wb3J0Rm9ybSddLnZhbGlkYXRlKCh2YWxpZCwgb2JqKSA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIC8vIOmDqOWIhui+k+WFpeahhuagoemqjOacqumAmui/hwogICAgICAgIGVsc2UgewogICAgICAgICAgY29uc3Qgcm93SW5kZXggPSB0aGlzLnJvd0ltcG9ydERhdGEuJGluZGV4OwogICAgICAgICAgbGV0IHF1ZXJ5RGF0YSA9IHsKICAgICAgICAgICAgaWQ6IHRoaXMucm93SW1wb3J0RGF0YS5yb3cuaWQsCiAgICAgICAgICAgIGlzRmlyc3RMZXZlbExhYmVsOiB0aGlzLnJvd0ltcG9ydERhdGEucm93LmlzRmlyc3RMZXZlbExhYmVsLAogICAgICAgICAgICBpc1NlY29uZExldmVsTGFiZWw6IHRoaXMucm93SW1wb3J0RGF0YS5yb3cuaXNTZWNvbmRMZXZlbExhYmVsLAogICAgICAgICAgICBmaXJzdExldmVsTGFiZWw6IHRoaXMuaW1wb3J0Q2hhbmdlRGlhbG9nLmZpcnN0TGFibGVWYWx1ZSwKICAgICAgICAgICAgc2Vjb25kTGV2ZWxMYWJlbDogdGhpcy5pbXBvcnRDaGFuZ2VEaWFsb2cuU2Vjb25kTGFibGUsCiAgICAgICAgICAgIGlzU2Vjb25kUmVwZWF0OiB0aGlzLnJvd0ltcG9ydERhdGEucm93LmlzU2Vjb25kUmVwZWF0LAogICAgICAgICAgICByYW5kSWQ6IHRoaXMucm93SW1wb3J0RGF0YS5yb3cucmFuZElkCiAgICAgICAgICB9OwogICAgICAgICAgY2hlY2tEYXRhSW1wb3J0KHF1ZXJ5RGF0YSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIC8vIGlmIChyZXMuZGF0YVswXS5pc0ZpcnN0TGV2ZWxMYWJlbCA9PSAwKSB7CiAgICAgICAgICAgICAgICAvLyAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgLy8gICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICAvLyAgICAgbWVzc2FnZTogJ+S4gOe6p+agh+etvui1hOa6kOS4jeWtmOWcqO+8gScKICAgICAgICAgICAgICAgIC8vICAgfSk7CiAgICAgICAgICAgICAgICAvLyAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAocmVzLmRhdGFbMF0uaXNTZWNvbmRMZXZlbExhYmVsID09IDEpIHsKICAgICAgICAgICAgICAgIC8vICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAvLyAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIC8vICAgICBtZXNzYWdlOiAn5LqM57qn5qCH562+6LWE5rqQ5bey5a2Y5Zyo77yBJwogICAgICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgICAgIC8vICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vICAgdGhpcy5pbXBvcnREYXRhVGFibGVbCiAgICAgICAgICAgICAgICAvLyAgICAgcm93SW5kZXgKICAgICAgICAgICAgICAgIC8vICAgXS5maXJzdExldmVsTGFiZWwgPSB0aGlzLmltcG9ydENoYW5nZURpYWxvZy5maXJzdExhYmxlVmFsdWU7CiAgICAgICAgICAgICAgICAvLyAgIHRoaXMuaW1wb3J0RGF0YVRhYmxlW3Jvd0luZGV4XS5pc0ZpcnN0TGV2ZWxMYWJlbCA9IDA7CiAgICAgICAgICAgICAgICAvLyAgIHRoaXMuaW1wb3J0RGF0YVRhYmxlWwogICAgICAgICAgICAgICAgLy8gICAgIHJvd0luZGV4CiAgICAgICAgICAgICAgICAvLyAgIF0uc2Vjb25kTGV2ZWxMYWJlbCA9IHRoaXMuaW1wb3J0Q2hhbmdlRGlhbG9nLlNlY29uZExhYmxlOwogICAgICAgICAgICAgICAgLy8gICB0aGlzLmltcG9ydERhdGFUYWJsZVtyb3dJbmRleF0uaXNTZWNvbmRMZXZlbExhYmVsID0gMDsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip/vvIEnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0RGF0YVRhYmxlID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlSW1EaWFsb2coKTsgLy/lpITnkIblkI7lhbPpl63lvLnnqpcKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+agoemqjOWksei0pe+8gScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKHJlc3MgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmoKHpqozlpLHotKXvvIEnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb25DbG9zZUltcG9ydERpYWxvZygpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5Y+W5raI5om56YeP5paw5aKe5pON5L2c5ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KQogICAgICAgIC50aGVuKCh7IHZhbHVlIH0pID0+IHsKICAgICAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WPlua2iCcKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIG9uU3VibWl0SW1wb3J0RGlhbG9nKCkgewogICAgICBsZXQgbG9hZGluZyA9IExvYWRpbmcuc2VydmljZSh7CiAgICAgICAgdGV4dDogJ+aVsOaNruS4iuS8oOS4rS4uLicKICAgICAgfSk7CiAgICAgIGxldCBmaXJzdFRlc3QgPSB0aGlzLmltcG9ydERhdGFUYWJsZS5ldmVyeShmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaXNGaXJzdExldmVsTGFiZWwgPT0gMCAmJiBpdGVtLmZpcnN0TGV2ZWxMYWJlbCAhPSAnJzsKICAgICAgfSk7CiAgICAgIGxldCBzZWNUZXN0ID0gdGhpcy5pbXBvcnREYXRhVGFibGUuZXZlcnkoZnVuY3Rpb24oaXRlbSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICBpdGVtLmlzU2Vjb25kTGV2ZWxMYWJlbCA9PSAwICYmCiAgICAgICAgICBpdGVtLmlzU2Vjb25kUmVwZWF0ID09IDAgJiYKICAgICAgICAgIGl0ZW0uc2Vjb25kTGV2ZWxMYWJlbCAhPSAnJwogICAgICAgICk7CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5pbXBvcnREYXRhVGFibGUgPT0gJycpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfmsqHmnInlr7zlhaXnmoTmlbDmja7vvIEnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCFmaXJzdFRlc3QpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuIDnuqfotYTmupDmoIfnrb7lrZjlnKjmoIfnuqLvvIzor7flhYjkv67mlLnvvIEnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoIXNlY1Rlc3QpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuoznuqfotYTmupDmoIfnrb7lrZjlnKjmoIfnuqLvvIzor7flhYjkv67mlLnvvIEnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9zdFN1YkltcG9ydCh0aGlzLmltcG9ydERhdGFUYWJsZSkKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrKCk7CiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRDaGFuZ2VEaWFsb2cudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsCiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsgLy/lpITnkIblkI7lhbPpl63lvLnnqpcKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5om56YeP5a+85YWl57uT5p2fCiAgICAgKi8KICAgIC8v57yW6L6R5L+u5pS55LiA57G7CiAgICBvblVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy5mb3JiaWRkZW5UaXRsZSA9ICfnvJbovpHkuIDnuqfotYTmupDmoIfnrb4nOwogICAgICB0aGlzLmxhYmxlVGl0bGUgPSAn5LiA57qn6LWE5rqQ5qCH562+JzsKICAgICAgdGhpcy5tYXhsZW5ndGggPSAnNSc7CiAgICAgIHRoaXMudXBkYXRlVHlwZSA9ICcxJzsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cudmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZm9yYmlkZGVuRGlhbG9nLnJlc291cmNlc05hbWUgPSByb3cucmVzb3VyY2VzTmFtZTsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cucmVzb3VyY2VzUmVtYXJrID0gcm93LnJlc291cmNlRXhwbGFpbjsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cuaWQgPSByb3cuaWQ7CiAgICB9LAogICAgLy/nvJbovpHkv67mlLnkuoznsbsKICAgIG9uU2VjVXBkYXRlKHJvdykgewogICAgICB0aGlzLmZvcmJpZGRlblRpdGxlID0gJ+e8lui+keS6jOe6p+i1hOa6kOagh+etvic7CiAgICAgIHRoaXMubGFibGVUaXRsZSA9ICfkuoznuqfotYTmupDmoIfnrb4nOwogICAgICB0aGlzLmZpc3RMYWJsZUZsYWcgPSB0cnVlOwogICAgICB0aGlzLm1heGxlbmd0aCA9ICcxNSc7CiAgICAgIHRoaXMudXBkYXRlVHlwZSA9ICcyJzsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cucGFyZW50TmFtZSA9IHJvdy5wYXJlbnROYW1lOwogICAgICB0aGlzLmZvcmJpZGRlbkRpYWxvZy5maXJzdExhYmxlVmFsdWUgPSByb3cucGFyZW50TmFtZTsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cucGFyZW50SWQgPSByb3cucGFyZW50SWQ7CiAgICAgIHRoaXMuZm9yYmlkZGVuRGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmZvcmJpZGRlbkRpYWxvZy5yZXNvdXJjZXNOYW1lID0gcm93LnJlc291cmNlc05hbWU7CiAgICAgIHRoaXMuZm9yYmlkZGVuRGlhbG9nLnJlc291cmNlc1JlbWFyayA9IHJvdy5yZXNvdXJjZUV4cGxhaW47CiAgICAgIHRoaXMuZm9yYmlkZGVuRGlhbG9nLmlkID0gcm93LmlkOwogICAgfSwKICAgIC8v5o+Q5Lqk5L+u5pS55qCH562+5YaF5a65CiAgICBvblN1Ym1pdEZiRGlhbG9nKCkgewogICAgICB0aGlzLiRyZWZzWydyZXNvdXJjZXNGb3JtJ10udmFsaWRhdGUoKHZhbGlkLCBvYmopID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm47IC8vIOmDqOWIhui+k+WFpeahhuagoemqjOacqumAmui/hwogICAgICAgIHRoaXMuZm9yYmlkZGVuRGlhbG9nLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIGxldCBxdWVyeVBhcmFtID0ge307CiAgICAgICAgaWYgKHRoaXMudXBkYXRlVHlwZSA9PSAnMScpIHsKICAgICAgICAgIHRoaXMuaXNXaGF0ID0gJzEnOwogICAgICAgICAgcXVlcnlQYXJhbSA9IHsKICAgICAgICAgICAgaXNXaGF0OiBOdW1iZXIoJzEnKSwKICAgICAgICAgICAgcmVzb3VyY2VOYW1lOiB0aGlzLmZvcmJpZGRlbkRpYWxvZy5yZXNvdXJjZXNOYW1lLAogICAgICAgICAgICByZXNvdXJjZUV4cGxhaW46IHRoaXMuZm9yYmlkZGVuRGlhbG9nLnJlc291cmNlc1JlbWFyaywKICAgICAgICAgICAgaWQ6IHRoaXMuZm9yYmlkZGVuRGlhbG9nLmlkCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlzV2hhdCA9ICcyJzsKICAgICAgICAgIHF1ZXJ5UGFyYW0gPSB7CiAgICAgICAgICAgIGlzV2hhdDogTnVtYmVyKCcyJyksCiAgICAgICAgICAgIHJlc291cmNlTmFtZTogdGhpcy5mb3JiaWRkZW5EaWFsb2cucmVzb3VyY2VzTmFtZSwKICAgICAgICAgICAgcmVzb3VyY2VFeHBsYWluOiB0aGlzLmZvcmJpZGRlbkRpYWxvZy5yZXNvdXJjZXNSZW1hcmssCiAgICAgICAgICAgIGlkOiB0aGlzLmZvcmJpZGRlbkRpYWxvZy5pZCwKICAgICAgICAgICAgcGFyZW50SWQ6CiAgICAgICAgICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cuZmlyc3RMYWJsZVZhbHVlID09CiAgICAgICAgICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cucGFyZW50TmFtZQogICAgICAgICAgICAgICAgPyB0aGlzLmZvcmJpZGRlbkRpYWxvZy5wYXJlbnRJZAogICAgICAgICAgICAgICAgOiB0aGlzLmZvcmJpZGRlbkRpYWxvZy5maXJzdExhYmxlVmFsdWUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHBvc3RVcGRhdGVMYWJsZU5hbWUocXVlcnlQYXJhbSkKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhYmxlKCk7CiAgICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QodGhpcy5zZWNBZGRMYWJsZUlkKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChyZXJzID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55aSx6LSlJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5vbkNsb3NlRmJEaWFsb2coKTsgLy/lpITnkIblkI7lhbPpl63lvLnnqpcKICAgICAgICB9LCAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/lhbPpl63nvJbovpHnqpflj6PliY3lpITnkIYKICAgIGJlZm9yZUNsb3NlRmJEaWFsb2coZG9uZSkgewogICAgICB0aGlzLmZvcmJpZGRlbkRpYWxvZy52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZmlzdExhYmxlRmxhZyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5mb3JiaWRkZW5EaWFsb2cubG9hZGluZykgcmV0dXJuOwogICAgICB0aGlzLiRyZWZzWydyZXNvdXJjZXNGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgZG9uZSgpOwogICAgfSwKICAgIC8v54K55Ye75Y+W5raI5YWz6Zet57yW6L6R5by556qXCiAgICBvbkNsb3NlRmJEaWFsb2coKSB7CiAgICAgIHRoaXMuZmlzdExhYmxlRmxhZyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5mb3JiaWRkZW5EaWFsb2cubG9hZGluZykgcmV0dXJuOwogICAgICB0aGlzLiRyZWZzWydyZXNvdXJjZXNGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5mb3JiaWRkZW5EaWFsb2cudmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8v5Yig6Zmk5LiA57G75qCH562+CiAgICBvbkRlbGV0ZShyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l6LWE5rqQ5qCH562+PycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGdldERlbGV0ZUxhYmxlTmFtZShyb3cuaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+aWsOWinuS4gOexu+agh+etvgogICAgYWRkRmlyc3RMYWJlbCgpIHsKICAgICAgdGhpcy5hZGROb0RpYWxvZ1RpdGxlID0gJ+aWsOWinuS4gOe6p+i1hOa6kOagh+etvic7CiAgICAgIHRoaXMuYWRkbGFibGVUaXRsZSA9ICfkuIDnuqfotYTmupDmoIfnrb4nOwogICAgICB0aGlzLm1heGxlbmd0aCA9ICc1JzsKICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICfor7floavlhpnkuIDnuqfotYTmupDmoIfnrb7lkI3np7AnOwogICAgICB0aGlzLmFkZFR5cGUgPSAnMSc7CiAgICAgIHRoaXMuYWRkTm9EaWFsb2cudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy/mlrDlop7kuoznsbvmoIfnrb4KICAgIGFkZFNlY29uZExhYmVsKCkgewogICAgICBpZiAodGhpcy5zZWNBZGRMYWJsZUlkID09ICcnIHx8IHRoaXMuaW5wdXREYXRhID09ICcnKSB7CiAgICAgICAgdGhpcy4kYWxlcnQoJzxzdHJvbmc+6K+35YWI54K56YCJ5LiA57qn6LWE5rqQ5qCH562+5oyJ6ZKuPC9zdHJvbmc+JywgJ+aPkOekuicsIHsKICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkTm9EaWFsb2dUaXRsZSA9CiAgICAgICAgICAn5paw5aKeIicgKyB0aGlzLnNlY0FkZExhYmxlTmFtZSArICci5LiL55qE5LqM57qn6LWE5rqQ5qCH562+JzsKICAgICAgICB0aGlzLmFkZGxhYmxlVGl0bGUgPSAn5LqM57qn6LWE5rqQ5qCH562+JzsKICAgICAgICB0aGlzLm1heGxlbmd0aCA9ICcxNSc7CiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICfor7floavlhpnkuoznuqfotYTmupDmoIfnrb7lkI3np7AnOwogICAgICAgIHRoaXMuYWRkVHlwZSA9ICcyJzsKICAgICAgICB0aGlzLmFkZE5vRGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy/mj5DkuqTmlrDlop7moIfnrb4KICAgIG9uU3VibWl0QWRkRGlhbG9nKCkgewogICAgICB0aGlzLiRyZWZzWydhZGREaWFsb2dGb3JtJ10udmFsaWRhdGUoKHZhbGlkLCBvYmopID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm47IC8vIOmDqOWIhui+k+WFpeahhuagoemqjOacqumAmui/hwogICAgICAgIHRoaXMuYWRkTm9EaWFsb2cubG9hZGluZyA9IHRydWU7CiAgICAgICAgaWYgKHRoaXMuYWRkVHlwZSA9PSAnMScpIHRoaXMuaXNXaGF0ID0gJzEnOwogICAgICAgIGVsc2UgdGhpcy5pc1doYXQgPSAnMic7CiAgICAgICAgbGV0IHF1ZXJ5cyA9IHsKICAgICAgICAgIHJlc291cmNlTmFtZTogdGhpcy5hZGROb0RpYWxvZy5yZXNvdXJjZXNOYW1lLAogICAgICAgICAgcmVzb3VyY2VFeHBsYWluOiB0aGlzLmFkZE5vRGlhbG9nLnJlc291cmNlc1JlbWFyaywKICAgICAgICAgIGlzV2hhdDogTnVtYmVyKHRoaXMuaXNXaGF0KQogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMuaXNXaGF0ID09ICcyJykgewogICAgICAgICAgcXVlcnlzLnBhcmVudElkID0gdGhpcy5zZWNBZGRMYWJsZUlkOwogICAgICAgIH0KCiAgICAgICAgcG9zdEFkZExhYmxlTmFtZShxdWVyeXMpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAvL3RoaXMucmVmcmVzaFRhYmxlKCk7CiAgICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QodGhpcy5zZWNBZGRMYWJsZUlkKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmlrDlop7miJDlip8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChyZXJzID0+IHsKICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5hZGROb0RpYWxvZy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuYWRkTm9EaWFsb2cubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5vbkVuZENsb3NlRGlhbG9nKCk7IC8v5aSE55CG5ZCO5YWz6Zet5by556qXCiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5YWz6Zet56qX5Y+j5YmN5aSE55CGCiAgICBiZWZvcmVDbG9zZUFkZERpYWxvZyhkb25lKSB7CiAgICAgIHRoaXMuYWRkTm9EaWFsb2cudmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgLy8gdGhpcy5zZWNBZGRMYWJsZUlkID0gJyc7CiAgICAgIC8vIHRoaXMuc2VjQWRkTGFibGVOYW1lID0gJyc7CiAgICAgIC8vaWYgKHRoaXMuYWRkTm9EaWFsb2cubG9hZGluZykgcmV0dXJuOwogICAgICB0aGlzLiRyZWZzWydhZGREaWFsb2dGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgZG9uZSgpOwogICAgfSwKICAgIC8v54K55Ye75Y+W5raI5YWz6Zet5by556qXCiAgICBvbkNsb3NlQWRkRGlhbG9nKCkgewogICAgICBpZiAodGhpcy5hZGROb0RpYWxvZy5sb2FkaW5nKSByZXR1cm47CiAgICAgIGlmICh0aGlzLmlzRXJyb3IpIHsKICAgICAgICB0aGlzLmFkZE5vRGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkTm9EaWFsb2cudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIC8vIHRoaXMuc2VjQWRkTGFibGVJZCA9ICcnOwogICAgICAgIC8vIHRoaXMuc2VjQWRkTGFibGVOYW1lID0gJyc7CiAgICAgIH0KICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2U7CiAgICAgIHRoaXMuaXNFcnJvciA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzWydhZGREaWFsb2dGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICAvL+aTjeS9nOWujOaIkOWQjuWkhOeQhgogICAgb25FbmRDbG9zZURpYWxvZygpIHsKICAgICAgaWYgKHRoaXMuYWRkTm9EaWFsb2cubG9hZGluZykgcmV0dXJuOwogICAgICBpZiAodGhpcy5pc0Vycm9yKSB7CiAgICAgICAgdGhpcy5hZGROb0RpYWxvZy52aXNpYmxlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7CiAgICAgICAgICB0aGlzLmFkZE5vRGlhbG9nLnZpc2libGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmFkZE5vRGlhbG9nLnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIC8vIHRoaXMuc2VjQWRkTGFibGVJZCA9ICcnOwogICAgICAgICAgLy8gdGhpcy5zZWNBZGRMYWJsZU5hbWUgPSAnJzsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnNbJ2FkZERpYWxvZ0Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIC8v5YiH5o2idGFi6I635Y+W5LqM57G75qCH562+5YiX6KGoCiAgICBoYW5kbGVDbGljaygpIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VzaXplLAogICAgICAgIG9mZnNldDogdGhpcy5jdXJyZW50UGFnZQogICAgICB9OwogICAgICB0aGlzLmdldEFsbEZpcnN0TGFibGVOYW1lKCk7CiAgICAgIHRoaXMuaW5wdXREYXRhID0gJyc7CiAgICAgIHRoaXMuc2VjQWRkTGFibGVJZCA9ICcnOwogICAgICB0aGlzLnNlY0FkZExhYmxlTmFtZSA9ICcnOwogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6I635Y+W5omA5pyJ5LiA57G75qCH562+5YiX6KGoCiAgICBnZXRBbGxGaXJzdExhYmxlTmFtZSgpIHsKICAgICAgZ2V0QWxsRmlyc3RMYWJsZU5hbWUoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5hbGxGaXJzdExhYmxlID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZnJlc2hMaXN0KGl0ZW0pIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogdGhpcy5wYWdlc2l6ZSwKICAgICAgICBvZmZzZXQ6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgaWQ6IGl0ZW0KICAgICAgfTsKICAgICAgdGhpcy5jdXJyZW50SWQgPSBpdGVtOwogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5oyJ6ZKu5YiH5o2i5o6n5Yi2Ly/ngrnlh7vmoIfnrb7mjInpkq7moLnmja7kuIDnsbvojrflj5bkuoznsbvotYTmupDmkJzntKLkv6Hmga8KICAgIGNoYW5nZVRhYihpdGVtKSB7CiAgICAgIHRoaXMuaXNDbGlja1NlYXJjaCA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VzaXplLAogICAgICAgIG9mZnNldDogdGhpcy5jdXJyZW50UGFnZQogICAgICB9OwogICAgICBpZiAoaXRlbSA9PT0gJ+WFqOmDqCcpIHsKICAgICAgICB0aGlzLnNlY0FkZExhYmxlSWQgPSAnJzsKICAgICAgICB0aGlzLnNlY0FkZExhYmxlTmFtZSA9ICcnOwogICAgICAgIHRoaXMuaW5wdXREYXRhID0gJyc7CiAgICAgICAgdGhpcy5maWx0ZXJMaXN0ID0gW107CiAgICAgICAgdGhpcy5jdXJyZW50SWQgPSAnJzsKICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSB7fTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlucHV0RGF0YSA9IGl0ZW0ucmVzb3VyY2VzTmFtZTsKICAgICAgICB0aGlzLnNlY0FkZExhYmxlSWQgPSBpdGVtLmlkOwogICAgICAgIHRoaXMuc2VjQWRkTGFibGVOYW1lID0gaXRlbS5yZXNvdXJjZXNOYW1lOwogICAgICAgIHRoaXMuZmlsdGVyTGlzdCA9IGl0ZW0uY2hpbGQ7CiAgICAgICAgdGhpcy5jdXJyZW50SWQgPSBpdGVtLmlkOwogICAgICAgIHRoaXMuY3VycmVudFRhYiA9IGl0ZW07CiAgICAgICAgcGFyYW1zLmlkID0gaXRlbS5pZDsKICAgICAgfQogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5p+l6K+i5oyJ6ZKuCiAgICBzZWxlY3RMYWJlbCgpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIHRoaXMucmVzb3VyY2VOYW1lTm93ID0gdGhpcy5pbnB1dERhdGE7CiAgICAgIHRoaXMuaXNDbGlja1NlYXJjaCA9IHRydWU7CiAgICAgIHRoaXMuc2VjQWRkTGFibGVJZCA9ICcnOwogICAgICB0aGlzLnNlY0FkZExhYmxlTmFtZSA9ICcnOwogICAgICBpZiAodGhpcy5pbnB1dERhdGEgPT0gJycpIHsKICAgICAgICB0aGlzLmN1cnJlbnRJZCA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VycmVudElkID0gJ+WFtuS7lic7CiAgICAgIH0KCiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogdGhpcy5wYWdlc2l6ZSwKICAgICAgICBvZmZzZXQ6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgcmVzb3VyY2VOYW1lOiB0aGlzLmlucHV0RGF0YQogICAgICB9OwogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yig6Zmk5LqM57G75qCH562+CiAgICBvblNlY0RlbGV0ZShyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5Yig6Zmk6K+l6LWE5rqQ5qCH562+PycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGRlbGV0ZVNlY0xhYmxlTmFtZShyb3cuaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCh0aGlzLnNlY0FkZExhYmxlSWQpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIC8v5YiG6aG1CiAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VzaXplKSB7CiAgICAgIHRoaXMucGFnZXNpemUgPSBwYWdlc2l6ZTsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogdGhpcy5wYWdlc2l6ZSwKICAgICAgICBvZmZzZXQ6IHRoaXMuY3VycmVudFBhZ2UKICAgICAgfTsKICAgICAgaWYgKHRoaXMuaXNDbGlja1NlYXJjaCkgewogICAgICAgIHBhcmFtcy5yZXNvdXJjZU5hbWUgPSB0aGlzLnJlc291cmNlTmFtZU5vdzsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbXMuaWQgPSB0aGlzLmN1cnJlbnRJZDsKICAgICAgfQogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlOwogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgbGltaXQ6IHRoaXMucGFnZXNpemUsCiAgICAgICAgb2Zmc2V0OiAoY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZXNpemUKICAgICAgfTsKICAgICAgaWYgKHRoaXMuaXNDbGlja1NlYXJjaCkgewogICAgICAgIHBhcmFtcy5yZXNvdXJjZU5hbWUgPSB0aGlzLnJlc291cmNlTmFtZU5vdzsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbXMuaWQgPSB0aGlzLmN1cnJlbnRJZDsKICAgICAgfQogICAgICBnZXRTZWNMYWJlbExpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zZWNIZWFkZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-admin/views/resourceLabel/labelManage","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"label-box\">\n      <el-tabs v-model=\"activeName\" type=\"border-card\" @tab-click=\"handleClick\">\n        <el-tab-pane label=\"一级资源标签\" name=\"first\">\n          <div class=\"button-flex\">\n            <span class=\"tag-name\">一级资源标签列表</span>\n            <el-button size=\"small\" @click=\"addFirstLabel\"\n              >添加一级资源标签</el-button\n            >\n          </div>\n          <b-table\n            ref=\"bTable\"\n            loading\n            empty-text=\"暂无数据\"\n            :headers=\"headers\"\n            :ajax-get-data=\"getLabelList\"\n            :show-column=\"false\"\n            :show-refresh=\"false\"\n            :pageLimit=\"10\"\n          ></b-table>\n        </el-tab-pane>\n        <el-tab-pane label=\"二级资源标签\" name=\"second\"\n          ><div class=\"button-flex\">\n            <div class=\"el-inout-button\">\n              <el-input\n                placeholder=\"搜索二级资源标签\"\n                prefix-icon=\"el-icon-search\"\n                v-model=\"inputData\"\n                size=\"small\"\n              >\n              </el-input>\n              <el-button type=\"primary\" size=\"small\" @click=\"selectLabel\"\n                >查询</el-button\n              >\n            </div>\n            <el-button size=\"small\" @click=\"visibleImport = true\"\n              >批量添加二级资源标签</el-button\n            >\n          </div>\n          <el-card class=\"box-card\" :body-style=\"{ padding: '5px' }\">\n            <el-button\n              round\n              :class=\"['tag-group-item', { active: currentId === '' }]\"\n              @click=\"changeTab('全部')\"\n              size=\"mini\"\n              >全部</el-button\n            >\n            <el-button\n              round\n              size=\"mini\"\n              :class=\"['tag-group-item', { active: currentId === item.id }]\"\n              v-for=\"item in allFirstLable\"\n              :key=\"item.id\"\n              @click=\"changeTab(item)\"\n            >\n              {{ item.resourcesName }}\n            </el-button>\n          </el-card>\n          <div class=\"button-flex button-flex-tow\">\n            <span class=\"tag-name\">二级资源标签列表</span>\n            <el-button size=\"small\" @click=\"addSecondLabel\"\n              >添加二级资源标签</el-button\n            >\n          </div>\n          <el-table :data=\"secHeaders.records\" border size=\"small\">\n            <el-table-column\n              prop=\"resourcesName\"\n              label=\"资源标签名称\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"resourceExplain\"\n              label=\"说明\"\n            ></el-table-column>\n            <el-table-column label=\"操作\" width=\"150\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  @click=\"onSecUpdate(scope.row)\"\n                  type=\"text\"\n                  size=\"small\"\n                  >编辑</el-button\n                >\n                <el-button\n                  @click=\"onSecDelete(scope.row)\"\n                  type=\"text\"\n                  size=\"small\"\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column></el-table\n          >\n          <el-pagination\n            style=\"text-align:right;margin-top:10px;margin-right: 100%;\"\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"currentPage\"\n            :page-sizes=\"[10, 50, 100, 500]\"\n            :page-size=\"pagesize\"\n            background\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"secHeaders.total\"\n          >\n          </el-pagination>\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n    <!-- 编辑标签 -->\n    <el-dialog\n      width=\"500px\"\n      center\n      :visible.sync=\"forbiddenDialog.visible\"\n      :title=\"forbiddenTitle\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"beforeCloseFbDialog\"\n    >\n      <el-form\n        ref=\"resourcesForm\"\n        :model=\"forbiddenDialog\"\n        :rules=\"forbiddenDialog.rules\"\n      >\n        <el-form-item\n          label=\"一级资源标签\"\n          v-if=\"fistLableFlag\"\n          prop=\"firstLableValue\"\n        >\n          <el-select\n            style=\"width:100%\"\n            v-model=\"forbiddenDialog.firstLableValue\"\n          >\n            <el-option\n              v-for=\"item in allFirstLable\"\n              :key=\"item.id\"\n              :label=\"item.resourcesName\"\n              :value=\"item.id\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"lableTitle\" prop=\"resourcesName\">\n          <el-input\n            v-model=\"forbiddenDialog.resourcesName\"\n            :maxlength=\"maxlength\"\n            show-word-limit\n          >\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"标签说明\" prop=\"resourcesRemark\">\n          <el-input\n            placeholder=\"请填写资源标签说明,方便用户理解！(20字以内)\"\n            :maxlength=\"20\"\n            v-model=\"forbiddenDialog.resourcesRemark\"\n            show-word-limit\n            type=\"textarea\"\n            :rows=\"2\"\n          >\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseFbDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"forbiddenDialog.loading\"\n          @click.stop.prevent=\"onSubmitFbDialog\"\n          >确定</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 添加标签弹窗 -->\n    <el-dialog\n      width=\"560px\"\n      center\n      :visible.sync=\"addNoDialog.visible\"\n      :title=\"addNoDialogTitle\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"beforeCloseAddDialog\"\n    >\n      <el-form\n        ref=\"addDialogForm\"\n        :model=\"addNoDialog\"\n        :rules=\"addNoDialog.rules\"\n      >\n        <el-form-item :label=\"addlableTitle\" prop=\"resourcesName\">\n          <el-input\n            :placeholder=\"placeholder\"\n            :maxlength=\"maxlength\"\n            v-model=\"addNoDialog.resourcesName\"\n            show-word-limit\n          >\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"标签说明\" prop=\"resourcesRemark\">\n          <el-input\n            placeholder=\"请填写资源标签说明,方便用户理解！(20字以内)\"\n            :maxlength=\"20\"\n            v-model=\"addNoDialog.resourcesRemark\"\n            show-word-limit\n            type=\"textarea\"\n            :rows=\"2\"\n          >\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <el-checkbox v-model=\"checked\" class=\"checkBox\"\n        >继续新增下一个</el-checkbox\n      >\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseAddDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          :loading=\"addNoDialog.loading\"\n          @click.stop.prevent=\"onSubmitAddDialog\"\n          >确定</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 批量添加二类标签 -->\n    <!-- 批量新增企业号 -->\n    <el-dialog\n      :visible.sync=\"visibleImport\"\n      title=\"批量导入\"\n      width=\"500px\"\n      center\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      @closed=\"onClosed\"\n    >\n      <div class=\"import-data-content\">\n        <h3 style=\"margin:5px;\"><strong>导入流程</strong></h3>\n        <p>\n          1、我们为您设置了导入模板，下载后按照模板格式内容上传即可；\n        </p>\n        <p>2、黄色表头表示的列为必填项；</p>\n        <p>3、请不要进行插入列操作；</p>\n        <p>4、excel表格数据行之间不要有空行。</p>\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          style=\"magrin:5px;margin-top:5px;\"\n          @click=\"downloadTemplate\"\n          >下载模板</el-button\n        >\n        <h3 style=\"margin:5px;\"><strong>上传内容</strong></h3>\n        <el-input :value=\"fileName\" placeholder=\"选择文件\" readonly>\n          <el-button slot=\"append\" @click=\"$refs.file.click()\">浏览</el-button>\n        </el-input>\n        <input\n          v-show=\"false\"\n          v-if=\"renderFile\"\n          type=\"file\"\n          ref=\"file\"\n          accept=\".xls,.xlsx\"\n          @change=\"onChange\"\n        />\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"visibleImport = false\">取消</el-button>\n        <el-button size=\"small\" type=\"primary\" @click=\"startUpalodFile\">\n          确定上传\n        </el-button>\n      </span>\n    </el-dialog>\n    <!-- 上传成功后的数据展示与处理 -->\n    <el-dialog\n      title=\"上传完成\"\n      width=\"700px\"\n      height=\"600px\"\n      center\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :visible.sync=\"dialogTableVisible\"\n    >\n      <el-table :data=\"importDataTable\" size=\"small\" border>\n        <el-table-column prop=\"firstLevelLabel\" label=\"一级资源标签\">\n          <template slot-scope=\"props\">\n            <p :style=\"{ color: typeColors[props.row.isFirstLevelLabel] }\">\n              {{\n                props.row.firstLevelLabel == ''\n                  ? '--'\n                  : props.row.firstLevelLabel\n              }}\n            </p>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"secondLevelLabel\" label=\"二级资源标签\">\n          <template slot-scope=\"props\">\n            <p v-if=\"props.row.secondLevelLabel == ''\" style=\"color: red;\">\n              --\n            </p>\n            <p\n              v-else\n              :style=\"{\n                color:\n                  typeColors[\n                    props.row.isSecondLevelLabel == '0' &&\n                    props.row.isSecondRepeat == '0'\n                      ? 0\n                      : 1\n                  ]\n              }\"\n            >\n              {{ props.row.secondLevelLabel }}\n            </p>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed=\"right\"\n          prop=\"operation\"\n          label=\"操作\"\n          width=\"100\"\n        >\n          <template slot-scope=\"props\">\n            <el-button type=\"text\" size=\"small\" @click=\"changeInfo(props)\"\n              >编辑</el-button\n            >\n            <el-button type=\"text\" size=\"small\" @click=\"onDeleteClick(props)\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <div style=\"font-size: 0.8rem;color: gray;text-align: left;\">\n        <p>\n          1.红色标记的\"——\"为上传的不存在的一级资源标签，可编辑选择其他标签提交，或新增该一级资源标签后重新导入！\n        </p>\n        <p>2.红色标记的二级资源标签为已存在的标签，请编辑修改或删除！</p>\n      </div>\n      <span slot=\"footer\">\n        <el-button size=\"small\" @click=\"onCloseImportDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          @click.stop.prevent=\"onSubmitImportDialog\"\n          >确定</el-button\n        >\n      </span>\n    </el-dialog>\n    <!-- 上传资料编辑弹窗 -->\n    <el-dialog\n      width=\"650px\"\n      center\n      :visible.sync=\"importChangeDialog.visible\"\n      title=\"编辑\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"onCloseImDialog\"\n    >\n      <el-form\n        ref=\"importForm\"\n        :model=\"importChangeDialog\"\n        :rules=\"importChangeDialog.rules\"\n      >\n        <el-form-item prop=\"firstLableValue\" style=\"margin-bottom: 20px;\">\n          <el-select\n            v-model=\"importChangeDialog.firstLableValue\"\n            placeholder=\"请选择一级资源标签\"\n          >\n            <el-option\n              v-for=\"item in allFirstLable\"\n              :key=\"item.id\"\n              :label=\"item.resourcesName\"\n              :value=\"item.resourcesName\"\n            >\n            </el-option>\n          </el-select>\n          <div style=\"display:inline-block;\">\n            <el-input\n              style=\"margin-left:10px;\"\n              v-model=\"importChangeDialog.SecondLable\"\n            ></el-input>\n          </div>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"onCloseImDialog\">取消</el-button>\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          @click.stop.prevent=\"onSubmitImDialog\"\n          >保存</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  Input,\n  Dialog,\n  Form,\n  FormItem,\n  Select,\n  Option,\n  MessageBox,\n  Message,\n  Loading,\n  Pagination\n} from 'element-ui';\nimport BTable from '@/components/business/BTable';\nimport {\n  getLabelList,\n  postUpdateLableName,\n  getDeleteLableName,\n  postAddLableName,\n  getAllFirstLableName,\n  getSecLabelList,\n  deleteSecLableName,\n  getTemplate,\n  postImport,\n  checkDataImport,\n  postSubImport,\n  postDeleteImport\n} from '@/pages/share-platform-admin/api/resourceLabel';\n/**\n * 获取文件地址后缀名\n * @param {string} url url地址\n */\nfunction getExtension(url) {\n  if (!url || typeof url !== 'string') return '';\n  // eslint-disable-next-line no-useless-escape\n  var res = /\\.([0-9a-zA-Z]+)(?:[\\?#]|$)/i.exec(url);\n  if (!res) return '';\n  return res[1];\n}\nexport default {\n  name: 'ResourceLabelManage',\n  components: {\n    [Input.name]: Input,\n    [Dialog.name]: Dialog,\n    [Form.name]: Form,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    [FormItem.name]: FormItem,\n    [Pagination.name]: Pagination,\n    BTable\n  },\n  data() {\n    return {\n      typeColors: {\n        1: 'red',\n        0: 'black'\n      },\n      activeName: 'first',\n      inputData: '',\n      visibleImport: false,\n      isWhat: '',\n      maxlength: '5',\n      isError: false,\n      headers: [\n        {\n          label: '标签名称',\n          prop: 'resourcesName'\n        },\n        {\n          label: '说明',\n          prop: 'resourceExplain'\n        },\n        {\n          label: '操作',\n          colType: 'btns',\n          width: '150px',\n          btns: [\n            {\n              label: '编辑',\n              type: 'text',\n              size: 'mini',\n              click: this.onUpdate\n            },\n            {\n              label: '删除',\n              type: 'text',\n              size: 'mini',\n              click: this.onDelete\n            }\n          ]\n        }\n      ],\n      secHeaders: {},\n      currentPage: 1, //当前页码\n      pagesize: 10, //每页的数据数量\n      secAddLableId: '',\n      secAddLableName: '',\n      updateType: '',\n      //修改、新增资源标签弹窗配置\n      forbiddenTitle: '',\n      lableTitle: '',\n      currentId: '',\n      // 是否点击搜索\n      isClickSearch: false,\n      resourceNameNow: '',\n      fistLableFlag: false,\n      forbiddenDialog: {\n        row: null, //弹窗对应的table 行数据\n        visible: false, //弹窗是否可见\n        loading: false, //是否在请求中\n        resourcesName: '',\n        firstLableValue: '',\n        resourcesRemark: '',\n        id: '',\n        rules: {\n          //校验效果\n          firstLableValue: {\n            required: true,\n            trigger: 'blur',\n            message: '一级标签不可为空'\n          },\n          resourcesName: {\n            required: true,\n            trigger: 'blur',\n            message: '二级标签名称不可为空'\n          },\n          resourcesRemark: {\n            required: true,\n            trigger: 'blur',\n            message: '标签说明不可为空'\n          }\n        }\n      },\n      checked: false,\n      addType: '',\n      addNoDialogTitle: '',\n      addlableTitle: '',\n      placeholder: '',\n      addNoDialog: {\n        //row: null,\n        visible: false,\n        loading: false,\n        resourcesName: '',\n        resourcesRemark: '',\n        rules: {\n          resourcesName: {\n            required: true,\n            trigger: 'blur',\n            message: '资源标签不可为空'\n          },\n          resourcesRemark: {\n            required: true,\n            trigger: 'blur',\n            message: '标签说明不可为空'\n          }\n        }\n      },\n      allFirstLable: [],\n      file: null, // 文件\n      renderFile: true, // 渲染文件上传表单\n      dialogTableVisible: false,\n      importDataTable: [],\n      rowImportData: {},\n      importChangeDialog: {\n        visible: false, //弹窗是否可见\n        firstLableValue: '',\n        SecondLable: '',\n        id: '',\n        rules: {\n          //校验效果\n          firstLableValue: {\n            required: true,\n            trigger: 'blur',\n            message: '一级资源标签不可为空'\n          },\n          SecondLable: {\n            required: true,\n            trigger: 'blur',\n            message: '二级资源标签不可为空'\n          }\n        }\n      }\n    };\n  },\n  created() {\n    this.getAllFirstLableName();\n  },\n  computed: {\n    fileName() {\n      return (this.file && this.file.name) || '';\n    }\n  },\n  methods: {\n    //获取一类标签列表\n    getLabelList,\n    //刷新组件列表\n    refreshTable() {\n      this.$nextTick(() => {\n        this.$refs.bTable.onRefreshTable();\n      });\n    },\n    /**\n     * 批量导入\n     */\n    // 下载模板\n    downloadTemplate() {\n      getTemplate().then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', '新增二级资源标签模板.xls');\n        link.click();\n        link = null;\n        this.$message.success('下载成功');\n      });\n    },\n    //关闭模态框动画结束\n    onClosed() {\n      this.$emit('close');\n    },\n    // 选择文件\n    onChange(event) {\n      let { files } = event.target;\n      let file = files[0];\n      this.resetFile();\n      if (!files.length) return;\n      if (!this.checkFile(files[0])) return;\n      this.file = file;\n    },\n    /**\n     * 校验文件\n     */\n    checkFile(file) {\n      // 校验文件类型\n      let isExcel =\n        ['xls', 'xlsx'].indexOf(getExtension(file.name).toLowerCase()) !== -1;\n      // 校验文件大小\n      //let isLt = file.size / 1024 / 1024 < this.maxFileSize;\n      if (!isExcel) Message.warning('上传文件只能是xls、xlsx格式');\n      //if (!isLt) Message.warning('上传文件只能最大2MB');\n      return isExcel; //&& isLt;\n    },\n    /**\n     * 重置file表单，解决重复选择同一个文件不触发change事件问题\n     */\n    resetFile() {\n      this.renderFile = false;\n      this.$nextTick(() => {\n        this.renderFile = true;\n      });\n    },\n    //确认上传\n    startUpalodFile() {\n      if (!this.file || !(this.file instanceof File))\n        return Message.warning('请添加文件');\n      let formData = new FormData();\n      formData.append('file', this.file, this.fileName); //filename是键，file是要传的文件\n      let loading = Loading.service({\n        text: '导入中...'\n      });\n      postImport('/resources/import', formData)\n        .then(res => {\n          if (res.data && res.success) {\n            this.importDataTable = res.data;\n            this.$message({\n              message: '导入成功',\n              type: 'success',\n              duration: 1500,\n              onClose: () => {\n                this.visibleImport = false;\n                this.dialogTableVisible = true;\n                this.$emit('close');\n                this.file = null;\n              }\n            });\n          } else {\n            this.$message.error(res.data.message);\n          }\n        })\n        .catch(e => {\n          console.log('e', e);\n        })\n        .finally(() => {\n          setTimeout(() => {\n            loading.close(); //处理后关闭弹窗\n          }, 1000);\n        });\n    },\n    //数据处理--编辑按钮\n    changeInfo(data) {\n      this.importChangeDialog.visible = true;\n      this.importChangeDialog.SecondLable = data.row.secondLevelLabel;\n      if (data.row.isFirstLevelLabel == '0') {\n        this.importChangeDialog.firstLableValue = data.row.firstLevelLabel;\n      }\n      this.rowImportData = data;\n    },\n    onDeleteClick(data) {\n      this.$confirm('确定删除该笔数据吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(({ value }) => {\n          const params = {\n            id: data.row.id,\n            firstLevelLabel: data.row.firstLevelLabel,\n            secondLevelLabel: data.row.secondLevelLabel,\n            randId: data.row.randId,\n            isFirstLevelLabel: data.row.isFirstLevelLabel,\n            isSecondLevelLabel: data.row.isSecondLevelLabel\n          };\n          postDeleteImport(params).then(res => {\n            this.importDataTable.splice(data.$index, 1);\n            this.$message({\n              type: 'success',\n              message: '删除成功！'\n            });\n            this.importDataTable = res.data;\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '取消'\n          });\n        });\n    },\n    onCloseImDialog() {\n      this.$refs['importForm'].resetFields();\n      this.importChangeDialog.visible = false;\n    },\n    onSubmitImDialog() {\n      this.$refs['importForm'].validate((valid, obj) => {\n        if (!valid) return;\n        // 部分输入框校验未通过\n        else {\n          const rowIndex = this.rowImportData.$index;\n          let queryData = {\n            id: this.rowImportData.row.id,\n            isFirstLevelLabel: this.rowImportData.row.isFirstLevelLabel,\n            isSecondLevelLabel: this.rowImportData.row.isSecondLevelLabel,\n            firstLevelLabel: this.importChangeDialog.firstLableValue,\n            secondLevelLabel: this.importChangeDialog.SecondLable,\n            isSecondRepeat: this.rowImportData.row.isSecondRepeat,\n            randId: this.rowImportData.row.randId\n          };\n          checkDataImport(queryData)\n            .then(res => {\n              if (res.data && res.success) {\n                // if (res.data[0].isFirstLevelLabel == 0) {\n                //   this.$message({\n                //     type: 'error',\n                //     message: '一级标签资源不存在！'\n                //   });\n                //   return false;\n                // } else if (res.data[0].isSecondLevelLabel == 1) {\n                //   this.$message({\n                //     type: 'error',\n                //     message: '二级标签资源已存在！'\n                //   });\n                //   return false;\n                // } else {\n                //   this.importDataTable[\n                //     rowIndex\n                //   ].firstLevelLabel = this.importChangeDialog.firstLableValue;\n                //   this.importDataTable[rowIndex].isFirstLevelLabel = 0;\n                //   this.importDataTable[\n                //     rowIndex\n                //   ].secondLevelLabel = this.importChangeDialog.SecondLable;\n                //   this.importDataTable[rowIndex].isSecondLevelLabel = 0;\n                // }\n                this.$message({\n                  type: 'success',\n                  message: '修改成功！'\n                });\n                this.importDataTable = res.data;\n                setTimeout(() => {\n                  this.onCloseImDialog(); //处理后关闭弹窗\n                }, 1000);\n              } else {\n                this.$message({\n                  type: 'error',\n                  message: '校验失败！'\n                });\n                return false;\n              }\n            })\n            .catch(ress => {\n              this.$message({\n                type: 'error',\n                message: '校验失败！'\n              });\n            });\n        }\n      });\n    },\n    onCloseImportDialog() {\n      this.$confirm('确定取消批量新增操作吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(({ value }) => {\n          this.dialogTableVisible = false;\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '取消'\n          });\n        });\n    },\n    onSubmitImportDialog() {\n      let loading = Loading.service({\n        text: '数据上传中...'\n      });\n      let firstTest = this.importDataTable.every(function(item) {\n        return item.isFirstLevelLabel == 0 && item.firstLevelLabel != '';\n      });\n      let secTest = this.importDataTable.every(function(item) {\n        return (\n          item.isSecondLevelLabel == 0 &&\n          item.isSecondRepeat == 0 &&\n          item.secondLevelLabel != ''\n        );\n      });\n      if (this.importDataTable == '') {\n        this.$message({\n          message: '没有导入的数据！',\n          type: 'error'\n        });\n        loading.close();\n        return false;\n      }\n      if (!firstTest) {\n        this.$message({\n          message: '一级资源标签存在标红，请先修改！',\n          type: 'error'\n        });\n        loading.close();\n        return false;\n      } else if (!secTest) {\n        this.$message({\n          message: '二级资源标签存在标红，请先修改！',\n          type: 'error'\n        });\n        loading.close();\n        return false;\n      } else {\n        postSubImport(this.importDataTable)\n          .then(res => {\n            if (res.success) {\n              this.$message({\n                message: res.message,\n                type: 'success'\n              });\n              this.handleClick();\n              this.importChangeDialog.visible = false;\n              this.dialogTableVisible = false;\n            }\n          })\n          .catch(res => {\n            this.$message({\n              message: res.message,\n              type: 'error'\n            });\n          })\n          .finally(() => {\n            setTimeout(() => {\n              loading.close(); //处理后关闭弹窗\n            }, 1000);\n          });\n      }\n    },\n    /**\n     * 批量导入结束\n     */\n    //编辑修改一类\n    onUpdate(row) {\n      this.forbiddenTitle = '编辑一级资源标签';\n      this.lableTitle = '一级资源标签';\n      this.maxlength = '5';\n      this.updateType = '1';\n      this.forbiddenDialog.visible = true;\n      this.forbiddenDialog.resourcesName = row.resourcesName;\n      this.forbiddenDialog.resourcesRemark = row.resourceExplain;\n      this.forbiddenDialog.id = row.id;\n    },\n    //编辑修改二类\n    onSecUpdate(row) {\n      this.forbiddenTitle = '编辑二级资源标签';\n      this.lableTitle = '二级资源标签';\n      this.fistLableFlag = true;\n      this.maxlength = '15';\n      this.updateType = '2';\n      this.forbiddenDialog.parentName = row.parentName;\n      this.forbiddenDialog.firstLableValue = row.parentName;\n      this.forbiddenDialog.parentId = row.parentId;\n      this.forbiddenDialog.visible = true;\n      this.forbiddenDialog.resourcesName = row.resourcesName;\n      this.forbiddenDialog.resourcesRemark = row.resourceExplain;\n      this.forbiddenDialog.id = row.id;\n    },\n    //提交修改标签内容\n    onSubmitFbDialog() {\n      this.$refs['resourcesForm'].validate((valid, obj) => {\n        if (!valid) return; // 部分输入框校验未通过\n        this.forbiddenDialog.loading = true;\n        let queryParam = {};\n        if (this.updateType == '1') {\n          this.isWhat = '1';\n          queryParam = {\n            isWhat: Number('1'),\n            resourceName: this.forbiddenDialog.resourcesName,\n            resourceExplain: this.forbiddenDialog.resourcesRemark,\n            id: this.forbiddenDialog.id\n          };\n        } else {\n          this.isWhat = '2';\n          queryParam = {\n            isWhat: Number('2'),\n            resourceName: this.forbiddenDialog.resourcesName,\n            resourceExplain: this.forbiddenDialog.resourcesRemark,\n            id: this.forbiddenDialog.id,\n            parentId:\n              this.forbiddenDialog.firstLableValue ==\n              this.forbiddenDialog.parentName\n                ? this.forbiddenDialog.parentId\n                : this.forbiddenDialog.firstLableValue\n          };\n        }\n        postUpdateLableName(queryParam)\n          .then(res => {\n            this.refreshTable();\n            this.refreshList(this.secAddLableId);\n            this.$message({\n              type: 'success',\n              message: '修改成功'\n            });\n          })\n          .catch(rers => {\n            this.$message({\n              type: 'error',\n              message: '修改失败'\n            });\n          });\n        setTimeout(() => {\n          this.forbiddenDialog.loading = false;\n          this.onCloseFbDialog(); //处理后关闭弹窗\n        }, 1000);\n      });\n    },\n    //关闭编辑窗口前处理\n    beforeCloseFbDialog(done) {\n      this.forbiddenDialog.visible = false;\n      this.fistLableFlag = false;\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['resourcesForm'].resetFields();\n      done();\n    },\n    //点击取消关闭编辑弹窗\n    onCloseFbDialog() {\n      this.fistLableFlag = false;\n      if (this.forbiddenDialog.loading) return;\n      this.$refs['resourcesForm'].resetFields();\n      this.forbiddenDialog.visible = false;\n    },\n    //删除一类标签\n    onDelete(row) {\n      this.$confirm('确认删除该资源标签?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          getDeleteLableName(row.id).then(res => {\n            this.refreshTable();\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n    },\n    //新增一类标签\n    addFirstLabel() {\n      this.addNoDialogTitle = '新增一级资源标签';\n      this.addlableTitle = '一级资源标签';\n      this.maxlength = '5';\n      this.placeholder = '请填写一级资源标签名称';\n      this.addType = '1';\n      this.addNoDialog.visible = true;\n    },\n    //新增二类标签\n    addSecondLabel() {\n      if (this.secAddLableId == '' || this.inputData == '') {\n        this.$alert('<strong>请先点选一级资源标签按钮</strong>', '提示', {\n          dangerouslyUseHTMLString: true\n        });\n      } else {\n        this.addNoDialogTitle =\n          '新增\"' + this.secAddLableName + '\"下的二级资源标签';\n        this.addlableTitle = '二级资源标签';\n        this.maxlength = '15';\n        this.placeholder = '请填写二级资源标签名称';\n        this.addType = '2';\n        this.addNoDialog.visible = true;\n      }\n    },\n    //提交新增标签\n    onSubmitAddDialog() {\n      this.$refs['addDialogForm'].validate((valid, obj) => {\n        if (!valid) return; // 部分输入框校验未通过\n        this.addNoDialog.loading = true;\n        if (this.addType == '1') this.isWhat = '1';\n        else this.isWhat = '2';\n        let querys = {\n          resourceName: this.addNoDialog.resourcesName,\n          resourceExplain: this.addNoDialog.resourcesRemark,\n          isWhat: Number(this.isWhat)\n        };\n        if (this.isWhat == '2') {\n          querys.parentId = this.secAddLableId;\n        }\n\n        postAddLableName(querys)\n          .then(res => {\n            //this.refreshTable();\n            this.refreshList(this.secAddLableId);\n            this.$message({\n              type: 'success',\n              message: '新增成功'\n            });\n          })\n          .catch(rers => {\n            this.isError = true;\n            this.addNoDialog.loading = false;\n          });\n        setTimeout(() => {\n          this.addNoDialog.loading = false;\n          this.onEndCloseDialog(); //处理后关闭弹窗\n        }, 1000);\n      });\n    },\n    //关闭窗口前处理\n    beforeCloseAddDialog(done) {\n      this.addNoDialog.visible = false;\n      this.checked = false;\n      // this.secAddLableId = '';\n      // this.secAddLableName = '';\n      //if (this.addNoDialog.loading) return;\n      this.$refs['addDialogForm'].resetFields();\n      done();\n    },\n    //点击取消关闭弹窗\n    onCloseAddDialog() {\n      if (this.addNoDialog.loading) return;\n      if (this.isError) {\n        this.addNoDialog.visible = true;\n      } else {\n        this.addNoDialog.visible = false;\n        // this.secAddLableId = '';\n        // this.secAddLableName = '';\n      }\n      this.checked = false;\n      this.isError = false;\n      this.$refs['addDialogForm'].resetFields();\n    },\n    //操作完成后处理\n    onEndCloseDialog() {\n      if (this.addNoDialog.loading) return;\n      if (this.isError) {\n        this.addNoDialog.visible = true;\n      } else {\n        if (this.checked) {\n          this.addNoDialog.visible = true;\n        } else {\n          this.addNoDialog.visible = false;\n          // this.secAddLableId = '';\n          // this.secAddLableName = '';\n        }\n      }\n      this.isError = false;\n      this.$refs['addDialogForm'].resetFields();\n    },\n    //切换tab获取二类标签列表\n    handleClick() {\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage\n      };\n      this.getAllFirstLableName();\n      this.inputData = '';\n      this.secAddLableId = '';\n      this.secAddLableName = '';\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    },\n    //获取所有一类标签列表\n    getAllFirstLableName() {\n      getAllFirstLableName().then(res => {\n        this.allFirstLable = res.data;\n      });\n    },\n    refreshList(item) {\n      this.currentPage = 1;\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage,\n        id: item\n      };\n      this.currentId = item;\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    },\n    //按钮切换控制//点击标签按钮根据一类获取二类资源搜索信息\n    changeTab(item) {\n      this.isClickSearch = false;\n      this.currentPage = 1;\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage\n      };\n      if (item === '全部') {\n        this.secAddLableId = '';\n        this.secAddLableName = '';\n        this.inputData = '';\n        this.filterList = [];\n        this.currentId = '';\n        this.currentTab = {};\n      } else {\n        this.inputData = item.resourcesName;\n        this.secAddLableId = item.id;\n        this.secAddLableName = item.resourcesName;\n        this.filterList = item.child;\n        this.currentId = item.id;\n        this.currentTab = item;\n        params.id = item.id;\n      }\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    },\n    //查询按钮\n    selectLabel() {\n      this.currentPage = 1;\n      this.resourceNameNow = this.inputData;\n      this.isClickSearch = true;\n      this.secAddLableId = '';\n      this.secAddLableName = '';\n      if (this.inputData == '') {\n        this.currentId = '';\n      } else {\n        this.currentId = '其他';\n      }\n\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage,\n        resourceName: this.inputData\n      };\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    },\n    //删除二类标签\n    onSecDelete(row) {\n      this.$confirm('确认删除该资源标签?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          deleteSecLableName(row.id).then(res => {\n            this.refreshTable();\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n            this.refreshList(this.secAddLableId);\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n    },\n    //分页\n    handleSizeChange(pagesize) {\n      this.pagesize = pagesize;\n      this.currentPage = 1;\n      const params = {\n        limit: this.pagesize,\n        offset: this.currentPage\n      };\n      if (this.isClickSearch) {\n        params.resourceName = this.resourceNameNow;\n      } else {\n        params.id = this.currentId;\n      }\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    },\n    handleCurrentChange(currentPage) {\n      this.currentPage = currentPage;\n      const params = {\n        limit: this.pagesize,\n        offset: (currentPage - 1) * this.pagesize\n      };\n      if (this.isClickSearch) {\n        params.resourceName = this.resourceNameNow;\n      } else {\n        params.id = this.currentId;\n      }\n      getSecLabelList(params).then(res => {\n        this.secHeaders = res.data;\n      });\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.label-box {\n  background-color: #fff;\n}\n.tag-name {\n  display: inline-block;\n  font-size: 14px;\n  font-weight: 600;\n  width: 130px;\n  line-height: 32px;\n}\n.button-flex {\n  display: flex;\n  justify-content: space-between;\n}\n.button-flex-tow {\n  margin-bottom: 10px;\n}\n.el-inout-button {\n  display: flex;\n  justify-content: flex-start;\n}\n.el-input {\n  margin-right: 10px;\n}\n.box-card {\n  margin: 10px 0;\n  width: 100%;\n}\n.tag-group-item {\n  margin: 5px;\n}\n.active {\n  background: #4393fd;\n  color: #fff;\n}\n</style>\n"]}]}