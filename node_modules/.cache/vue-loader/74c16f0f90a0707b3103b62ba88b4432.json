{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/taskDetail/CompleteList.vue?vue&type=style&index=0&id=50e7a87a&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/taskDetail/CompleteList.vue","mtime":1645176309691},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi9kZWVwLyAuZWwtaW5wdXQtZ3JvdXAgewogIHdpZHRoOiAzNjBweDsKICBtYXJnaW4tcmlnaHQ6IDYwcHg7CiAgLmVsLWlucHV0LWdyb3VwX19hcHBlbmQgYnV0dG9uLmVsLWJ1dHRvbiB7CiAgICBtaW4td2lkdGg6IDY4cHg7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJhY2tncm91bmQ6ICMwMDc2ZjY7CiAgICBib3JkZXItY29sb3I6ICMwMDc2ZjY7CiAgfQp9Ci5zZWFyY2gtYm94IHsKICAuZWwtYnV0dG9uIHsKICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7CiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwOwogIH0KICAuZWwtaW5wdXQtZ3JvdXBfX2FwcGVuZCB7CiAgICBib3JkZXItY29sb3I6ICMwMDc2ZjY7CiAgfQp9Cg=="},{"version":3,"sources":["CompleteList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CompleteList.vue","sourceRoot":"src/pages/bonus-tool-admin/views/taskDetail","sourcesContent":["<template>\n  <!-- 任务详情查看，未办结 -->\n  <div class=\"app-container\">\n    <div class=\"common-title\">{{ taskName }}</div>\n    <div class=\"common-container\">\n      <div class=\"common-header\">\n        <div class=\"common-header-left\">\n          <el-input\n            v-model=\"schoolName\"\n            type=\"text\"\n            size=\"medium\"\n            placeholder=\"请输入要查询的学校名称\"\n            prefix-icon=\"el-icon-search\"\n            class=\"search-box\"\n          >\n            <el-button\n              type=\"primary\"\n              size=\"medium\"\n              slot=\"append\"\n              :loading=\"loading\"\n              @click=\"onSearchSchool\"\n              >查询</el-button\n            >\n          </el-input>\n          <el-button\n            type=\"primary\"\n            size=\"medium\"\n            class=\"common-btn\"\n            :loading=\"loading\"\n            @click=\"onExport\"\n            >导出</el-button\n          >\n          <el-button\n            type=\"primary\"\n            size=\"medium\"\n            :loading=\"loading\"\n            @click=\"onDownload\"\n            >下载</el-button\n          >\n        </div>\n      </div>\n      <p class=\"common-tips\">实际年薪内收入（已发年薪内+分配奖金）计</p>\n      <c-table\n        border\n        ref=\"cTable\"\n        :headers=\"headers\"\n        :data=\"tableData\"\n        :highlight-current-row=\"true\"\n        v-loading=\"loading\"\n        @selection-change=\"onSelectionChange\"\n      >\n        <template slot=\"column|link\" slot-scope=\"{ row, $index }\">\n          <el-link type=\"primary\" @click=\"onJump(row)\">\n            <span :ref=\"'school' + row.id\" :data-index=\"$index\">{{\n              row.schoolName\n            }}</span>\n          </el-link>\n        </template>\n      </c-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Link, Input, Button } from 'element-ui';\nimport CTable from '@/components/common/CTable';\nimport { formatNullValue, formatAmountValue } from '../../plugins/vue-filters';\nimport {\n  getTaskDetailList,\n  exportCompleteList,\n  batchDownloadCompleteList,\n  searchSchool\n} from '../../api/taskDetail';\nexport default {\n  name: 'CompleteList',\n  components: {\n    [Link.name]: Link,\n    [Input.name]: Input,\n    [Button.name]: Button,\n    CTable\n  },\n  props: {},\n  data() {\n    return {\n      loading: true,\n      headers: [\n        {\n          type: 'selection'\n        },\n        {\n          label: '序号',\n          type: 'index',\n          width: 70,\n          fixed: 'left'\n        },\n        {\n          label: '校方名称',\n          prop: 'schoolName',\n          colType: 'column',\n          slotName: 'link',\n          fixed: 'left'\n        },\n        {\n          label: '奖金池额度',\n          prop: 'bonus',\n          fixed: 'left',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前10% 匹配度',\n          prop: 'matchedDegree10',\n          fit: true\n        },\n        {\n          label: '前10% max年薪',\n          prop: 'max10',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前10% min年薪',\n          prop: 'min10',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前10% ave年薪',\n          prop: 'ave10',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前10% ave系数',\n          prop: 'aveFactor10'\n        },\n        {\n          label: '前20% 匹配度',\n          prop: 'matchedDegree20'\n        },\n        {\n          label: '前20% max年薪',\n          prop: 'max20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前20% min年薪',\n          prop: 'min20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前20% ave年薪',\n          prop: 'ave20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前20% ave系数',\n          prop: 'aveFactor20'\n        },\n        {\n          label: '前30% 匹配度',\n          prop: 'matchedDegree30'\n        },\n        {\n          label: '前30% max年薪',\n          prop: 'max30',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前30% min年薪',\n          prop: 'min30',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前30% ave年薪',\n          prop: 'ave30',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '前30% ave系数',\n          prop: 'aveFactor30'\n        },\n        {\n          label: '后20% 匹配度',\n          prop: 'matchedDegreeAfter20'\n        },\n        {\n          label: '后20% max年薪',\n          prop: 'maxAfter20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '后20% min年薪',\n          prop: 'minAfter20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '后20% ave年薪',\n          prop: 'aveAfter20',\n          formatter: (row, col, val) => {\n            return !val ? formatNullValue(val) : formatAmountValue(val);\n          }\n        },\n        {\n          label: '后20% ave系数',\n          prop: 'aveFactorAfter20'\n        }\n      ],\n      // 列表数据\n      tableData: [],\n      // 选中\n      selectedRows: [],\n      // 搜索学校名\n      schoolName: ''\n    };\n  },\n  computed: {\n    // 任务名\n    taskName() {\n      return this.$route.query.taskName;\n    },\n    // 导出、下载参数\n    params() {\n      return {\n        schoolNames: '',\n        taskName: this.taskName\n      };\n    }\n  },\n  watch: {},\n  created() {\n    this.getTaskDetailList();\n  },\n  mounted() {},\n  methods: {\n    /**\n     * 获取任务详情\n     */\n    getTaskDetailList() {\n      getTaskDetailList({ taskName: this.taskName })\n        .then(({ data }) => {\n          this.tableData = data;\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    /**\n     * 跳转详情\n     */\n    onJump(row) {\n      this.$router.push({\n        path: '/task-detial/single',\n        query: {\n          taskName: row.taskName,\n          schoolName: row.schoolName,\n          bonus: row.bonus\n        }\n      });\n    },\n    /**\n     * 改变选择项\n     */\n    onSelectionChange(rows) {\n      this.selectedRows = rows;\n    },\n    /**\n     * 获取导出、下载请求数据\n     */\n    getParams() {\n      let schoolNames = this.selectedRows.map(item => {\n        return item.schoolName;\n      });\n      this.params.schoolNames = schoolNames.join(',');\n    },\n    /**\n     * 导出当前勾选内容列表\n     */\n    onExport() {\n      if (this.selectedRows.length === 0) {\n        this.$alert('请选择任一条目进行操作！', '提醒', {\n          cancelButtonText: '确定',\n          center: true,\n          showClose: false\n        });\n      } else {\n        this.getParams();\n        let url = exportCompleteList(this.params);\n        window.open(url);\n      }\n    },\n    /**\n     * 批量下载任务详情\n     */\n    onDownload() {\n      if (this.selectedRows.length === 0) {\n        this.$alert('请选择任一条目进行操作！', '提醒', {\n          cancelButtonText: '确定',\n          center: true,\n          showClose: false\n        });\n      } else {\n        this.getParams();\n        let url = batchDownloadCompleteList(this.params);\n        window.open(url);\n      }\n    },\n    /**\n     * 搜索学校\n     */\n    onSearchSchool() {\n      this.schoolName &&\n        searchSchool({\n          taskName: this.taskName,\n          schoolName: this.schoolName\n        })\n          .then(({ data }) => {\n            let searchDom = this.$refs['school' + data.id];\n            let index = searchDom.getAttribute('data-index'); // 搜索下标\n            // 滑动到对用搜索项\n            searchDom.scrollIntoView({\n              behavior: 'smooth',\n              block: 'center',\n              inline: 'center'\n            });\n            // 高亮\n            this.$refs.cTable.$refs.table.setCurrentRow(this.tableData[index]);\n          })\n          .catch(err => {\n            console.log(err);\n            this.$message({\n              message: err.message,\n              type: 'warning'\n            });\n          });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .el-input-group {\n  width: 360px;\n  margin-right: 60px;\n  .el-input-group__append button.el-button {\n    min-width: 68px;\n    color: #fff;\n    background: #0076f6;\n    border-color: #0076f6;\n  }\n}\n.search-box {\n  .el-button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n  .el-input-group__append {\n    border-color: #0076f6;\n  }\n}\n</style>\n"]}]}