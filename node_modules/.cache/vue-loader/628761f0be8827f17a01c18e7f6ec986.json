{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BAllotUser/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BAllotUser/index.vue","mtime":1627979214341},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ0AvcGx1Z2lucy9heGlvcyc7CmltcG9ydCB7CiAgQ2FyZCwKICBUcmVlLAogIFJvdywKICBJbnB1dCwKICBTZWxlY3QsCiAgRm9ybSwKICBGb3JtSXRlbSwKICBDb2wsCiAgVGFibGUsCiAgVGFibGVDb2x1bW4sCiAgU2Nyb2xsYmFyLAogIFRhZywKICBMb2FkaW5nCn0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBDU3ZnSWNvbiBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0NTdmdJY29uJzsKCmxldCBjb3VudCA9IDA7CgpmdW5jdGlvbiBkZWxldGVPckZpbmRBcnIoYXJyRGF0YSwgb2JqLCBjaGlsZHJlbiwgX2FsbCwgZmluZCwgcmVwbGFjZUFycikgewogIC8v5Yig6Zmk5oiW5p+l5om+5pWw57uE5Lit5pyJ5p+Q5Liq5a+56LGh55qE5YWD57SgLiBfYWxs5Luj6KGo5piv5ZCm5YWo6YOo5Yig6ZmkCiAgY2hpbGRyZW4gPSBjaGlsZHJlbiB8fCAnY2hpbGRyZW4nOyAvL29iauWPr+S7peaYr+WfuuacrOaVsOaNruexu+Weiy5yZXBsYWNlQXJy5Zyo5Yig6Zmk55qE5L2N572u5re75Yqg55qE5pWw5o2uCiAgaWYgKCFPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZmluZCkgPT09ICdbb2JqZWN0IEFycmF5XScpIHsKICAgIGZpbmQgPSBmaW5kID8gW10gOiBmaW5kOwogIH0KICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyckRhdGEpID09PSAnW29iamVjdCBBcnJheV0nKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyckRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG0gPSBhcnJEYXRhW2ldLAogICAgICAgIGZsZyA9IDE7CiAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PSAnb2JqZWN0JykgewogICAgICAgIGZvciAodmFyIGogaW4gb2JqKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHR5cGVvZiBvYmpbal0gPT0gJ2Z1bmN0aW9uJwogICAgICAgICAgICAgID8gIW9ialtqXShqLCBtW2pdLCBtLCBhcnJEYXRhLCBpKQogICAgICAgICAgICAgIDogbVtqXSAhPSBvYmpbal0KICAgICAgICAgICkgewogICAgICAgICAgICBmbGcgPSAwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG0gIT0gb2JqKSB7CiAgICAgICAgICBmbGcgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZmxnKSB7CiAgICAgICAgaWYgKGZpbmQpIHsKICAgICAgICAgIGZpbmQucHVzaChtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHR5cGVvZiByZXBsYWNlQXJyID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmVwbGFjZUFyciA9IHJlcGxhY2VBcnIoaSwgbSwgYXJyRGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXBsYWNlQXJyID0KICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHJlcGxhY2VBcnIpID09ICdbb2JqZWN0IEFycmF5XScKICAgICAgICAgICAgICA/IHJlcGxhY2VBcnIKICAgICAgICAgICAgICA6IHJlcGxhY2VBcnIgfHwgW107CiAgICAgICAgICBhcnJEYXRhLnNwbGljZS5hcHBseShhcnJEYXRhLCBbaSwgMV0uY29uY2F0KHJlcGxhY2VBcnIpKTsKICAgICAgICAgIGktLTsKICAgICAgICAgIF9hbGwgJiYgKGkgPSBpICsgcmVwbGFjZUFyci5sZW5ndGgpOwogICAgICAgIH0KICAgICAgICBpZiAoIV9hbGwpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBvYmogJiYKICAgICAgICB0eXBlb2Ygb2JqID09ICdvYmplY3QnICYmCiAgICAgICAgZGVsZXRlT3JGaW5kQXJyKG0sIG9iaiwgY2hpbGRyZW4sIF9hbGwsIGZpbmQsIHJlcGxhY2VBcnIpOwogICAgfQogIH0gZWxzZSBpZiAoYXJyRGF0YSAmJiB0eXBlb2YgYXJyRGF0YSA9PSAnb2JqZWN0JykgewogICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyckRhdGFbY2hpbGRyZW5dKSA9PT0gJ1tvYmplY3QgQXJyYXldJyAmJgogICAgICBkZWxldGVPckZpbmRBcnIoYXJyRGF0YVtjaGlsZHJlbl0sIG9iaiwgY2hpbGRyZW4sIF9hbGwsIGZpbmQsIHJlcGxhY2VBcnIpOwogIH0KICByZXR1cm4gZmluZDsKfQoKVnVlLnVzZShMb2FkaW5nKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdCQWxsb3RVc2VyJywKICBjb21wb25lbnRzOiB7CiAgICBbQ2FyZC5uYW1lXTogQ2FyZCwKICAgIFtUcmVlLm5hbWVdOiBUcmVlLAogICAgW1Jvdy5uYW1lXTogUm93LAogICAgW0NvbC5uYW1lXTogQ29sLAogICAgW0lucHV0Lm5hbWVdOiBJbnB1dCwKICAgIFtTZWxlY3QubmFtZV06IFNlbGVjdCwKICAgIFtPcHRpb24ubmFtZV06IE9wdGlvbiwKICAgIFtGb3JtLm5hbWVdOiBGb3JtLAogICAgW0Zvcm1JdGVtLm5hbWVdOiBGb3JtSXRlbSwKICAgIFtDU3ZnSWNvbi5uYW1lXTogQ1N2Z0ljb24sCiAgICBbVGFibGUubmFtZV06IFRhYmxlLAogICAgW1RhYmxlQ29sdW1uLm5hbWVdOiBUYWJsZUNvbHVtbiwKICAgIFtTY3JvbGxiYXIubmFtZV06IFNjcm9sbGJhciwKICAgIFtUYWcubmFtZV06IFRhZwogIH0sCiAgcHJvcHM6IHsKICAgIC8qKgogICAgICog5pyN5Yqh5Zmo57G75Z6LCiAgICAgKi8KICAgIHNlcnZlclR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvbGVOYW1lOiAnJywKICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBkaXN0OiB7CiAgICAgICAgLy/lt7LliIbphY3nlKjmiLcKICAgICAgICBwYWdpbjogewogICAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQsCiAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgb2Zmc2V0OiAwCiAgICAgICAgfSwKICAgICAgICBzdGFmZk5hbWU6ICcnLCAvL+aQnOe0ouWtl+autQogICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgIGxpc3Q6IFtdCiAgICAgIH0sCiAgICAgIHVuZGlzdDogewogICAgICAgIC8v5pyq5YiG6YWN55So5oi3CiAgICAgICAgcGFnaW46IHsKICAgICAgICAgIHJvbGVJZDogdGhpcy4kcm91dGUucXVlcnkucm9sZUlkLAogICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgcGFnZTogMSwKICAgICAgICAgIG9mZnNldDogMAogICAgICAgIH0sCiAgICAgICAgc3RhZmZOYW1lOiAnJywKICAgICAgICBjaGVja2VkOiBbXSwKICAgICAgICBsaXN0OiBbCiAgICAgICAgICAvLyB7IGlkOiAxLCBuYW1lOiAi5byg5LiJIiwgbnVtYmVyOiAiMTAwMDExIiB9CiAgICAgICAgXQogICAgICB9LAogICAgICBzYXZlRGF0YTogewogICAgICAgIC8v5bey5YiG6YWN55So5oi3CiAgICAgICAgYWRkOiBbXSwgLy/mt7vliqDkuoYKICAgICAgICByZW1vdmU6IFtdIC8v56e76Zmk5LqGCiAgICAgIH0sCiAgICAgIGRpc3RMb2FkaW5nOiBmYWxzZSwgLy8g5YiG6YWN5LitCiAgICAgIHVuZGlzdExvYWRpbmc6IGZhbHNlLCAvLyDlj5bmtojliIbphY3kuK0KICAgICAgbG9hZGluZzogZmFsc2UsIC8vIOWKoOi9veS4rQogICAgICBsYXN0UmVxdWVzdDE6IG51bGwsCiAgICAgIGxhc3RSZXF1ZXN0MjogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2YXIgcm9sZUlkID0gdGhpcy4kcm91dGUucXVlcnkucm9sZUlkOwogICAgaWYgKCFyb2xlSWQpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9CiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VW5kaXN0KCksIHRoaXMuZ2V0RGlzdCgpXSkKICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgIHJldHVybiBheGlvcygKICAgICAgICAgIHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgdXJsOiBgL3VzZXJndy9hZG1pbi9yb2xlQXV0aC9nZXRSb2xlTmFtZS8ke3JvbGVJZH1gCiAgICAgICAgICB9LAogICAgICAgICAgdGhpcy5zZXJ2ZXJUeXBlCiAgICAgICAgKTsKICAgICAgfSkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnJvbGVOYW1lID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgbG9jayh0eXBlKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXNbJ19sb2NrJyArIHR5cGVdID0gZmFsc2U7CiAgICAgIH0sIDUwKTsKICAgIH0sCiAgICAvKioKICAgICAqIOafpeivoueUqOaIt+WIl+ihqAogICAgICovCiAgICBxdWVyeVVzZXIodHlwZSwgcGFnaW4sIGtleSkgewogICAgICAvLyB0eXBlPTDliIbphY0gIDHmnKrliIbphY0sa2V5OuaQnOe0ouWtl+autQogICAgICByZXR1cm4gYXhpb3MoCiAgICAgICAgewogICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgIHVybDogJy91c2VyZ3cvYWRtaW4vZWR1c3lzU3RhZmYvc2VsZWN0VXNlckJ5Um9sZUlkJywKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAuLi5wYWdpbiwKICAgICAgICAgICAgc3RhZmZOYW1lOiBrZXkKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRoaXMuc2VydmVyVHlwZQogICAgICApOwogICAgfSwKICAgIGdldFVuZGlzdChrZXkpIHsKICAgICAgLy/mnKrliIbphY0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy51bmRpc3QucGFnaW4ub2Zmc2V0KTsKICAgICAgbGV0IGxhc3RSZXF1ZXNldCA9ICh0aGlzLmxhc3RSZXF1ZXN0MSA9ICsrY291bnQpOwogICAgICByZXR1cm4gdGhpcy5xdWVyeVVzZXIoMSwgdGhpcy51bmRpc3QucGFnaW4sIHRoaXMudW5kaXN0LnN0YWZmTmFtZSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgLy8g5piv5ZCm5piv5pyA5ZCO5LiA5qyh6K+35rGCCiAgICAgICAgICBpZiAobGFzdFJlcXVlc2V0ICE9PSB0aGlzLmxhc3RSZXF1ZXN0MSkgcmV0dXJuOwogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5yZWNvcmRzIHx8IFtdOwogICAgICAgICAgdGhpcy51bmRpc3QubGlzdCA9IHRoaXMudW5kaXN0Lmxpc3QuY29uY2F0KGRhdGEpOwogICAgICAgICAgLy8gdGhpcy5fZWwgJiYgKHRoaXMuX2VsLnNjcm9sbFRvcCA9IHRoaXMuX3Njcm9sbFRvcCk7CiAgICAgICAgICAvLyBpZiAoZGF0YS5sZW5ndGggPT0gdGhpcy51bmRpc3QucGFnaW4ubGltaXQpIHsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5fZWwgJiYgKHRoaXMuX2VsLnNjcm9sbFRvcCA9IHRoaXMuX3Njcm9sbFRvcCk7CiAgICAgICAgICAgIHRoaXMubG9jaygwKTsKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIC8vdGhpcy5sb2NrKDApCiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGlzdChrZXkpIHsKICAgICAgbGV0IGxhc3RSZXF1ZXNldCA9ICh0aGlzLmxhc3RSZXF1ZXN0MiA9ICsrY291bnQpOwogICAgICByZXR1cm4gdGhpcy5xdWVyeVVzZXIoMCwgdGhpcy5kaXN0LnBhZ2luLCB0aGlzLmRpc3Quc3RhZmZOYW1lKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvLyDmmK/lkKbmmK/mnIDlkI7kuIDmrKHor7fmsYIKICAgICAgICAgIGlmIChsYXN0UmVxdWVzZXQgIT09IHRoaXMubGFzdFJlcXVlc3QyKSByZXR1cm47CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLnJlY29yZHMgfHwgW107CiAgICAgICAgICB0aGlzLmRpc3QubGlzdCA9IHRoaXMuZGlzdC5saXN0LmNvbmNhdChkYXRhKTsKICAgICAgICAgIC8vIHRoaXMuX2VsICYmICh0aGlzLl9lbC5zY3JvbGxUb3AgPSB0aGlzLl9zY3JvbGxUb3ApOwogICAgICAgICAgLy8gaWYgKGRhdGEubGVuZ3RoID09IHRoaXMuZGlzdC5wYWdpbi5saW1pdCkgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLl9lbCAmJiAodGhpcy5fZWwuc2Nyb2xsVG9wID0gdGhpcy5fc2Nyb2xsVG9wKTsKICAgICAgICAgICAgdGhpcy5sb2NrKDEpOwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy90aGlzLmxvY2soMSkKICAgICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2goZXYsIHR5cGUpIHsKICAgICAgaWYgKGV2LndoaWNoID09IDEzKSB7CiAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgIHRoaXMuZGlzdC5wYWdpbi5wYWdlID0gMTsKICAgICAgICAgIHRoaXMuZGlzdC5wYWdpbi5vZmZzZXQgPSAwOwogICAgICAgICAgdGhpcy5kaXN0Lmxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMuZ2V0RGlzdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVuZGlzdC5wYWdpbi5wYWdlID0gMTsKICAgICAgICAgIHRoaXMudW5kaXN0LnBhZ2luLm9mZnNldCA9IDA7CiAgICAgICAgICB0aGlzLnVuZGlzdC5saXN0ID0gW107CiAgICAgICAgICB0aGlzLmdldFVuZGlzdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNjcm9sbChldiwgdHlwZSkgewogICAgICAvL3R5cGU6MOacquWIhumFjQogICAgICB2YXIgZWwgPSBldi50YXJnZXQgfHwgZXYuc3JjRWxlbWVudDsKICAgICAgdmFyIG1heCA9IGVsLnNjcm9sbEhlaWdodCAtIE1hdGgubWF4KGVsLmNsaWVudEhlaWdodCwgZWwub2Zmc2V0SGVpZ2h0KTsKICAgICAgLy8gY29uc29sZS5sb2cobWF4LGVsLnNjcm9sbFRvcCk7CiAgICAgIGlmIChtYXggLSBlbC5zY3JvbGxUb3AgPD0gMTApIHsKICAgICAgICBpZiAodGhpc1snX2xvY2snICsgdHlwZV0pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpc1snX2xvY2snICsgdHlwZV0gPSB0cnVlOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuX2VsID0gZWw7CiAgICAgICAgICB0aGlzLl9zY3JvbGxUb3AgPSBlbC5zY3JvbGxUb3A7CiAgICAgICAgICB0eXBlID8gdGhpcy5kaXN0LnBhZ2luLnBhZ2UrKyA6IHRoaXMudW5kaXN0LnBhZ2luLnBhZ2UrKzsKICAgICAgICAgIHR5cGUKICAgICAgICAgICAgPyAodGhpcy5kaXN0LnBhZ2luLm9mZnNldCA9CiAgICAgICAgICAgICAgICAodGhpcy5kaXN0LnBhZ2luLnBhZ2UgLSAxKSAqIHRoaXMuZGlzdC5wYWdpbi5saW1pdCkKICAgICAgICAgICAgOiAodGhpcy51bmRpc3QucGFnaW4ub2Zmc2V0ID0KICAgICAgICAgICAgICAgICh0aGlzLnVuZGlzdC5wYWdpbi5wYWdlIC0gMSkgKiB0aGlzLnVuZGlzdC5wYWdpbi5saW1pdCk7CiAgICAgICAgICB0eXBlID8gdGhpcy5nZXREaXN0KCkgOiB0aGlzLmdldFVuZGlzdCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKE1hdGgucmFuZG9tKCkpOwogICAgfSwKICAgIGFkZCgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnVuZGlzdC5jaGVja2VkKTsKICAgICAgaWYgKCEodGhpcy51bmRpc3QuY2hlY2tlZCAmJiB0aGlzLnVuZGlzdC5jaGVja2VkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq5pyq5YiG6YWN55So5oi3Jyk7CiAgICAgIH0KICAgICAgdGhpcy5kaXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMudXBkYXRlRGlzdERhdGEoCiAgICAgICAgdGhpcy51bmRpc3QuY2hlY2tlZC5tYXAoaXRlbSA9PiBpdGVtLnN0YWZmSWQpLAogICAgICAgIFtdCiAgICAgICkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmRpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudW5kaXN0LmNoZWNrZWQpIHsKICAgICAgICAgICAgdmFyIG0gPSB0aGlzLnVuZGlzdC5jaGVja2VkW2ldOwogICAgICAgICAgICB0aGlzLmRpc3QubGlzdC51bnNoaWZ0KG0pOwogICAgICAgICAgICBkZWxldGVPckZpbmRBcnIodGhpcy51bmRpc3QubGlzdCwgbSwgJycsIDApOwoKICAgICAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEucmVtb3ZlLCBtLnN0YWZmSWQsICcnLCAwKTsKICAgICAgICAgICAgdmFyIHJlcyA9IGRlbGV0ZU9yRmluZEFycih0aGlzLnNhdmVEYXRhLmFkZCwgbS5zdGFmZklkLCAnJywgMCwgMSk7CiAgICAgICAgICAgIGlmIChyZXMubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEuYWRkLnB1c2gobS5zdGFmZklkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5yZWZyZXNoKDApOwogICAgICAgICAgdGhpcy5yZWZyZXNoKDEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNhdmVEYXRhKQogICAgfSwKICAgIHJlbW92ZSgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmRpc3QuY2hlY2tlZCk7CiAgICAgIGlmICghKHRoaXMuZGlzdC5jaGVja2VkICYmIHRoaXMuZGlzdC5jaGVja2VkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq5bey5YiG6YWN55So5oi3Jyk7CiAgICAgIH0KICAgICAgdGhpcy51bmRpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGVEaXN0RGF0YSgKICAgICAgICBbXSwKICAgICAgICB0aGlzLmRpc3QuY2hlY2tlZC5tYXAoaXRlbSA9PiBpdGVtLnN0YWZmSWQpCiAgICAgICkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnVuZGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5kaXN0LmNoZWNrZWQpIHsKICAgICAgICAgICAgdmFyIG0gPSB0aGlzLmRpc3QuY2hlY2tlZFtpXTsKICAgICAgICAgICAgdGhpcy51bmRpc3QubGlzdC51bnNoaWZ0KG0pOwogICAgICAgICAgICBkZWxldGVPckZpbmRBcnIodGhpcy5kaXN0Lmxpc3QsIG0sICcnLCAwKTsKCiAgICAgICAgICAgIGRlbGV0ZU9yRmluZEFycih0aGlzLnNhdmVEYXRhLmFkZCwgbS5zdGFmZklkLCAnJywgMCk7CiAgICAgICAgICAgIHZhciByZXMgPSBkZWxldGVPckZpbmRBcnIoCiAgICAgICAgICAgICAgdGhpcy5zYXZlRGF0YS5yZW1vdmUsCiAgICAgICAgICAgICAgbS5zdGFmZklkLAogICAgICAgICAgICAgICcnLAogICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgMQogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAocmVzLmxlbmd0aCA8IDEpIHsKICAgICAgICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZS5wdXNoKG0uc3RhZmZJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMucmVmcmVzaCgwKTsKICAgICAgICAgIHRoaXMucmVmcmVzaCgxKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnVuZGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNhdmVEYXRhKQogICAgfSwKICAgIC8qKgogICAgICog5L+d5a2Y55So5oi35YiG6YWN5pWw5o2uCiAgICAgKi8KICAgIHNhdmVBbGxvdERhdGEoZGF0YSkgewogICAgICByZXR1cm4gYXhpb3MoCiAgICAgICAgewogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICB1cmw6ICcvdXNlcmd3L2FkbWluL3JvbGVVc2VyL3JvbGVBZGRVc2VyJywKICAgICAgICAgIGRhdGEKICAgICAgICB9LAogICAgICAgIHRoaXMuc2VydmVyVHlwZQogICAgICApOwogICAgfSwKICAgIGhhbmRsZVNhdmUoKSB7CiAgICAgIC8v5L+d5a2YCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2F2ZURhdGEpCiAgICAgIHJldHVybiB0aGlzLnNhdmVBbGxvdERhdGEoewogICAgICAgIC4uLnRoaXMuc2F2ZURhdGEsCiAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc2F2ZURhdGEuYWRkID0gW107CiAgICAgICAgdGhpcy5zYXZlRGF0YS5yZW1vdmUgPSBbXTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOabtOaWsOWIhumFjeaVsOaNrgogICAgICogQHBhcmFtIHtBcnJheX0gYWRkIOa3u+WKoOWIhumFjQogICAgICogQHBhcmFtIHtBcnJheX0gcmVtb3ZlIOenu+mZpOWIhumFjQogICAgICovCiAgICB1cGRhdGVEaXN0RGF0YShhZGQsIHJlbW92ZSkgewogICAgICByZXR1cm4gdGhpcy5zYXZlQWxsb3REYXRhKHsKICAgICAgICBhZGQsCiAgICAgICAgcmVtb3ZlLAogICAgICAgIHJvbGVJZDogdGhpcy4kcm91dGUucXVlcnkucm9sZUlkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNhdmVEYXRhLmFkZCA9IFtdOwogICAgICAgIHRoaXMuc2F2ZURhdGEucmVtb3ZlID0gW107CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDliLfmlrDliJfooagKICAgICAqIC0gMCAo5pyq5YiG6YWN5YiX6KGoKQogICAgICogLSAxICjlt7LliIbphY3liJfooagpCiAgICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSDliLfmlrDku4DkuYjliJfooagKICAgICAqLwogICAgcmVmcmVzaCh0eXBlKSB7CiAgICAgIHZhciBuYW1lID0gdHlwZSA/ICdkaXN0JyA6ICd1bmRpc3QnOwogICAgICAvLyDliLfmlrDliJfooajnmoTmlrnms5UKICAgICAgdmFyIGZuID0gdHlwZSA/IHRoaXMuZ2V0RGlzdCA6IHRoaXMuZ2V0VW5kaXN0OwogICAgICAvLyDliJfooajnmoTlj4LmlbAKICAgICAgdmFyIHBhcmFtID0gdHlwZSA/IHRoaXMuZGlzdCA6IHRoaXMudW5kaXN0OwogICAgICAvLyDmu5rliqjlrrnlmagKICAgICAgdmFyIGVsID0gdGhpcy4kcmVmc1t0eXBlID8gJ2Rpc3QnIDogJ3VuZGlzdCddOwogICAgICBpZiAocGFyYW0ubGlzdC5sZW5ndGgpIHsKICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyYW0ucGFnaW4ub2Zmc2V0OwogICAgICAgIHZhciBsaW1pdCA9IHBhcmFtLnBhZ2luLmxpbWl0OwogICAgICAgIHBhcmFtLnBhZ2luLm9mZnNldCA9IDA7CiAgICAgICAgcGFyYW0ucGFnaW4ubGltaXQgPSBwYXJhbS5saXN0Lmxlbmd0aDsKICAgICAgICB2YXIgcmVzdG9yZSA9ICgpID0+IHsKICAgICAgICAgIHBhcmFtLnBhZ2luLm9mZnNldCA9IG9mZnNldDsKICAgICAgICAgIHBhcmFtLnBhZ2luLmxpbWl0ID0gbGltaXQ7CiAgICAgICAgfTsKICAgICAgICBwYXJhbS5saXN0ID0gW107CiAgICAgICAgZm4oKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICByZXN0b3JlKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKHJlc3RvcmUpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcmFtLnBhZ2luLm9mZnNldCA9IDA7CiAgICAgICAgZm4oKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/score-analysis-admin/components/business/BAllotUser","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"header\">\n      <div class=\"header-right\">\n        <span class=\"current-role\">当前角色：</span>\n        <el-tag>{{ roleName }}</el-tag>\n      </div>\n      <div class=\"header-left\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-arrow-left\"\n          size=\"small\"\n          @click=\"$router.push('/system/role')\"\n          >返回</el-button\n        >\n      </div>\n    </div>\n    <div v-loading=\"loading\" class=\"menu-box\">\n      <el-col :sm=\"10\" class=\"card-box-col\">\n        <el-card class=\"card-box\">\n          <div class=\"card-label tc\">\n            未分配用户\n          </div>\n          <div>\n            <el-input\n              size=\"small\"\n              v-model.trim=\"undist.staffName\"\n              placeholder=\"输入账号或姓名搜索\"\n              @keyup.native=\"search($event, 0)\"\n            />\n          </div>\n\n          <div\n            class=\"user-list\"\n            @scroll=\"scroll($event, 0)\"\n            style=\"overflow-y: auto; height: calc(100vh - 84px - 94px - 126px - 40px); \"\n          >\n            <!-- <el-scrollbar\n              ref=\"scrollbar\"\n              class=\"el-scrollbar_x\"\n              style=\"overflow-y: auto; height: calc(100vh - 84px - 94px - 126px - 40px); \"\n            > -->\n            <el-table\n              size=\"small\"\n              :data=\"undist.list\"\n              border\n              @selection-change=\"\n                res => {\n                  undist.checked = res;\n                }\n              \"\n            >\n              <el-table-column type=\"selection\" align=\"center\" />\n              <el-table-column label=\"账号\" prop=\"staffCode\" />\n              <el-table-column label=\"姓名\" prop=\"staffName\" />\n            </el-table>\n            <!-- </el-scrollbar> -->\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :sm=\"4\" class=\"card-box-col\">\n        <div class=\"card-box tb\" style=\"display: table; width: 100%;\">\n          <div\n            class=\"td\"\n            style=\"vertical-align: middle;text-align:center; display: table-cell;\"\n          >\n            <div class=\"item-btn\">\n              <el-button\n                size=\"small\"\n                :loading=\"distLoading\"\n                type=\"primary\"\n                @click=\"add\"\n              >\n                添加分配\n                <i class=\"el-icon-arrow-right\" />\n              </el-button>\n            </div>\n            <div class=\"item-btn cancelbtn\">\n              <el-button size=\"small\" :loading=\"undistLoading\" @click=\"remove\">\n                <i class=\"el-icon-arrow-left\" />\n                取消分配\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </el-col>\n      <el-col :sm=\"10\" class=\"card-box-col\">\n        <el-card class=\"card-box\">\n          <div class=\"card-label card-label2 tc\">\n            已分配用户\n          </div>\n          <div>\n            <el-input\n              size=\"small\"\n              v-model.trim=\"dist.staffName\"\n              placeholder=\"输入账号或姓名搜索\"\n              @keyup.native=\"search($event, 1)\"\n            />\n          </div>\n\n          <div\n            class=\"user-list\"\n            style=\"height:calc(100vh - 84px - 94px - 126px - 40px);overflow-y: auto; overflow-x: hidden;\"\n            @scroll=\"scroll($event, 1)\"\n          >\n            <!-- <el-scrollbar\n              class=\"el-scrollbar_x\"\n              style=\"height:calc(100vh - 84px - 94px - 126px - 40px);overflow-y: auto; overflow-x: hidden;\"\n            > -->\n            <el-table\n              size=\"small\"\n              :data=\"dist.list\"\n              border\n              @selection-change=\"\n                res => {\n                  dist.checked = res;\n                }\n              \"\n            >\n              <el-table-column type=\"selection\" align=\"center\" />\n              <el-table-column label=\"账号\" prop=\"staffCode\" />\n              <el-table-column label=\"姓名\" prop=\"staffName\" />\n            </el-table>\n            <!-- </el-scrollbar> -->\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n  </div>\n</template>\n<script>\nimport Vue from 'vue';\nimport axios from '@/plugins/axios';\nimport {\n  Card,\n  Tree,\n  Row,\n  Input,\n  Select,\n  Form,\n  FormItem,\n  Col,\n  Table,\n  TableColumn,\n  Scrollbar,\n  Tag,\n  Loading\n} from 'element-ui';\nimport CSvgIcon from '@/components/common/CSvgIcon';\n\nlet count = 0;\n\nfunction deleteOrFindArr(arrData, obj, children, _all, find, replaceArr) {\n  //删除或查找数组中有某个对象的元素. _all代表是否全部删除\n  children = children || 'children'; //obj可以是基本数据类型.replaceArr在删除的位置添加的数据\n  if (!Object.prototype.toString.call(find) === '[object Array]') {\n    find = find ? [] : find;\n  }\n  if (Object.prototype.toString.call(arrData) === '[object Array]') {\n    for (var i = 0; i < arrData.length; i++) {\n      var m = arrData[i],\n        flg = 1;\n      if (obj && typeof obj == 'object') {\n        for (var j in obj) {\n          if (\n            typeof obj[j] == 'function'\n              ? !obj[j](j, m[j], m, arrData, i)\n              : m[j] != obj[j]\n          ) {\n            flg = 0;\n            break;\n          }\n        }\n      } else {\n        if (m != obj) {\n          flg = 0;\n        }\n      }\n      if (flg) {\n        if (find) {\n          find.push(m);\n        } else {\n          if (typeof replaceArr == 'function') {\n            replaceArr = replaceArr(i, m, arrData);\n          }\n          replaceArr =\n            Object.prototype.toString.call(replaceArr) == '[object Array]'\n              ? replaceArr\n              : replaceArr || [];\n          arrData.splice.apply(arrData, [i, 1].concat(replaceArr));\n          i--;\n          _all && (i = i + replaceArr.length);\n        }\n        if (!_all) {\n          break;\n        }\n      }\n      obj &&\n        typeof obj == 'object' &&\n        deleteOrFindArr(m, obj, children, _all, find, replaceArr);\n    }\n  } else if (arrData && typeof arrData == 'object') {\n    Object.prototype.toString.call(arrData[children]) === '[object Array]' &&\n      deleteOrFindArr(arrData[children], obj, children, _all, find, replaceArr);\n  }\n  return find;\n}\n\nVue.use(Loading);\nexport default {\n  name: 'BAllotUser',\n  components: {\n    [Card.name]: Card,\n    [Tree.name]: Tree,\n    [Row.name]: Row,\n    [Col.name]: Col,\n    [Input.name]: Input,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    [CSvgIcon.name]: CSvgIcon,\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n    [Scrollbar.name]: Scrollbar,\n    [Tag.name]: Tag\n  },\n  props: {\n    /**\n     * 服务器类型\n     */\n    serverType: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      roleName: '',\n      listLoading: false,\n      dist: {\n        //已分配用户\n        pagin: {\n          roleId: this.$route.query.roleId,\n          limit: 50,\n          page: 1,\n          offset: 0\n        },\n        staffName: '', //搜索字段\n        checked: [],\n        list: []\n      },\n      undist: {\n        //未分配用户\n        pagin: {\n          roleId: this.$route.query.roleId,\n          limit: 50,\n          page: 1,\n          offset: 0\n        },\n        staffName: '',\n        checked: [],\n        list: [\n          // { id: 1, name: \"张三\", number: \"100011\" }\n        ]\n      },\n      saveData: {\n        //已分配用户\n        add: [], //添加了\n        remove: [] //移除了\n      },\n      distLoading: false, // 分配中\n      undistLoading: false, // 取消分配中\n      loading: false, // 加载中\n      lastRequest1: null,\n      lastRequest2: null\n    };\n  },\n  created() {\n    var roleId = this.$route.query.roleId;\n    if (!roleId) {\n      return this.$router.go(-1);\n    }\n    this.loading = true;\n    Promise.all([this.getUndist(), this.getDist()])\n      .then(() => {\n        return axios(\n          {\n            method: 'GET',\n            url: `/usergw/admin/roleAuth/getRoleName/${roleId}`\n          },\n          this.serverType\n        );\n      })\n      .then(res => {\n        this.roleName = res.data;\n        this.loading = false;\n      })\n      .catch(() => {\n        this.loading = false;\n      });\n  },\n  methods: {\n    lock(type) {\n      setTimeout(() => {\n        this['_lock' + type] = false;\n      }, 50);\n    },\n    /**\n     * 查询用户列表\n     */\n    queryUser(type, pagin, key) {\n      // type=0分配  1未分配,key:搜索字段\n      return axios(\n        {\n          method: 'GET',\n          url: '/usergw/admin/edusysStaff/selectUserByRoleId',\n          params: {\n            type: type,\n            ...pagin,\n            staffName: key\n          }\n        },\n        this.serverType\n      );\n    },\n    getUndist(key) {\n      //未分配\n      // console.log(this.undist.pagin.offset);\n      let lastRequeset = (this.lastRequest1 = ++count);\n      return this.queryUser(1, this.undist.pagin, this.undist.staffName)\n        .then(res => {\n          // 是否是最后一次请求\n          if (lastRequeset !== this.lastRequest1) return;\n          var data = res.data.records || [];\n          this.undist.list = this.undist.list.concat(data);\n          // this._el && (this._el.scrollTop = this._scrollTop);\n          // if (data.length == this.undist.pagin.limit) {\n          this.$nextTick(() => {\n            this._el && (this._el.scrollTop = this._scrollTop);\n            this.lock(0);\n          });\n          // }\n        })\n        .catch(() => {\n          //this.lock(0)\n        });\n    },\n    getDist(key) {\n      let lastRequeset = (this.lastRequest2 = ++count);\n      return this.queryUser(0, this.dist.pagin, this.dist.staffName)\n        .then(res => {\n          // 是否是最后一次请求\n          if (lastRequeset !== this.lastRequest2) return;\n          var data = res.data.records || [];\n          this.dist.list = this.dist.list.concat(data);\n          // this._el && (this._el.scrollTop = this._scrollTop);\n          // if (data.length == this.dist.pagin.limit) {\n          this.$nextTick(() => {\n            this._el && (this._el.scrollTop = this._scrollTop);\n            this.lock(1);\n          });\n          // }\n        })\n        .catch(() => {\n          //this.lock(1)\n        });\n    },\n    search(ev, type) {\n      if (ev.which == 13) {\n        if (type) {\n          this.dist.pagin.page = 1;\n          this.dist.pagin.offset = 0;\n          this.dist.list = [];\n          this.getDist();\n        } else {\n          this.undist.pagin.page = 1;\n          this.undist.pagin.offset = 0;\n          this.undist.list = [];\n          this.getUndist();\n        }\n      }\n    },\n    scroll(ev, type) {\n      //type:0未分配\n      var el = ev.target || ev.srcElement;\n      var max = el.scrollHeight - Math.max(el.clientHeight, el.offsetHeight);\n      // console.log(max,el.scrollTop);\n      if (max - el.scrollTop <= 10) {\n        if (this['_lock' + type]) {\n          return;\n        }\n        this['_lock' + type] = true;\n        this.$nextTick(() => {\n          this._el = el;\n          this._scrollTop = el.scrollTop;\n          type ? this.dist.pagin.page++ : this.undist.pagin.page++;\n          type\n            ? (this.dist.pagin.offset =\n                (this.dist.pagin.page - 1) * this.dist.pagin.limit)\n            : (this.undist.pagin.offset =\n                (this.undist.pagin.page - 1) * this.undist.pagin.limit);\n          type ? this.getDist() : this.getUndist();\n        });\n      }\n      // console.log(Math.random());\n    },\n    add() {\n      //console.log(this.undist.checked);\n      if (!(this.undist.checked && this.undist.checked.length > 0)) {\n        return this.$message.warning('请至少选择一个未分配用户');\n      }\n      this.distLoading = true;\n      this.updateDistData(\n        this.undist.checked.map(item => item.staffId),\n        []\n      )\n        .then(() => {\n          this.distLoading = false;\n          for (var i in this.undist.checked) {\n            var m = this.undist.checked[i];\n            this.dist.list.unshift(m);\n            deleteOrFindArr(this.undist.list, m, '', 0);\n\n            deleteOrFindArr(this.saveData.remove, m.staffId, '', 0);\n            var res = deleteOrFindArr(this.saveData.add, m.staffId, '', 0, 1);\n            if (res.length < 1) {\n              this.saveData.add.push(m.staffId);\n            }\n          }\n          this.refresh(0);\n          this.refresh(1);\n        })\n        .catch(() => {\n          this.distLoading = false;\n        });\n      //console.log(this.saveData)\n    },\n    remove() {\n      //console.log(this.dist.checked);\n      if (!(this.dist.checked && this.dist.checked.length > 0)) {\n        return this.$message.warning('请至少选择一个已分配用户');\n      }\n      this.undistLoading = true;\n      this.updateDistData(\n        [],\n        this.dist.checked.map(item => item.staffId)\n      )\n        .then(() => {\n          this.undistLoading = false;\n          for (var i in this.dist.checked) {\n            var m = this.dist.checked[i];\n            this.undist.list.unshift(m);\n            deleteOrFindArr(this.dist.list, m, '', 0);\n\n            deleteOrFindArr(this.saveData.add, m.staffId, '', 0);\n            var res = deleteOrFindArr(\n              this.saveData.remove,\n              m.staffId,\n              '',\n              0,\n              1\n            );\n            if (res.length < 1) {\n              this.saveData.remove.push(m.staffId);\n            }\n          }\n          this.refresh(0);\n          this.refresh(1);\n        })\n        .catch(() => {\n          this.undistLoading = false;\n        });\n      //console.log(this.saveData)\n    },\n    /**\n     * 保存用户分配数据\n     */\n    saveAllotData(data) {\n      return axios(\n        {\n          method: 'POST',\n          url: '/usergw/admin/roleUser/roleAddUser',\n          data\n        },\n        this.serverType\n      );\n    },\n    handleSave() {\n      //保存\n      // console.log(this.saveData)\n      return this.saveAllotData({\n        ...this.saveData,\n        roleId: this.$route.query.roleId\n      }).then(res => {\n        this.saveData.add = [];\n        this.saveData.remove = [];\n        this.$message.success('保存成功');\n      });\n    },\n    /**\n     * 更新分配数据\n     * @param {Array} add 添加分配\n     * @param {Array} remove 移除分配\n     */\n    updateDistData(add, remove) {\n      return this.saveAllotData({\n        add,\n        remove,\n        roleId: this.$route.query.roleId\n      }).then(res => {\n        this.saveData.add = [];\n        this.saveData.remove = [];\n        this.$message.success('保存成功');\n      });\n    },\n    /**\n     * 刷新列表\n     * - 0 (未分配列表)\n     * - 1 (已分配列表)\n     * @param {Number} type 刷新什么列表\n     */\n    refresh(type) {\n      var name = type ? 'dist' : 'undist';\n      // 刷新列表的方法\n      var fn = type ? this.getDist : this.getUndist;\n      // 列表的参数\n      var param = type ? this.dist : this.undist;\n      // 滚动容器\n      var el = this.$refs[type ? 'dist' : 'undist'];\n      if (param.list.length) {\n        var offset = param.pagin.offset;\n        var limit = param.pagin.limit;\n        param.pagin.offset = 0;\n        param.pagin.limit = param.list.length;\n        var restore = () => {\n          param.pagin.offset = offset;\n          param.pagin.limit = limit;\n        };\n        param.list = [];\n        fn()\n          .then(() => {\n            restore();\n          })\n          .catch(restore);\n      } else {\n        param.pagin.offset = 0;\n        fn();\n      }\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.header {\n  margin-bottom: 15px;\n  &-right {\n    float: right;\n    font-size: 14px;\n    line-height: 32px;\n    .current-role {\n      font-weight: bold;\n    }\n  }\n}\n.menu-box {\n  &::after {\n    display: block;\n    content: '';\n    clear: both;\n  }\n  .card-box {\n    height: calc(100vh - 84px - 94px - 60px);\n    margin-bottom: 0;\n    overflow: hidden;\n    position: relative;\n    padding-top: 58px;\n    &.card-auto {\n      height: auto;\n    }\n    .card-label {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      background: #4072ee;\n      padding: 18px 0 20px;\n      color: #fff;\n      z-index: 2;\n      font-size: 14px;\n      text-align: center;\n      // height: 58px;\n    }\n    .card-label2 {\n      background: #0e5ebb;\n    }\n    .card-list {\n      margin: -20px;\n      > .card-item {\n        padding: 6px 10px;\n        cursor: pointer;\n        font-size: 14px;\n        &:hover {\n          background: #e6e6e6;\n        }\n      }\n    }\n    .user-list {\n      margin: 20px -20px 0;\n      padding: 0 20px;\n    }\n    .item-btn {\n      & + .item-btn {\n        margin-top: 15px;\n      }\n    }\n  }\n}\n.el-scrollbar_x /deep/ .el-scrollbar__wrap {\n  overflow-x: hidden;\n}\n</style>\n"]}]}