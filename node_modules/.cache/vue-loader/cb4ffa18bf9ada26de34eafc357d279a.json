{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/taskList/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/taskList/index.vue","mtime":1645176309692},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IExpbmssIEJ1dHRvbiB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgQ1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ1RhYmxlJzsKaW1wb3J0IHsKICBtYW5hZ2VHZXRUYXNrTGlzdCwKICBjb21wbGV0ZVRhc2ssCiAgaXNIYXZlVGFza05hbWUKfSBmcm9tICcuLi8uLi9hcGkvdGFzayc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuZW1lOiAnVGFza0xpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIFtMaW5rLm5hbWVdOiBMaW5rLAogICAgW0J1dHRvbi5uYW1lXTogQnV0dG9uLAogICAgQ1RhYmxlCiAgfSwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXR0ZXJUaW1lKHZhbCkgewogICAgICBpZiAoIXZhbCkgcmV0dXJuICctJzsKICAgICAgcmV0dXJuIHZhbC5zcGxpdCgnVCcpWzBdOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+W6j+WPtycsCiAgICAgICAgICB0eXBlOiAnaW5kZXgnLAogICAgICAgICAgd2lkdGg6IDgwCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+S7u+WKoeWQjeensCcsCiAgICAgICAgICBwcm9wOiAndGFza05hbWUnLAogICAgICAgICAgY29sVHlwZTogJ2NvbHVtbicsCiAgICAgICAgICBzbG90TmFtZTogJ2xpbmsnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aPkOS6pOaXtumXtCcsCiAgICAgICAgICBwcm9wOiAnY3JlYXRlVGltZScsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAndGltZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn6L+b56iLJywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdidG5zJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIHByb3A6ICduYW1lJywKICAgICAgICAgIGJ0bnM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGxhYmVsOiAn5Yqe57uTJywKICAgICAgICAgICAgICBzaXplOiAnc21hbGwnLAogICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICBjbGljazogKHJvdywgcm93SW5kZXgsIGJ0bkluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyb3csIHJvd0luZGV4LCBidG5JbmRleCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICflt7Llip7nu5MnLAogICAgICAgICAgICAgIHNpemU6ICdzbWFsbCcsCiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICBdLAogICAgICBsb2FkaW5nOiB0cnVlIC8vIOWIl+ihqOaYr+WQpuWKoOi9veS4rQogICAgfTsKICB9LAogIC8v55uR5ZCs5bGe5oCnIOexu+S8vOS6jmRhdGHmpoLlv7UKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ3N0YWZmTmFtZSddKQogIH0sCiAgLy/nm5HmjqdkYXRh5Lit55qE5pWw5o2u5Y+Y5YyWCiAgd2F0Y2g6IHt9LAoKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOiOt+WPluS7u+WKoeWIl+ihqAogICAgICovCiAgICBtYW5hZ2VHZXRUYXNrTGlzdCgpIHsKICAgICAgbWFuYWdlR2V0VGFza0xpc3QoKQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlip7nu5MKICAgICAqLwogICAgb25Db21wZWxldGUocm93KSB7CiAgICAgIGlmIChyb3cudGFza05hbWUpIHsKICAgICAgICB0aGlzLiRjb25maXJtKAogICAgICAgICAgJ+ehruWumuWKnue7k+ivpeS7u+WKoe+8nzxicj7lip7nu5PlkI7mnKrmj5DkuqTlrabmoKHljZXkvY3lsIbml6Dms5Xmj5DkuqQnLAogICAgICAgICAgJ+aPkOmGkicsCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu6K6kJywKICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlCiAgICAgICAgICB9CiAgICAgICAgKS50aGVuKCgpID0+IHsKICAgICAgICAgIGNvbXBsZXRlVGFzayh7IHRhc2tOYW1lOiByb3cudGFza05hbWUgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubWFuYWdlR2V0VGFza0xpc3QoKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8hJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+S7u+WKoeWQjeensOS4jeWtmOWcqO+8jOivt+iBlOezu+euoeeQhuWRmCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog5paw5aKe5Lu75YqhCiAgICAgKi8KICAgIG9uQ2xpY2tOZXdUYXNrKCkgewogICAgICBjb25zb2xlLmxvZygnYWRkJyk7CiAgICAgIHRoaXMuJHByb21wdCgnJywgJ+aWsOW7uuS7u+WKoScsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruiupCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgaW5wdXRQYXR0ZXJuOiAvXi57MSwyMH0kLywKICAgICAgICBpbnB1dEVycm9yTWVzc2FnZTogJ+S7u+WKoeWQjeensOmcgOWcqDEtMjDkvY0nLAogICAgICAgIGlucHV0UGxhY2Vob2xkZXI6ICfor7fovpPlhaXku7vliqHlkI3np7AnLAogICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICBzaG93Q2xvc2U6IGZhbHNlCiAgICAgIH0pLnRoZW4oKHsgdmFsdWUgfSkgPT4gewogICAgICAgIGlzSGF2ZVRhc2tOYW1lKHsgdGFza05hbWU6IHZhbHVlIH0pLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAvLyBkYXRhOnRydWXnlKjmiLflkI3lrZjlnKgs5LiN5Y+v5paw5aKeCiAgICAgICAgICAvLyBkYXRhOmZhbHNl55So5oi35ZCN5LiN5a2Y5ZyoLOWPr+aWsOWingogICAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+S7u+WKoeWQjeensOW3suWtmOWcqO+8jOivt+mHjeaWsOWhq+WGmScsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIHBhdGg6ICcvbmV3LXRhc2svaW5kZXgnLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICB0YXNrTmFtZTogdmFsdWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOi3s+i9rOWIsOS7u+WKoeivpuaDhQogICAgICovCiAgICBvbkp1bXAocm93KSB7CiAgICAgIGlmIChyb3cuc3RhdHVzID09PSAnMCcpIHsKICAgICAgICAvLyDmnKrlip7nu5MKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL3Rhc2stZGV0aWFsL25vdC1jb21wbGV0ZScsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICB0YXNrTmFtZTogcm93LnRhc2tOYW1lCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocm93LnN0YXR1cyA9PT0gJzEnKSB7CiAgICAgICAgLy8g5bey5Yqe57uTCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy90YXNrLWRldGlhbC9jb21wbGV0ZScsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICB0YXNrTmFtZTogcm93LnRhc2tOYW1lCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIC8v55Sf5ZG95ZGo5pyfIC0g5Yib5bu65a6M5oiQ77yI5Y+v5Lul6K6/6Zeu5b2T5YmNdGhpc+WunuS+i++8iQogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm1hbmFnZUdldFRhc2tMaXN0KCk7CiAgfSwKICAvL+eUn+WRveWRqOacnyAtIOaMgui9veWujOaIkO+8iOWPr+S7peiuv+mXrkRPTeWFg+e0oO+8iQogIG1vdW50ZWQoKSB7fSwKICBiZWZvcmVDcmVhdGUoKSB7fSwKICBiZWZvcmVNb3VudCgpIHt9LAogIGJlZm9yZVVwZGF0ZSgpIHt9LAogIHVwZGF0ZWQoKSB7fSwKICBiZWZvcmVEZXN0cm95KCkge30sCiAgZGVzdHJveWVkKCkge30sCiAgLy/lpoLmnpzpobXpnaLmnIlrZWVwLWFsaXZl57yT5a2Y5Yqf6IO977yM6L+Z5Liq5Ye95pWw5Lya6Kem5Y+RCiAgYWN0aXZhdGVkKCkge30KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/bonus-tool-admin/views/taskList","sourcesContent":["<!-- 任务列表 -->\n<template>\n  <div class=\"app-container\">\n    <div class=\"common-title\">任务列表</div>\n    <div class=\"common-container\">\n      <!-- 头部 -->\n      <div class=\"common-header\">\n        <div class=\"common-header-left\">\n          <el-button\n            type=\"primary\"\n            size=\"medium\"\n            :loading=\"loading\"\n            @click=\"onClickNewTask\"\n          >\n            新增任务\n          </el-button>\n        </div>\n        <div class=\"common-header-right\"></div>\n      </div>\n      <div v-if=\"tableData.length > 0\">\n        <c-table\n          v-loading=\"loading\"\n          :headers=\"headers\"\n          :data=\"tableData\"\n          border\n        >\n          <template slot=\"column|time\" slot-scope=\"{ row }\">\n            {{ row.createTime | formatterTime }}\n          </template>\n          <template slot=\"column|link\" slot-scope=\"{ row }\">\n            <el-link type=\"primary\" @click=\"onJump(row)\">{{\n              row.taskName\n            }}</el-link>\n          </template>\n          <template slot=\"column|btns\" slot-scope=\"{ row }\">\n            <el-button\n              class=\"btn-blue\"\n              v-if=\"row.status === '0'\"\n              type=\"primary\"\n              plain\n              @click=\"onCompelete(row)\"\n              >办结</el-button\n            >\n            <span v-if=\"row.status === '1'\" class=\"btn-red\">已办结</span>\n          </template>\n        </c-table>\n      </div>\n      <div v-else class=\"empty\">\n        <img\n          class=\"empty-task\"\n          src=\"../../assets/images/empty.png\"\n          alt=\"\"\n          srcset=\"\"\n        />\n        <span>暂无数据~</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Link, Button } from 'element-ui';\nimport CTable from '@/components/common/CTable';\nimport {\n  manageGetTaskList,\n  completeTask,\n  isHaveTaskName\n} from '../../api/task';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  neme: 'TaskList',\n  components: {\n    [Link.name]: Link,\n    [Button.name]: Button,\n    CTable\n  },\n  filters: {\n    formatterTime(val) {\n      if (!val) return '-';\n      return val.split('T')[0];\n    }\n  },\n  data() {\n    return {\n      tableData: [],\n      headers: [\n        {\n          label: '序号',\n          type: 'index',\n          width: 80\n        },\n        {\n          label: '任务名称',\n          prop: 'taskName',\n          colType: 'column',\n          slotName: 'link'\n        },\n        {\n          label: '提交时间',\n          prop: 'createTime',\n          colType: 'column',\n          slotName: 'time'\n        },\n        {\n          label: '进程',\n          colType: 'column',\n          slotName: 'btns',\n          align: 'center',\n          prop: 'name',\n          btns: [\n            {\n              label: '办结',\n              size: 'small',\n              type: 'text',\n              click: (row, rowIndex, btnIndex) => {\n                console.log(row, rowIndex, btnIndex);\n              }\n            },\n            {\n              label: '已办结',\n              size: 'small',\n              type: 'text',\n              hidden: true\n            }\n          ]\n        }\n      ],\n      loading: true // 列表是否加载中\n    };\n  },\n  //监听属性 类似于data概念\n  computed: {\n    ...mapGetters(['staffName'])\n  },\n  //监控data中的数据变化\n  watch: {},\n\n  methods: {\n    /**\n     * 获取任务列表\n     */\n    manageGetTaskList() {\n      manageGetTaskList()\n        .then(({ data }) => {\n          this.tableData = data;\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    /**\n     * 办结\n     */\n    onCompelete(row) {\n      if (row.taskName) {\n        this.$confirm(\n          '确定办结该任务？<br>办结后未提交学校单位将无法提交',\n          '提醒',\n          {\n            confirmButtonText: '确认',\n            cancelButtonText: '取消',\n            center: true,\n            showClose: false,\n            dangerouslyUseHTMLString: true\n          }\n        ).then(() => {\n          completeTask({ taskName: row.taskName }).then(() => {\n            this.manageGetTaskList();\n            this.$message({\n              type: 'success',\n              message: '操作成功!'\n            });\n          });\n        });\n      } else {\n        this.$message({\n          message: '任务名称不存在，请联系管理员',\n          type: 'warning'\n        });\n      }\n    },\n    /**\n     * 新增任务\n     */\n    onClickNewTask() {\n      console.log('add');\n      this.$prompt('', '新建任务', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        inputPattern: /^.{1,20}$/,\n        inputErrorMessage: '任务名称需在1-20位',\n        inputPlaceholder: '请输入任务名称',\n        center: true,\n        showClose: false\n      }).then(({ value }) => {\n        isHaveTaskName({ taskName: value }).then(({ data }) => {\n          // data:true用户名存在,不可新增\n          // data:false用户名不存在,可新增\n          if (data) {\n            this.$message({\n              message: '任务名称已存在，请重新填写',\n              type: 'warning'\n            });\n          } else {\n            this.$router.push({\n              path: '/new-task/index',\n              query: {\n                taskName: value\n              }\n            });\n          }\n        });\n      });\n    },\n    /**\n     * 跳转到任务详情\n     */\n    onJump(row) {\n      if (row.status === '0') {\n        // 未办结\n        this.$router.push({\n          path: '/task-detial/not-complete',\n          query: {\n            taskName: row.taskName\n          }\n        });\n      } else if (row.status === '1') {\n        // 已办结\n        this.$router.push({\n          path: '/task-detial/complete',\n          query: {\n            taskName: row.taskName\n          }\n        });\n      }\n    }\n  },\n  //生命周期 - 创建完成（可以访问当前this实例）\n  created() {\n    this.manageGetTaskList();\n  },\n  //生命周期 - 挂载完成（可以访问DOM元素）\n  mounted() {},\n  beforeCreate() {},\n  beforeMount() {},\n  beforeUpdate() {},\n  updated() {},\n  beforeDestroy() {},\n  destroyed() {},\n  //如果页面有keep-alive缓存功能，这个函数会触发\n  activated() {}\n};\n</script>\n<style lang=\"less\" scoped>\n@import url('../../assets/less/global/variable.less');\n/deep/ .el-table td {\n  padding: 6px 0;\n}\n.app-container {\n  .empty {\n    position: absolute;\n    left: 0;\n    top: 50px;\n    right: 0;\n    bottom: 0;\n    font-size: 14px;\n    color: rgba(0, 0, 0, 0.45);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n  .btn-blue {\n    width: 88px;\n    height: 32px;\n    line-height: 32px;\n    text-align: center;\n    background: #ffffff;\n    border-radius: 4px;\n    border: 1px solid #0076f6;\n    color: #0076f6;\n    padding: 0;\n    :hover {\n      color: #0076f6;\n    }\n  }\n  .btn-red {\n    display: inline-block;\n    width: 88px;\n    height: 32px;\n    line-height: 32px;\n    text-align: center;\n    border-radius: 4px;\n    border: 1px solid transparent;\n    font-size: 12px;\n    color: #ff4635;\n  }\n}\n</style>\n"]}]}