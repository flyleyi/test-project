{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/h5/views/sims/enrollFill/FamilyInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/h5/views/sims/enrollFill/FamilyInfo.vue","mtime":1627979214309},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgRm9ybSwKICBGaWVsZCwKICBQaWNrZXIsCiAgUG9wdXAsCiAgRGF0ZXRpbWVQaWNrZXIsCiAgUmFkaW9Hcm91cCwKICBSYWRpbywKICBBcmVhLAogIFVwbG9hZGVyLAogIEJ1dHRvbgp9IGZyb20gJ3ZhbnQnOwppbXBvcnQgewogIGNvZGVDb252ZXJ0ZXJOYW1lLAogIGdldEFyZWFEYXRhCn0gZnJvbSAnQC9wYWdlcy9zaW1zL3BsdWdpbnMvY29tbW9uL2FyZWEnOwppbXBvcnQgQ1NlbGVjdFBpY2tlciBmcm9tICdAL3BhZ2VzL2g1L2NvbXBvbmVudHMvY29tbW9uL0NTZWxlY3RQaWNrZXIudnVlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uLy4uLy4uL3N0b3JlL2luZGV4JzsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsKaW1wb3J0IG1peGlucyBmcm9tICcuL21peGlucyc7CmltcG9ydCB7IHNhdmVPclVwZGF0ZUVucm9sbEZhbWlseUg1IH0gZnJvbSAnQC9wYWdlcy9oNS9hcGkvc2ltcy9lbnJvbGxGaWxsJzsKaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgUGFnZUhlYWRlciBmcm9tICcuLi9jb21wb25lbnRzL3BhZ2VIZWFkZXIudnVlJzsKaW1wb3J0IEZpZWxkSWNvbiBmcm9tICcuLi9jb21wb25lbnRzL0ZpZWxkSWNvbi52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0ZhbWlseUluZm8nLAogIG1peGluczogW21peGluc10sCiAgY29tcG9uZW50czogewogICAgW0Zvcm0ubmFtZV06IEZvcm0sCiAgICBbRmllbGQubmFtZV06IEZpZWxkLAogICAgW1BpY2tlci5uYW1lXTogUGlja2VyLAogICAgW1BvcHVwLm5hbWVdOiBQb3B1cCwKICAgIFtEYXRldGltZVBpY2tlci5uYW1lXTogRGF0ZXRpbWVQaWNrZXIsCiAgICBbUmFkaW9Hcm91cC5uYW1lXTogUmFkaW9Hcm91cCwKICAgIFtSYWRpby5uYW1lXTogUmFkaW8sCiAgICBbQXJlYS5uYW1lXTogQXJlYSwKICAgIFtVcGxvYWRlci5uYW1lXTogVXBsb2FkZXIsCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sCiAgICBDU2VsZWN0UGlja2VyLAogICAgUGFnZUhlYWRlciwKICAgIEZpZWxkSWNvbgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFyZWFMaXN0OiBnZXRBcmVhRGF0YSgpLCAvLyDlnLDlnYDkv6Hmga8KICAgICAgY29sdW1uczogWyfmna3lt54nLCAn5a6B5rOiJywgJ+a4qeW3nicsICfnu43lhbQnLCAn5rmW5beeJywgJ+WYieWFtCcsICfph5HljY4nLCAn6KGi5beeJ10sCiAgICAgIHNob3dQb3N0YWxBZGRyZXNzUGlja2VyOiBmYWxzZSwgLy8g6YCa6K6v5Zyw5Z2A5pi+6ZqQCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgcG9zdGFsQWRkcmVzczogJycsCiAgICAgICAgY29tbXVuaWNhdGlvblByb3ZpbmNlOiAnJywKICAgICAgICBjb21tdW5pY2F0aW9uQ2l0eTogJycsCiAgICAgICAgY29tbXVuaWNhdGlvbkFyZWE6ICcnLAogICAgICAgIGNvbW11bmljYXRpb25BZGRyOiAnJywKICAgICAgICBicm9rZW5Ib21lOiBudWxsLAogICAgICAgIGZhbWlseUluY29kZTogJycsCiAgICAgICAgc3R1RmFtaWx5TW9kZWxMaXN0OiBbXQogICAgICB9LAogICAgICBmYXRoZXJJbmZvOiB7fSwKICAgICAgbW90aGVySW5mbzoge30sCiAgICAgIGd1YXJkaWFuSW5mbzoge30KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJ3BhZ2VEYXRhLmVucm9sbEZhbWlseU1vZGVsJzogewogICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIHRoaXMuaW5pdERhdGEobmV3VmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Zue6YCACiAgICBvbkJhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBwYXRoOiAnL3NpbXMvZW50cm9sbEZpbGwvaWRlbnRpdHlJbmZvJywKICAgICAgICBxdWVyeTogdGhpcy4kcm91dGUucXVlcnkKICAgICAgfSk7CiAgICB9LAogICAgLy8g6KGo5Y2V5o+Q5LqkCiAgICBvblN1Ym1pdCh2YWxzKSB7CiAgICAgIGxldCBsb2FkaW5nID0gVG9hc3QubG9hZGluZygpOwogICAgICAvL+S/neWtmOi6q+S7veS/oeaBrwogICAgICBzYXZlT3JVcGRhdGVFbnJvbGxGYW1pbHlINSh7CiAgICAgICAgLi4udGhpcy5mb3JtRGF0YSwKICAgICAgICBzdGFmZkNvZGU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnN0YWZmQ29kZQogICAgICB9KQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICcvc2ltcy9lbnRyb2xsRmlsbC9lbnJvbGxJbmZvJywKICAgICAgICAgICAgcXVlcnk6IHRoaXMuJHJvdXRlLnF1ZXJ5CiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgIFRvYXN0LmZhaWwoZS5tZXNzYWdlKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIOiBjOS4muOAgeWtpuWOhumAieaLqeWIh+aNogogICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW0g55uR5oqk5Lq65a+56LGhCiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IOimgeS/ruaUueeahGtleQogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbCDpgInkuK3pobkKICAgICAqLwogICAgb25TZWxlY3RDaGFuZ2UoaXRlbSwga2V5LCB2YWwpIHsKICAgICAgaXRlbVtrZXldID0gdmFsLmxhYmVsOwogICAgfSwKICAgIC8qKgogICAgICog6YCa6K6v5Zyw5Z2ACiAgICAgKi8KICAgIG9uQ29uZmlybVBvc3RhbEFkZHJlc3ModmFsKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuY29tbXVuaWNhdGlvblByb3ZpbmNlID0gdmFsWzBdLmNvZGU7CiAgICAgIHRoaXMuZm9ybURhdGEuY29tbXVuaWNhdGlvbkNpdHkgPSB2YWxbMV0uY29kZTsKICAgICAgdGhpcy5mb3JtRGF0YS5jb21tdW5pY2F0aW9uQXJlYSA9IHZhbFsyXS5jb2RlOwogICAgICB0aGlzLmZvcm1EYXRhLnBvc3RhbEFkZHJlc3MgPSB0aGlzLmdldEFkZHJlc3MoCiAgICAgICAgdmFsWzBdLmNvZGUsCiAgICAgICAgdmFsWzFdLmNvZGUsCiAgICAgICAgdmFsWzJdLmNvZGUKICAgICAgKTsKICAgICAgdGhpcy5zaG93UG9zdGFsQWRkcmVzc1BpY2tlciA9IGZhbHNlOwogICAgfSwKICAgIC8v5Yid5aeL5YyW5pWw5o2uCiAgICBpbml0RGF0YShuZXdWYWwpIHsKICAgICAgbGV0IHsKICAgICAgICBjb21tdW5pY2F0aW9uUHJvdmluY2UsCiAgICAgICAgY29tbXVuaWNhdGlvbkNpdHksCiAgICAgICAgY29tbXVuaWNhdGlvbkFyZWEKICAgICAgfSA9IG5ld1ZhbDsKICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1EYXRhLCBuZXdWYWwpOwogICAgICAvL+abtOaWsOaIt+exjeWcsOWdgAogICAgICBpZiAoY29tbXVuaWNhdGlvblByb3ZpbmNlKSB7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5wb3N0YWxBZGRyZXNzID0gdGhpcy5nZXRBZGRyZXNzKAogICAgICAgICAgY29tbXVuaWNhdGlvblByb3ZpbmNlLAogICAgICAgICAgY29tbXVuaWNhdGlvbkNpdHksCiAgICAgICAgICBjb21tdW5pY2F0aW9uQXJlYQogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOiOt+WPluWcsOWdgAogICAgICovCiAgICBnZXRBZGRyZXNzKHByb3ZpbmNlQ29kZSwgY2l0eUNvZGUsIGNvdW50eUNvZGUpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICBjb2RlQ29udmVydGVyTmFtZShwcm92aW5jZUNvZGUpLAogICAgICAgIGNvZGVDb252ZXJ0ZXJOYW1lKGNpdHlDb2RlKSwKICAgICAgICBjb2RlQ29udmVydGVyTmFtZShjb3VudHlDb2RlKQogICAgICBdCiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0pCiAgICAgICAgLmpvaW4oJy8nKTsKICAgIH0sCiAgICAvLyDplb/luqbmoKHpqowKICAgIGxlbmd0aFBhdHRlcm4oc3RyKSB7CiAgICAgIGlmICghc3RyKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIC9eLnsyLDIwfSQvLnRlc3Qoc3RyKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["FamilyInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FamilyInfo.vue","sourceRoot":"src/pages/h5/views/sims/enrollFill","sourcesContent":["<template>\n  <div class=\"sims-app-container\">\n    <page-header :index=\"1\"></page-header>\n    <div class=\"sims-form-title\">\n      <span class=\"zh\">家庭信息</span>\n      <span class=\"en\">FAMILY INFORMATION</span>\n    </div>\n    <van-form class=\"sims-form\" ref=\"form\" label-align=\"right\">\n      <van-field\n        v-model=\"formData.postalAddress\"\n        readonly\n        clickable\n        name=\"area\"\n        label=\"通讯地址\"\n        placeholder=\"请选择\"\n        class=\"w-5em\"\n        @click=\"showPostalAddressPicker = true\"\n      >\n        <field-icon slot=\"right-icon\" icon=\"icon_location\" />\n      </van-field>\n      <van-popup v-model=\"showPostalAddressPicker\" position=\"bottom\">\n        <van-area\n          :value=\"formData.communicationArea\"\n          :area-list=\"areaList\"\n          item-height=\"0.8rem\"\n          @confirm=\"onConfirmPostalAddress\"\n          @cancel=\"showPostalAddressPicker = false\"\n        />\n      </van-popup>\n      <van-field\n        v-model=\"formData.communicationAddr\"\n        name=\"详细地址\"\n        label=\"详细地址\"\n        maxlength=\"50\"\n        placeholder=\"请输入\"\n        class=\"w-5em\"\n      />\n      <van-field name=\"radio\" label=\"是否离异\" class=\"w-5em\">\n        <template #input>\n          <van-radio-group v-model=\"formData.brokenHome\" direction=\"horizontal\">\n            <van-radio :name=\"true\">是</van-radio>\n            <van-radio :name=\"false\">否</van-radio>\n          </van-radio-group>\n        </template>\n      </van-field>\n      <c-select-picker\n        v-model=\"formData.familyIncode\"\n        label=\"家庭年收入\"\n        value-key=\"value\"\n        text-key=\"label\"\n        class=\"w-5em\"\n        :options=\"$D('JTNSR')\"\n      ></c-select-picker>\n      <div v-for=\"(item, index) in formData.stuFamilyModelList\" :key=\"index\">\n        <p class=\"sims-form-group-title\">{{ item.relationName }}</p>\n        <van-field\n          v-model=\"item.fullName\"\n          placeholder=\"请输入\"\n          label=\"姓名\"\n          maxlength=\"30\"\n          class=\"bg-blur w-5em\"\n        />\n        <van-field\n          v-model=\"item.telephone\"\n          label=\"联系电话\"\n          placeholder=\"请输入\"\n          maxlength=\"30\"\n          class=\"bg-blur w-5em\"\n        />\n        <c-select-picker\n          v-model=\"item.education\"\n          label=\"学历\"\n          value-key=\"value\"\n          text-key=\"label\"\n          class=\"bg-blur w-5em\"\n          @change=\"val => onSelectChange(item, 'educationName', val)\"\n          :options=\"$D('XLM')\"\n        ></c-select-picker>\n        <c-select-picker\n          v-model=\"item.employed\"\n          label=\"职业类别\"\n          value-key=\"value\"\n          text-key=\"label\"\n          class=\"bg-blur w-5em\"\n          @change=\"val => onSelectChange(item, 'employedName', val)\"\n          :options=\"$D('ZYLB')\"\n        ></c-select-picker>\n      </div>\n    </van-form>\n    <div class=\"sims-form-bottom\">\n      <van-button block plain type=\"info\" native-type=\"back\" @click=\"onBack\"\n        >上一步</van-button\n      >\n      <van-button block type=\"info\" native-type=\"submit\" @click=\"onSubmit\"\n        >保存并下一步</van-button\n      >\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  Form,\n  Field,\n  Picker,\n  Popup,\n  DatetimePicker,\n  RadioGroup,\n  Radio,\n  Area,\n  Uploader,\n  Button\n} from 'vant';\nimport {\n  codeConverterName,\n  getAreaData\n} from '@/pages/sims/plugins/common/area';\nimport CSelectPicker from '@/pages/h5/components/common/CSelectPicker.vue';\nimport store from '../../../store/index';\nimport { Toast } from 'vant';\nimport mixins from './mixins';\nimport { saveOrUpdateEnrollFamilyH5 } from '@/pages/h5/api/sims/enrollFill';\nimport { Loading } from 'element-ui';\nimport PageHeader from '../components/pageHeader.vue';\nimport FieldIcon from '../components/FieldIcon.vue';\nexport default {\n  name: 'FamilyInfo',\n  mixins: [mixins],\n  components: {\n    [Form.name]: Form,\n    [Field.name]: Field,\n    [Picker.name]: Picker,\n    [Popup.name]: Popup,\n    [DatetimePicker.name]: DatetimePicker,\n    [RadioGroup.name]: RadioGroup,\n    [Radio.name]: Radio,\n    [Area.name]: Area,\n    [Uploader.name]: Uploader,\n    [Button.name]: Button,\n    CSelectPicker,\n    PageHeader,\n    FieldIcon\n  },\n  data() {\n    return {\n      areaList: getAreaData(), // 地址信息\n      columns: ['杭州', '宁波', '温州', '绍兴', '湖州', '嘉兴', '金华', '衢州'],\n      showPostalAddressPicker: false, // 通讯地址显隐\n      formData: {\n        postalAddress: '',\n        communicationProvince: '',\n        communicationCity: '',\n        communicationArea: '',\n        communicationAddr: '',\n        brokenHome: null,\n        familyIncode: '',\n        stuFamilyModelList: []\n      },\n      fatherInfo: {},\n      motherInfo: {},\n      guardianInfo: {}\n    };\n  },\n  watch: {\n    'pageData.enrollFamilyModel': {\n      handler(newVal) {\n        this.initData(newVal);\n      }\n    }\n  },\n  methods: {\n    // 回退\n    onBack() {\n      this.$router.replace({\n        path: '/sims/entrollFill/identityInfo',\n        query: this.$route.query\n      });\n    },\n    // 表单提交\n    onSubmit(vals) {\n      let loading = Toast.loading();\n      //保存身份信息\n      saveOrUpdateEnrollFamilyH5({\n        ...this.formData,\n        staffCode: this.$route.query.staffCode\n      })\n        .then(res => {\n          loading.close();\n          this.$router.replace({\n            path: '/sims/entrollFill/enrollInfo',\n            query: this.$route.query\n          });\n        })\n        .catch(e => {\n          loading.close();\n          Toast.fail(e.message);\n        });\n    },\n    /**\n     * 职业、学历选择切换\n     * @param {Object} item 监护人对象\n     * @param {String} key 要修改的key\n     * @param {Object} val 选中项\n     */\n    onSelectChange(item, key, val) {\n      item[key] = val.label;\n    },\n    /**\n     * 通讯地址\n     */\n    onConfirmPostalAddress(val) {\n      this.formData.communicationProvince = val[0].code;\n      this.formData.communicationCity = val[1].code;\n      this.formData.communicationArea = val[2].code;\n      this.formData.postalAddress = this.getAddress(\n        val[0].code,\n        val[1].code,\n        val[2].code\n      );\n      this.showPostalAddressPicker = false;\n    },\n    //初始化数据\n    initData(newVal) {\n      let {\n        communicationProvince,\n        communicationCity,\n        communicationArea\n      } = newVal;\n      Object.assign(this.formData, newVal);\n      //更新户籍地址\n      if (communicationProvince) {\n        this.formData.postalAddress = this.getAddress(\n          communicationProvince,\n          communicationCity,\n          communicationArea\n        );\n      }\n    },\n    /**\n     * 获取地址\n     */\n    getAddress(provinceCode, cityCode, countyCode) {\n      return [\n        codeConverterName(provinceCode),\n        codeConverterName(cityCode),\n        codeConverterName(countyCode)\n      ]\n        .filter(item => item)\n        .join('/');\n    },\n    // 长度校验\n    lengthPattern(str) {\n      if (!str) return true;\n      return /^.{2,20}$/.test(str);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n@import './less/sims-form.less';\n.title {\n  font-weight: bold;\n}\n</style>\n"]}]}