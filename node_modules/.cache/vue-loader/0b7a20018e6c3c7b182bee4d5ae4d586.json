{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/components/common/CBreadcrumb/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/components/common/CBreadcrumb/index.vue","mtime":1645176309683},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwYXRoVG9SZWdleHAgZnJvbSAncGF0aC10by1yZWdleHAnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NCcmVhZGNydW1iJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGV2ZWxMaXN0OiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydtZW51TGlzdCddKQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSgpIHsKICAgICAgdGhpcy5nZXRCcmVhZGNydW1iKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRCcmVhZGNydW1iKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRCcmVhZGNydW1iKCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldE1lbnVNYXRjaGVkKCkpOwogICAgICAvLyBvbmx5IHNob3cgcm91dGVzIHdpdGggbWV0YS50aXRsZQogICAgICAvLyBsZXQgbWF0Y2hlZCA9IHRoaXMuJHJvdXRlLm1hdGNoZWQuZmlsdGVyKAogICAgICAvLyAgIGl0ZW0gPT4gaXRlbS5tZXRhICYmIGl0ZW0ubWV0YS50aXRsZQogICAgICAvLyApOwogICAgICAvLyDkvb/nlKjoj5zljZXljLnphY3ot6/nlLEKICAgICAgbGV0IG1hdGNoZWQgPSB0aGlzLmdldE1lbnVNYXRjaGVkKCk7CiAgICAgIGNvbnN0IGZpcnN0ID0gbWF0Y2hlZFswXTsKCiAgICAgIGlmICghdGhpcy5pc0Rhc2hib2FyZChmaXJzdCkpIHsKICAgICAgICBtYXRjaGVkID0gW3sgcGF0aDogJy9ob21lJywgbWV0YTogeyB0aXRsZTogJ+mmlumhtScgfSB9XS5jb25jYXQobWF0Y2hlZCk7CiAgICAgIH0KICAgICAgdGhpcy5sZXZlbExpc3QgPSBtYXRjaGVkLmZpbHRlcigKICAgICAgICBpdGVtID0+IGl0ZW0ubWV0YSAmJiBpdGVtLm1ldGEudGl0bGUgJiYgaXRlbS5tZXRhLmJyZWFkY3J1bWIgIT09IGZhbHNlCiAgICAgICk7CiAgICB9LAogICAgaXNEYXNoYm9hcmQocm91dGUpIHsKICAgICAgY29uc3QgbmFtZSA9IHJvdXRlICYmIHJvdXRlLm5hbWU7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gKAogICAgICAgIG5hbWUudHJpbSgpLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09ICdEYXNoYm9hcmQnLnRvTG9jYWxlTG93ZXJDYXNlKCkKICAgICAgKTsKICAgIH0sCiAgICBwYXRoQ29tcGlsZShwYXRoKSB7CiAgICAgIC8vIFRvIHNvbHZlIHRoaXMgcHJvYmxlbSBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvNTYxCiAgICAgIGNvbnN0IHsgcGFyYW1zIH0gPSB0aGlzLiRyb3V0ZTsKICAgICAgY29uc29sZS5sb2cocGF0aCk7CiAgICAgIHZhciB0b1BhdGggPSBwYXRoVG9SZWdleHAuY29tcGlsZShwYXRoKTsKICAgICAgcmV0dXJuIHRvUGF0aChwYXJhbXMpOwogICAgfSwKICAgIG9uTGluayhpdGVtKSB7CiAgICAgIGNvbnN0IHsgcmVkaXJlY3QsIHBhdGggfSA9IGl0ZW07CiAgICAgIGlmIChyZWRpcmVjdCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHJlZGlyZWN0KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5wYXRoQ29tcGlsZShwYXRoKSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDojrflj5boj5zljZXorr/pl67ot6/lvoQKICAgICAqLwogICAgZ2V0TWVudU1hdGNoZWQoKSB7CiAgICAgIGxldCBwYXRoID0gdGhpcy4kcm91dGUucGF0aDsKICAgICAgbGV0IG1lbnVMaXN0ID0gdGhpcy5tZW51TGlzdC5zbGljZSgwKTsgLy8g5ou36LSd6Lev55SxCiAgICAgIGxldCBtZW51ID0gbWVudUxpc3QuZmluZChpdGVtID0+IGl0ZW0udXJsID09PSBwYXRoKTsKICAgICAgaWYgKCFtZW51KSByZXR1cm4gW107IC8vIOacquaJvuWIsOiPnOWNlQogICAgICBsZXQgbWF0Y2hlZCA9IFtdOwogICAgICAvLyDlkJHkuIrmn6Xmib7niLbnuqfoj5zljZUKICAgICAgbGV0IGZuID0gbWVudUlkID0+IHsKICAgICAgICBsZXQgcGFyZW50SW5kZXggPSBtZW51TGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLm1lbnVJZCA9PT0gbWVudUlkKTsKICAgICAgICBpZiAocGFyZW50SW5kZXggPT09IC0xKSByZXR1cm47IC8vIOacquaJvuWIsOS4iue6p+iPnOWNlQogICAgICAgIGxldCBwYXJlbnRNZW51ID0gbWVudUxpc3RbcGFyZW50SW5kZXhdOwogICAgICAgIG1lbnVMaXN0LnNwbGljZShwYXJlbnRJbmRleCwgMSk7IC8vIOmYsuatouatu+mAkuW9kgogICAgICAgIG1hdGNoZWQudW5zaGlmdChwYXJlbnRNZW51KTsKICAgICAgICBwYXJlbnRNZW51Lm1lbnVJZCAhPT0gcGFyZW50TWVudS5wYXJlbnRNZW51SWQgJiYgZm4obWVudS5wYXJlbnRNZW51SWQpOyAvLyDpmLLmraLmrbvpgJLlvZIKICAgICAgfTsKICAgICAgZm4obWVudS5tZW51SWQpOwogICAgICByZXR1cm4gbWF0Y2hlZDsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/bonus-tool-admin/components/common/CBreadcrumb","sourcesContent":["<template>\n  <el-breadcrumb class=\"app-breadcrumb\" separator=\"/\">\n    <transition-group name=\"breadcrumb\">\n      <el-breadcrumb-item v-for=\"(item, index) in levelList\" :key=\"item.path\">\n        <span\n          v-if=\"item.redirect === 'noRedirect' || index == levelList.length - 1\"\n          class=\"no-redirect\"\n          >{{ item.meta.title }}</span\n        >\n        <a v-else @click.prevent=\"onLink(item)\">{{ item.meta.title }}</a>\n      </el-breadcrumb-item>\n    </transition-group>\n  </el-breadcrumb>\n</template>\n\n<script>\nimport pathToRegexp from 'path-to-regexp';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'CBreadcrumb',\n  data() {\n    return {\n      levelList: null\n    };\n  },\n  computed: {\n    ...mapGetters(['menuList'])\n  },\n  watch: {\n    $route() {\n      this.getBreadcrumb();\n    }\n  },\n  created() {\n    this.getBreadcrumb();\n  },\n  methods: {\n    getBreadcrumb() {\n      // console.log(this.getMenuMatched());\n      // only show routes with meta.title\n      // let matched = this.$route.matched.filter(\n      //   item => item.meta && item.meta.title\n      // );\n      // 使用菜单匹配路由\n      let matched = this.getMenuMatched();\n      const first = matched[0];\n\n      if (!this.isDashboard(first)) {\n        matched = [{ path: '/home', meta: { title: '首页' } }].concat(matched);\n      }\n      this.levelList = matched.filter(\n        item => item.meta && item.meta.title && item.meta.breadcrumb !== false\n      );\n    },\n    isDashboard(route) {\n      const name = route && route.name;\n      if (!name) {\n        return false;\n      }\n      return (\n        name.trim().toLocaleLowerCase() === 'Dashboard'.toLocaleLowerCase()\n      );\n    },\n    pathCompile(path) {\n      // To solve this problem https://github.com/PanJiaChen/vue-element-admin/issues/561\n      const { params } = this.$route;\n      console.log(path);\n      var toPath = pathToRegexp.compile(path);\n      return toPath(params);\n    },\n    onLink(item) {\n      const { redirect, path } = item;\n      if (redirect) {\n        this.$router.push(redirect);\n        return;\n      }\n      this.$router.push(this.pathCompile(path));\n    },\n    /**\n     * 获取菜单访问路径\n     */\n    getMenuMatched() {\n      let path = this.$route.path;\n      let menuList = this.menuList.slice(0); // 拷贝路由\n      let menu = menuList.find(item => item.url === path);\n      if (!menu) return []; // 未找到菜单\n      let matched = [];\n      // 向上查找父级菜单\n      let fn = menuId => {\n        let parentIndex = menuList.findIndex(item => item.menuId === menuId);\n        if (parentIndex === -1) return; // 未找到上级菜单\n        let parentMenu = menuList[parentIndex];\n        menuList.splice(parentIndex, 1); // 防止死递归\n        matched.unshift(parentMenu);\n        parentMenu.menuId !== parentMenu.parentMenuId && fn(menu.parentMenuId); // 防止死递归\n      };\n      fn(menu.menuId);\n      return matched;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.app-breadcrumb.el-breadcrumb {\n  display: inline-block;\n  font-size: 14px;\n  line-height: 50px;\n  margin-left: 8px;\n\n  .no-redirect {\n    color: #97a8be;\n    cursor: text;\n  }\n}\n</style>\n"]}]}