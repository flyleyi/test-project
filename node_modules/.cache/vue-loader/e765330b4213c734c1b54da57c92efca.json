{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorAppointment.vue?vue&type=style&index=0&id=17da1eda&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/VisitorAppointment.vue","mtime":1645178321201},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gLnZhbi10YWItLWFjdGl2ZSB7CiAgY29sb3I6ICMzMzg4ZmY7Cn0K"},{"version":3,"sources":["VisitorAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA","file":"VisitorAppointment.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor","sourcesContent":["<template>\n  <div>\n    <van-tabs v-model=\"active\" color=\"#3388FF\" @click=\"onClick\">\n      <van-tab title=\"访客邀请\" name=\"visitor\">\n        <visitor-panel\n          ref=\"visitorPanel\"\n          v-if=\"active == 'visitor'\"\n          :type=\"type\"\n        ></visitor-panel>\n      </van-tab>\n      <van-tab title=\"团体邀请\" name=\"teamVisitor\">\n        <team-panel\n          ref=\"teamPanel\"\n          v-if=\"active == 'teamVisitor'\"\n          :type=\"type\"\n        ></team-panel>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport { timeQuery } from '@/pages/visitor-h5/api/myVisitor';\nimport visitorPanel from './VisitorPanel.vue';\nimport teamPanel from './TeamPanel.vue';\n\nexport default {\n  components: {\n    visitorPanel,\n    teamPanel\n  },\n  data() {\n    return {\n      active: this.$route.query.type,\n      makeAnAppointment: 0,\n      termOfValidity: 5,\n      type: this.$route.query.type\n    };\n  },\n  methods: {\n    timeQuery() {\n      timeQuery().then(res => {\n        let obj = res.data[0];\n        this.makeAnAppointment = obj.makeAnAppointment;\n        this.termOfValidity = obj.termOfValidity;\n        this.$store.commit('visitor/SET_TIMEOBJ', {\n          termOfValidity: this.termOfValidity,\n          makeAnAppointment: this.makeAnAppointment\n        });\n      });\n    },\n    setType() {\n      this.setInfo();\n    },\n    onClick(name, title) {\n      window.pageYOffset = 0;\n      document.documentElement.scrollTop = 0;\n      document.body.scrollTop = 0;\n      this.type = name;\n      this.active = name;\n    },\n    setInfo() {\n      eventBus.$off('setcurType');\n      eventBus.$on('setcurType', res => {\n        this.active = res;\n      });\n    }\n  },\n  created() {\n    this.timeQuery();\n    this.setType();\n  },\n  activated() {\n    // 从列表跳转过来的页面定位到对用团体或者访客页签\n    this.setType();\n  },\n  beforeRouteEnter(to, from, next) {\n    if (from.path === '/visitor-list') {\n      next(vm => {\n        if (vm.active === 'teamVisitor') {\n          vm.$refs.teamPanel && vm.$refs.teamPanel.init();\n        } else {\n          vm.$refs.visitorPanel && vm.$refs.visitorPanel.init();\n        }\n      });\n    }\n    next();\n  },\n  watch: {\n    $route(to, from) {\n      this.setType();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-tab--active {\n  color: #3388ff;\n}\n</style>\n"]}]}