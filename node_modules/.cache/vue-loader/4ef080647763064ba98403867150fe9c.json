{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/option-add/index.vue?vue&type=style&index=0&id=387f90ea&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/option-add/index.vue","mtime":1645178321140},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmFwcCB7CiAgLnR5cGUtY29udGFpbmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgICBwYWRkaW5nOiAwLjI1cmVtIDAuMjRyZW07CiAgICBtYXJnaW4tYm90dG9tOiAwLjJyZW07CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIC50eXBlLXRpdGxlIHsKICAgICAgZm9udC1zaXplOiAwLjI4cmVtOwogICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgJiA+IGRpdjpmaXJzdC1jaGlsZCB7CiAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7CiAgICAgICAgcGFkZGluZy1yaWdodDogMC4ycmVtOwogICAgICB9CiAgICAgICYgPiBkaXY6bnRoLWNoaWxkKDIpIHsKICAgICAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg1KTsKICAgICAgfQogICAgfQogICAgJiA+IGltZyB7CiAgICAgIGhlaWdodDogMC40cmVtOwogICAgfQogIH0KICAuYm90dG9tLWJ0biB7CiAgICBwYWRkaW5nOiAwLjQ4cmVtIDAuMjRyZW07CiAgICAmID4gZGl2IHsKICAgICAgd2lkdGg6IDcuMDJyZW07CiAgICAgIGhlaWdodDogMC45OHJlbTsKICAgICAgZm9udC1zaXplOiAwLjM0cmVtOwogICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsKICAgICAgYm9yZGVyLXJhZGl1czogMC4wNnJlbTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB9CiAgICAmID4gZGl2OmZpcnN0LWNoaWxkIHsKICAgICAgYmFja2dyb3VuZDogIzUxYzQ5YzsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICB9CiAgICAmID4gZGl2Om50aC1jaGlsZCgyKSB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgICAgIGNvbG9yOiAjNWVjZmE4OwogICAgICBib3JkZXI6IDAuMDJyZW0gc29saWQgIzVlY2ZhODsKICAgICAgbWFyZ2luLXRvcDogMC40cmVtOwogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/jx-questionnaire-h5/views/option-add","sourcesContent":["<!--  -->\n<template>\n  <div class=\"app\">\n    <!-- 顶部题目类型 -->\n    <div class=\"type-container\" @click=\"openTypePopup\">\n      <div class=\"type-title\">\n        <div>题目类型</div>\n        <div>{{ typeName }}</div>\n      </div>\n      <img\n        src=\"@/pages/jx-questionnaire-h5/assets/images/icons/right_arrow_icon.png\"\n      />\n    </div>\n    <!-- 单选 -->\n    <radio-option\n      v-if=\"optionType === '1'\"\n      ref=\"optionInfo\"\n      :option-obj=\"optionObj\"\n    ></radio-option>\n    <!-- 多选 -->\n    <multiple-option\n      v-else-if=\"optionType === '2'\"\n      ref=\"optionInfo\"\n      :option-obj=\"optionObj\"\n    ></multiple-option>\n    <!-- 填空 -->\n    <cloze-option\n      v-else-if=\"optionType === '3'\"\n      ref=\"optionInfo\"\n      :option-obj=\"optionObj\"\n    ></cloze-option>\n    <!-- 图片 -->\n    <img-option\n      v-else-if=\"optionType === '4'\"\n      ref=\"optionInfo\"\n      :option-obj=\"optionObj\"\n    ></img-option>\n    <!-- 文件 -->\n    <file-option\n      v-else-if=\"optionType === '5'\"\n      ref=\"optionInfo\"\n      :option-obj=\"optionObj\"\n    ></file-option>\n    <!-- 底部按钮 -->\n    <div class=\"bottom-btn\">\n      <div @click=\"save('current')\">保存</div>\n      <div @click=\"save('next')\">保存并继续编辑下一个</div>\n    </div>\n    <!-- 选项类型底部弹窗 -->\n    <van-action-sheet v-model=\"optionTypePopup\" :closeable=\"false\">\n      <option-type @handleTypeChoose=\"handleTypeChoose\"></option-type>\n    </van-action-sheet>\n  </div>\n</template>\n\n<script>\nimport OptionType from '../survey-add/components/OptionType.vue';\nimport RadioOption from './components/RadioOption.vue';\nimport MultipleOption from './components/MultipleOption.vue';\nimport ClozeOption from './components/ClozeOption.vue';\nimport ImgOption from './components/ImgOption.vue';\nimport FileOption from './components/FileOption.vue';\nimport { ActionSheet, Toast } from 'vant';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'OptionAdd',\n  components: {\n    [ActionSheet.name]: ActionSheet,\n    [Toast.name]: Toast,\n    OptionType,\n    RadioOption,\n    MultipleOption,\n    ImgOption,\n    FileOption,\n    ClozeOption\n  },\n  data() {\n    return {\n      status: '', // 状态 edit/new\n      optionType: '', // 选项类型 1单选，2多选，3填空，4图片，5文件\n      optionObj: null, // 选项内容\n      idx: null, // 编辑选项时所选中的选项下标\n      optionTypePopup: false // 新增选项类型弹窗，默认隐藏\n    };\n  },\n  computed: {\n    typeName() {\n      let name = '';\n      switch (this.optionType) {\n        case '1':\n          name = '单选';\n          break;\n        case '2':\n          name = '多选';\n          break;\n        case '3':\n          name = '填空';\n          break;\n        case '4':\n          name = '图片';\n          break;\n        case '5':\n          name = '文件';\n          break;\n      }\n      return name;\n    },\n    ...mapState('survey', ['questions'])\n  },\n  created() {\n    this.status = this.$route.query.status;\n    this.optionType = this.$route.query.type || '';\n    this.idx = this.$route.query.idx;\n    this.optionObj = this.$route.query.option\n      ? JSON.parse(this.$route.query.option)\n      : {};\n  },\n  methods: {\n    // 选项类型弹窗\n    openTypePopup() {\n      this.optionTypePopup = true;\n    },\n    // 选择选项类型\n    handleTypeChoose(type) {\n      this.optionType = type;\n      if (type === '1') {\n        this.optionObj = {\n          type: '1', // 类型\n          subject: '', // 标题\n          options: [{ value: '' }, { value: '' }], // 选项\n          optionsCnt: 1 // 可选个数\n        };\n      } else if (type === '2') {\n        this.optionObj = {\n          type: '2',\n          subject: '',\n          options: [{ value: '' }, { value: '' }],\n          optionsCnt: 1\n        };\n      } else if (type === '3') {\n        this.optionObj = {\n          type: '3',\n          subject: ''\n        };\n      } else if (type === '4') {\n        this.optionObj = {\n          type: '4',\n          subject: '',\n          optionsCnt: 1\n        };\n      } else if (type === '5') {\n        this.optionObj = {\n          type: '5',\n          subject: '',\n          optionsCnt: 1\n        };\n      }\n      this.optionTypePopup = false;\n    },\n    // 保存\n    save(type) {\n      let childComponent = this.$refs.optionInfo.optionObj;\n      if (childComponent.type === '1') {\n        if (\n          !childComponent.subject ||\n          childComponent.options.some(item => {\n            return !item.value;\n          })\n        ) {\n          Toast('请完善信息');\n          return;\n        }\n      } else if (childComponent.type === '2') {\n        if (\n          !childComponent.subject ||\n          childComponent.options.some(item => {\n            return !item.value;\n          }) ||\n          childComponent.optionsCnt < 2\n        ) {\n          Toast('请完善信息');\n          return;\n        }\n      } else if (childComponent.type === '3') {\n        if (!childComponent.subject) {\n          Toast('请完善信息');\n          return;\n        }\n      } else if (childComponent.type === '4') {\n        if (!childComponent.subject || childComponent.optionsCnt < 1) {\n          Toast('请完善信息');\n          return;\n        }\n      } else if (childComponent.type === '5') {\n        if (!childComponent.subject || childComponent.optionsCnt < 1) {\n          Toast('请完善信息');\n          return;\n        }\n      }\n      // 校验问题长度是否大于20\n      if (this.questions.length >= 20 && type == 'next') {\n        this.$toast('问题总数已达20，无法添加');\n        return;\n      }\n      if (this.status == 'edit') {\n        // 编辑\n        this.$store.commit('survey/EDIT_OPTION', {\n          idx: this.idx,\n          obj: childComponent\n        });\n      } else if (this.status == 'new') {\n        // 新增\n        this.$store.commit('survey/ADD_OPTION', childComponent);\n      }\n      if (type == 'current') {\n        this.$router.back();\n      } else {\n        this.status = 'new';\n        this.handleTypeChoose(this.$route.query.type);\n      }\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.app {\n  .type-container {\n    background-color: #ffffff;\n    padding: 0.25rem 0.24rem;\n    margin-bottom: 0.2rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .type-title {\n      font-size: 0.28rem;\n      font-family: PingFangSC-Regular, PingFang SC;\n      display: flex;\n      & > div:first-child {\n        color: rgba(0, 0, 0, 0.65);\n        padding-right: 0.2rem;\n      }\n      & > div:nth-child(2) {\n        color: rgba(0, 0, 0, 0.85);\n      }\n    }\n    & > img {\n      height: 0.4rem;\n    }\n  }\n  .bottom-btn {\n    padding: 0.48rem 0.24rem;\n    & > div {\n      width: 7.02rem;\n      height: 0.98rem;\n      font-size: 0.34rem;\n      font-family: PingFangSC-Regular, PingFang SC;\n      border-radius: 0.06rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    & > div:first-child {\n      background: #51c49c;\n      color: #ffffff;\n    }\n    & > div:nth-child(2) {\n      background-color: #ffffff;\n      color: #5ecfa8;\n      border: 0.02rem solid #5ecfa8;\n      margin-top: 0.4rem;\n    }\n  }\n}\n</style>\n"]}]}