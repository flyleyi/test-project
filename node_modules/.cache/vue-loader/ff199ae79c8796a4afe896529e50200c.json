{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/SignIn/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/SignIn/index.vue","mtime":1627979214288},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENhcmQsIElucHV0LCBGb3JtLCBGb3JtSXRlbSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBsb2dpbiwgZ2V0QWxsTWVudXMgfSBmcm9tICcuLi8uLi9hcGkvdXNlci9pbmRleCc7CmltcG9ydCB7CiAgc2V0VG9rZW4sCiAgc2V0VXNlck5hbWUsCiAgc2V0VXNlcklkCn0gZnJvbSAnLi4vLi4vLi4vLi4vcGx1Z2lucy9jb3JlL2F1dGgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NpZ25JTicsCiAgY29tcG9uZW50czogewogICAgW0NhcmQubmFtZV06IENhcmQsCiAgICBbRm9ybS5uYW1lXTogRm9ybSwKICAgIFtGb3JtSXRlbS5uYW1lXTogRm9ybUl0ZW0sCiAgICBbSW5wdXQubmFtZV06IElucHV0CiAgfSwKICBkYXRhKCkgewogICAgLy8gbGV0IHBhc3N3b3JkUnVsZXMgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMucGFzc3dvcmRTdWNjZXNzLCAnc3VjY2VzcycpOwogICAgLy8gICBpZiAodGhpcy5wYXNzd29yZFN1Y2Nlc3MpIHsKICAgIC8vICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKHRoaXMucGFzc3dvcmRNZXNzYWdlKSk7CiAgICAvLyAgIH0KICAgIC8vIH07CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcGFzc3dvcmRTdWNjZXNzOiB0cnVlLAogICAgICBwYXNzd29yZE1lc3NhZ2U6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMSwKICAgICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+WQjeacgOWkp+mVv+W6puS4ujE25Liq5a2X56ymJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMSwKICAgICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgICAgbWVzc2FnZTogJ+WvhueggeacgOWkp+mVv+W6puS4ujE25Liq5a2X56ymJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnBhc3N3b3JkU3VjY2VzcyA9IHRydWU7CiAgICAgIHRoaXMucGFzc3dvcmRNZXNzYWdlID0gJyc7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpOwogICAgICAgICAgbG9naW4oewogICAgICAgICAgICB1c2VybmFtZTogdGhpcy5ydWxlRm9ybS51c2VybmFtZS50cmltKCksCiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnJ1bGVGb3JtLnBhc3N3b3JkCiAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXIvc2V0VG9rZW4nLCBgQmVhcmVyZSAke2RhdGEudG9rZW59YCk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL3NldE5hbWUnLCBkYXRhLnRleHROYW1lKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXIvc2V0VXNlcklkJywgZGF0YS51c2VySWQpOwogICAgICAgICAgICBzZXRUb2tlbihgQmVhcmVyZSAke2RhdGEudG9rZW59YCk7CiAgICAgICAgICAgIHNldFVzZXJOYW1lKGRhdGEudGV4dE5hbWUpOwogICAgICAgICAgICBzZXRVc2VySWQoZGF0YS51c2VySWQpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIKICAgICAgICAgICAgICAucmVwbGFjZSh7CiAgICAgICAgICAgICAgICAvLyBwYXRoOiB0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdCB8fCAnL2hvbWUnCiAgICAgICAgICAgICAgICBwYXRoOiAnL2hvbWUnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/SignIn","sourcesContent":["<template>\n  <div class=\"loginBox\" v-loading=\"loading\">\n    <div class=\"popover-box\">\n      <el-card class=\"box-card\">\n        <div class=\"img-box\">\n          <img src=\"../../assets/images/login.png\" alt=\"\" />\n        </div>\n        <div class=\"form-box\">\n          <p class=\"signIn-en\">SIGN IN</p>\n          <p class=\"signIn-zh\">用户登录</p>\n          <div class=\"from-group\">\n            <el-form\n              :model=\"ruleForm\"\n              :rules=\"rules\"\n              ref=\"ruleForm\"\n              class=\"demo-ruleForm\"\n            >\n              <el-form-item prop=\"username\">\n                <p class=\"from-label\">用户名</p>\n                <el-input\n                  v-model.trim=\"ruleForm.username\"\n                  placeholder=\"输入用户名\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item prop=\"password\" class=\"passwordBox\">\n                <p class=\"from-label\">密码</p>\n                <el-input\n                  v-model.trim=\"ruleForm.password\"\n                  type=\"password\"\n                  placeholder=\"输入密码\"\n                ></el-input>\n                <p class=\"errorTip\" v-if=\"!this.passwordSuccess\">\n                  <i class=\"el-icon-warning-outline warningIcon\"></i>\n                  <span>{{ this.passwordMessage }}</span>\n                </p>\n              </el-form-item>\n            </el-form>\n            <div class=\"btn-group\">\n              <div class=\"btn\" @click=\"submitForm('ruleForm')\">登录</div>\n            </div>\n          </div>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Card, Input, Form, FormItem } from 'element-ui';\nimport { login, getAllMenus } from '../../api/user/index';\nimport {\n  setToken,\n  setUserName,\n  setUserId\n} from '../../../../plugins/core/auth';\nexport default {\n  name: 'SignIN',\n  components: {\n    [Card.name]: Card,\n    [Form.name]: Form,\n    [FormItem.name]: FormItem,\n    [Input.name]: Input\n  },\n  data() {\n    // let passwordRules = (rule, value, callback) => {\n    //   console.log(this.passwordSuccess, 'success');\n    //   if (this.passwordSuccess) {\n    //     return callback();\n    //   } else {\n    //     return callback(new Error(this.passwordMessage));\n    //   }\n    // };\n    return {\n      ruleForm: {\n        username: '',\n        password: ''\n      },\n      passwordSuccess: true,\n      passwordMessage: '',\n      loading: false,\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { required: true, message: '请输入用户名', trigger: 'change' },\n          {\n            min: 1,\n            max: 16,\n            message: '用户名最大长度为16个字符',\n            trigger: 'blur'\n          }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { required: true, message: '请输入密码', trigger: 'change' },\n          {\n            min: 1,\n            max: 16,\n            message: '密码最大长度为16个字符',\n            trigger: 'blur'\n          }\n        ]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.loading = true;\n      this.passwordSuccess = true;\n      this.passwordMessage = '';\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.$store.dispatch('user/logout');\n          login({\n            username: this.ruleForm.username.trim(),\n            password: this.ruleForm.password\n          }).then(response => {\n            const { data } = response;\n            this.$store.dispatch('user/setToken', `Bearere ${data.token}`);\n            this.$store.dispatch('user/setName', data.textName);\n            this.$store.dispatch('user/setUserId', data.userId);\n            setToken(`Bearere ${data.token}`);\n            setUserName(data.textName);\n            setUserId(data.userId);\n            this.$router\n              .replace({\n                // path: this.$route.query.redirect || '/home'\n                path: '/home'\n              })\n              .catch(() => {});\n          });\n          this.loading = false;\n        } else {\n          console.log('error submit!!');\n          this.loading = false;\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.loginBox {\n  background: rgba(0, 0, 0, 0.04);\n  width: 100%;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .popover-box {\n    width: 700px;\n    height: 400px;\n    .box-card {\n      width: 100%;\n      height: 100%;\n      border-radius: 6px;\n      /deep/.el-card__body {\n        padding: 0px;\n        display: flex;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n        .img-box {\n          width: 400px;\n          height: 100%;\n          img {\n            width: 100%;\n            height: 100%;\n          }\n        }\n        .form-box {\n          flex: 1;\n          height: 100%;\n          padding: 0 20px;\n          background-color: #fff;\n          .signIn-en {\n            margin-top: 50px;\n            font-size: 18px;\n            font-weight: 600;\n            color: rgba(0, 0, 0, 0.85);\n          }\n          .signIn-zh {\n            margin-top: 10px;\n            font-size: 14px;\n            font-weight: 600;\n            color: rgba(0, 0, 0, 0.85);\n          }\n          .from-group {\n            margin-top: 20px;\n            .from-label {\n              line-height: 30px;\n              font-weight: 400;\n            }\n            /deep/.el-input__inner {\n              background: rgba(0, 0, 0, 0.04);\n            }\n            .passwordBox {\n              position: relative;\n              .errorTip {\n                position: absolute;\n                height: 20px;\n                width: 100%;\n                display: flex;\n                align-items: center;\n                color: #f5222d;\n                .warningIcon {\n                  font-size: 14px;\n                }\n                span {\n                  margin-left: 5px;\n                  font-size: 12px;\n                }\n              }\n            }\n            .btn-group {\n              width: 100%;\n              height: 30px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              margin-top: 30px;\n              .btn {\n                cursor: pointer;\n                width: 140px;\n                background-color: #3b78e3;\n                border-radius: 2px;\n                color: #fff;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: 400;\n                height: 30px;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}