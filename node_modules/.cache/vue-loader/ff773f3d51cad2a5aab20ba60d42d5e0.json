{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-secret/views/questDetail/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/school-secret/views/questDetail/index.vue","mtime":1627979214339},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWFyY2hOYXYgZnJvbSAnLi4vY29tcG9uZW50cy9zZWFyY2hOYXYnOwppbXBvcnQgUXVlc3RJdGVtIGZyb20gJy4uL2NvbXBvbmVudHMvcXVlc3RJdGVtJzsKaW1wb3J0IEFuc3dlckRpYWxvZyBmcm9tICcuLi9jb21wb25lbnRzL2Fuc3dlckRpYWxvZyc7CmltcG9ydCBRdWVzdERpYWxvZyBmcm9tICcuLi9jb21wb25lbnRzL3F1ZXN0RGlhbG9nLnZ1ZSc7CmltcG9ydCBBbnN3ZXJJdGVtIGZyb20gJy4vY29tcG9uZW50cy9hbnN3ZXJJdGVtLnZ1ZSc7CmltcG9ydCBMb2dvIGZyb20gJy4uL2NvbXBvbmVudHMvbG9nbyc7CmltcG9ydCB7IGdldFF1ZXNEZXRhaWxzLCBnZXRBbnN3ZXJzIH0gZnJvbSAnLi4vLi4vYXBpL3F1ZXN0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdRdWVzdERldGFpbCcsCiAgY29tcG9uZW50czogewogICAgU2VhcmNoTmF2LAogICAgUXVlc3RJdGVtLAogICAgQW5zd2VyRGlhbG9nLAogICAgUXVlc3REaWFsb2csCiAgICBBbnN3ZXJJdGVtLAogICAgTG9nbwogIH0sCiAgcHJvcHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDoge30sIC8vIOmXrumimOivpuaDhQogICAgICBkYXRhOiBbXSwgLy8g6Zeu6aKY5a+55bqU5Zue562UCiAgICAgIHBhcmFtczogewogICAgICAgIC8vIGlkOiAnJywKICAgICAgICAvLyBhbnN3ZXI6ICcnLAogICAgICAgIGN1cnJlbnQ6IDEsIC8vIOW9k+WJjemhtQogICAgICAgIHNpemU6IDIwIC8vIOavj+mhteaYvuekuuadoeaVsAogICAgICB9LAogICAgICBjdXJyZW50OiAxLCAvLyDlvZPliY3kuZ/lkJcKICAgICAgcGFnZXM6IDEgLy8g5oC76aG15pWwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOmXrumimGlkCiAgICBpZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGlkOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5nZXRRdWVzRGV0YWlscygpOwogICAgICAgIHRoaXMuZ2V0QW5zd2VycygpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICAncGFyYW1zLmFuc3dlcicoKSB7CiAgICAgIHRoaXMuZGF0YSA9IFtdOwogICAgICB0aGlzLnBhcmFtcy5jdXJyZW50ID0gMTsgLy8g5b2T5YmN6aG1CiAgICAgIHRoaXMuZ2V0UXVlc0RldGFpbHMoKTsKICAgICAgdGhpcy5nZXRBbnN3ZXJzKCk7CiAgICB9LAogICAgJ3BhcmFtcy5jdXJyZW50JygpIHsKICAgICAgdGhpcy5nZXRBbnN3ZXJzKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkge30sCiAgbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog6I635Y+W5p+l6K+i5p2h5Lu2CiAgICAgKi8KICAgIGdldFBhcmFtcyhkYXRhKSB7CiAgICAgIHRoaXMucGFyYW1zLmFuc3dlciA9IGRhdGE7CiAgICAgIHRoaXMucGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXJhbXMpOwogICAgfSwKICAgIC8qKgogICAgICog6I635Y+W6Zeu6aKY6K+m5oOFCiAgICAgKi8KICAgIGdldFF1ZXNEZXRhaWxzKCkgewogICAgICBnZXRRdWVzRGV0YWlscyh7IGlkOiB0aGlzLmlkIH0pLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgdGhpcy5tb2RlbCA9IGRhdGFbMF07CiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog6I635Y+W6Zeu6aKY5a+55bqU55qE5omA5pyJ5Zue562UCiAgICAgKi8KICAgIGdldEFuc3dlcnMoKSB7CiAgICAgIHRoaXMucGFyYW1zLmlkID0gdGhpcy5pZDsKICAgICAgZ2V0QW5zd2Vycyh0aGlzLnBhcmFtcykudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICB0aGlzLmRhdGEucHVzaCguLi5kYXRhLnJlY29yZHMpOwogICAgICAgIHRoaXMuY3VycmVudCA9IGRhdGEuY3VycmVudDsKICAgICAgICB0aGlzLnBhZ2VzID0gZGF0YS5wYWdlczsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDngrnlh7vlhpnlm57nrZTmmL7npLrnmoTlvLnmoYYKICAgICAqLwogICAgZ2V0QW5zd2VyU3RhdHVzKHZhbCkgewogICAgICB2YWwgJiYgdGhpcy4kcmVmcy5hbnN3ZXJEaWFsb2cuc2hvdygpOwogICAgfSwKICAgIC8qKgogICAgICog54K55Ye75o+Q6Zeu5ZCO5pi+56S655qE5by55qGGCiAgICAgKi8KICAgIGdldFF1ZXN0U3RhdHVzKHZhbCkgewogICAgICB2YWwgJiYgdGhpcy4kcmVmcy5xdWVzdERpYWxvZy5zaG93KCk7CiAgICB9LAogICAgLyoqCiAgICAgKiDnm5HlkKzmmK/lkKbmnInmlrDlm57nrZQKICAgICAqLwogICAgb25SZWZyZXNoQW5zd2VyKGRhdGEpIHsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLmRhdGEgPSBbXTsKICAgICAgICB0aGlzLnBhcmFtcy5jdXJyZW50ID0gMTsgLy8g5b2T5YmN6aG1CiAgICAgICAgdGhpcy5nZXRBbnN3ZXJzKCk7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOebkeWQrOWIoOmZpOWbnuetlAogICAgICog6Zeu6aKY5Yig6Zmk5oiQ5Yqf5ZCO5Yi35paw6aG16Z2iCiAgICAgKi8KICAgIG9uUmVmcmVzaFF1ZXN0KGRhdGEpIHsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0aGlzLm9uQmFja0xpc3QoKTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICog6L+U5Zue6Zeu562U5YiX6KGoCiAgICAgKi8KICAgIG9uQmFja0xpc3QoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBwYXRoOiAnL3F1ZXN0LWxpc3QnCiAgICAgIH0pOwogICAgfSwKICAgIC8qKgogICAgICog5Yqg6L295pu05aSaCiAgICAgKi8KICAgIHNob3dNb3JlKCkgewogICAgICB0aGlzLnBhcmFtcy5jdXJyZW50Kys7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/school-secret/views/questDetail","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <logo></logo>\n    <div class=\"common-main answer-list-box\">\n      <search-nav\n        class=\"common-header\"\n        @quest=\"getQuestStatus\"\n        @questionInput=\"getParams\"\n        :isDetail=\"true\"\n        :placeholder=\"'请输入回答关键字'\"\n      ></search-nav>\n      <div class=\"tip-title\">{{ model.questionType }}</div>\n      <quest-item\n        @writeAnswer=\"getAnswerStatus\"\n        @refresh=\"onRefreshQuest\"\n        :model=\"model\"\n        :isSeeCount=\"false\"\n      ></quest-item>\n      <div v-if=\"data.length === 0\" class=\"null-tip\">\n        快来积极回答问题吧！\n      </div>\n      <div v-else>\n        <answer-item\n          v-for=\"(item, index) of data\"\n          :key=\"'answer' + index\"\n          :model=\"item\"\n          @refresh=\"onRefreshAnswer\"\n        ></answer-item>\n        <div class=\"more\" @click=\"showMore\">\n          <span v-if=\"current < pages\">加载更多</span>\n          <span v-else class=\"bottomText\">已经到底了哦</span>\n        </div>\n      </div>\n    </div>\n    <answer-dialog\n      ref=\"answerDialog\"\n      :model=\"model\"\n      @refresh=\"onRefreshAnswer\"\n    ></answer-dialog>\n    <quest-dialog ref=\"questDialog\"></quest-dialog>\n  </div>\n</template>\n\n<script>\nimport SearchNav from '../components/searchNav';\nimport QuestItem from '../components/questItem';\nimport AnswerDialog from '../components/answerDialog';\nimport QuestDialog from '../components/questDialog.vue';\nimport AnswerItem from './components/answerItem.vue';\nimport Logo from '../components/logo';\nimport { getQuesDetails, getAnswers } from '../../api/question';\nexport default {\n  name: 'QuestDetail',\n  components: {\n    SearchNav,\n    QuestItem,\n    AnswerDialog,\n    QuestDialog,\n    AnswerItem,\n    Logo\n  },\n  props: {},\n  data() {\n    return {\n      model: {}, // 问题详情\n      data: [], // 问题对应回答\n      params: {\n        // id: '',\n        // answer: '',\n        current: 1, // 当前页\n        size: 20 // 每页显示条数\n      },\n      current: 1, // 当前也吗\n      pages: 1 // 总页数\n    };\n  },\n  computed: {\n    // 问题id\n    id() {\n      return this.$route.query.id;\n    }\n  },\n  watch: {\n    id: {\n      handler() {\n        this.getQuesDetails();\n        this.getAnswers();\n      },\n      immediate: true\n    },\n    'params.answer'() {\n      this.data = [];\n      this.params.current = 1; // 当前页\n      this.getQuesDetails();\n      this.getAnswers();\n    },\n    'params.current'() {\n      this.getAnswers();\n    }\n  },\n  created() {},\n  mounted() {},\n  methods: {\n    /**\n     * 获取查询条件\n     */\n    getParams(data) {\n      this.params.answer = data;\n      this.params = Object.assign({}, this.params);\n    },\n    /**\n     * 获取问题详情\n     */\n    getQuesDetails() {\n      getQuesDetails({ id: this.id }).then(({ data }) => {\n        this.model = data[0];\n      });\n    },\n    /**\n     * 获取问题对应的所有回答\n     */\n    getAnswers() {\n      this.params.id = this.id;\n      getAnswers(this.params).then(({ data }) => {\n        this.data.push(...data.records);\n        this.current = data.current;\n        this.pages = data.pages;\n      });\n    },\n    /**\n     * 点击写回答显示的弹框\n     */\n    getAnswerStatus(val) {\n      val && this.$refs.answerDialog.show();\n    },\n    /**\n     * 点击提问后显示的弹框\n     */\n    getQuestStatus(val) {\n      val && this.$refs.questDialog.show();\n    },\n    /**\n     * 监听是否有新回答\n     */\n    onRefreshAnswer(data) {\n      if (data) {\n        this.data = [];\n        this.params.current = 1; // 当前页\n        this.getAnswers();\n      }\n    },\n    /**\n     * 监听删除回答\n     * 问题删除成功后刷新页面\n     */\n    onRefreshQuest(data) {\n      if (data) {\n        this.onBackList();\n      }\n    },\n    /**\n     * 返回问答列表\n     */\n    onBackList() {\n      this.$router.replace({\n        path: '/quest-list'\n      });\n    },\n    /**\n     * 加载更多\n     */\n    showMore() {\n      this.params.current++;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url('../../assets/less/global/variable.less');\n.answer-list-box {\n  left: 0;\n  padding: 20px;\n  overflow-y: auto;\n}\n.tip-title {\n  width: fit-content;\n  height: 30px;\n  line-height: 30px;\n  margin-top: 10px;\n  padding: 0 15px;\n  background: rgba(187, 222, 251, 0.3);\n  border-radius: 15px;\n  color: rgba(38, 151, 255, 1);\n}\n.more {\n  color: @orangeColor;\n  cursor: pointer;\n  line-height: 30px;\n}\n.bottomText {\n  display: block;\n  width: 100%;\n  color: @mainColor;\n  text-align: center;\n}\n.null-tip {\n  text-align: center;\n  line-height: 60px;\n}\n</style>\n"]}]}