{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BTable/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BTable/index.vue","mtime":1627979214342},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpsZXQgQ0ZpbHRlckNoZWNrUGFuZWwgPSAoKSA9Pg0KICBpbXBvcnQoJ0AvY29tcG9uZW50cy9jb21tb24vQ0ZpbHRlckNoZWNrUGFuZWwvaW5kZXguanMnKTsNCmltcG9ydCBheGlvcyBmcm9tICdAL3BsdWdpbnMvYXhpb3MnOw0KaW1wb3J0IHsgQnV0dG9uLCBQYWdpbmF0aW9uLCBMb2FkaW5nLCBGb3JtSXRlbSwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOw0KaW1wb3J0IENEeW5hbWljRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0NEeW5hbWljRm9ybSc7DQppbXBvcnQgQ1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ1RhYmxlJzsNCi8qKg0KICog5qC85byP5YyW56m65pWw5o2u5pi+56S6DQogKi8NCmxldCBmb3JtYXR0ZXJFbXB0eURhdGEgPSBzdHIgPT4NCiAgWycnLCBudWxsLCB1bmRlZmluZWRdLmluZGV4T2Yoc3RyKSA+PSAwID8gJy0nIDogc3RyOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQlRhYmxlJywNCiAgcHJvcHM6IHsNCiAgICAvL+aVsOaNruafpeivouaYr+WQpuWxleekumxvYWRpbmcNCiAgICBsb2FkaW5nOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIC8v5riy5p+T5bWM5aWX5pWw5o2u55qE6YWN572u6YCJ6aG5DQogICAgdHJlZVByb3BzOiB7DQogICAgICB0eXBlOiBPYmplY3QNCiAgICB9LA0KICAgIGhpZ2hsaWdodEN1cnJlbnRSb3c6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICAvL+aYr+WQpum7mOiupOWxleW8gOaJgOacieihjO+8jOW9kyBUYWJsZSDljIXlkKvlsZXlvIDooYzlrZjlnKjmiJbogIXkuLrmoJHlvaLooajmoLzml7bmnInmlYgNCiAgICBkZWZhdWx0RXhwYW5kQWxsOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIC8vIOepuuaVsOaNruaXtuaYvuekuueahOaWh+acrOWGheWuuQ0KICAgIGVtcHR5VGV4dDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ+aaguaXoOaVsOaNricNCiAgICB9LA0KICAgIC8v6Ieq5a6a5LmJ6KGM57G75ZCNDQogICAgcm93Q2xhc3NOYW1lOiB7DQogICAgICB0eXBlOiBGdW5jdGlvbiwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9DQogICAgfSwNCiAgICAvL+aVsOaNruafpeivomZ1bmPvvIzov5Tlm55wcm9taXNl5a+56LGhDQogICAgYWpheEdldERhdGE6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgZGVmYXVsdDogKCkgPT4ge30NCiAgICB9LA0KICAgIC8v6KGo5aS05pWw57uEDQogICAgaGVhZGVyczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXQ0KICAgIH0sDQogICAgLy/liIbpobXnu4Tku7bkuI7ooajpl7Tot50NCiAgICBwZ01hcmdpblRvcDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMjANCiAgICB9LA0KICAgIC8v5q+P6aG15bGV56S65pWw6YeP6YCJ5oupDQogICAgcGFnZVNpemVzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFsxMCwgNTAsIDEwMCwgNTAwLCAxMDAwXQ0KICAgIH0sDQogICAgLy/pu5jorqTmr4/pobXlsZXnpLrmlbDph48NCiAgICBwYWdlTGltaXQ6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDUwDQogICAgfSwNCiAgICAvL3RhYmxl6auY5bqmDQogICAgaGVpZ2h0OiB7DQogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddDQogICAgfSwNCiAgICAvL3RhYmxl5pyA5aSn6auYDQogICAgbWF4SGVpZ2h0OiB7DQogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddDQogICAgfSwNCiAgICAvL+WQiOW5tuWIl+aIluihjOeahOiuoeeul+aWueazlSBGdW5jdGlvbih7IHJvdywgY29sdW1uLCByb3dJbmRleCwgY29sdW1uSW5kZXggfQ0KICAgIHNwYW5NZXRob2Q6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uDQogICAgfSwNCiAgICAvLyDooajljZXphY3nva4NCiAgICBmb3JtSXRlbXM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9LA0KICAgIC8vIOWIneWni+WMluihqOWNleaVsOaNrg0KICAgIGluaXRpYWxGb3JtRGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4gKHt9KQ0KICAgIH0sDQogICAgLy8g5bel5YW35qCPDQogICAgdG9vbGJhcnM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9LA0KICAgIC8v5pi+56S65Yi35paw5oyJ6ZKuDQogICAgc2hvd1JlZnJlc2g6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICAvL+aYvuekuuWIlw0KICAgIHNob3dDb2x1bW46IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICAvL+aYvuekuuetm+mAiemhueaMiemSrg0KICAgIHNob3dRdWVyeUZpbHRlcjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICAvL+S/neWtmGNvbHVtbuWIl+aYvuekuuaJgOS9v+eUqOeahOeahGtleQ0KICAgIHNhdmVDb2x1bW5LZXk6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICAvL+S/neWtmOetm+mAiemhueaYvuekuuaJgOS9v+eUqOeahOeahGtleQ0KICAgIHNhdmVRdWVyeUtleTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIC8v6aG555uu57O757ufKOeUqOS6juS/neWtmOWIl+aVsOaNruaXtueahOWPguaVsCkNCiAgICBzeXN0ZW06IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdzaW1zJw0KICAgIH0sDQogICAgLy/liJfmlbDmja7kv53lrZjmnKzlnLANCiAgICBzYXZlTG9jYWw6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogICAgLy/kv53lrZjliJflr7nlupTnmoTmiJDlip/mj5DnpLrmlofmoYgNCiAgICBzYXZlU3VjY2Vzc01zZzogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ+S/neWtmOaIkOWKnycNCiAgICB9LA0KICAgIC8v5L+d5a2Y5YiX5a+55bqU55qE5aSx6LSl5o+Q56S65paH5qGIDQogICAgc2F2ZUVycm9yTXNnOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAn5pWw5o2u5L+d5a2Y5aSx6LSlJw0KICAgIH0sDQogICAgLyoqDQogICAgICog56uL5Y2z5Yqg6L29DQogICAgICovDQogICAgaW1tZWRpYXRlTG9hZDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOihjOaVsOaNrumUruWAvA0KICAgICAqLw0KICAgIHJvd0tleTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogdW5kZWZpbmVkDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQ1RhYmxlLA0KICAgIEVsUGFnaW5hdGlvbjogUGFnaW5hdGlvbiwNCiAgICBDRHluYW1pY0Zvcm0sDQogICAgW0Zvcm1JdGVtLm5hbWVdOiBGb3JtSXRlbSwNCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaGVhZGVyUHJvbWlzZTogbnVsbCwNCiAgICAgIGNvbXB1dGVkSGVhZGVyczogW10sDQogICAgICBjb21wdXRlZEZvcm1JdGVtczogW10sDQogICAgICBhamF4Q291bnQ6IDAsDQogICAgICBzZWxlY3RSb3dzOiBbXSwNCiAgICAgIGxvYWRpbmdJbnM6IG51bGwsDQogICAgICAvL+WIhumhteWPguaVsA0KICAgICAgcGFnZVBhcmFtczogew0KICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgb2Zmc2V0OiAwLA0KICAgICAgICBsaW1pdDogdGhpcy5wYWdlTGltaXQsDQogICAgICAgIHBhZ2U6IDENCiAgICAgIH0sDQogICAgICAvL+aOkuW6j+WPguaVsA0KICAgICAgc29ydFBhcmFtczogew0KICAgICAgICBzb3J0OiB1bmRlZmluZWQsDQogICAgICAgIG9yZGVyOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgLy8g6KGo5Y2V5pWw5o2uDQogICAgICBmb3JtRGF0YTogeyAuLi50aGlzLmluaXRpYWxGb3JtRGF0YSB9LA0KICAgICAgLy8g6KGo5Y2V5pWw5o2uDQogICAgICBmb3JtQXR0cnM6IHsNCiAgICAgICAgaW5saW5lOiB0cnVlLA0KICAgICAgICBzaXplOiAnc21hbGwnDQogICAgICB9LA0KICAgICAgLy8g5piv5ZCm5piv5pWw57uEDQogICAgICBpc0FycmF5OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAvL+avj+mhteWxleekuuaVsOmHj+WPmOWMlg0KICAgICdwYWdlUGFyYW1zLmxpbWl0JygpIHsNCiAgICAgIGxldCB7IHBhZ2UgfSA9IHRoaXMucGFnZVBhcmFtczsNCiAgICAgIGlmIChwYWdlID09IDEpIHsNCiAgICAgICAgLy/lnKjnrKzkuIDpobXkv67mlLnmr4/pobXmlbDph4/ml7bvvIzop6blj5Hph43mlrDor7fmsYINCiAgICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvL+mdnummlumhteS/ruaUue+8jOWwhumhteeggeaUueS4uummlumhte+8jOinpuWPkemhteeggeabtOaWsOebkeWQrA0KICAgICAgICB0aGlzLnBhZ2VQYXJhbXMucGFnZSA9IDE7DQogICAgICB9DQogICAgfSwNCiAgICAvL+W9k+WJjemhteeggeWPmOWMlg0KICAgICdwYWdlUGFyYW1zLnBhZ2UnKCkgew0KICAgICAgbGV0IHsgcGFnZSwgbGltaXQgfSA9IHRoaXMucGFnZVBhcmFtczsNCiAgICAgIHRoaXMucGFnZVBhcmFtcy5vZmZzZXQgPSBsaW1pdCAqIChwYWdlIC0gMSk7DQogICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICB9LA0KICAgIC8vIOaVsOaNruWPmOWMlg0KICAgIHRhYmxlRGF0YSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ3RhYmxlLWRhdGEtY2hhbmdlJywgdGhpcy50YWJsZURhdGEpOw0KICAgIH0sDQogICAgZm9ybUl0ZW1zKCkgew0KICAgICAgLy9mb3JtSXRlbXMg5Y+Y5YyW5aSE55CGDQogICAgICB0aGlzLmRlYWxRdWVyeUl0ZW1zKCk7DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8v6K+35rGC5YWl5Y+CDQogICAgYWpheFBhZ2VQYXJhbXMoKSB7DQogICAgICAvLyBsZXQgcGFyYW0gPSB0aGlzLnBhZ2VQYXJhbXM7DQogICAgICBsZXQgeyBvZmZzZXQsIGxpbWl0LCBwYWdlIH0gPSB0aGlzLnBhZ2VQYXJhbXM7DQogICAgICByZXR1cm4geyBvZmZzZXQsIGxpbWl0LCBwYWdlU2l6ZTogbGltaXQsIHBhZ2VOdW06IHBhZ2UgfTsNCiAgICB9LA0KICAgIC8v5a2Y5YKo5YiX5pWw5o2u5omA55Soa2V5DQogICAgY29tcHV0ZWRTYXZlQ29sdW1uS2V5KCkgew0KICAgICAgaWYgKHRoaXMuc2F2ZUNvbHVtbktleSkgcmV0dXJuIHRoaXMuc2F2ZUNvbHVtbktleTsNCiAgICAgIGxldCBrZXk7DQogICAgICB0cnkgew0KICAgICAgICBrZXkgPSB0aGlzLiRyb3V0ZS5wYXRoOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAga2V5ID0gJ2RlZmF1bHQnOw0KICAgICAgfQ0KICAgICAgcmV0dXJuICd0YWJsZXwnICsga2V5Ow0KICAgIH0sDQogICAgLy/lrZjlgqjnrZvpgInpobnmiYDnlKhrZXkNCiAgICBjb21wdXRlZFNhdmVRdWVyeUtleSgpIHsNCiAgICAgIGlmICh0aGlzLnNhdmVRdWVyeUtleSkgcmV0dXJuIHRoaXMuc2F2ZVF1ZXJ5S2V5Ow0KICAgICAgbGV0IGtleTsNCiAgICAgIHRyeSB7DQogICAgICAgIGtleSA9IHRoaXMuJHJvdXRlLnBhdGg7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBrZXkgPSAnZGVmYXVsdCc7DQogICAgICB9DQogICAgICByZXR1cm4gJ3F1ZXJ5fCcgKyBrZXk7DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuaGVhZGVyUHJvbWlzZSA9IHRoaXMuZGVhbEhlYWRlcnMoKTsgLy/ooajlpLTlpITnkIYNCiAgICB0aGlzLmRlYWxRdWVyeUl0ZW1zKCk7IC8v6KGo5Y2V5p+l6K+i6aG55aSE55CGDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbW1lZGlhdGVMb2FkICYmIHRoaXMuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy/liIbpobXmjqXlj6Por7fmsYLmlbDmja7lpITnkIYNCiAgICBhamF4R2V0VGFibGVEYXRhQnlQYWdlKCkgew0KICAgICAgKHRoaXMuJHJlZnMuY0R5bmFtaWNGb3JtDQogICAgICAgID8gdGhpcy4kcmVmcy5jRHluYW1pY0Zvcm0udmFsaWRhdGUoKQ0KICAgICAgICA6IFByb21pc2UucmVzb2x2ZSgpDQogICAgICApLnRoZW4oKCkgPT4gew0KICAgICAgICBsZXQgdEFqYXhDb3VudCA9ICsrdGhpcy5hamF4Q291bnQ7DQogICAgICAgIGxldCBsYXN0TG9hZGluZ01hcCA9IHRoaXMubGFzdExvYWRpbmdNYXA7DQogICAgICAgIGlmICghdGhpcy4kcmVmcy50YWJsZSkgcmV0dXJuOyAvL+afpeivouS4remAlOWunuS+i+iiq+mUgOavge+8jOe7iOerrw0KICAgICAgICAvL+m7mOiupGxvYWTlrp7kvovkuI3lrZjlnKjvvIzliJvlu7ov5bey5a2Y5Zyo77yM5L2/55So5Y6f5pyJbG9hZOWvueixoQ0KICAgICAgICBpZiAoIXRoaXMubG9hZGluZ0lucykgew0KICAgICAgICAgIC8v5aGr5YWFbG9hZGluZ+Wxleekuum7mOiupOWAvO+8jOWFvOWuueWkhOeQhg0KICAgICAgICAgIGxldCBsb2FkSW5zID0gew0KICAgICAgICAgICAgY2xvc2UoKSB7fQ0KICAgICAgICAgIH07DQogICAgICAgICAgLy/pnIDopoHlsZXnpLpsb2FkaW5nDQogICAgICAgICAgaWYgKHRoaXMubG9hZGluZykgew0KICAgICAgICAgICAgbG9hZElucyA9IExvYWRpbmcuc2VydmljZSh7DQogICAgICAgICAgICAgIHRhcmdldDogdGhpcy4kcmVmcy50YWJsZS4kZWwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmxvYWRpbmdJbnMgPSBsb2FkSW5zOw0KICAgICAgICB9DQogICAgICAgIGxldCBhamF4UGFyYW1zID0gew0KICAgICAgICAgIC4uLnRoaXMuYWpheFBhZ2VQYXJhbXMsDQogICAgICAgICAgLi4udGhpcy5mb3JtRGF0YSwNCiAgICAgICAgICAuLi50aGlzLnNvcnRQYXJhbXMNCiAgICAgICAgfTsNCiAgICAgICAgLy/ojrflj5ZmdW5j5YWl5Y+CDQogICAgICAgIGxldCBkYXRhRnVuID0gdGhpcy5hamF4R2V0RGF0YTsNCiAgICAgICAgLy/lrozmiJDlm57osIMNCiAgICAgICAgbGV0IGNhbGxGdW4gPSByZXMgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCctJywgdEFqYXhDb3VudCwgYWpheENvdW50LCByZXMsIHRoaXMucGFnZVBhcmFtcyk7DQogICAgICAgICAgaWYgKHRBamF4Q291bnQgIT0gdGhpcy5hamF4Q291bnQpIHJldHVybjsgLy/lvZPliY3or7fmsYLpnZ7mnIDmlrDor7fmsYLvvIzot7Pov4flpITnkIYNCiAgICAgICAgICB0aGlzLmxvYWRpbmdJbnMuY2xvc2UoKTsgLy/lhbPpl61sb2FkaW5nDQogICAgICAgICAgdGhpcy5sb2FkaW5nSW5zID0gbnVsbDsgLy/nva7nqbpsb2Fk56S65L6LDQogICAgICAgICAgaWYgKCFyZXMpIHJldHVybjsNCiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhIHx8IHt9Ow0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gQXJyYXkuaXNBcnJheShkYXRhLnJlY29yZHMpID8gZGF0YS5yZWNvcmRzIDogW107IC8v6KGo5pWw5o2uDQogICAgICAgICAgdGhpcy5wYWdlUGFyYW1zLnRvdGFsID0gZGF0YS50b3RhbCB8fCAwOyAvL+aVsOaNrumVv+W6pg0KICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YS5sZW5ndGggPT09IDApIHRoaXMucGFnZVBhcmFtcy5wYWdlID0gMTsgLy/ml6DmlbDmja7ml7bvvIzph43lrprlkJHnrKzkuIDpobUNCiAgICAgICAgfTsNCiAgICAgICAgLy9mdW5j5Yik6Z2e56m65bm25omn6KGMDQogICAgICAgIGxldCBkYXRhUHJvbWlzZSA9IGRhdGFGdW4gJiYgZGF0YUZ1bihhamF4UGFyYW1zKTsNCiAgICAgICAgLy9wcm9taXNl5o6l5pS26L+U5Zue5YC8DQogICAgICAgIGlmIChkYXRhUHJvbWlzZSAmJiB0eXBlb2YgZGF0YVByb21pc2UudGhlbiA9PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgUHJvbWlzZS5hbGwoW2RhdGFQcm9taXNlLCB0aGlzLmhlYWRlclByb21pc2VdKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgY2FsbEZ1bihyZXNbMF0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsNCiAgICAgICAgICAgICAgY2FsbEZ1bigpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY2FsbEZ1bigpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiOt+WPluacjeWKoeerr+S/neWtmOeahOWIly/nrZvpgInpobnphY3nva7kv6Hmga8NCiAgICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSAxPeihqOWktOWIl+S/oeaBryAgMj3nrZvpgInpobnkv6Hmga8NCiAgICAgKi8NCiAgICBhamF4R2V0U2hvd0ZpbHRlckRhdGEodHlwZSA9IDEpIHsNCiAgICAgIGxldCBrZXkgPSB0aGlzLmdldFNhdmVLZXkodHlwZSk7DQogICAgICByZXR1cm4gYXhpb3MoDQogICAgICAgIHsNCiAgICAgICAgICB1cmw6ICcvY29tbW9uRGF0YS9nZW5lcmFsQXBpL2Rpc3BsYXkvY29sdW1uL3F1ZXJ5JywNCiAgICAgICAgICBtZXRob2Q6ICdwb3N0JywNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICB3aGljaERpc3BsYXlUYWJsZToga2V5LA0KICAgICAgICAgICAgd2hpY2hTeXN0ZW06IHRoaXMuc3lzdGVtDQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAnc2ltc2JmZicNCiAgICAgICk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDkv53lrZjmmL7npLrliJcv562b6YCJ6aG5DQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgMT3ooajlpLTliJfkv6Hmga8gIDI9562b6YCJ6aG55L+h5oGvDQogICAgICovDQogICAgYWpheFNhdmVGaWx0ZXJEYXRhKHBhcmFtcywgdHlwZSA9IDEpIHsNCiAgICAgIGxldCBrZXkgPSB0aGlzLmdldFNhdmVLZXkodHlwZSk7DQogICAgICByZXR1cm4gYXhpb3MoDQogICAgICAgIHsNCiAgICAgICAgICB1cmw6ICcvY29tbW9uRGF0YS9nZW5lcmFsQXBpL2Rpc3BsYXkvY29sdW1uL3NhdmUvdXBkYXRlJywNCiAgICAgICAgICBtZXRob2Q6ICdwb3N0JywNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICBkaXNwbGF5Q29sdW1uTGlzdDogcGFyYW1zLA0KICAgICAgICAgICAgd2hpY2hEaXNwbGF5VGFibGU6IGtleSwNCiAgICAgICAgICAgIHdoaWNoU3lzdGVtOiB0aGlzLnN5c3RlbQ0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgJ3NpbXNiZmYnDQogICAgICApOw0KICAgIH0sDQogICAgLy/ooajljZXmn6Xor6LpobnpooTlpITnkIbvvIzpu5jorqTnrZvpgInmmL7npLrmlbDmja7ku47ov5znqIvmiJbmnKzlnLDojrflj5blubbopobnm5YNCiAgICBhc3luYyBkZWFsUXVlcnlJdGVtcygpIHsNCiAgICAgIGxldCBmb3JtSXRlbXMgPSB0aGlzLmZvcm1JdGVtczsNCiAgICAgIC8v6ZyA6KaB4oCc5pi+56S65YiX4oCd5oyJ6ZKu5pe277yM6KGo5aS06ZyA6KaB6I635Y+W5pys5Zyw5oiW6L+c56iL5L+d5a2Y5pWw5o2uDQogICAgICBpZiAodGhpcy5zaG93UXVlcnlGaWx0ZXIpIHsNCiAgICAgICAgbGV0IHJlbW90ZVF1ZXJ5czsNCiAgICAgICAgLy/mnI3liqHnq6/kv53lrZgNCiAgICAgICAgaWYgKCF0aGlzLnNhdmVMb2NhbCkgew0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5hamF4R2V0U2hvd0ZpbHRlckRhdGEoMik7DQogICAgICAgICAgICByZW1vdGVRdWVyeXMgPSByZXMuZGF0YS5kaXNwbGF5Q29sdW1uTGlzdDsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdGUtcXVlcnlzJywgcmVtb3RlUXVlcnlzKTsNCiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgcmVtb3RlUXVlcnlzID0gW107DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlbW90ZVF1ZXJ5cyA9IHRoaXMuZ2V0TG9jYWxGaWx0ZXJEYXRhKDIpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2NhbC1xdWVyeXMnLCByZW1vdGVRdWVyeXMpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuZGVhbENvbHVtbnNIZWFkZXIoZm9ybUl0ZW1zLCByZW1vdGVRdWVyeXMpOyAvL+S9v+eUqOacjeWKoeerr+aVsOaNruimhuebluacrOWcsOaVsOaNrg0KICAgICAgfQ0KICAgICAgLy/lr7loZWFkZXLlgZrpu5jorqTotYvlgLzlpITnkIYNCiAgICAgIGZvcm1JdGVtcyA9IGZvcm1JdGVtcy5tYXAoaGVhZEl0ZW0gPT4gew0KICAgICAgICAvL+WIneWni+mcgOimgei1i+WAvOWtl+aute+8jOWQpuWImemhtemdouaXoOazleagueaNruWtl+auteWTjeW6lA0KICAgICAgICBoZWFkSXRlbS5yZXF1aXJlZCA9IGhlYWRJdGVtLnJlcXVpcmVkIHx8IGZhbHNlOw0KICAgICAgICBoZWFkSXRlbS5oaWRkZW4gPSBoZWFkSXRlbS5oaWRkZW4gfHwgZmFsc2U7DQoNCiAgICAgICAgLy8g5LiL5ouJ6YCJ5oup6buY6K6k5ZCv55So5riF6Zmk5oyJ6ZKu5Yqf6IO9DQogICAgICAgIGlmIChoZWFkSXRlbS50eXBlID09PSAnc2VsZWN0Jykgew0KICAgICAgICAgIGxldCBjbGVhcmFibGUgPSBoZWFkSXRlbS5hdHRycyAmJiBoZWFkSXRlbS5hdHRycy5jbGVhcmFibGU7DQogICAgICAgICAgY2xlYXJhYmxlID0gY2xlYXJhYmxlID09PSB1bmRlZmluZWQgPyB0cnVlIDogY2xlYXJhYmxlOw0KICAgICAgICAgIGlmICghaGVhZEl0ZW0uYXR0cnMpIGhlYWRJdGVtLmF0dHJzID0ge307DQogICAgICAgICAgaGVhZEl0ZW0uYXR0cnMuY2xlYXJhYmxlID0gY2xlYXJhYmxlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBoZWFkSXRlbTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5jb21wdXRlZEZvcm1JdGVtcyA9IGZvcm1JdGVtczsNCiAgICB9LA0KICAgIC8vaGVhZGVy5LqM5qyh5bCB6KOF77yM5aSE55CG5YiG6aG16L+U5Zue5pWw5o2uDQogICAgYXN5bmMgZGVhbEhlYWRlcnMoKSB7DQogICAgICBsZXQgaGVhZGVycyA9IHRoaXMuaGVhZGVyczsNCiAgICAgIC8v6ZyA6KaB4oCc5pi+56S65YiX4oCd5oyJ6ZKu5pe277yM6KGo5aS06ZyA6KaB6I635Y+W5pys5Zyw5oiW6L+c56iL5L+d5a2Y5pWw5o2uDQogICAgICBpZiAodGhpcy5zaG93Q29sdW1uKSB7DQogICAgICAgIGxldCByZW1vdGVIZWFkZXJzOw0KICAgICAgICAvL+acjeWKoeerr+S/neWtmA0KICAgICAgICBpZiAoIXRoaXMuc2F2ZUxvY2FsKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLmFqYXhHZXRTaG93RmlsdGVyRGF0YSgpOw0KICAgICAgICAgICAgcmVtb3RlSGVhZGVycyA9IHJlcy5kYXRhLmRpc3BsYXlDb2x1bW5MaXN0Ow0KICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbW90ZS1oZWFkZXJzJywgcmVtb3RlSGVhZGVycyk7DQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIHJlbW90ZUhlYWRlcnMgPSBbXTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmVtb3RlSGVhZGVycyA9IHRoaXMuZ2V0TG9jYWxGaWx0ZXJEYXRhKCk7DQogICAgICAgICAgY29uc29sZS5sb2coJ2xvY2FsLWhlYWRlcnMnLCByZW1vdGVIZWFkZXJzKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRlYWxDb2x1bW5zSGVhZGVyKGhlYWRlcnMsIHJlbW90ZUhlYWRlcnMpOyAvL+S9v+eUqOacjeWKoeerr+aVsOaNruimhuebluacrOWcsOaVsOaNrg0KICAgICAgfQ0KICAgICAgLy/lr7loZWFkZXLlgZrpu5jorqTotYvlgLzlpITnkIYNCiAgICAgIHRoaXMuY29tcHV0ZWRIZWFkZXJzID0gaGVhZGVycy5tYXAoaGVhZEl0ZW0gPT4gew0KICAgICAgICAvL+WIneWni+mcgOimgei1i+WAvOWtl+aute+8jOWQpuWImemhtemdouaXoOazleagueaNruWtl+auteWTjeW6lA0KICAgICAgICBoZWFkSXRlbS5yZXF1aXJlZCA9IGhlYWRJdGVtLnJlcXVpcmVkIHx8IGZhbHNlOw0KICAgICAgICBoZWFkSXRlbS5oaWRkZW4gPSBoZWFkSXRlbS5oaWRkZW4gfHwgZmFsc2U7DQogICAgICAgIGhlYWRJdGVtLnJlc2l6YWJsZSA9IGhlYWRJdGVtLnJlc2l6YWJsZSB8fCBmYWxzZTsNCiAgICAgICAgbGV0IGZ1biA9IGhlYWRJdGVtLmluZGV4Ow0KICAgICAgICAvL+W6j+WPt+exu+Wei++8jOihpeWFheWIhumhteS/oeaBr+i/lOWbng0KICAgICAgICBpZiAoaGVhZEl0ZW0udHlwZSA9PSAnaW5kZXgnICYmIHR5cGVvZiBmdW4gPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIGhlYWRJdGVtLmluZGV4ID0gaW5kZXggPT4NCiAgICAgICAgICAgIGZ1bihpbmRleCwgdGhpcy5wYWdlUGFyYW1zLnBhZ2UsIHRoaXMucGFnZVBhcmFtcy5saW1pdCk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coaGVhZEl0ZW0uaW5kZXgpOw0KICAgICAgICB9DQogICAgICAgIC8vIOWkhOeQhuepuuaVsOaNruaYvuekuuaoquadoA0KICAgICAgICBsZXQgZm9ybWF0dGVyID0gaGVhZEl0ZW0uZm9ybWF0dGVyOw0KICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIGhlYWRJdGVtLmZvcm1hdHRlciA9ICguLi5hcmdzKSA9PiB7DQogICAgICAgICAgICBsZXQgcmVzID0gZm9ybWF0dGVyLmFwcGx5KG51bGwsIGFyZ3MpOw0KICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlckVtcHR5RGF0YShyZXMpOw0KICAgICAgICAgIH07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaGVhZEl0ZW0uZm9ybWF0dGVyID0gKHJvdywgY29sLCB2YWx1ZSkgPT4gZm9ybWF0dGVyRW1wdHlEYXRhKHZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaGVhZEl0ZW07DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiOt+WPluS/neWtmOWIl+aIluetm+mAiemhueeahGtleQ0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIDE96KGo5aS05YiX5L+h5oGvICAyPeetm+mAiemhueS/oeaBrw0KICAgICAqLw0KICAgIGdldFNhdmVLZXkodHlwZSkgew0KICAgICAgcmV0dXJuIHR5cGUgPT0gMSA/IHRoaXMuY29tcHV0ZWRTYXZlQ29sdW1uS2V5IDogdGhpcy5jb21wdXRlZFNhdmVRdWVyeUtleTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOS/neWtmOacrOWcsOWIly/nrZvpgInpobnmlbDmja4NCiAgICAgKiBAcGFyYW0ge0FycmF5fSBzYXZlRGF0YSDpnIDopoHkv53lrZjnmoTooajlpLTliJcv562b6YCJ6aG55pWw5o2uDQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgMT3pnIDopoHkv53lrZjnmoTooajlpLTliJcvMj3nrZvpgInpobnmlbDmja4NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0g6L+U5ZuecHJvbWlzZeWvueixoQ0KICAgICAqLw0KICAgIHNhdmVMb2NhbEZpbHRlckRhdGEoc2F2ZURhdGEsIHR5cGUgPSAxKSB7DQogICAgICBsZXQga2V5ID0gdGhpcy5nZXRTYXZlS2V5KHR5cGUpOw0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhKSk7DQogICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIE1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubmFtZSArICc6JyArIGVycm9yLm1lc3NhZ2UsDQogICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZWplY3QoKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDojrflj5bmnKzlnLDliJfmlbDmja4NCiAgICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSAxPemcgOimgeS/neWtmOeahOihqOWktOWIly8yPeetm+mAiemhueaVsOaNrg0KICAgICAqLw0KICAgIGdldExvY2FsRmlsdGVyRGF0YSh0eXBlID0gMSkgew0KICAgICAgbGV0IGtleSA9IHRoaXMuZ2V0U2F2ZUtleSh0eXBlKTsNCiAgICAgIGxldCByZXN1bHQ7DQogICAgICB0cnkgew0KICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpIHx8IFtdOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgcmVzdWx0ID0gW107DQogICAgICB9DQogICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0sDQogICAgLyoqDQogICAgICog6I635Y+W5p+l6K+i5Y+C5pWwDQogICAgICovDQogICAgZ2V0UXVlcnlQYXJhbSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIC4uLnRoaXMuYWpheFBhZ2VQYXJhbXMsDQogICAgICAgIC4uLnRoaXMuZm9ybURhdGEsDQogICAgICAgIC4uLnRoaXMuc29ydFBhcmFtcw0KICAgICAgfTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOe7n+S4gOWkhOeQhuihqOWktOaVsOaNru+8jOacjeWKoeerr+aVsOaNruimhuebluacrOWcsOaVsOaNru+8iOaVsOaNruS7peacrOWcsOS4uuWHhu+8jOacrOWcsOS4jeWtmOWcqOeahOWIl+S4jeS9nOWkhOeQhu+8iQ0KICAgICAqIEBwYXJhbSB7QXJyYXl9IGxvY2FsTGlzdCDmnKzlnLDliJ3lp4vnmoTooajlpLTmlbDmja4NCiAgICAgKiBAcGFyYW0ge0FycmF5fSByZW1vdGVMaXN0IOacjeWKoeerr+mFjee9rueahOihqOWktOaVsOaNrg0KICAgICAqLw0KICAgIGRlYWxDb2x1bW5zSGVhZGVyKGxvY2FsTGlzdCwgcmVtb3RlTGlzdCkgew0KICAgICAgLy8gY29uc29sZS50aW1lKCdkZWFsQ29sdW1uc0hlYWRlci10aW1lJyk7DQogICAgICBsZXQgdGVtcFJlbW90ZUxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlbW90ZUxpc3QpKTsgLy/mi7fotJ3ov5znqIvmlbDmja4NCiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBsb2NhbExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgbGV0IGxvY2FsSXRlbSA9IGxvY2FsTGlzdFtpXTsNCiAgICAgICAgbGV0IGxvY2FsUHJvcCA9IGxvY2FsSXRlbS5wcm9wOw0KICAgICAgICAvL+aVsOaNruWFs+mUrmtleeS4jeWtmOWcqO+8jOatpOaVsOaNrumhueS4jeWBmuWkhOeQhg0KICAgICAgICBpZiAoIWxvY2FsUHJvcCkgew0KICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGVtcFJlbW90ZUxpc3QubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBsZXQgcmVtb3RlSXRlbSA9IHRlbXBSZW1vdGVMaXN0W2pdOw0KICAgICAgICAgIGxldCByZW1vdGVQcm9wID0gcmVtb3RlSXRlbS5wcm9wOw0KICAgICAgICAgIC8v5pWw5o2ua2V55LiA6Ie077yM6KaG55uW5pys5Zyw5pWw5o2u77yM5bm25Zyo5ou36LSd5pWw5o2u5Lit56e76Zmk5q2k6aG577yM5LiN5YGa6YeN5aSN5b6q546vDQogICAgICAgICAgaWYgKHJlbW90ZVByb3AgPT0gbG9jYWxQcm9wKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGxvY2FsSXRlbSwgcmVtb3RlSXRlbSwgew0KICAgICAgICAgICAgICByZXF1aXJlZDogbG9jYWxJdGVtLnJlcXVpcmVkLA0KICAgICAgICAgICAgICBsYWJlbDogbG9jYWxJdGVtLmxhYmVsIC8v5LyY5YWI5L2/55So5pys5Zyw5ZCN56ewDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRlbXBSZW1vdGVMaXN0LnNwbGljZShqLCAxKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdkZWFsQ29sdW1uc0hlYWRlci10aW1lJyk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDpobXnoIHliIfmjaINCiAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VyciDlvZPliY3pobXljaHntKLlvJUNCiAgICAgKi8NCiAgICAvLyBvblBnQ3VycmVudENoYW5nZShjdXJyKSB7DQogICAgLy8gICBjb25zb2xlLmxvZyhjdXJyKTsNCiAgICAvLyAgIHRoaXMucGFnZVBhcmFtcy5wYWdlID0gY3VycjsNCiAgICAvLyB9LA0KICAgIC8v5q+P6aG15bGV56S65pWw6YeP5YiH5o2iDQogICAgb25QZ1NpemVDaGFuZ2Uoc2l6ZSkgew0KICAgICAgdGhpcy5wYWdlUGFyYW1zLmxpbWl0ID0gc2l6ZTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOihqOWNleafpeivog0KICAgICAqLw0KICAgIG9uUXVlcnlGb3JtKCkgew0KICAgICAgdGhpcy4kZW1pdCgncXVlcnktZm9ybScpOw0KICAgICAgbGV0IHsgcGFnZSB9ID0gdGhpcy5wYWdlUGFyYW1zOw0KICAgICAgcGFnZSA9PT0gMSA/IHRoaXMuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpIDogKHRoaXMucGFnZVBhcmFtcy5wYWdlID0gMSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDooajljZXph43nva4NCiAgICAgKi8NCiAgICBvblJlc2V0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLnRoaXMuaW5pdGlhbEZvcm1EYXRhIH07DQogICAgICB0aGlzLiRyZWZzLmNEeW5hbWljRm9ybSAmJiB0aGlzLiRyZWZzLmNEeW5hbWljRm9ybS5pbml0KCk7DQogICAgICB0aGlzLiRlbWl0KCdyZXNldC1mb3JtJyk7DQogICAgfSwNCiAgICAvL+i/h+a7pOetm+mAieadoeS7tg0KICAgIGFzeW5jIG9uRmlsdGVyUXVlcnlDb25kaXRpb24oKSB7DQogICAgICBsZXQgY2hlY2tGaWx0ZXJQbHVnaW4gPSAoYXdhaXQgQ0ZpbHRlckNoZWNrUGFuZWwoKSkuZGVmYXVsdDsNCiAgICAgIC8v6LCD55So5pi+56S65YiX5o+S5Lu2DQogICAgICBjaGVja0ZpbHRlclBsdWdpbi5zaG93KHsNCiAgICAgICAgZGF0YTogdGhpcy5mb3JtSXRlbXMsIC8v5rqQ5pWw5o2uIGNoZWNrYm946ZuG5ZCIDQogICAgICAgIC8v54K55Ye75o+Q5Lqk5pe26LCD55So55qE5o6l5Y+jDQogICAgICAgIGFqYXhGdW46IHRoaXMuc2F2ZUxvY2FsDQogICAgICAgICAgPyBwYXJhbXMgPT4gdGhpcy5zYXZlTG9jYWxGaWx0ZXJEYXRhKHBhcmFtcywgMikgLy/mnKzlnLDnvJPlrZgNCiAgICAgICAgICA6IHBhcmFtcyA9PiB0aGlzLmFqYXhTYXZlRmlsdGVyRGF0YShwYXJhbXMsIDIpLCAvL+aOpeWPo+S/neWtmA0KICAgICAgICBzdWNjZXNzTXNnOiB0aGlzLnNhdmVTdWNjZXNzTXNnLA0KICAgICAgICBlcnJvck1zZzogdGhpcy5zYXZlRXJyb3JNc2cNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/nm5HlkKzpgInmi6nlj5jljJYNCiAgICBvblNlbGVjdGlvbkNoYW5nZShyb3dzKSB7DQogICAgICB0aGlzLnNlbGVjdFJvd3MgPSByb3dzOw0KICAgIH0sDQogICAgLy/nm5HlkKzmjpLluo/lj5jljJYNCiAgICBvblNvcnRDaGFuZ2UoeyBvcmRlciwgcHJvcCB9KSB7DQogICAgICB0aGlzLnNvcnRQYXJhbXMgPSB7DQogICAgICAgIG9yZGVyOiBvcmRlciA9PSAnYXNjZW5kaW5nJyA/ICdhc2MnIDogJ2Rlc2MnLA0KICAgICAgICBzb3J0OiBwcm9wDQogICAgICB9Ow0KICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgfSwNCiAgICAvL+WIt+aWsHRhYmxlDQogICAgb25SZWZyZXNoVGFibGUoKSB7DQogICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICB9LA0KICAgIC8v5pi+56S65YiXDQogICAgYXN5bmMgb25DaGFuZ2VDb2x1bW4oKSB7DQogICAgICBsZXQgY2hlY2tGaWx0ZXJQbHVnaW4gPSAoYXdhaXQgQ0ZpbHRlckNoZWNrUGFuZWwoKSkuZGVmYXVsdDsNCiAgICAgIC8v6LCD55So5pi+56S65YiX5o+S5Lu2DQogICAgICBjaGVja0ZpbHRlclBsdWdpbi5zaG93KHsNCiAgICAgICAgdGl0bGU6ICfoh6rlrprkuYnmmL7npLrliJcnLA0KICAgICAgICBkYXRhOiB0aGlzLmhlYWRlcnMsIC8v5rqQ5pWw5o2uIGNoZWNrYm946ZuG5ZCIDQogICAgICAgIC8v54K55Ye75o+Q5Lqk5pe26LCD55So55qE5o6l5Y+jDQogICAgICAgIGFqYXhGdW46IHRoaXMuc2F2ZUxvY2FsDQogICAgICAgICAgPyB0aGlzLnNhdmVMb2NhbEZpbHRlckRhdGEgLy/mnKzlnLDnvJPlrZgNCiAgICAgICAgICA6IHRoaXMuYWpheFNhdmVGaWx0ZXJEYXRhLCAvL+aOpeWPo+S/neWtmA0KICAgICAgICBzdWNjZXNzTXNnOiB0aGlzLnNhdmVTdWNjZXNzTXNnLA0KICAgICAgICBlcnJvck1zZzogdGhpcy5zYXZlRXJyb3JNc2cNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqDQogICAgICog5piv5ZCm5pi+56S65oyJ6ZKuDQogICAgICogQHBhcmFtIHsqfSBidG4g5L+u5pS55YiX6KGoDQogICAgICovDQogICAgaXNIaWRkZW5CdXR0b24oYnRuKSB7DQogICAgICBsZXQgeyBoaWRkZW4gfSA9IGJ0bjsNCiAgICAgIGlmICh0eXBlb2YgaGlkZGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gaGlkZGVuKGJ0bik7DQogICAgICByZXR1cm4gaGlkZGVuOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/score-analysis-admin/components/business/BTable","sourcesContent":["<template>\r\n  <div class=\"c-table\">\r\n    <c-dynamic-form\r\n      v-if=\"formItems && formItems.length\"\r\n      ref=\"cDynamicForm\"\r\n      :form-data=\"formData\"\r\n      :form-items=\"computedFormItems\"\r\n      :form-attrs=\"formAttrs\"\r\n      @change-model=\"model => (formData = model)\"\r\n      @keyup.enter.native=\"onQueryForm\"\r\n    >\r\n      <el-form-item slot=\"form-after\">\r\n        <el-button @click=\"onResetForm\">重置</el-button>\r\n        <el-button type=\"primary\" @click=\"onQueryForm\">查询</el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showQueryFilter\"\r\n          @click=\"onFilterQueryCondition\"\r\n          >设置筛选项</el-button\r\n        >\r\n      </el-form-item>\r\n    </c-dynamic-form>\r\n    <div class=\"toolbars\">\r\n      <div class=\"toolbars-left\">\r\n        <template v-for=\"(tool, index) in toolbars\">\r\n          <el-dropdown\r\n            v-if=\"tool.type === 'dropdown'\"\r\n            :key=\"index\"\r\n            size=\"small\"\r\n            @command=\"\r\n              command =>\r\n                typeof tool.command === 'function' &&\r\n                tool.command(command, selectRows)\r\n            \"\r\n          >\r\n            <el-button type=\"primary\" v-bind=\"tool.attrs\" size=\"small\">\r\n              {{ tool.label }}<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n            </el-button>\r\n            <el-dropdown-menu\r\n              v-if=\"tool.btns && tool.btns.length\"\r\n              slot=\"dropdown\"\r\n            >\r\n              <el-dropdown-item\r\n                v-for=\"(btn, i) in tool.btns\"\r\n                v-bind=\"btn.attrs\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                :key=\"'' + index + i\"\r\n                v-show=\"!isHiddenButton(tool)\"\r\n                @click.native=\"\r\n                  typeof btn.click === 'function' && btn.click(selectRows)\r\n                \"\r\n              >\r\n                {{ btn.label }}\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          <slot\r\n            v-else-if=\"tool.type === 'slot'\"\r\n            :name=\"'toolbars|' + tool.slotName\"\r\n            v-bind:rows=\"selectRows\"\r\n          />\r\n          <el-button\r\n            v-else\r\n            v-bind=\"tool.attrs\"\r\n            :key=\"index\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            v-show=\"!isHiddenButton(tool)\"\r\n            @click=\"typeof tool.click === 'function' && tool.click(selectRows)\"\r\n          >\r\n            {{ tool.label }}\r\n          </el-button>\r\n        </template>\r\n      </div>\r\n      <div class=\"toolbars-right\">\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showRefresh\"\r\n          size=\"small\"\r\n          @click=\"onRefreshTable\"\r\n          >刷新</el-button\r\n        >\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showColumn\"\r\n          size=\"small\"\r\n          @click=\"onChangeColumn\"\r\n          >自定义显示列</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!-- <hl-table :data=\"data\" :headers=\"headers\"></hl-table> -->\r\n    <slot name=\"table-before\" />\r\n    <slot name=\"table-title\"></slot>\r\n    <c-table\r\n      v-bind=\"$props\"\r\n      v-on=\"$listeners\"\r\n      size=\"small\"\r\n      :data=\"tableData\"\r\n      :headers=\"computedHeaders\"\r\n      :border=\"true\"\r\n      @selection-change=\"onSelectionChange\"\r\n      @sort-change=\"onSortChange\"\r\n      ref=\"table\"\r\n    >\r\n      <!-- 自定义列插槽 -->\r\n      <template\r\n        v-for=\"col in headers\"\r\n        :slot=\"'column|' + (col.slotName || col.prop)\"\r\n        slot-scope=\"scope\"\r\n      >\r\n        <slot\r\n          :name=\"'column|' + (col.slotName || col.prop)\"\r\n          :row=\"scope.row\"\r\n          :$index=\"scope.$index\"\r\n        ></slot>\r\n      </template>\r\n    </c-table>\r\n    <el-pagination\r\n      background\r\n      layout=\"total, prev, pager, next, sizes, slot, jumper\"\r\n      :page-sizes=\"pageSizes\"\r\n      :total=\"pageParams.total\"\r\n      :current-page.sync=\"pageParams.page\"\r\n      :page-size=\"pageParams.limit\"\r\n      :style=\"{ 'margin-top': pgMarginTop + 'px' }\"\r\n      @size-change=\"onPgSizeChange\"\r\n    >\r\n      <span class=\"el-pagination-slot\">跳至</span>\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nlet CFilterCheckPanel = () =>\r\n  import('@/components/common/CFilterCheckPanel/index.js');\r\nimport axios from '@/plugins/axios';\r\nimport { Button, Pagination, Loading, FormItem, Message } from 'element-ui';\r\nimport CDynamicForm from '@/components/common/CDynamicForm';\r\nimport CTable from '@/components/common/CTable';\r\n/**\r\n * 格式化空数据显示\r\n */\r\nlet formatterEmptyData = str =>\r\n  ['', null, undefined].indexOf(str) >= 0 ? '-' : str;\r\nexport default {\r\n  name: 'BTable',\r\n  props: {\r\n    //数据查询是否展示loading\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //渲染嵌套数据的配置选项\r\n    treeProps: {\r\n      type: Object\r\n    },\r\n    highlightCurrentRow: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //是否默认展开所有行，当 Table 包含展开行存在或者为树形表格时有效\r\n    defaultExpandAll: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 空数据时显示的文本内容\r\n    emptyText: {\r\n      type: String,\r\n      default: '暂无数据'\r\n    },\r\n    //自定义行类名\r\n    rowClassName: {\r\n      type: Function,\r\n      default: () => {}\r\n    },\r\n    //数据查询func，返回promise对象\r\n    ajaxGetData: {\r\n      type: Function,\r\n      default: () => {}\r\n    },\r\n    //表头数组\r\n    headers: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //分页组件与表间距\r\n    pgMarginTop: {\r\n      type: Number,\r\n      default: 20\r\n    },\r\n    //每页展示数量选择\r\n    pageSizes: {\r\n      type: Array,\r\n      default: () => [10, 50, 100, 500, 1000]\r\n    },\r\n    //默认每页展示数量\r\n    pageLimit: {\r\n      type: Number,\r\n      default: 50\r\n    },\r\n    //table高度\r\n    height: {\r\n      type: [Number, String]\r\n    },\r\n    //table最大高\r\n    maxHeight: {\r\n      type: [Number, String]\r\n    },\r\n    //合并列或行的计算方法 Function({ row, column, rowIndex, columnIndex }\r\n    spanMethod: {\r\n      type: Function\r\n    },\r\n    // 表单配置\r\n    formItems: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 初始化表单数据\r\n    initialFormData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    // 工具栏\r\n    toolbars: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //显示刷新按钮\r\n    showRefresh: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //显示列\r\n    showColumn: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //显示筛选项按钮\r\n    showQueryFilter: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //保存column列显示所使用的的key\r\n    saveColumnKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    //保存筛选项显示所使用的的key\r\n    saveQueryKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    //项目系统(用于保存列数据时的参数)\r\n    system: {\r\n      type: String,\r\n      default: 'sims'\r\n    },\r\n    //列数据保存本地\r\n    saveLocal: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //保存列对应的成功提示文案\r\n    saveSuccessMsg: {\r\n      type: String,\r\n      default: '保存成功'\r\n    },\r\n    //保存列对应的失败提示文案\r\n    saveErrorMsg: {\r\n      type: String,\r\n      default: '数据保存失败'\r\n    },\r\n    /**\r\n     * 立即加载\r\n     */\r\n    immediateLoad: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    /**\r\n     * 行数据键值\r\n     */\r\n    rowKey: {\r\n      type: String,\r\n      default: undefined\r\n    }\r\n  },\r\n  components: {\r\n    CTable,\r\n    ElPagination: Pagination,\r\n    CDynamicForm,\r\n    [FormItem.name]: FormItem,\r\n    [Button.name]: Button\r\n  },\r\n  data() {\r\n    return {\r\n      headerPromise: null,\r\n      computedHeaders: [],\r\n      computedFormItems: [],\r\n      ajaxCount: 0,\r\n      selectRows: [],\r\n      loadingIns: null,\r\n      //分页参数\r\n      pageParams: {\r\n        total: 0,\r\n        offset: 0,\r\n        limit: this.pageLimit,\r\n        page: 1\r\n      },\r\n      //排序参数\r\n      sortParams: {\r\n        sort: undefined,\r\n        order: undefined\r\n      },\r\n      tableData: [],\r\n      // 表单数据\r\n      formData: { ...this.initialFormData },\r\n      // 表单数据\r\n      formAttrs: {\r\n        inline: true,\r\n        size: 'small'\r\n      },\r\n      // 是否是数组\r\n      isArray: arr => Array.isArray(arr)\r\n    };\r\n  },\r\n  watch: {\r\n    //每页展示数量变化\r\n    'pageParams.limit'() {\r\n      let { page } = this.pageParams;\r\n      if (page == 1) {\r\n        //在第一页修改每页数量时，触发重新请求\r\n        this.ajaxGetTableDataByPage();\r\n      } else {\r\n        //非首页修改，将页码改为首页，触发页码更新监听\r\n        this.pageParams.page = 1;\r\n      }\r\n    },\r\n    //当前页码变化\r\n    'pageParams.page'() {\r\n      let { page, limit } = this.pageParams;\r\n      this.pageParams.offset = limit * (page - 1);\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    // 数据变化\r\n    tableData() {\r\n      this.$emit('table-data-change', this.tableData);\r\n    },\r\n    formItems() {\r\n      //formItems 变化处理\r\n      this.dealQueryItems();\r\n    }\r\n  },\r\n  computed: {\r\n    //请求入参\r\n    ajaxPageParams() {\r\n      // let param = this.pageParams;\r\n      let { offset, limit, page } = this.pageParams;\r\n      return { offset, limit, pageSize: limit, pageNum: page };\r\n    },\r\n    //存储列数据所用key\r\n    computedSaveColumnKey() {\r\n      if (this.saveColumnKey) return this.saveColumnKey;\r\n      let key;\r\n      try {\r\n        key = this.$route.path;\r\n      } catch (error) {\r\n        key = 'default';\r\n      }\r\n      return 'table|' + key;\r\n    },\r\n    //存储筛选项所用key\r\n    computedSaveQueryKey() {\r\n      if (this.saveQueryKey) return this.saveQueryKey;\r\n      let key;\r\n      try {\r\n        key = this.$route.path;\r\n      } catch (error) {\r\n        key = 'default';\r\n      }\r\n      return 'query|' + key;\r\n    }\r\n  },\r\n  created() {\r\n    this.headerPromise = this.dealHeaders(); //表头处理\r\n    this.dealQueryItems(); //表单查询项处理\r\n  },\r\n  mounted() {\r\n    this.immediateLoad && this.ajaxGetTableDataByPage();\r\n  },\r\n  methods: {\r\n    //分页接口请求数据处理\r\n    ajaxGetTableDataByPage() {\r\n      (this.$refs.cDynamicForm\r\n        ? this.$refs.cDynamicForm.validate()\r\n        : Promise.resolve()\r\n      ).then(() => {\r\n        let tAjaxCount = ++this.ajaxCount;\r\n        let lastLoadingMap = this.lastLoadingMap;\r\n        if (!this.$refs.table) return; //查询中途实例被销毁，终端\r\n        //默认load实例不存在，创建/已存在，使用原有load对象\r\n        if (!this.loadingIns) {\r\n          //填充loading展示默认值，兼容处理\r\n          let loadIns = {\r\n            close() {}\r\n          };\r\n          //需要展示loading\r\n          if (this.loading) {\r\n            loadIns = Loading.service({\r\n              target: this.$refs.table.$el\r\n            });\r\n          }\r\n          this.loadingIns = loadIns;\r\n        }\r\n        let ajaxParams = {\r\n          ...this.ajaxPageParams,\r\n          ...this.formData,\r\n          ...this.sortParams\r\n        };\r\n        //获取func入参\r\n        let dataFun = this.ajaxGetData;\r\n        //完成回调\r\n        let callFun = res => {\r\n          // console.log('-', tAjaxCount, ajaxCount, res, this.pageParams);\r\n          if (tAjaxCount != this.ajaxCount) return; //当前请求非最新请求，跳过处理\r\n          this.loadingIns.close(); //关闭loading\r\n          this.loadingIns = null; //置空load示例\r\n          if (!res) return;\r\n          let data = res.data || {};\r\n          this.tableData = Array.isArray(data.records) ? data.records : []; //表数据\r\n          this.pageParams.total = data.total || 0; //数据长度\r\n          if (this.tableData.length === 0) this.pageParams.page = 1; //无数据时，重定向第一页\r\n        };\r\n        //func判非空并执行\r\n        let dataPromise = dataFun && dataFun(ajaxParams);\r\n        //promise接收返回值\r\n        if (dataPromise && typeof dataPromise.then == 'function') {\r\n          Promise.all([dataPromise, this.headerPromise])\r\n            .then(res => {\r\n              callFun(res[0]);\r\n            })\r\n            .catch(e => {\r\n              console.error(e);\r\n              callFun();\r\n            });\r\n        } else {\r\n          callFun();\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取服务端保存的列/筛选项配置信息\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    ajaxGetShowFilterData(type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      return axios(\r\n        {\r\n          url: '/commonData/generalApi/display/column/query',\r\n          method: 'post',\r\n          data: {\r\n            whichDisplayTable: key,\r\n            whichSystem: this.system\r\n          }\r\n        },\r\n        'simsbff'\r\n      );\r\n    },\r\n    /**\r\n     * 保存显示列/筛选项\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    ajaxSaveFilterData(params, type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      return axios(\r\n        {\r\n          url: '/commonData/generalApi/display/column/save/update',\r\n          method: 'post',\r\n          data: {\r\n            displayColumnList: params,\r\n            whichDisplayTable: key,\r\n            whichSystem: this.system\r\n          }\r\n        },\r\n        'simsbff'\r\n      );\r\n    },\r\n    //表单查询项预处理，默认筛选显示数据从远程或本地获取并覆盖\r\n    async dealQueryItems() {\r\n      let formItems = this.formItems;\r\n      //需要“显示列”按钮时，表头需要获取本地或远程保存数据\r\n      if (this.showQueryFilter) {\r\n        let remoteQuerys;\r\n        //服务端保存\r\n        if (!this.saveLocal) {\r\n          try {\r\n            let res = await this.ajaxGetShowFilterData(2);\r\n            remoteQuerys = res.data.displayColumnList;\r\n            console.log('remote-querys', remoteQuerys);\r\n          } catch (error) {\r\n            remoteQuerys = [];\r\n          }\r\n        } else {\r\n          remoteQuerys = this.getLocalFilterData(2);\r\n          console.log('local-querys', remoteQuerys);\r\n        }\r\n        this.dealColumnsHeader(formItems, remoteQuerys); //使用服务端数据覆盖本地数据\r\n      }\r\n      //对header做默认赋值处理\r\n      formItems = formItems.map(headItem => {\r\n        //初始需要赋值字段，否则页面无法根据字段响应\r\n        headItem.required = headItem.required || false;\r\n        headItem.hidden = headItem.hidden || false;\r\n\r\n        // 下拉选择默认启用清除按钮功能\r\n        if (headItem.type === 'select') {\r\n          let clearable = headItem.attrs && headItem.attrs.clearable;\r\n          clearable = clearable === undefined ? true : clearable;\r\n          if (!headItem.attrs) headItem.attrs = {};\r\n          headItem.attrs.clearable = clearable;\r\n        }\r\n        return headItem;\r\n      });\r\n      this.computedFormItems = formItems;\r\n    },\r\n    //header二次封装，处理分页返回数据\r\n    async dealHeaders() {\r\n      let headers = this.headers;\r\n      //需要“显示列”按钮时，表头需要获取本地或远程保存数据\r\n      if (this.showColumn) {\r\n        let remoteHeaders;\r\n        //服务端保存\r\n        if (!this.saveLocal) {\r\n          try {\r\n            let res = await this.ajaxGetShowFilterData();\r\n            remoteHeaders = res.data.displayColumnList;\r\n            console.log('remote-headers', remoteHeaders);\r\n          } catch (error) {\r\n            remoteHeaders = [];\r\n          }\r\n        } else {\r\n          remoteHeaders = this.getLocalFilterData();\r\n          console.log('local-headers', remoteHeaders);\r\n        }\r\n        this.dealColumnsHeader(headers, remoteHeaders); //使用服务端数据覆盖本地数据\r\n      }\r\n      //对header做默认赋值处理\r\n      this.computedHeaders = headers.map(headItem => {\r\n        //初始需要赋值字段，否则页面无法根据字段响应\r\n        headItem.required = headItem.required || false;\r\n        headItem.hidden = headItem.hidden || false;\r\n        headItem.resizable = headItem.resizable || false;\r\n        let fun = headItem.index;\r\n        //序号类型，补充分页信息返回\r\n        if (headItem.type == 'index' && typeof fun == 'function') {\r\n          headItem.index = index =>\r\n            fun(index, this.pageParams.page, this.pageParams.limit);\r\n          // console.log(headItem.index);\r\n        }\r\n        // 处理空数据显示横杠\r\n        let formatter = headItem.formatter;\r\n        if (typeof formatter === 'function') {\r\n          headItem.formatter = (...args) => {\r\n            let res = formatter.apply(null, args);\r\n            return formatterEmptyData(res);\r\n          };\r\n        } else {\r\n          headItem.formatter = (row, col, value) => formatterEmptyData(value);\r\n        }\r\n        return headItem;\r\n      });\r\n    },\r\n    /**\r\n     * 获取保存列或筛选项的key\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    getSaveKey(type) {\r\n      return type == 1 ? this.computedSaveColumnKey : this.computedSaveQueryKey;\r\n    },\r\n    /**\r\n     * 保存本地列/筛选项数据\r\n     * @param {Array} saveData 需要保存的表头列/筛选项数据\r\n     * @param {Number} type 1=需要保存的表头列/2=筛选项数据\r\n     * @returns {Promise} 返回promise对象\r\n     */\r\n    saveLocalFilterData(saveData, type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          localStorage.setItem(key, JSON.stringify(saveData));\r\n          resolve();\r\n        } catch (error) {\r\n          Message({\r\n            message: error.name + ':' + error.message,\r\n            type: 'warning',\r\n            duration: 5 * 1000\r\n          });\r\n          reject();\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取本地列数据\r\n     * @param {Number} type 1=需要保存的表头列/2=筛选项数据\r\n     */\r\n    getLocalFilterData(type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      let result;\r\n      try {\r\n        result = JSON.parse(localStorage.getItem(key)) || [];\r\n      } catch (error) {\r\n        result = [];\r\n      }\r\n      return result;\r\n    },\r\n    /**\r\n     * 获取查询参数\r\n     */\r\n    getQueryParam() {\r\n      return {\r\n        ...this.ajaxPageParams,\r\n        ...this.formData,\r\n        ...this.sortParams\r\n      };\r\n    },\r\n    /**\r\n     * 统一处理表头数据，服务端数据覆盖本地数据（数据以本地为准，本地不存在的列不作处理）\r\n     * @param {Array} localList 本地初始的表头数据\r\n     * @param {Array} remoteList 服务端配置的表头数据\r\n     */\r\n    dealColumnsHeader(localList, remoteList) {\r\n      // console.time('dealColumnsHeader-time');\r\n      let tempRemoteList = JSON.parse(JSON.stringify(remoteList)); //拷贝远程数据\r\n      for (let i = 0, len = localList.length; i < len; i++) {\r\n        let localItem = localList[i];\r\n        let localProp = localItem.prop;\r\n        //数据关键key不存在，此数据项不做处理\r\n        if (!localProp) {\r\n          continue;\r\n        }\r\n        for (let j = 0; j < tempRemoteList.length; j++) {\r\n          let remoteItem = tempRemoteList[j];\r\n          let remoteProp = remoteItem.prop;\r\n          //数据key一致，覆盖本地数据，并在拷贝数据中移除此项，不做重复循环\r\n          if (remoteProp == localProp) {\r\n            Object.assign(localItem, remoteItem, {\r\n              required: localItem.required,\r\n              label: localItem.label //优先使用本地名称\r\n            });\r\n            tempRemoteList.splice(j, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      // console.timeEnd('dealColumnsHeader-time');\r\n    },\r\n    /**\r\n     * 页码切换\r\n     * @param {Number} curr 当前页卡索引\r\n     */\r\n    // onPgCurrentChange(curr) {\r\n    //   console.log(curr);\r\n    //   this.pageParams.page = curr;\r\n    // },\r\n    //每页展示数量切换\r\n    onPgSizeChange(size) {\r\n      this.pageParams.limit = size;\r\n    },\r\n    /**\r\n     * 表单查询\r\n     */\r\n    onQueryForm() {\r\n      this.$emit('query-form');\r\n      let { page } = this.pageParams;\r\n      page === 1 ? this.ajaxGetTableDataByPage() : (this.pageParams.page = 1);\r\n    },\r\n    /**\r\n     * 表单重置\r\n     */\r\n    onResetForm() {\r\n      this.formData = { ...this.initialFormData };\r\n      this.$refs.cDynamicForm && this.$refs.cDynamicForm.init();\r\n      this.$emit('reset-form');\r\n    },\r\n    //过滤筛选条件\r\n    async onFilterQueryCondition() {\r\n      let checkFilterPlugin = (await CFilterCheckPanel()).default;\r\n      //调用显示列插件\r\n      checkFilterPlugin.show({\r\n        data: this.formItems, //源数据 checkbox集合\r\n        //点击提交时调用的接口\r\n        ajaxFun: this.saveLocal\r\n          ? params => this.saveLocalFilterData(params, 2) //本地缓存\r\n          : params => this.ajaxSaveFilterData(params, 2), //接口保存\r\n        successMsg: this.saveSuccessMsg,\r\n        errorMsg: this.saveErrorMsg\r\n      });\r\n    },\r\n    //监听选择变化\r\n    onSelectionChange(rows) {\r\n      this.selectRows = rows;\r\n    },\r\n    //监听排序变化\r\n    onSortChange({ order, prop }) {\r\n      this.sortParams = {\r\n        order: order == 'ascending' ? 'asc' : 'desc',\r\n        sort: prop\r\n      };\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    //刷新table\r\n    onRefreshTable() {\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    //显示列\r\n    async onChangeColumn() {\r\n      let checkFilterPlugin = (await CFilterCheckPanel()).default;\r\n      //调用显示列插件\r\n      checkFilterPlugin.show({\r\n        title: '自定义显示列',\r\n        data: this.headers, //源数据 checkbox集合\r\n        //点击提交时调用的接口\r\n        ajaxFun: this.saveLocal\r\n          ? this.saveLocalFilterData //本地缓存\r\n          : this.ajaxSaveFilterData, //接口保存\r\n        successMsg: this.saveSuccessMsg,\r\n        errorMsg: this.saveErrorMsg\r\n      });\r\n    },\r\n    /**\r\n     * 是否显示按钮\r\n     * @param {*} btn 修改列表\r\n     */\r\n    isHiddenButton(btn) {\r\n      let { hidden } = btn;\r\n      if (typeof hidden === 'function') return hidden(btn);\r\n      return hidden;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.toolbars {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.el-button + .el-dropdown,\r\n.el-dropdown + .el-button {\r\n  margin-left: 10px;\r\n}\r\n.el-pagination-slot {\r\n  color: @normal-txt;\r\n  font-weight: normal;\r\n  margin-right: -54px;\r\n  background: #fff;\r\n  display: inline-block;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n</style>\r\n"]}]}