{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/teacher-points/search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/teacher-points/search.vue","mtime":1627979214414},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY2xpc3QgZnJvbSAnLi9jb21wb25lbnRzL2xpc3QnOw0KaW1wb3J0IHsgYXdhcmRSZXBvcnRMaXN0IH0gZnJvbSAnQC9wYWdlcy90ZWFjaGluZy1wb2ludHMtaDUvYXBpL3RlYWNoaW5nLWFjdGl2aXR5L3RlYWNoaW5nLXBvaW50cyc7DQppbXBvcnQgeyBTZWFyY2gsIExpc3QsIFRvYXN0LCBQdWxsUmVmcmVzaCwgTG9hZGluZyB9IGZyb20gJ3ZhbnQnOw0KaW1wb3J0IE5vdERhdGEgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb21tb24vTm90RGF0YS52dWUnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnbm9ybWFsRXhhbWluZVNlYXJjaCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBbU2VhcmNoLm5hbWVdOiBTZWFyY2gsDQogICAgW0xpc3QubmFtZV06IExpc3QsDQogICAgW1B1bGxSZWZyZXNoLm5hbWVdOiBQdWxsUmVmcmVzaCwNCiAgICBbTG9hZGluZy5uYW1lXTogTG9hZGluZywNCiAgICBjbGlzdDogY2xpc3QsDQogICAgTm90RGF0YQ0KICB9LA0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW50ZWdyYWxMaXN0OiBbXSwNCiAgICAgIHBhZ2VJbmZvOiB7DQogICAgICAgIC8v5aGr5oql5L+h5oGv5oC76aG15pWwDQogICAgICAgIHRvdGFsOiAwDQogICAgICB9LA0KICAgICAgaXNzdWVOYW1lOiAnJywNCiAgICAgIHBhZ2luZ1BhcmFtczogew0KICAgICAgICAvL+Whq+aKpeWIhumhteWPguaVsA0KICAgICAgICBsaW1pdDogMTAsDQogICAgICAgIG9mZnNldDogMA0KICAgICAgfSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KICAgICAgcmVmcmVzaGluZzogZmFsc2UsDQogICAgICBlcnJvcjogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuaW5pdCgpOw0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGZpbmlzaGVkVGV4dCgpIHsNCiAgICAgIGlmICh0aGlzLnBhZ2VJbmZvLnRvdGFsID09PSAwKSB7DQogICAgICAgIHJldHVybiAn5pqC5peg5pWw5o2uJzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAn5rKh5pyJ5pu05aSa5LqGJzsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0KCkgew0KICAgICAgdGhpcy4kZGQuYml6Lm5hdmlnYXRpb24uc2V0UmlnaHQoew0KICAgICAgICBzaG93OiBmYWxzZSAvL+aOp+WItuaMiemSruaYvuekuu+8jCB0cnVlIOaYvuekuu+8jCBmYWxzZSDpmpDol4/vvIwg6buY6K6kdHJ1ZQ0KICAgICAgfSk7DQogICAgICB0aGlzLmdldERhdGEoKTsNCiAgICB9LA0KICAgIG9uUmVmcmVzaCgpIHsNCiAgICAgIHRoaXMuaW50ZWdyYWxMaXN0ID0gW107DQogICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5wYWdlSW5mby50b3RhbCA9IDA7DQogICAgICB0aGlzLnBhZ2luZ1BhcmFtcy5vZmZzZXQgPSAwOw0KICAgICAgdGhpcy5vbkxvYWQoKTsNCiAgICB9LA0KICAgIG9uTG9hZCgpIHsNCiAgICAgIGlmICh0aGlzLnJlZnJlc2hpbmcpIHsNCiAgICAgICAgdGhpcy5pbnRlZ3JhbExpc3QgPSBbXTsNCiAgICAgICAgdGhpcy5yZWZyZXNoaW5nID0gZmFsc2U7DQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDojrflj5bliJfooajmlbDmja4NCiAgICAgKi8NCiAgICBnZXREYXRhKCkgew0KICAgICAgaWYgKHRoaXMucGFnaW5nUGFyYW1zLm9mZnNldCA+IHRoaXMucGFnZUluZm8udG90YWwpIHJldHVybjsNCiAgICAgIGF3YXJkUmVwb3J0TGlzdCh7DQogICAgICAgIGlzc3VlTmFtZTogdGhpcy5pc3N1ZU5hbWUsDQogICAgICAgIC4uLnRoaXMucGFnaW5nUGFyYW1zDQogICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEucmVjb3JkcyB8fCBbXTsNCiAgICAgICAgICAgIHRoaXMuaW50ZWdyYWxMaXN0ID0gdGhpcy5pbnRlZ3JhbExpc3QuY29uY2F0KGRhdGEpOw0KICAgICAgICAgICAgdGhpcy5wYWdlSW5mby50b3RhbCA9IHJlcy5kYXRhLnRvdGFsIHx8IDA7DQogICAgICAgICAgICBpZiAodGhpcy5wYWdlSW5mby50b3RhbCA8PSByZXMuZGF0YS5jdXJyZW50ICogcmVzLmRhdGEuc2l6ZSkgew0KICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMucGFnaW5nUGFyYW1zLm9mZnNldCA9DQogICAgICAgICAgICAgICAgKE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luZ1BhcmFtcy5vZmZzZXQgLyB0aGlzLnBhZ2luZ1BhcmFtcy5saW1pdA0KICAgICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAgICAgMSkgKg0KICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nUGFyYW1zLmxpbWl0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIFRvYXN0LmZhaWwocmVzLm1lc3NhZ2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsNCiAgICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/pages/teaching-points-h5/views/teacher-points","sourcesContent":["<template>\r\n  <div class=\"search-page\">\r\n    <p>\r\n      <van-search\r\n        v-model=\"issueName\"\r\n        @search=\"onRefresh\"\r\n        shape=\"round\"\r\n        background=\"#F6F6F6\"\r\n        placeholder=\"请输入奖项名称\"\r\n      />\r\n    </p>\r\n    <div\r\n      class=\"list-content\"\r\n      v-if=\"Array.isArray(integralList) && integralList.length > 0\"\r\n    >\r\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n        <van-list\r\n          v-model=\"loading\"\r\n          :finished=\"finished\"\r\n          :offset=\"20\"\r\n          :error.sync=\"error\"\r\n          error-text=\"请求失败，点击重新加载\"\r\n          :finished-text=\"finishedText\"\r\n          @load=\"onLoad\"\r\n        >\r\n          <dl>\r\n            <clist :integralList=\"integralList\"></clist>\r\n          </dl>\r\n        </van-list>\r\n      </van-pull-refresh>\r\n    </div>\r\n    <div v-else class=\"notHasData\">\r\n      <div class=\"loadingList\" v-if=\"!finished\">\r\n        <van-loading size=\"24px\">加载中...</van-loading>\r\n      </div>\r\n      <div v-else>\r\n        <not-data>\r\n          <div slot=\"notdataMessage\" class=\"notData\">\r\n            <div>当前页面没有数据</div>\r\n            <div>请到管理后台添加</div>\r\n          </div>\r\n        </not-data>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clist from './components/list';\r\nimport { awardReportList } from '@/pages/teaching-points-h5/api/teaching-activity/teaching-points';\r\nimport { Search, List, Toast, PullRefresh, Loading } from 'vant';\r\nimport NotData from '../../components/common/NotData.vue';\r\nexport default {\r\n  name: 'normalExamineSearch',\r\n  components: {\r\n    [Search.name]: Search,\r\n    [List.name]: List,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [Loading.name]: Loading,\r\n    clist: clist,\r\n    NotData\r\n  },\r\n  data: function() {\r\n    return {\r\n      integralList: [],\r\n      pageInfo: {\r\n        //填报信息总页数\r\n        total: 0\r\n      },\r\n      issueName: '',\r\n      pagingParams: {\r\n        //填报分页参数\r\n        limit: 10,\r\n        offset: 0\r\n      },\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      error: false\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  computed: {\r\n    finishedText() {\r\n      if (this.pageInfo.total === 0) {\r\n        return '暂无数据';\r\n      } else {\r\n        return '没有更多了';\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.$dd.biz.navigation.setRight({\r\n        show: false //控制按钮显示， true 显示， false 隐藏， 默认true\r\n      });\r\n      this.getData();\r\n    },\r\n    onRefresh() {\r\n      this.integralList = [];\r\n      this.finished = false;\r\n      this.loading = true;\r\n      this.pageInfo.total = 0;\r\n      this.pagingParams.offset = 0;\r\n      this.onLoad();\r\n    },\r\n    onLoad() {\r\n      if (this.refreshing) {\r\n        this.integralList = [];\r\n        this.refreshing = false;\r\n      }\r\n      this.loading = true;\r\n      this.getData();\r\n    },\r\n    /**\r\n     * 获取列表数据\r\n     */\r\n    getData() {\r\n      if (this.pagingParams.offset > this.pageInfo.total) return;\r\n      awardReportList({\r\n        issueName: this.issueName,\r\n        ...this.pagingParams\r\n      })\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            let data = res.data.records || [];\r\n            this.integralList = this.integralList.concat(data);\r\n            this.pageInfo.total = res.data.total || 0;\r\n            if (this.pageInfo.total <= res.data.current * res.data.size) {\r\n              this.finished = true;\r\n            } else {\r\n              this.pagingParams.offset =\r\n                (Math.floor(\r\n                  this.pagingParams.offset / this.pagingParams.limit\r\n                ) +\r\n                  1) *\r\n                this.pagingParams.limit;\r\n            }\r\n            this.loading = false;\r\n          } else {\r\n            Toast.fail(res.message);\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.error = true;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-page {\r\n  background: #f6f6f6;\r\n  /deep/ .van-search__content {\r\n    background-color: #fff;\r\n  }\r\n  /deep/ .van-search {\r\n    height: 1.08rem;\r\n  }\r\n  .list-content {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: calc(100% - 1.08rem);\r\n    overflow-y: auto;\r\n  }\r\n}\r\n.notHasData {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  .loadingList {\r\n    margin-top: 2rem;\r\n  }\r\n  .notData {\r\n    text-align: center;\r\n    > div {\r\n      font-size: 0.28rem;\r\n      font-weight: 400;\r\n      color: rgba(0, 0, 0, 0.45);\r\n      line-height: 0.4rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}