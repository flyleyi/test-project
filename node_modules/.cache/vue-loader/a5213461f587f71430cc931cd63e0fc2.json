{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue","mtime":1646020479970},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHBhcnNpbmdUb2tlbiB9IGZyb20gJy4uL2FwaS9zdXJ2ZXknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6YCJ6aG55YiX6KGoCiAgICAuLi5tYXBTdGF0ZSgndXNlcicsIFsnd2VjaGF0VXNlcklkJywgJ2NsYXNzSWQnLCAncm9sZSddKQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucGFyc2luZ1Rva2VuKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blsI/nqIvluo/ot7PovazmiYDluKbnmoR0b2tlbgogICAgZ2V0UXVlcnlTdHJpbmcocGFyYW1zKSB7CiAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCcoXnwmKScgKyBwYXJhbXMgKyAnPShbXiZdKikoJnwkKScsICdpJyk7IC8vIOino+aekHVybOWcsOWdgAogICAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7CiAgICAgIGlmIChyICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJbMl0pOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIC8vIOino+aekHRva2VuCiAgICBwYXJzaW5nVG9rZW4oKSB7CiAgICAgIGxldCB0b2tlbiA9IHRoaXMuZ2V0UXVlcnlTdHJpbmcoJ3Rva2VuJyk7CiAgICAgIGlmICh0aGlzLndlY2hhdFVzZXJJZCkgewogICAgICAgIGlmICh0aGlzLnJvbGUgPT0gMSkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAnL3N1cnZleS10ZWFjaGVyJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgcGF0aDogJy9zdXJ2ZXktcGFyZW50JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBwYXJzaW5nVG9rZW4odG9rZW4pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIHdlY2hhdFVzZXJJZDogcmVzLmRhdGEud2VjaGF0VXNlcklkLAogICAgICAgICAgICBjbGFzc0lkOiByZXMuZGF0YS5jbGFzc0lkLAogICAgICAgICAgICByb2xlOiByZXMuZGF0YS5yb2xlLCAvLyAw5a626ZW/IDHnj63kuLvku7sKICAgICAgICAgICAgc3R1ZGVudElkOiByZXMuZGF0YS5jaGlsZEluZm8uc3R1ZGVudElkCiAgICAgICAgICAgICAgPyByZXMuZGF0YS5jaGlsZEluZm8uc3R1ZGVudElkCiAgICAgICAgICAgICAgOiAnJwogICAgICAgICAgfTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3dlY2hhdFVzZXJJZCcsIG9iai53ZWNoYXRVc2VySWQpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2xhc3NJZCcsIG9iai5jbGFzc0lkKTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3JvbGUnLCBvYmoucm9sZSk7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzdHVkZW50SWQnLCBvYmouc3R1ZGVudElkKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXNlci9TQVZFX1VTRVJJTkZPJywgewogICAgICAgICAgICB3ZWNoYXRVc2VySWQ6IHJlcy5kYXRhLndlY2hhdFVzZXJJZCwKICAgICAgICAgICAgY2xhc3NJZDogcmVzLmRhdGEuY2xhc3NJZCwKICAgICAgICAgICAgcm9sZTogcmVzLmRhdGEucm9sZSwgLy8gMOWutumVvyAx54+t5Li75Lu7CiAgICAgICAgICAgIHN0dWRlbnRJZDogcmVzLmRhdGEucm9sZSA/ICcnIDogcmVzLmRhdGEuY2hpbGRJbmZvLnN0dWRlbnRJZAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAob2JqLnJvbGUgPT0gMSkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgcGF0aDogJy9zdXJ2ZXktdGVhY2hlcicKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgcGF0aDogJy9zdXJ2ZXktcGFyZW50JwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3QoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/pages/jx-questionnaire-h5/views","sourcesContent":["<template>\n  <div class=\"home\" id=\"launch-btn\"></div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { parsingToken } from '../api/survey';\nexport default {\n  name: 'Home',\n  components: {},\n  data() {\n    return {};\n  },\n  computed: {\n    // 选项列表\n    ...mapState('user', ['wechatUserId', 'classId', 'role'])\n  },\n  created() {\n    this.parsingToken();\n  },\n  methods: {\n    // 获取小程序跳转所带的token\n    getQueryString(params) {\n      var reg = new RegExp('(^|&)' + params + '=([^&]*)(&|$)', 'i'); // 解析url地址\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) {\n        return decodeURIComponent(r[2]);\n      }\n      return null;\n    },\n    // 解析token\n    parsingToken() {\n      let token = this.getQueryString('token');\n      if (this.wechatUserId) {\n        if (this.role == 1) {\n          this.$router.replace({\n            path: '/survey-teacher'\n          });\n        } else {\n          this.$router.replace({\n            path: '/survey-parent'\n          });\n        }\n        return;\n      }\n      parsingToken(token)\n        .then(res => {\n          let obj = {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.childInfo.studentId\n              ? res.data.childInfo.studentId\n              : ''\n          };\n          sessionStorage.setItem('wechatUserId', obj.wechatUserId);\n          sessionStorage.setItem('classId', obj.classId);\n          sessionStorage.setItem('role', obj.role);\n          sessionStorage.setItem('studentId', obj.studentId);\n          this.$store.commit('user/SAVE_USERINFO', {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.role ? '' : res.data.childInfo.studentId\n          });\n          if (obj.role == 1) {\n            this.$router.replace({\n              path: '/survey-teacher'\n            });\n          } else {\n            this.$router.replace({\n              path: '/survey-parent'\n            });\n          }\n        })\n        .catch(err => {\n          this.$toast(err.msg);\n        });\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.home {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n"]}]}