{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/normal-examine/components/tableSelector.vue?vue&type=style&index=0&id=65556773&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/normal-examine/components/tableSelector.vue","mtime":1645176309876},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi50YWJsZS1zZWxlY3RvciB7DQogIGJhY2tncm91bmQ6ICNmNmY2ZjY7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIC9kZWVwLyAudmFuLXNlYXJjaF9fY29udGVudCB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgfQ0KICAudGFibGUgew0KICAgIC50aXRsZSB7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgZm9udC1zaXplOiAwLjMycmVtOw0KICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7DQogICAgICBtYXJnaW46IDAuMnJlbSAwOw0KICAgICAgLnQtdGl0bGUgew0KICAgICAgICB3aWR0aDogY2FsYyg1MCUgLSAwLjU1cmVtKTsNCiAgICAgICAgdGV4dC1hbGlnbjogc3RhcnQ7DQogICAgICAgIHBhZGRpbmctbGVmdDogMC40cmVtOw0KICAgICAgfQ0KICAgIH0NCiAgICAuY29udGVudCB7DQogICAgICBmb250LXNpemU6IDAuMjhyZW07DQogICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgL2RlZXAvIC52YW4tcmFkaW8gew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiAxcmVtOw0KICAgICAgICBwYWRkaW5nOiAwIDAuM3JlbTsNCiAgICAgICAgYm9yZGVyLWJvdHRvbTogMC4wMnJlbSBzb2xpZCByZ2JhKDI1LCAzMSwgMzcsIDAuMDg1KTsNCiAgICAgICAgLnZhbi1yYWRpb19faWNvbiB7DQogICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICB3aWR0aDogMC4zMnJlbTsNCiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgIHBhZGRpbmc6IDAuM3JlbTsNCiAgICAgICAgICBib3JkZXItcmlnaHQ6IDAuMDJyZW0gc29saWQgcmdiYSgyNSwgMzEsIDM3LCAwLjA4NSk7DQogICAgICAgICAgLnZhbi1pY29uIHsNCiAgICAgICAgICAgIHdpZHRoOiAwLjMycmVtOw0KICAgICAgICAgICAgaGVpZ2h0OiAwLjMycmVtOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7DQogICAgICAgICAgICBmb250LXNpemU6IDAuMjRyZW07DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC52YW4tcmFkaW9fX2ljb24tLWNoZWNrZWQgLnZhbi1pY29uIHsNCiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDg5ZWYzOw0KICAgICAgICAgIGJvcmRlci1jb2xvcjogIzQ4OWVmMzsNCiAgICAgICAgfQ0KICAgICAgICAudmFuLXJhZGlvX19sYWJlbCB7DQogICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMS4xNHJlbSk7DQogICAgICAgICAgaGVpZ2h0OiAxcmVtOw0KICAgICAgICAgIGxpbmUtaGVpZ2h0OiAwLjRyZW07DQogICAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44NSk7DQogICAgICAgICAgbWFyZ2luLWxlZnQ6IDA7DQogICAgICAgICAgPiBzcGFuIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDAuMjRyZW07DQogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDAuMDJyZW0gc29saWQgcmdiYSgyNSwgMzEsIDM3LCAwLjA4NSk7DQogICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC5saXN0LXRhYmxlLXRlYWNoZXIgew0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDMuOHJlbSk7DQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgIH0NCiAgICAuY29uZmlybS1idG4gew0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICBib3R0b206IDAuNThyZW07DQogICAgICBwYWRkaW5nOiAwIDAuMzJyZW07DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgYnV0dG9uIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogMC45NnJlbTsNCiAgICAgICAgZm9udC1zaXplOiAwLjI4cmVtOw0KICAgICAgICBib3JkZXItcmFkaXVzOiAwLjA4cmVtOw0KICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIzQwYWRmNiwgIzUyOGJlZSk7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["tableSelector.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tableSelector.vue","sourceRoot":"src/pages/teaching-points-h5/views/normal-examine/components","sourcesContent":["<template>\r\n  <div class=\"table-selector\">\r\n    <p>\r\n      <van-search\r\n        v-model=\"keywords\"\r\n        @search=\"onRefresh\"\r\n        shape=\"round\"\r\n        background=\"#F6F6F6\"\r\n        placeholder=\"请输入教师工号、姓名\"\r\n      />\r\n    </p>\r\n    <div class=\"table\">\r\n      <tr class=\"title\">\r\n        <th style=\"width: 1.14rem;\"></th>\r\n        <th class=\"t-title\">工号</th>\r\n        <th class=\"t-title\">教师姓名</th>\r\n      </tr>\r\n      <div class=\"list-table-teacher\">\r\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n          <van-list\r\n            v-model=\"loading\"\r\n            :finished=\"finished\"\r\n            :offset=\"20\"\r\n            :error.sync=\"error\"\r\n            error-text=\"请求失败，点击重新加载\"\r\n            :finished-text=\"finishedText\"\r\n            @load=\"onLoad\"\r\n          >\r\n            <van-radio-group\r\n              class=\"content\"\r\n              v-model=\"result\"\r\n              ref=\"checkboxGroup\"\r\n            >\r\n              <van-radio\r\n                v-for=\"item in tableData\"\r\n                :key=\"item.staffCode\"\r\n                :name=\"item.staffCode\"\r\n                @click=\"getRadioName(item.staffName)\"\r\n              >\r\n                <span>{{ item.staffCode }}</span>\r\n                <span>{{ item.staffName }}</span>\r\n              </van-radio>\r\n            </van-radio-group>\r\n          </van-list>\r\n        </van-pull-refresh>\r\n      </div>\r\n      <div class=\"confirm-btn\">\r\n        <van-button @click=\"cofirmTeacher\" type=\"info\">确定</van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { getTeacherList } from '../../../api/base/types-all';\r\nimport {\r\n  RadioGroup,\r\n  Radio,\r\n  Search,\r\n  List,\r\n  PullRefresh,\r\n  Button,\r\n  Notify\r\n} from 'vant';\r\nexport default {\r\n  name: 'tableSelector',\r\n  components: {\r\n    [RadioGroup.name]: RadioGroup,\r\n    [Radio.name]: Radio,\r\n    [Search.name]: Search,\r\n    [List.name]: List,\r\n    [PullRefresh.name]: PullRefresh,\r\n    [Button.name]: Button\r\n  },\r\n  data() {\r\n    return {\r\n      id: this.$route.query.id,\r\n      keywords: '',\r\n      result: '',\r\n      tableData: [],\r\n      formData: {},\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      error: false,\r\n      pageInfo: {\r\n        total: 0\r\n      },\r\n      pagingParams: {\r\n        limit: 15,\r\n        offset: 0\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.formData = JSON.parse(localStorage.getItem('formData'));\r\n  },\r\n  computed: {\r\n    ...mapGetters(['getSchoolOptions', 'getSubjectOptions', 'getGradeOptions']),\r\n    finishedText() {\r\n      if (this.pageInfo.total === 0) {\r\n        return '暂无数据';\r\n      } else {\r\n        return '没有更多了';\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.$dd.biz.navigation.setRight({\r\n        show: false //控制按钮显示， true 显示， false 隐藏， 默认true\r\n      });\r\n    },\r\n    async cofirmTeacher() {\r\n      if (!this.result) {\r\n        // Toast.fail('请先选择');\r\n        Notify({ type: 'warning', message: '请先选择' });\r\n        return;\r\n      }\r\n      this.formData.teacherCode = this.result;\r\n      await this.$store.dispatch('loadSchoolOptions', {\r\n        staffCode: this.formData.teacherCode\r\n      });\r\n      await this.$store.dispatch('loadSubjectOptions', {\r\n        staffCode: this.formData.teacherCode\r\n      });\r\n      if (\r\n        Array.isArray(this.getSchoolOptions) &&\r\n        this.getSchoolOptions.length > 0\r\n      ) {\r\n        this.formData.schoolName = this.getSchoolOptions[0].DICTIONARY_TEXT;\r\n        this.formData.schoolCode = this.getSchoolOptions[0].DICTIONARY_KEY;\r\n        await this.getTypeOptions(\r\n          this.formData.schoolCode,\r\n          'SET_GRADE_OPTIONS'\r\n        );\r\n      } else {\r\n        this.formData.schoolName = this.formData.schoolCode = this.formData.grade = this.formData.gradeName =\r\n          '';\r\n      }\r\n      if (\r\n        Array.isArray(this.getSubjectOptions) &&\r\n        this.getSubjectOptions.length > 0\r\n      ) {\r\n        this.formData.subject = this.getSubjectOptions[0].DICTIONARY_KEY;\r\n        this.formData.subjectName = this.getSubjectOptions[0].DICTIONARY_TEXT;\r\n      } else {\r\n        this.formData.subject = this.formData.subjectName = '';\r\n      }\r\n      localStorage.setItem('formData', JSON.stringify(this.formData));\r\n      this.$router.go(-1);\r\n    },\r\n    async getTypeOptions(code, type) {\r\n      let payload = {\r\n        params: { parentKey: code },\r\n        types: type\r\n      };\r\n      await this.$store.dispatch('loadChildrenOptions', payload);\r\n      if (\r\n        Array.isArray(this.getGradeOptions) &&\r\n        this.getGradeOptions.length > 0\r\n      ) {\r\n        this.formData.grade = this.getGradeOptions[0].dictionaryKey;\r\n        this.formData.gradeName = this.getGradeOptions[0].dictionaryText;\r\n      }\r\n    },\r\n    /**\r\n     * 获取教师姓名\r\n     */\r\n    getRadioName(name) {\r\n      this.formData.teacherName = name;\r\n    },\r\n    onRefresh() {\r\n      this.tableData = [];\r\n      this.result = '';\r\n      this.finished = false;\r\n      this.loading = true;\r\n      this.pageInfo.total = 0;\r\n      this.pagingParams.offset = 0;\r\n      this.onLoad();\r\n    },\r\n    onLoad() {\r\n      if (this.refreshing) {\r\n        this.tableData = [];\r\n        this.refreshing = false;\r\n      }\r\n      this.loading = true;\r\n      this.getTeacherData();\r\n    },\r\n    getTeacherData() {\r\n      if (this.pagingParams.offset > this.pageInfo.total) return;\r\n      getTeacherList({ seachWord: this.keywords, ...this.pagingParams }).then(\r\n        ({ data }) => {\r\n          if (data.current == 1 && data.records.length == 0) {\r\n            this.tableData = [];\r\n            this.finished = true;\r\n          }\r\n          let tableData = data.records;\r\n          tableData.forEach(item => {\r\n            if (this.formData.teacherCode == item.staffCode) {\r\n              this.result = item.staffCode;\r\n            } else {\r\n              item.checked = false;\r\n            }\r\n          });\r\n          this.tableData = this.tableData.concat(tableData);\r\n          this.pageInfo.total = data.total || 0;\r\n          if (this.pageInfo.total <= data.current * data.size) {\r\n            this.finished = true;\r\n          } else {\r\n            this.pagingParams.offset =\r\n              (Math.floor(this.pagingParams.offset / this.pagingParams.limit) +\r\n                1) *\r\n              this.pagingParams.limit;\r\n          }\r\n          this.loading = false;\r\n        }\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.table-selector {\r\n  background: #f6f6f6;\r\n  width: 100%;\r\n  height: 100%;\r\n  /deep/ .van-search__content {\r\n    background-color: #fff;\r\n  }\r\n  .table {\r\n    .title {\r\n      display: flex;\r\n      font-size: 0.32rem;\r\n      color: rgba(0, 0, 0, 0.65);\r\n      margin: 0.2rem 0;\r\n      .t-title {\r\n        width: calc(50% - 0.55rem);\r\n        text-align: start;\r\n        padding-left: 0.4rem;\r\n      }\r\n    }\r\n    .content {\r\n      font-size: 0.28rem;\r\n      background: #fff;\r\n      /deep/ .van-radio {\r\n        width: 100%;\r\n        height: 1rem;\r\n        padding: 0 0.3rem;\r\n        border-bottom: 0.02rem solid rgba(25, 31, 37, 0.085);\r\n        .van-radio__icon {\r\n          display: flex;\r\n          width: 0.32rem;\r\n          align-items: center;\r\n          justify-content: center;\r\n          padding: 0.3rem;\r\n          border-right: 0.02rem solid rgba(25, 31, 37, 0.085);\r\n          .van-icon {\r\n            width: 0.32rem;\r\n            height: 0.32rem;\r\n            line-height: 1;\r\n            font-size: 0.24rem;\r\n          }\r\n        }\r\n        .van-radio__icon--checked .van-icon {\r\n          background-color: #489ef3;\r\n          border-color: #489ef3;\r\n        }\r\n        .van-radio__label {\r\n          display: flex;\r\n          width: calc(100% - 1.14rem);\r\n          height: 1rem;\r\n          line-height: 0.4rem;\r\n          color: rgba(0, 0, 0, 0.85);\r\n          margin-left: 0;\r\n          > span {\r\n            display: flex;\r\n            width: 100%;\r\n            height: 100%;\r\n            align-items: center;\r\n            justify-content: flex-start;\r\n            padding-left: 0.24rem;\r\n            border-right: 0.02rem solid rgba(25, 31, 37, 0.085);\r\n            word-break: break-all;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .list-table-teacher {\r\n      width: 100%;\r\n      height: calc(100% - 3.8rem);\r\n      position: absolute;\r\n      overflow-y: auto;\r\n    }\r\n    .confirm-btn {\r\n      width: 100%;\r\n      position: fixed;\r\n      bottom: 0.58rem;\r\n      padding: 0 0.32rem;\r\n      box-sizing: border-box;\r\n      button {\r\n        width: 100%;\r\n        height: 0.96rem;\r\n        font-size: 0.28rem;\r\n        border-radius: 0.08rem;\r\n        background: linear-gradient(#40adf6, #528bee);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}