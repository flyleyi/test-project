{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/DeparturePlace.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/DeparturePlace.vue","mtime":1645176309886},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBldmVudEJ1cyBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvcGx1Z2lucy9jb21tb24vZXZlbnRCdXMuanMnOwppbXBvcnQgeyBnZXRQcm92aW5jZUxpc3QgfSBmcm9tICdAL3BhZ2VzL3Zpc2l0b3ItaDUvYXBpL215VmlzaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlTmFtZTogJ2NoaW5hJywKICAgICAgcHJvdmluY2VMaXN0OiBbXSwKICAgICAgb3B0aW9uczogW10sCiAgICAgIHNob3c6IGZhbHNlLAogICAgICBjYXNjYWRlclZhbHVlOiAnJywKICAgICAgaW5kZXhMaXN0OiBbCiAgICAgICAgJ0EnLAogICAgICAgICdCJywKICAgICAgICAnRicsCiAgICAgICAgJ0cnLAogICAgICAgICdIJywKICAgICAgICAnSicsCiAgICAgICAgJ0wnLAogICAgICAgICdOJywKICAgICAgICAnUScsCiAgICAgICAgJ1MnLAogICAgICAgICdUJywKICAgICAgICAnWCcsCiAgICAgICAgJ1knLAogICAgICAgICdaJwogICAgICBdLAogICAgICBmaWVsZE5hbWVzOiB7CiAgICAgICAgdGV4dDogJ25hbWUnLAogICAgICAgIHZhbHVlOiAnY29kZScsCiAgICAgICAgY2hpbGRyZW46ICdjaGlsZExpc3QnCiAgICAgIH0sCiAgICAgIGZpZWxkVmFsdWU6ICcnLAogICAgICBmaWVsZENvZGU6ICcnLAogICAgICBzZWxlY3RlZFByb3ZpbmNlOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvTGlzdERGKGxpc3QpIHsKICAgICAgbGV0IG5ld0xpc3QgPSBsaXN0Lm1hcChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5jaGlsZExpc3QubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICB0aGlzLnRvTGlzdERGKGl0ZW0uY2hpbGRMaXN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIGl0ZW0uY2hpbGRMaXN0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICAgIHJldHVybiBuZXdMaXN0OwogICAgfSwKICAgIHNlbGVjdFByb3ZpbmNlKGl0ZW0pIHsKICAgICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5zZWxlY3RlZFByb3ZpbmNlID0gaXRlbTsKICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy50b0xpc3RERihpdGVtLmNoaWxkTGlzdCk7CiAgICB9LAogICAgb25GaW5pc2goeyBzZWxlY3RlZE9wdGlvbnMgfSkgewogICAgICB0aGlzLnNob3cgPSBmYWxzZTsKICAgICAgbGV0IGZpZWxkVmFsdWUgPSBzZWxlY3RlZE9wdGlvbnMubWFwKG9wdGlvbiA9PiBvcHRpb24ubmFtZSkuam9pbignLScpOwogICAgICBpZiAoc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDEpIHsKICAgICAgICB0aGlzLmZpZWxkQ29kZSA9IHNlbGVjdGVkT3B0aW9uc1sxXS5jb2RlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmllbGRDb2RlID0gc2VsZWN0ZWRPcHRpb25zWzBdLmNvZGU7CiAgICAgIH0KCiAgICAgIHRoaXMuZmllbGRWYWx1ZSA9IHRoaXMuc2VsZWN0ZWRQcm92aW5jZS5uYW1lICsgJy0nICsgZmllbGRWYWx1ZTsKICAgICAgZXZlbnRCdXMuJGVtaXQoCiAgICAgICAgJ3NlbGVjdERlcGFydHVyZVBsYWNlJywKICAgICAgICB0aGlzLmZpZWxkVmFsdWUsCiAgICAgICAgdGhpcy5maWVsZENvZGUsCiAgICAgICAgdGhpcy4kcm91dGUucXVlcnkuaWQKICAgICAgKTsKICAgICAgZXZlbnRCdXMuJGVtaXQoJ3NldGN1clR5cGUnLCB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlKTsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICBnZXRQcm92aW5jZUxpc3QoKSB7CiAgICAgIGdldFByb3ZpbmNlTGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnByb3ZpbmNlTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFByb3ZpbmNlTGlzdCgpOwogIH0KfTsK"},{"version":3,"sources":["DeparturePlace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeparturePlace.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor/components","sourcesContent":["<template>\n  <div>\n    <van-index-bar :index-list=\"indexList\">\n      <div v-for=\"(item, index) in provinceList\" :key=\"index\">\n        <van-index-anchor :index=\"index\" />\n        <ul>\n          <li v-for=\"el in item\" :key=\"el.id\">\n            <van-cell :title=\"el.name\" @click=\"selectProvince(el)\" />\n          </li>\n        </ul>\n      </div>\n    </van-index-bar>\n    <van-popup v-model=\"show\" round position=\"bottom\">\n      <van-cascader\n        v-model=\"cascaderValue\"\n        title=\"请选择所在地区\"\n        :options=\"options\"\n        :field-names=\"fieldNames\"\n        @close=\"show = false\"\n        @finish=\"onFinish\"\n      />\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport { getProvinceList } from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  data() {\n    return {\n      activeName: 'china',\n      provinceList: [],\n      options: [],\n      show: false,\n      cascaderValue: '',\n      indexList: [\n        'A',\n        'B',\n        'F',\n        'G',\n        'H',\n        'J',\n        'L',\n        'N',\n        'Q',\n        'S',\n        'T',\n        'X',\n        'Y',\n        'Z'\n      ],\n      fieldNames: {\n        text: 'name',\n        value: 'code',\n        children: 'childList'\n      },\n      fieldValue: '',\n      fieldCode: '',\n      selectedProvince: {}\n    };\n  },\n  methods: {\n    toListDF(list) {\n      let newList = list.map(item => {\n        if (item.childList.length !== 0) {\n          this.toListDF(item.childList);\n        } else {\n          delete item.childList;\n        }\n        return item;\n      });\n      return newList;\n    },\n    selectProvince(item) {\n      this.show = true;\n      this.selectedProvince = item;\n      this.options = this.toListDF(item.childList);\n    },\n    onFinish({ selectedOptions }) {\n      this.show = false;\n      let fieldValue = selectedOptions.map(option => option.name).join('-');\n      if (selectedOptions.length > 1) {\n        this.fieldCode = selectedOptions[1].code;\n      } else {\n        this.fieldCode = selectedOptions[0].code;\n      }\n\n      this.fieldValue = this.selectedProvince.name + '-' + fieldValue;\n      eventBus.$emit(\n        'selectDeparturePlace',\n        this.fieldValue,\n        this.fieldCode,\n        this.$route.query.id\n      );\n      eventBus.$emit('setcurType', this.$route.query.type);\n      this.$router.go(-1);\n    },\n    getProvinceList() {\n      getProvinceList().then(res => {\n        this.provinceList = res.data;\n      });\n    }\n  },\n  created() {\n    this.getProvinceList();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-tab--active {\n  color: #3388ff;\n}\n</style>\n"]}]}