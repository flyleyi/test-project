{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/return-goods/index.vue?vue&type=style&index=0&id=a064f196&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/return-goods/index.vue","mtime":1645178321124},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKL2RlZXAvLnZhbi10YWJzX19saW5lIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTFkMGJjOwp9Ci5hcHAtbWFpbiB7CiAgYmFja2dyb3VuZDogI2Y1ZjVmNTsKICBwYWRkaW5nOiAxMnB4OwogIC5vcmRlci1pdGVtIHsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA4KTsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBmb250LXNpemU6IDEzcHg7CiAgICAuaXRlbS1oZWFkIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgIHNwYW4gewogICAgICAgIHdpZHRoOiA0NHB4OwogICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICBib3JkZXItcmFkaXVzOiAyLjVweDsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOwogICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDsKICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsKICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgJi5ub3JtYWwgewogICAgICAgICAgYmFja2dyb3VuZDogIzUxZDBiYzsKICAgICAgICB9CiAgICAgICAgJi51cmdlbmN5IHsKICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjYzMTI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGRpdiB7CiAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7CiAgICAgIH0KICAgIH0KICAgIC5pdGVtLWNlbnRlciB7CiAgICAgIHAgewogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsKICAgICAgICBmb250LXdlaWdodDogNDAwOwogICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODUpOwogICAgICAgIGxpbmUtaGVpZ2h0OiAxOXB4OwogICAgICAgIGxldHRlci1zcGFjaW5nOiAxcHg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgfQogICAgfQogICAgLml0ZW0tYm90dG9tIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBsaW5lLWhlaWdodDogMjJweDsKICAgICAgaW1nIHsKICAgICAgICB3aWR0aDogMThweDsKICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgdmVydGljYWwtYWxpZ246IHN1YjsKICAgICAgfQogICAgICAuYm90dG9tLXR4dCB7CiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIG1hcmdpbi1sZWZ0OiA0cHg7CiAgICAgIH0KICAgIH0KICB9Cn0KCi5jb21tb24tbm8tZGF0YSB7CiAgZm9udC1zaXplOiAxNnB4OwogIGNvbG9yOiAjZDlkOWQ5OwogIHBhZGRpbmctdG9wOiAxNzBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnJpZ2h0IHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7CiAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAvLyB0ZXh0LWFsaWduOiByaWdodDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/catering-h5/views/return-goods","sourcesContent":["<template>\n  <div class=\"app-wrapper\">\n    <van-tabs\n      sticky\n      v-model=\"active\"\n      title-active-color=\"#51D0BC\"\n      @click=\"onClick\"\n    >\n      <van-tab\n        v-for=\"tab in tabs\"\n        :key=\"tab.type\"\n        :title=\"tab.title\"\n        :name=\"tab.type\"\n      >\n        <van-pull-refresh\n          class=\"app-main\"\n          v-model=\"tab.downLoading\"\n          @refresh=\"onDownRefresh\"\n        >\n          <div class=\"right\" v-if=\"tab.type == 4 ? true : false\">\n            <search-select\n              :actions=\"option1\"\n              :value=\"status\"\n              @changeValue=\"changeValue\"\n            ></search-select>\n          </div>\n          <div\n            v-if=\"tab.finished && tab.list.length < 1\"\n            class=\"common-no-data\"\n          >\n            {{\n              tab.type == 1\n                ? '无待收货列表'\n                : tab.type == 2\n                ? '无已收获列表'\n                : tab.type == 3\n                ? '无部分发货列表'\n                : '无退货列表'\n            }}\n          </div>\n          <van-list\n            v-else\n            class=\"section\"\n            :immediate-check=\"false\"\n            :offset=\"10\"\n            v-model=\"tab.loading\"\n            :finished=\"tab.finished\"\n            finished-text=\"没有更多了\"\n            @load=\"onLoadList\"\n          >\n            <van-cell\n              v-for=\"(item, index) in tab.list\"\n              :key=\"index\"\n              @click=\"goDetail(item)\"\n              class=\"order-item\"\n            >\n              <div>\n                <div class=\"item-head\">\n                  <span :class=\"item.type == 1 ? 'normal' : 'urgency'\">{{\n                    orderType[item.type]\n                  }}</span>\n                  <div>{{ item.orderNo }}</div>\n                </div>\n                <div class=\"item-center\">\n                  <p>\n                    {{ item.provinceName }}{{ item.cityName\n                    }}{{ item.districtName }}{{ item.parentDeptName\n                    }}{{ item.deptName }}的订单\n                  </p>\n                  <p>到货日期：{{ formateDate(item.arrivalTime, 4) }}</p>\n                </div>\n                <div class=\"item-bottom\">\n                  <div>\n                    <img src=\"../../assets/images/clock.png\" alt=\"\" />\n                    <div class=\"bottom-txt\">\n                      {{ formateDate(item.auditTime, 2) }}\n                    </div>\n                  </div>\n                  <div>\n                    <img src=\"../../assets/images/person.png\" alt=\"\" />\n                    <div class=\"bottom-txt\">{{ item.submitName }}</div>\n                  </div>\n                </div>\n              </div>\n            </van-cell>\n          </van-list>\n        </van-pull-refresh>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport {\n  sendivingGoodsOrderPage,\n  getStatusInfo\n} from '../../api/ReturnGoods/index.js';\nimport SearchSelect from './SearchSelect';\nimport { formateDate } from '../../plugins/common/utils.js';\nconst orderType = {\n  '1': '常规',\n  '2': '紧急',\n  '3': '补单'\n};\nexport default {\n  name: 'returnGoodsList',\n  data() {\n    return {\n      orderType,\n      active: 1,\n      // checked: false,\n      tabs: [\n        {\n          type: 1,\n          title: '待发货',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            status: '',\n            limit: 10 //每页条数\n          }\n        },\n        {\n          type: 2,\n          title: '已发货',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            limit: 10, //每页条数\n            status: 40100\n          }\n        },\n        {\n          type: 3,\n          title: '部分发货',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            limit: 10, //每页条数\n            status: ''\n          }\n        },\n        {\n          type: 4,\n          title: '退单',\n          list: [], //列表数据\n          loading: false, //加载状态\n          finished: false, //是否加载完成\n          downLoading: false, //下拉状态\n          total: 0, //总数\n          query: {\n            //查询条件\n            offset: 0,\n            limit: 10, //每页条数\n            status: '40200,-20100'\n          }\n        }\n      ],\n      option1: [\n        { text: '已退单', value: '-20100' },\n        { text: '退单申请', value: '40200' },\n        { text: '全部退单', value: '40200,-20100' }\n      ],\n      status: '40200,-20100'\n    };\n  },\n  activated() {\n    this.getGoodsList();\n  },\n  beforeRouteEnter(to, from, next) {\n    if (from.name == 'choose-identity') {\n      next(vm => {\n        vm.active = 1;\n        vm.getGoodsList();\n      });\n    }\n    next();\n  },\n  computed: {\n    roleType() {\n      return this.$store.getters['user/roleType'];\n    }\n  },\n  created() {\n    this.getStatusInfo();\n    if (this.$route.query.flag == true) {\n      this.active = 4;\n      this.getGoodsList();\n    }\n  },\n\n  methods: {\n    formateDate,\n    onDownRefresh() {\n      //下拉刷新\n      this.resetInfo();\n      this.getGoodsList(); // 加载数据\n    },\n    getGoodsList(append) {\n      let type = this.active;\n      let i = type == 1 ? 0 : type == 2 ? 1 : type == 3 ? 2 : 3;\n      this.tabs[i].loading = true;\n      if (this.roleType && this.roleType.length > 0) {\n        const query = {\n          ...this.tabs[i].query\n        };\n        sendivingGoodsOrderPage(query).then(res => {\n          console.log('到货', res);\n          if (append) {\n            this.tabs[i].list = this.tabs[i].list.concat(\n              res.data.records || []\n            );\n          } else {\n            this.tabs[i].list = res.data.records || [];\n          }\n          this.tabs[i].loading = false;\n          this.tabs[i].downLoading = false;\n          if (res.data.records.length < this.tabs[i].query.limit) {\n            this.tabs[i].finished = true;\n          }\n        });\n      } else {\n        this.tabs[i].loading = false;\n        this.$toast('请重新登录！');\n      }\n    },\n    getStatusInfo() {\n      getStatusInfo({ type: 'SUPPLIER_ORDER_STATUS' }).then(res => {\n        console.log('状态码', res);\n        var arr2 = [];\n        res.data.forEach(item => {\n          if (item.key == '待发货') {\n            let arr = [...new Set(item.value)];\n            this.tabs[0].query.status = arr.toString();\n            this.getGoodsList();\n          }\n          if (item.key == '部分发货') {\n            let arr1 = [...new Set(item.value)];\n            this.tabs[2].query.status = arr1.toString();\n          }\n          if (item.key == '退单申请') {\n            arr2.push(item.value.toString());\n          }\n          if (item.key == '已退单') {\n            arr2.push(item.value.toString());\n          }\n        });\n        this.tabs[3].query.status = arr2.toString();\n        this.option1[2].value = arr2.toString();\n        this.status = arr2.toString();\n        console.log('111', this.tabs[3].query.status);\n        // 40200,-20100\n        this.getGoodsList();\n      });\n    },\n    onLoadList() {\n      let i = this.active == 1 ? 0 : this.active == 2 ? 1 : 2;\n      this.tabs[i].query.offset =\n        this.tabs[i].query.limit + this.tabs[i].query.offset;\n      this.getGoodsList(1);\n    },\n    goDetail(item) {\n      this.$router.push({\n        path: '/return-goods-detail-list',\n        query: { id: item.orderId, status: item.status }\n      });\n    },\n    resetInfo() {\n      let i = this.active == 1 ? 0 : this.active == 2 ? 1 : 2;\n      this.tabs[i].query.offset = 0;\n      this.tabs[i].downLoading = true;\n      this.tabs[i].finished = false;\n    },\n    onClick(name) {\n      this.active = name;\n      if (this.active == 4) {\n        this.tabs[3].query.status = '40200,-20100';\n        this.option1[2].value = '40200,-20100';\n        this.status = '40200,-20100';\n        this.getGoodsList();\n        this.resetInfo();\n      }\n      this.resetInfo();\n      this.getGoodsList();\n    },\n    changeValue(item) {\n      this.tabs[3].query.status = item.value;\n      this.getGoodsList();\n      this.status = item.value;\n    }\n  },\n  components: {\n    SearchSelect\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n/deep/.van-tabs__line {\n  background-color: #51d0bc;\n}\n.app-main {\n  background: #f5f5f5;\n  padding: 12px;\n  .order-item {\n    background: #fff;\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.08);\n    border-radius: 6px;\n    margin-bottom: 10px;\n    font-size: 13px;\n    .item-head {\n      display: flex;\n      line-height: 20px;\n      margin-bottom: 20px;\n      span {\n        width: 44px;\n        height: 20px;\n        border-radius: 2.5px;\n        display: inline-block;\n        color: #fff;\n        text-align: center;\n        font-family: PingFangSC-Regular, PingFang SC;\n        font-weight: 400;\n        letter-spacing: 1px;\n        margin-right: 4px;\n        font-size: 13px;\n        &.normal {\n          background: #51d0bc;\n        }\n        &.urgency {\n          background: #ff6312;\n        }\n      }\n      div {\n        color: rgba(0, 0, 0, 0.65);\n      }\n    }\n    .item-center {\n      p {\n        font-size: 14px;\n        font-family: PingFangSC-Regular, PingFang SC;\n        font-weight: 400;\n        color: rgba(0, 0, 0, 0.85);\n        line-height: 19px;\n        letter-spacing: 1px;\n        margin-bottom: 20px;\n      }\n    }\n    .item-bottom {\n      display: flex;\n      justify-content: space-between;\n      line-height: 22px;\n      img {\n        width: 18px;\n        height: 18px;\n        vertical-align: sub;\n      }\n      .bottom-txt {\n        display: inline-block;\n        margin-left: 4px;\n      }\n    }\n  }\n}\n\n.common-no-data {\n  font-size: 16px;\n  color: #d9d9d9;\n  padding-top: 170px;\n  text-align: center;\n}\n.right {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 12px;\n  // text-align: right;\n}\n</style>\n"]}]}