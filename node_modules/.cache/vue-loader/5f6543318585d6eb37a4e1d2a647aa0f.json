{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/h5/components/common/CSelectPicker.vue?vue&type=style&index=0&id=4cdffd04&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/h5/components/common/CSelectPicker.vue","mtime":1627979214306},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi8vIC5zZWxlY3QtcGlja2VyIHsNCi8vICAgLy8g5LiL5ouJ57uE5Lu2DQovLyAgIC5mb3JtLXNlbGVjdCB7DQovLyAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KLy8gICB9DQovLyAgIC5pY29uLWRyb3Agew0KLy8gICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCi8vICAgICByaWdodDogLjI0cmVtOw0KLy8gICAgIHRvcDogNTAlOw0KLy8gICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsNCi8vICAgICBkaXNwbGF5OiBibG9jazsNCi8vICAgICB3aWR0aDogLjI0cmVtOw0KLy8gICAgIGhlaWdodDogLjE2cmVtOw0KLy8gICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnfkAvYXNzZXRzL2ltYWdlcy9pY29uX2Ryb3Bfbm9ybWFsQDJ4LnBuZycpOw0KLy8gICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7DQovLyAgICAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOw0KLy8gICAgICYuc2VsZWN0ZWQgew0KLy8gICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCd+QC9hc3NldHMvaW1hZ2VzL2ljb25fZHJvcF9zZWxlY3RlZEAyeC5wbmcnKTsNCi8vICAgICB9DQovLyAgIH0NCi8vIH0NCi5pY29uLWFycm93LXJpZ2h0IHsNCiAgd2lkdGg6IDAuMzRyZW07DQogIGhlaWdodDogMC4zNHJlbTsNCiAgdmVydGljYWwtYWxpZ246IHRvcDsNCiAgcGFkZGluZy10b3A6IDAuMDdyZW07DQp9DQo="},{"version":3,"sources":["CSelectPicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CSelectPicker.vue","sourceRoot":"src/pages/h5/components/common","sourcesContent":["<template>\r\n  <!-- 下拉选择控制面板 -->\r\n  <div class=\"select-picker\">\r\n    <van-field\r\n      readonly\r\n      clickable\r\n      :value=\"text\"\r\n      :label=\"label\"\r\n      :placeholder=\"placeholder\"\r\n      @click=\"show = true\"\r\n    >\r\n      <img\r\n        slot=\"right-icon\"\r\n        class=\"icon-arrow-right\"\r\n        src=\"../../assets/images/icons/icon_arrow_right.png\"\r\n      />\r\n    </van-field>\r\n    <div></div>\r\n    <van-popup v-model=\"show\" position=\"bottom\">\r\n      <van-picker\r\n        v-bind=\"$attrs\"\r\n        ref=\"picker\"\r\n        show-toolbar\r\n        :columns=\"columns\"\r\n        :value-key=\"textKey\"\r\n        item-height=\"0.8rem\"\r\n        @hook:mounted=\"setValue\"\r\n        @cancel=\"show = false\"\r\n        @confirm=\"onConfirm\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Picker, Field, Popup } from 'vant';\r\nexport default {\r\n  name: 'CSelectPicker',\r\n  components: {\r\n    [Picker.name]: Picker,\r\n    [Field.name]: Field,\r\n    [Popup.name]: Popup\r\n  },\r\n  props: {\r\n    /**\r\n     * 值\r\n     */\r\n    label: undefined,\r\n    /**\r\n     * 值\r\n     */\r\n    value: undefined,\r\n    /**\r\n     * 下拉数据\r\n     */\r\n    options: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    /**\r\n     * 占位符\r\n     */\r\n    placeholder: {\r\n      type: String,\r\n      default: '请选择'\r\n    },\r\n    /**\r\n     * 值的键\r\n     */\r\n    valueKey: {\r\n      type: String,\r\n      default: 'key'\r\n    },\r\n    /**\r\n     * 文本的键\r\n     */\r\n    textKey: {\r\n      type: String,\r\n      default: 'label'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      selected: this.value, // 选中的值\r\n      show: false, // 模态框是否显示\r\n      columns: [] // 选项列\r\n    };\r\n  },\r\n  computed: {\r\n    /**\r\n     * 文本值\r\n     */\r\n    text() {\r\n      const res = this.columns.find(\r\n        item => item[this.valueKey] === this.selected\r\n      );\r\n      return res ? res[this.textKey] : '';\r\n    }\r\n  },\r\n  watch: {\r\n    /**\r\n     * 双向绑定\r\n     */\r\n    value() {\r\n      this.selected = this.value;\r\n      this.setValue();\r\n    },\r\n    selected() {\r\n      this.$emit('input', this.selected);\r\n    },\r\n    /**\r\n     * 监听选择数据\r\n     */\r\n    options: {\r\n      handler() {\r\n        if (Array.isArray(this.options)) {\r\n          this.columns = this.options.map(item => {\r\n            const isObj = typeof item === 'object';\r\n            if (isObj) {\r\n              return {\r\n                ...item,\r\n                [this.textKey]: item[this.textKey],\r\n                [this.valueKey]: item[this.valueKey],\r\n                _data: item\r\n              };\r\n            } else {\r\n              return {\r\n                [this.textKey]: item,\r\n                [this.valueKey]: item,\r\n                _data: item\r\n              };\r\n            }\r\n          });\r\n        } else {\r\n          this.columns = [];\r\n        }\r\n      },\r\n      immediate: true\r\n    },\r\n    /**\r\n     * 显示选择器，重置显示选择。\r\n     */\r\n    show: 'setValue'\r\n  },\r\n  methods: {\r\n    /**\r\n     * 确定\r\n     */\r\n    onConfirm(value) {\r\n      this.selected = value[this.valueKey];\r\n      this.$emit(\r\n        'change',\r\n        this.columns.find(item => item[this.valueKey] === this.selected)\r\n      );\r\n      this.show = false;\r\n    },\r\n    /**\r\n     * 选择器挂载后\r\n     */\r\n    setValue() {\r\n      this.$nextTick(() => {\r\n        const index = this.columns.findIndex(\r\n          item => item[this.valueKey] === this.selected\r\n        );\r\n        index !== -1 &&\r\n          this.$refs.picker &&\r\n          this.$refs.picker.setColumnIndex(0, index);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// .select-picker {\r\n//   // 下拉组件\r\n//   .form-select {\r\n//     position: relative;\r\n//   }\r\n//   .icon-drop {\r\n//     position: absolute;\r\n//     right: .24rem;\r\n//     top: 50%;\r\n//     transform: translateY(-50%);\r\n//     display: block;\r\n//     width: .24rem;\r\n//     height: .16rem;\r\n//     background-image: url('~@/assets/images/icon_drop_normal@2x.png');\r\n//     background-position: center center;\r\n//     background-size: contain;\r\n//     &.selected {\r\n//       background-image: url('~@/assets/images/icon_drop_selected@2x.png');\r\n//     }\r\n//   }\r\n// }\r\n.icon-arrow-right {\r\n  width: 0.34rem;\r\n  height: 0.34rem;\r\n  vertical-align: top;\r\n  padding-top: 0.07rem;\r\n}\r\n</style>\r\n"]}]}