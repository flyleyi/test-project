{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue?vue&type=style&index=0&id=4eeebadd&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue","mtime":1646020479970},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaG9tZSB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/pages/jx-questionnaire-h5/views","sourcesContent":["<template>\n  <div class=\"home\" id=\"launch-btn\"></div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { parsingToken } from '../api/survey';\nexport default {\n  name: 'Home',\n  components: {},\n  data() {\n    return {};\n  },\n  computed: {\n    // 选项列表\n    ...mapState('user', ['wechatUserId', 'classId', 'role'])\n  },\n  created() {\n    this.parsingToken();\n  },\n  methods: {\n    // 获取小程序跳转所带的token\n    getQueryString(params) {\n      var reg = new RegExp('(^|&)' + params + '=([^&]*)(&|$)', 'i'); // 解析url地址\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) {\n        return decodeURIComponent(r[2]);\n      }\n      return null;\n    },\n    // 解析token\n    parsingToken() {\n      let token = this.getQueryString('token');\n      if (this.wechatUserId) {\n        if (this.role == 1) {\n          this.$router.replace({\n            path: '/survey-teacher'\n          });\n        } else {\n          this.$router.replace({\n            path: '/survey-parent'\n          });\n        }\n        return;\n      }\n      parsingToken(token)\n        .then(res => {\n          let obj = {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.childInfo.studentId\n              ? res.data.childInfo.studentId\n              : ''\n          };\n          sessionStorage.setItem('wechatUserId', obj.wechatUserId);\n          sessionStorage.setItem('classId', obj.classId);\n          sessionStorage.setItem('role', obj.role);\n          sessionStorage.setItem('studentId', obj.studentId);\n          this.$store.commit('user/SAVE_USERINFO', {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.role ? '' : res.data.childInfo.studentId\n          });\n          if (obj.role == 1) {\n            this.$router.replace({\n              path: '/survey-teacher'\n            });\n          } else {\n            this.$router.replace({\n              path: '/survey-parent'\n            });\n          }\n        })\n        .catch(err => {\n          this.$toast(err.msg);\n        });\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.home {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n"]}]}