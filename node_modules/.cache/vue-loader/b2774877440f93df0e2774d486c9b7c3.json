{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/components/common/Football.vue?vue&type=style&index=0&id=fa695ad8&scoped=true&lang=css&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serveh5/components/common/Football.vue","mtime":1627979214301},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kcmFnSWNvbiB7CiAgcG9zaXRpb246IGZpeGVkOwogIHdpZHRoOiAxLjRyZW07CiAgaGVpZ2h0OiAxLjRyZW07CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGJhY2tncm91bmQtY29sb3I6IG9yYW5nZTsKICBsaW5lLWhlaWdodDogMS40cmVtOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2ZmZjsKfQoudi1lbnRlciB7CiAgb3BhY2l0eTogMTsKfQoudi1sZWF2ZS10byB7CiAgb3BhY2l0eTogMDsKfQoudi1lbnRlci1hY3RpdmUsCi52LWxlYXZlLWFjdGl2ZSB7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzOwp9Cg=="},{"version":3,"sources":["Football.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Football.vue","sourceRoot":"src/pages/executive-serveh5/components/common","sourcesContent":["<template>\n  <transition>\n    <div\n      v-show=\"hideshow\"\n      ref=\"dragIcon\"\n      class=\"dragIcon\"\n      @touchstart.stop=\"handleTouchStart\"\n      @touchmove.prevent.stop=\"handleTouchMove($event)\"\n      @touchend.stop=\"handleTouchEnd\"\n      :style=\"{\n        left: left + 'px',\n        top: top + 'px',\n        width: itemWidth + 'px',\n        height: itemHeight + 'px'\n      }\"\n    >\n      <slot>\n        {{ text }}\n      </slot>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  props: {\n    text: {\n      type: String,\n      default: '球'\n    },\n    itemWidth: {\n      type: Number,\n      default: 40\n    },\n    itemHeight: {\n      type: Number,\n      default: 40\n    }\n  },\n  data() {\n    return {\n      left: 0,\n      top: 0,\n      startToMove: false,\n      isShow: true,\n      timer: null,\n      currentTop: null,\n      clientW: document.documentElement.clientWidth, //视口宽\n      clientH: document.documentElement.clientHeight, //视口高\n      hideshow: false, //显示或者隐藏footer\n      isResize: false,\n      deviceInfo: this.getType() //设备信息\n    };\n  },\n  created() {\n    this.left = this.clientW - this.itemWidth - 30;\n    // this.top = this.clientH / 2 - this.itemHeight / 2;\n\n    if (this.deviceInfo === 'iphone') {\n      this.top = this.clientH - 180;\n    } else {\n      this.top = this.clientH - 130;\n    }\n  },\n  mounted() {\n    const self = this;\n    //安卓小键盘弹起返回 Bug\n    window.onresize = () => {\n      return (() => {\n        if (self.deviceInfo === 'android') {\n          self.isResize = true;\n          self.hideshow = false;\n          setTimeout(function() {\n            self.clientH = document.documentElement.clientHeight;\n            self.top = self.clientH - 130;\n            self.hideshow = true;\n          }, 200);\n        }\n      })();\n    };\n    setTimeout(function() {\n      if (!self.isResize) {\n        self.hideshow = true;\n      }\n    }, 200);\n    this.$nextTick(function() {\n      this.bindScrollEvent();\n    });\n  },\n  beforeDestroy() {\n    // 记得销毁一些全局的的事件\n    this.removeScrollEvent();\n  },\n  methods: {\n    getType() {\n      let type;\n      if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {\n        type = 'iphone';\n      } else if (/(Android)/i.test(navigator.userAgent)) {\n        type = 'android';\n      } else {\n        type = 'pc';\n      }\n      return type;\n    },\n    handleTouchStart() {\n      this.startToMove = true;\n      this.$refs.dragIcon.style.transition = 'none';\n    },\n    handleTouchMove(e) {\n      const clientX = e.targetTouches[0].clientX; //手指相对视口的x\n      const clientY = e.targetTouches[0].clientY; //手指相对视口的y\n      const isInScreen =\n        clientX <= this.clientW &&\n        clientX >= 0 &&\n        clientY <= this.clientH &&\n        clientY >= 0;\n      if (this.startToMove && e.targetTouches.length === 1) {\n        if (isInScreen) {\n          this.left = clientX - this.itemWidth / 2;\n          this.top = clientY - this.itemHeight / 2;\n        }\n      }\n    },\n    handleTouchEnd() {\n      if (this.left < this.clientW / 2) {\n        this.left = 30; //不让贴边 所以设置30没设置0\n        this.handleIconY();\n      } else {\n        this.left = this.clientW - this.itemWidth - 30; //不让贴边 所以减30\n        this.handleIconY();\n      }\n      this.$refs.dragIcon.style.transition = 'all .3s';\n    },\n    handleIconY() {\n      if (this.top < 0) {\n        this.top = 30; //不上帖上边所以设置为30 没设置0\n      } else if (this.top + this.itemHeight > this.clientH - 50) {\n        this.top = this.clientH - this.itemHeight - 60; //不让帖下边所以减60\n      }\n    },\n    bindScrollEvent() {\n      window.addEventListener('scroll', this.handleScrollStart);\n    },\n    removeScrollEvent() {\n      window.removeEventListener('scroll', this.handleScrollStart);\n    },\n    handleScrollStart() {\n      this.isShow = false;\n      this.timer && clearTimeout(this.timer);\n      this.timer = setTimeout(() => {\n        this.handleScrollEnd();\n      }, 300);\n      this.currentTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n    },\n    handleScrollEnd() {\n      this.scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 判断是否停止滚动的条件\n      if (this.scrollTop == this.currentTop) {\n        this.isShow = true;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.dragIcon {\n  position: fixed;\n  width: 1.4rem;\n  height: 1.4rem;\n  border-radius: 50%;\n  background-color: orange;\n  line-height: 1.4rem;\n  text-align: center;\n  color: #fff;\n}\n.v-enter {\n  opacity: 1;\n}\n.v-leave-to {\n  opacity: 0;\n}\n.v-enter-active,\n.v-leave-active {\n  transition: opacity 0.3s;\n}\n</style>\n"]}]}