{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/ArrivalCompany.vue?vue&type=style&index=0&id=30db496a&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/ArrivalCompany.vue","mtime":1646020538184},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmFwcC13cmFwcGVyIHsKICBwYWRkaW5nOiAxNXB4IDE4cHg7Cn0KLmNhbXB1cy1pdGVtIHsKICBtYXJnaW4tYm90dG9tOiAxNXB4OwoKICAuc3VtLWluZm8gewogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICAgIGJveC1zaGFkb3c6IDBweCAxcHggMTBweCAwcHggcmdiYSg5NCwgOTQsIDk0LCAwLjA4KTsKICAgIHBhZGRpbmc6IDEycHg7CiAgICAuY2FtcHVzLW5hbWUgewogICAgICBmb250LXNpemU6IDE3cHg7CiAgICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLU1lZGl1bSwgUGluZ0ZhbmcgU0M7CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODUpOwogICAgICBsaW5lLWhlaWdodDogMjRweDsKICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgc3BhbiB7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICB9CiAgICB9CiAgfQogIC5kZXRhaWwtaW5mbyB7CiAgICBiYWNrZ3JvdW5kOiAjZmJmYmZjOwogIH0KfQouZG9vci1saXN0IHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKICBwYWRkaW5nOiAyMHB4IDA7CiAgLy8gbWFyZ2luLWJvdHRvbTogMTFweDsKICBsaSB7CiAgICBwYWRkaW5nOiA1cHggMTRweDsKICAgIG1hcmdpbi1yaWdodDogMTJweDsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNjUpOwogICAgZm9udC1zaXplOiAxMnB4OwogICAgZm9udC1mYW1pbHk6IFBpbmdGYW5nU0MtUmVndWxhciwgUGluZ0ZhbmcgU0M7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42NSk7CiAgICAmLmFjdGl2ZSB7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAvLyBib3JkZXI6IG5vbmU7CiAgICAgIGJhY2tncm91bmQ6ICMzMzg4ZmY7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgfQogIH0KfQoKLmRvb3Itd3JhcHBlciB7CiAgcGFkZGluZzogMjBweDsKICAudGl0bGUgewogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICB9Cn0K"},{"version":3,"sources":["ArrivalCompany.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArrivalCompany.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor/components","sourcesContent":["<template>\n  <div class=\"app-wrapper\">\n    <ul>\n      <li\n        class=\"campus-item\"\n        v-for=\"(campusObj, index) in campusList\"\n        :key=\"campusObj.id\"\n        @click.stop=\"setCompany(campusObj, campusObj, index)\"\n      >\n        <div class=\"sum-info\">\n          <div class=\"campus-name\">{{ campusObj.deptName }}</div>\n          <!--  <ul class=\"door-list\">\n            <li\n              v-for=\"item in campusObj.doorList\"\n              :key=\"item.id\"\n              :class=\"item.id == activeList[index] ? 'active' : ''\"\n              @click.stop=\"selectDoor(item, index)\"\n            >\n              {{ item.door }}\n            </li>\n          </ul> -->\n          <div class=\"address\">{{ campusObj.address }}</div>\n        </div>\n        <div class=\"detail-info\">\n          <tree-node\n            :initActive=\"$route.query.guestDeptId\"\n            :data=\"campusObj.groupDeptDtoList\"\n            @setCompany=\"setCompany($event, campusObj, index)\"\n          ></tree-node>\n        </div>\n      </li>\n    </ul>\n\n    <!-- <van-dialog\n      class=\"door-dialog\"\n      v-model=\"showDoorDialog\"\n      title=\"请选择访客到达门岗\"\n      :showConfirmButton=\"false\"\n      show-cancel-button\n      @cancel=\"onCancel\"\n    >\n     -->\n    <van-popup\n      :style=\"{ height: '40%' }\"\n      closeable\n      :close-on-click-overlay=\"false\"\n      v-model=\"showDoorDialog\"\n      round\n      position=\"bottom\"\n    >\n      <div class=\"door-wrapper\">\n        <div class=\"title\">请选择访客到达门岗</div>\n        <div>\n          {{ this.campusObj.deptName + ' ' + this.campusObj.address }}\n        </div>\n        <ul class=\"door-list\">\n          <li\n            v-for=\"item in this.campusObj.doorList\"\n            :key=\"item.id\"\n            :class=\"item.id == active ? 'active' : ''\"\n            @click.stop=\"selectDoor(item)\"\n          >\n            {{ item.door }}\n          </li>\n        </ul>\n      </div>\n    </van-popup>\n    <!-- </van-dialog> -->\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport treeNode from './TreeNode.vue';\nimport { getCompanyList } from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  components: { treeNode },\n  data() {\n    return {\n      campusObj: {},\n      companyInfo: {},\n      campusList: [],\n      // activeList: [], //设置默认选中入口\n      // activeNameList: [],\n      active: '',\n      activeName: '',\n      companyName: '',\n      showDoorDialog: false\n    };\n  },\n  methods: {\n    getCompanyList() {\n      getCompanyList().then(res => {\n        this.campusList = res.data;\n        this.activeList = this.campusList.map(item => {\n          return item.doorList[0].id;\n        });\n        this.activeNameList = this.campusList.map(item => {\n          return item.doorList[0].door;\n        });\n      });\n    },\n    selectDoor(item, index) {\n      // this.$set(this.activeList, index, item.id);\n      // this.$set(this.activeNameList, index, item.door);\n      this.active = item.id;\n      this.activeName = item.door;\n\n      eventBus.$emit(\n        'setArrivalCompany',\n        this.campusObj,\n        this.companyInfo,\n        this.activeName,\n        this.companyName,\n        this.active\n      );\n      eventBus.$emit('setcurType', this.$route.query.type);\n      this.$router.go(-1);\n    },\n    setCompany(item, campusObj, index) {\n      this.companyInfo = item;\n      this.campusObj = campusObj;\n      if (item.groupDeptDtoList && item.groupDeptDtoList.length > 0) {\n        this.$notify('请选择最后一级单位');\n        return;\n      }\n      if (item.level != 2) {\n        this.companyName = item.deptName || item.name;\n      } else {\n        this.companyName = this.getCompanyName(\n          item.parentId,\n          campusObj.groupDeptDtoList\n        );\n      }\n      this.setInfo(index);\n    },\n    getCompanyName(id, array) {\n      let arr = array.filter(item => {\n        return item.deptId == id;\n      });\n      return arr[0].deptName;\n    },\n\n    setInfo(index) {\n      if (Object.keys(this.companyInfo).length == 0) {\n        this.$notify('请选择到访部门！');\n        return;\n      }\n      this.showDoorDialog = true;\n    },\n    onCancel() {\n      this.showDoorDialog = false;\n    }\n  },\n  created() {\n    this.getCompanyList();\n    this.active = this.$route.query.guestDoorId;\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.app-wrapper {\n  padding: 15px 18px;\n}\n.campus-item {\n  margin-bottom: 15px;\n\n  .sum-info {\n    background: #ffffff;\n    box-shadow: 0px 1px 10px 0px rgba(94, 94, 94, 0.08);\n    padding: 12px;\n    .campus-name {\n      font-size: 17px;\n      font-family: PingFangSC-Medium, PingFang SC;\n      font-weight: 500;\n      color: rgba(0, 0, 0, 0.85);\n      line-height: 24px;\n      margin-bottom: 10px;\n      span {\n        font-size: 12px;\n      }\n    }\n  }\n  .detail-info {\n    background: #fbfbfc;\n  }\n}\n.door-list {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 20px 0;\n  // margin-bottom: 11px;\n  li {\n    padding: 5px 14px;\n    margin-right: 12px;\n    margin-bottom: 10px;\n    border-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.65);\n    font-size: 12px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.65);\n    &.active {\n      border: 1px solid transparent;\n      // border: none;\n      background: #3388ff;\n      color: #fff;\n    }\n  }\n}\n\n.door-wrapper {\n  padding: 20px;\n  .title {\n    margin-bottom: 20px;\n    text-align: center;\n  }\n}\n</style>\n"]}]}