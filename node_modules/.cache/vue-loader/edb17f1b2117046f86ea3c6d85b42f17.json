{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/teaching-activity/planDetailsAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/views/teaching-activity/planDetailsAdd.vue","mtime":1627979214415},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZXZlbnRCdXMgZnJvbSAnLi4vLi4vcGx1Z2lucy9jb21tb24vZXZlbnRCdXMuanMnOw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOw0KLy8gaW1wb3J0IFZIdG1sIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL1ZIdG1sL2luZGV4JzsNCmltcG9ydCB3YW5nRWRpdCBmcm9tICcuLi8uLi9jb21wb25lbnRzL2NvbW1vbi93YW5nRWRpdCc7DQppbXBvcnQgeyBGaWVsZCwgRm9ybSwgVXBsb2FkZXIsIFRvYXN0LCBPdmVybGF5LCBMb2FkaW5nIH0gZnJvbSAndmFudCc7DQppbXBvcnQgeyB1cGxvYWRHZXR1cmwgfSBmcm9tICcuLi8uLi9hcGkvYmFzZS90eXBlcy1hbGwnOw0KaW1wb3J0IHsgc2F2ZVBsYW5BY3RpdmUsIGdldFBsYW5JbmZvIH0gZnJvbSAnLi4vLi4vYXBpL3RlYWNoaW5nLWFjdGl2aXR5L3BsYW4nOw0KaW1wb3J0IHsgdG9QcmV2aWV3IH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9jb21tb24vdXRpbHMnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgLy8gWydwcmVwYXJhdGlvbiddOiBQcmVwYXJhdGlvbiwgLy8g562b6YCJDQogICAgLy8gWydkLXNlbGVjdCddOiBEU2VsZWN0LCAvLyDkuIvmi4npgInmi6kNCiAgICAvLyAndi1kYXRlRGlhbG9nJzogRGF0ZVBpY2tlciwNCiAgICBbRmllbGQubmFtZV06IEZpZWxkLA0KICAgIFtGb3JtLm5hbWVdOiBGb3JtLA0KICAgIFtUb2FzdC5uYW1lXTogVG9hc3QsDQogICAgW1VwbG9hZGVyLm5hbWVdOiBVcGxvYWRlciwNCiAgICBbT3ZlcmxheS5uYW1lXTogT3ZlcmxheSwNCiAgICBbTG9hZGluZy5uYW1lXTogTG9hZGluZywNCiAgICB3YW5nRWRpdA0KICAgIC8vICdyLWh0bWwnOiBWSHRtbA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpZDogJycsDQogICAgICBkZXRhaWw6IHsNCiAgICAgICAgaWQ6ICcnLA0KICAgICAgICBhY3RpdmVOYW1lOiAnJywNCiAgICAgICAgc2Nob29sTmFtZTogJycsDQogICAgICAgIHNjaG9vbENvZGU6ICcnLA0KICAgICAgICBzdWJqZWN0TmFtZTogJycsDQogICAgICAgIHN1YmplY3RDb2RlOiAnJywNCiAgICAgICAgc2VtZXN0ZXI6ICcnLA0KICAgICAgICBwbGFuRGVzY3JpYmU6ICcnLA0KICAgICAgICB1cmw6ICcnDQogICAgICB9LA0KICAgICAgdXBsb2FkZXI6IFt7fV0sDQogICAgICBzZWxlY3RMaXN0OiBbXSwNCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGdldFNlbWVzdGVyT3B0aW9uTGlzdDogW10NCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgJ2dldFNjaG9vbE9wdGlvbnMnLA0KICAgICAgJ2dldFN1YmplY3RPcHRpb25zJywNCiAgICAgICdnZXRBbGxTY2hvb2xPcHRpb25zJywNCiAgICAgICdnZXRBbGxTdWJqZWN0T3B0aW9ucycsDQogICAgICAnZ2V0U2VtZXN0ZXJPcHRpb25zJw0KICAgIF0pDQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBDb21wdXRlZEltZyh2YWwpIHsNCiAgICAgIGxldCB1cmw7DQogICAgICBzd2l0Y2ggKHZhbC50eXBlKSB7DQogICAgICAgIGNhc2UgJ3ppcCc6DQogICAgICAgICAgdXJsID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy96aXAucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ2F2aSc6DQogICAgICAgICAgdXJsID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9hdmkucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ21wNCc6DQogICAgICAgICAgdXJsID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9tcDQucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ2RvYyc6DQogICAgICAgIGNhc2UgJ2RvY3gnOg0KICAgICAgICBjYXNlICdET0MnOg0KICAgICAgICBjYXNlICdET0NYJzoNCiAgICAgICAgICB1cmwgPSByZXF1aXJlKCcuLi8uLi9hc3NldHMvaW1hZ2VzL3dvcmQucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3hsc3gnOg0KICAgICAgICBjYXNlICd4bHMnOg0KICAgICAgICBjYXNlICdYTFNYJzoNCiAgICAgICAgY2FzZSAnWExTJzoNCiAgICAgICAgICB1cmwgPSByZXF1aXJlKCcuLi8uLi9hc3NldHMvaW1hZ2VzL2V4Y2VsLnBuZycpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcHQnOg0KICAgICAgICBjYXNlICdwcHR4JzoNCiAgICAgICAgY2FzZSAnUFBUJzoNCiAgICAgICAgY2FzZSAnUFBUWCc6DQogICAgICAgICAgdXJsID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9wcHQucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3BkZic6DQogICAgICAgIGNhc2UgJ1BERic6DQogICAgICAgICAgdXJsID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9wZGYucG5nJyk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICByZXR1cm4gdXJsOw0KICAgIH0NCiAgfSwNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICAvLyB0aGlzLmluaXQoKTsNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICB3YXRjaDoge30sDQogIGFjdGl2YXRlZCgpIHsNCiAgICAvL+agueaNrmtleeWQjeiOt+WPluS8oOmAkuWbnuadpeeahOWPguaVsO+8jGRhdGHlsLHmmK9tYXANCiAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgdGhpcy4kZGQuYml6Lm5hdmlnYXRpb24uc2V0UmlnaHQoew0KICAgICAgc2hvdzogdHJ1ZSwgLy/mjqfliLbmjInpkq7mmL7npLrvvIwgdHJ1ZSDmmL7npLrvvIwgZmFsc2Ug6ZqQ6JeP77yMIOm7mOiupHRydWUNCiAgICAgIC8vIGJ1ZzogSFFBUS0zNjUNCiAgICAgIGNvbnRyb2w6IHRydWUsIC8v5piv5ZCm5o6n5Yi254K55Ye75LqL5Lu277yMdHJ1ZSDmjqfliLbvvIxmYWxzZSDkuI3mjqfliLbvvIwg6buY6K6kZmFsc2UNCiAgICAgIHRleHQ6ICflrozmiJAnLCAvL+aOp+WItuaYvuekuuaWh+acrO+8jOepuuWtl+espuS4suihqOekuuaYvuekuum7mOiupOaWh+acrA0KICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHsNCiAgICAgICAgLy/lpoLmnpxjb250cm9s5Li6dHJ1Ze+8jOWImW9uU3VjY2Vzc+WwhuWcqOWPkeeUn+aMiemSrueCueWHu+S6i+S7tuiiq+Wbnuiwgw0KICAgICAgICByZXR1cm4gc2VsZi5zYXZlUGxhbkRldGFpbHMoKTsNCiAgICAgIH0sDQogICAgICBvbkZhaWw6IGZ1bmN0aW9uKGVycikgew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycik7DQogICAgICB9DQogICAgfSk7DQogICAgLy8g6I635Y+Wc2VsZWN0UGFnZSDov5Tlm57nmoTmlbDmja4NCiAgICBldmVudEJ1cy4kb24oDQogICAgICAnc2VsZWN0TGlzdCcsDQogICAgICBmdW5jdGlvbihkYXRhLCBpdGVtLCBrZXlUeXBlKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmF0ZWQgIHNlbGVjdExpc3QnLCBkYXRhKTsNCiAgICAgICAgaWYgKGtleVR5cGUgPT09ICdzY2hvb2wnKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdExpc3QgZGF0YScsIGl0ZW0ubGFiZWwpOw0KICAgICAgICAgIC8vIHRoaXMuZGV0YWlsLnNjaG9vbE5hbWUgPSBpdGVtLmxhYmVsOw0KICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRhdGFbaW5kZXhdOw0KICAgICAgICAgICAgdGhpcy5nZXRTY2hvb2xPcHRpb25zW2luZGV4XS5pc0Nob3NlZCA9IGVsZW1lbnQuaXNDaG9zZWQ7DQogICAgICAgICAgICB0aGlzLmdldFNjaG9vbE9wdGlvbnNbaW5kZXhdLmxhYmVsID0gZWxlbWVudC5sYWJlbDsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZGV0YWlsLCAnc2Nob29sTmFtZScsIGl0ZW0ubGFiZWwpOw0KICAgICAgICAgIHRoaXMuZGV0YWlsLnNjaG9vbENvZGUgPSBpdGVtLmNvZGU7DQoNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2Nob29sTmFtZScsIHRoaXMuZGV0YWlsLnNjaG9vbE5hbWUpOw0KICAgICAgICB9IGVsc2UgaWYgKGtleVR5cGUgPT09ICdzdWJqZWN0Jykgew0KICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRhdGFbaW5kZXhdOw0KICAgICAgICAgICAgdGhpcy5nZXRTdWJqZWN0T3B0aW9uc1tpbmRleF0uaXNDaG9zZWQgPSBlbGVtZW50LmlzQ2hvc2VkOw0KICAgICAgICAgICAgdGhpcy5nZXRTdWJqZWN0T3B0aW9uc1tpbmRleF0ubGFiZWwgPSBlbGVtZW50LmxhYmVsOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5kZXRhaWwsICdzdWJqZWN0TmFtZScsIGl0ZW0ubGFiZWwpOw0KICAgICAgICAgIHRoaXMuZGV0YWlsLnN1YmplY3RDb2RlID0gaXRlbS5jb2RlOw0KICAgICAgICB9IGVsc2UgaWYgKGtleVR5cGUgPT09ICdzZW1lc3RlcicpIHsNCiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkYXRhW2luZGV4XTsNCiAgICAgICAgICAgIHRoaXMuZ2V0U2VtZXN0ZXJPcHRpb25MaXN0W2luZGV4XS5pc0Nob3NlZCA9IGVsZW1lbnQuaXNDaG9zZWQ7DQogICAgICAgICAgICB0aGlzLmdldFNlbWVzdGVyT3B0aW9uTGlzdFtpbmRleF0ubGFiZWwgPSBlbGVtZW50LmxhYmVsOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5kZXRhaWwsICdzZW1lc3RlcicsIGl0ZW0ubGFiZWwpOw0KICAgICAgICB9DQogICAgICB9LmJpbmQodGhpcykNCiAgICApOw0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAvLyDliJ3lp4vljJYNCiAgICBhc3luYyBpbml0KCkgew0KICAgICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOw0KICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT09ICdwbGFuRGV0YWlsc0VkaXQnKSB7DQogICAgICAgIHRoaXMuZGV0YWlsLmlkID0gdGhpcy5pZDsNCiAgICAgICAgdGhpcy5nZXRQbGFuSW5mbygpOw0KICAgICAgfQ0KICAgICAgLy8gYXdhaXQgdGhpcy5nZXRUeXBlT3B0aW9ucygnU0NIT09MX0NPREUnLCAnU0VUX0FMTF9TQ0hPT0xfT1BUSU9OUycpOw0KICAgICAgLy8gYXdhaXQgdGhpcy5nZXRUeXBlT3B0aW9ucygnWEsnLCAnU0VUX0FMTF9TVUJKRUNUX09QVElPTlMnKTsNCg0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRTY2hvb2xPcHRpb25zJywgew0KICAgICAgICBzdGFmZkNvZGU6IHRoaXMuJHN0b3JlLmdldHRlcnMuc3RhZmZDb2RlDQogICAgICB9KTsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2FkU3ViamVjdE9wdGlvbnMnLCB7DQogICAgICAgIHN0YWZmQ29kZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5zdGFmZkNvZGUNCiAgICAgIH0pOw0KICAgICAgYXdhaXQgdGhpcy5nZXRTZW1lc3Rlckxpc3QoKTsNCiAgICAgIC8vIOWtpuagoQ0KICAgICAgdGhpcy5nZXRTY2hvb2xPcHRpb25zLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgIGVsZW1lbnQuaXNDaG9zZWQgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgICAgLy8g5a2m56eRDQogICAgICB0aGlzLmdldFN1YmplY3RPcHRpb25zLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgIGVsZW1lbnQuaXNDaG9zZWQgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgICAgLy8g5a2m5pyfDQogICAgICB0aGlzLmdldFNlbWVzdGVyT3B0aW9uTGlzdCA9IFtdOw0KICAgICAgdGhpcy5nZXRTZW1lc3Rlck9wdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgbGV0IGEgPSB7fTsNCiAgICAgICAgYS5jb2RlID0gZWxlbWVudDsNCiAgICAgICAgYS5pc0Nob3NlZCA9IGZhbHNlOw0KICAgICAgICBhLmxhYmVsID0gZWxlbWVudDsNCiAgICAgICAgdGhpcy5nZXRTZW1lc3Rlck9wdGlvbkxpc3QucHVzaChhKTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICB0b1BkZlByZXZpZXcoaXRlbSkgew0KICAgICAgdG9QcmV2aWV3KGl0ZW0pOw0KICAgIH0sDQoNCiAgICAvLyDojrflj5borqHliJLor6bmg4UNCiAgICBnZXRQbGFuSW5mbygpIHsNCiAgICAgIGxldCBsb2FkaW5nID0gVG9hc3QubG9hZGluZyh7DQogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLA0KICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQ0KICAgICAgfSk7DQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICBpZDogdGhpcy5pZA0KICAgICAgfTsNCg0KICAgICAgZ2V0UGxhbkluZm8ocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YSkgew0KICAgICAgICAgIC8vIGZvciAoY29uc3Qga2V5IGluIHRoaXMuZGV0YWlsKSB7DQogICAgICAgICAgLy8gICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwocmVzLmRhdGEsIGtleSkpIHsNCiAgICAgICAgICAvLyAgICAgY29uc3QgZWxlbWVudCA9IHJlcy5kYXRhW2tleV07DQogICAgICAgICAgLy8gICAgIHRoaXMuZGV0YWlsW2tleV0gPSBlbGVtZW50Ow0KICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgIC8vIH0NCiAgICAgICAgICB0aGlzLmRldGFpbCA9IHJlcy5kYXRhOw0KICAgICAgICAgIGlmICh0aGlzLmRldGFpbC51cmwpIHsNCiAgICAgICAgICAgIC8vIHRoaXMuZmlsZUxpc3QgPSB0aGlzLmRldGFpbC51cmwuc3BsaXQoJywnKS5tYXAoaXRlbSA9PiB7DQogICAgICAgICAgICAvLyAgIGxldCBhcnIgPSBpdGVtLnNwbGl0KCcuJyk7DQogICAgICAgICAgICAvLyAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7IHR5cGU6IGFyclthcnIubGVuZ3RoIC0gMV0gfSk7DQogICAgICAgICAgICAvLyB9KTsNCg0KICAgICAgICAgICAgbGV0IHJlc3VsdFRpdGxlOw0KICAgICAgICAgICAgaWYgKHRoaXMuZGV0YWlsLnVybE5hbWUpIHsNCiAgICAgICAgICAgICAgcmVzdWx0VGl0bGUgPSB0aGlzLmRldGFpbC51cmxOYW1lLnNwbGl0KCcsJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmZpbGVMaXN0ID0gdGhpcy5kZXRhaWwudXJsLnNwbGl0KCcsJykubWFwKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICBsZXQgYXJyID0gaXRlbS5zcGxpdCgnLicpOw0KICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbigNCiAgICAgICAgICAgICAgICB7fSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICB0eXBlOiBhcnJbYXJyLmxlbmd0aCAtIDFdLA0KICAgICAgICAgICAgICAgICAgdXJsOiBpdGVtLA0KICAgICAgICAgICAgICAgICAgbmFtZTogcmVzdWx0VGl0bGUgPyByZXN1bHRUaXRsZVtpbmRleF0gOiAnJw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRldGFpbCA9IHt9Ow0KICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsNCiAgICAgICAgfQ0KICAgICAgICBsb2FkaW5nLmNsZWFyKCk7DQogICAgICAgIHJldHVybiByZXM7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOS/neWtmOiuoeWIkg0KICAgIHNhdmVQbGFuRGV0YWlscygpIHsNCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidzZWFjaGVyJyxwYXJhbXM6e2lkOmZsZ319KSAvLyBidWfvvJrliLfmlrDlkI5wYXJhbXPph4znmoTmlbDmja7lsLHmmK/nqbrnmoQNCiAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKGAvc2VjaGVyLyR7ZmxnfWApOw0KDQogICAgICBpZiAoIXRoaXMuZGV0YWlsLmFjdGl2ZU5hbWUpIHsNCiAgICAgICAgVG9hc3QuZmFpbCgn6K+35re75Yqg6K6h5YiS5qCH6aKYJyk7DQogICAgICB9IGVsc2UgaWYgKCF0aGlzLmRldGFpbC5zY2hvb2xOYW1lKSB7DQogICAgICAgIFRvYXN0LmZhaWwoJ+ivt+mAieaLqeWtpuagoScpOw0KICAgICAgfSBlbHNlIGlmICghdGhpcy5kZXRhaWwuc3ViamVjdE5hbWUpIHsNCiAgICAgICAgVG9hc3QuZmFpbCgn6K+36YCJ5oup5a2m56eRJyk7DQogICAgICB9IGVsc2UgaWYgKCF0aGlzLmRldGFpbC5zZW1lc3Rlcikgew0KICAgICAgICBUb2FzdC5mYWlsKCfor7fpgInmi6nlrabmnJ8nKTsNCiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGV0YWlsLnBsYW5EZXNjcmliZSkgew0KICAgICAgICBUb2FzdC5mYWlsKCfor7floavlhpnorqHliJLmj4/ov7AnKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXJhbXM6JywgdGhpcy5kZXRhaWwpOw0KICAgICAgICBsZXQgcGFyYW1zID0gdGhpcy5kZXRhaWw7DQogICAgICAgIGxldCBsb2FkaW5nID0gVG9hc3QubG9hZGluZyh7DQogICAgICAgICAgbWVzc2FnZTogJ+ato+WcqOaPkOS6pC4uLicsDQogICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUNCiAgICAgICAgfSk7DQogICAgICAgIHNhdmVQbGFuQWN0aXZlKHBhcmFtcykNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgbG9hZGluZy5jbGVhcigpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgICBuYW1lOiAndGVhY2hpbmdBY3Rpdml0eScNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBUb2FzdC5mYWlsKHJlcy5tZXNzYWdlIHwgJ+acjeWKoeWZqOi/lOWbnumUmeivrycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlczsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgbG9hZGluZy5jbGVhcigpOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXRUeXBlT3B0aW9ucyhjb2RlLCB0eXBlKSB7DQogICAgICBsZXQgcGF5bG9hZCA9IHsNCiAgICAgICAgcGFyYW1zOiB7IHBhcmVudEtleTogY29kZSB9LA0KICAgICAgICB0eXBlczogdHlwZQ0KICAgICAgfTsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9hZENoaWxkcmVuT3B0aW9ucycsIHBheWxvYWQpOw0KICAgIH0sDQoNCiAgICBnZXRTZW1lc3Rlckxpc3QoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRTZW1lc3Rlck9wdGlvbnMnLCB7fSk7DQogICAgfSwNCg0KICAgIC8vIOmAieaLqeWtpuagoQ0KICAgIHNlbGVjdFNjaG9vbCgpIHsNCiAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRTY2hvb2xPcHRpb25zKSk7DQogICAgICAvLyBjb25zb2xlLmxvZygnc2VsZWN0TGlzdCcsIHRoaXMuc2VsZWN0TGlzdCk7DQogICAgICB0aGlzLnNlbGVjdExpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgZWxlbWVudC5sYWJlbCA9IGVsZW1lbnQuRElDVElPTkFSWV9URVhUOw0KICAgICAgfSk7DQoNCiAgICAgIHRoaXMuc2VsZWN0TGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICBlbGVtZW50LmNvZGUgPSBlbGVtZW50LkRJQ1RJT05BUllfS0VZOw0KICAgICAgICBlbGVtZW50LmxhYmVsID0gZWxlbWVudC5ESUNUSU9OQVJZX1RFWFQ7DQogICAgICB9KTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgbmFtZTogJ3NlbGVjdFBhZ2UnLA0KICAgICAgICBxdWVyeTogew0KICAgICAgICAgIHRpdGxlOiAn6YCJ5oup5a2m5qChJw0KICAgICAgICB9LA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBzZWxlY3RMaXN0OiB0aGlzLnNlbGVjdExpc3QsDQogICAgICAgICAga2V5VHlwZTogJ3NjaG9vbCcsDQogICAgICAgICAgY3VycmVudENvZGU6IHRoaXMuZGV0YWlsLnNjaG9vbENvZGUNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDpgInmi6nlrabnp5ENCiAgICBzZWxlY3RTdWJqZWN0KCkgew0KICAgICAgLy8gdGhpcy5zZWxlY3RMaXN0ID0gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5nZXRTdWJqZWN0T3B0aW9ucyk7DQogICAgICB0aGlzLnNlbGVjdExpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0U3ViamVjdE9wdGlvbnMpKTsNCiAgICAgIHRoaXMuc2VsZWN0TGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICBlbGVtZW50LmNvZGUgPSBlbGVtZW50LkRJQ1RJT05BUllfS0VZOw0KICAgICAgICBlbGVtZW50LmxhYmVsID0gZWxlbWVudC5ESUNUSU9OQVJZX1RFWFQ7DQogICAgICB9KTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgbmFtZTogJ3NlbGVjdFBhZ2UnLA0KICAgICAgICBxdWVyeTogew0KICAgICAgICAgIHRpdGxlOiAn6YCJ5oup5a2m56eRJw0KICAgICAgICB9LA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBzZWxlY3RMaXN0OiB0aGlzLnNlbGVjdExpc3QsDQogICAgICAgICAga2V5VHlwZTogJ3N1YmplY3QnLA0KICAgICAgICAgIGN1cnJlbnRDb2RlOiB0aGlzLmRldGFpbC5zdWJqZWN0Q29kZQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOmAieaLqeWtpuacnw0KICAgIHNlbGVjdFNlbWVzdGVyKCkgew0KICAgICAgLy8gdGhpcy5zZWxlY3RMaXN0ID0gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5nZXRTZW1lc3Rlck9wdGlvbnMpOw0KICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmdldFNlbWVzdGVyT3B0aW9uTGlzdCkpOw0KICAgICAgdGhpcy5nZXRTZW1lc3Rlck9wdGlvbkxpc3QuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgZWxlbWVudC5jb2RlID0gZWxlbWVudC5sYWJlbDsNCiAgICAgIH0pOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAnc2VsZWN0UGFnZScsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgdGl0bGU6ICfpgInmi6nlrabmnJ8nDQogICAgICAgIH0sDQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIHNlbGVjdExpc3Q6IHRoaXMuc2VsZWN0TGlzdCwNCiAgICAgICAgICBrZXlUeXBlOiAnc2VtZXN0ZXInLA0KICAgICAgICAgIGN1cnJlbnRDb2RlOiB0aGlzLmRldGFpbC5zZW1lc3Rlcg0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIG9uU3VibWl0KHZhbHVlcykgew0KICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdCcsIHZhbHVlcyk7DQogICAgfQ0KICB9LA0KICAvLyDlr7zoiKrnprvlvIDor6Xnu4Tku7bnmoTlr7nlupTot6/nlLHml7bosIPnlKhb5Y+v5Lul6K6/6Zeu57uE5Lu25a6e5L6LIGB0aGlzYF0NCiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgew0KICAgIC8vIOmUgOavgee7hOS7tu+8jOmBv+WFjemAmui/h3Z1ZS1yb3V0ZXLlho3mrKHov5vlhaXml7bvvIzku43mmK/kuIrmrKHnmoRoaXN0b3J557yT5a2Y55qE54q25oCBDQogICAgLy8gY29uc29sZS5sb2coJ3RvJywgdG8ubmFtZSk7DQogICAgLy8gaWYgKHRvLm5hbWUgIT09ICdzZWxlY3RQYWdlJykgew0KICAgIC8vICAgdGhpcy4kZGVzdHJveSh0cnVlKTsNCiAgICAvLyB9DQoNCiAgICBuZXh0KCk7DQogIH0sDQogIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsNCiAgICBuZXh0KHZtID0+IHsNCiAgICAgIGlmIChmcm9tLm5hbWUgPT09ICdwbGFuRGV0YWlscycgJiYgdG8ubmFtZSA9PSAncGxhbkRldGFpbHNFZGl0Jykgew0KICAgICAgICAvL+S4gOWumuaYr+S7jkHov5vliLBC6aG16Z2i5omN5Yi35pawDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCd0bzIyMjIyLCcpOw0KICAgICAgICB2bS5kZXRhaWwgPSB7DQogICAgICAgICAgaWQ6ICcnLA0KICAgICAgICAgIGFjdGl2ZU5hbWU6ICcnLA0KICAgICAgICAgIHNjaG9vbE5hbWU6ICcnLA0KICAgICAgICAgIHNjaG9vbENvZGU6ICcnLA0KICAgICAgICAgIHN1YmplY3ROYW1lOiAnJywNCiAgICAgICAgICBzdWJqZWN0Q29kZTogJycsDQogICAgICAgICAgc2VtZXN0ZXI6ICcnLA0KICAgICAgICAgIHBsYW5EZXNjcmliZTogJycsDQogICAgICAgICAgdXJsOiAnJw0KICAgICAgICB9Ow0KDQogICAgICAgIHZtLmlkID0gJyc7DQoNCiAgICAgICAgdm0udXBsb2FkZXIgPSBbe31dOw0KICAgICAgICB2bS5zZWxlY3RMaXN0ID0gW107DQogICAgICAgIHZtLmZpbGVMaXN0ID0gW107DQogICAgICAgIHZtLmdldFNlbWVzdGVyT3B0aW9uTGlzdCA9IFtdOw0KICAgICAgICB2bS5pbml0KCk7DQogICAgICB9IGVsc2UgaWYgKA0KICAgICAgICBmcm9tLm5hbWUgPT09ICd0ZWFjaGluZ0FjdGl2aXR5JyAmJg0KICAgICAgICB0by5uYW1lID09PSAncGxhbkRldGFpbHNBZGQnDQogICAgICApIHsNCiAgICAgICAgdm0uZGV0YWlsID0gew0KICAgICAgICAgIGlkOiAnJywNCiAgICAgICAgICBhY3RpdmVOYW1lOiAnJywNCiAgICAgICAgICBzY2hvb2xOYW1lOiAnJywNCiAgICAgICAgICBzY2hvb2xDb2RlOiAnJywNCiAgICAgICAgICBzdWJqZWN0TmFtZTogJycsDQogICAgICAgICAgc3ViamVjdENvZGU6ICcnLA0KICAgICAgICAgIHNlbWVzdGVyOiAnJywNCiAgICAgICAgICBwbGFuRGVzY3JpYmU6ICcnLA0KICAgICAgICAgIHVybDogJycNCiAgICAgICAgfTsNCg0KICAgICAgICB2bS5pZCA9ICcnOw0KDQogICAgICAgIHZtLnVwbG9hZGVyID0gW3t9XTsNCiAgICAgICAgdm0uc2VsZWN0TGlzdCA9IFtdOw0KICAgICAgICB2bS5maWxlTGlzdCA9IFtdOw0KICAgICAgICB2bS5nZXRTZW1lc3Rlck9wdGlvbkxpc3QgPSBbXTsNCg0KICAgICAgICB2bS5pbml0KCk7DQogICAgICB9DQogICAgfSk7DQogIH0NCn07DQo="},{"version":3,"sources":["planDetailsAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"planDetailsAdd.vue","sourceRoot":"src/pages/teaching-points-h5/views/teaching-activity","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <van-form @submit=\"onSubmit\">\r\n      <div\r\n        style=\"padding-left:0.32rem;padding-right:0.32rem;background:#ffffff;\"\r\n      >\r\n        <van-field\r\n          v-model=\"detail.activeName\"\r\n          rows=\"3\"\r\n          autosize\r\n          type=\"textarea\"\r\n          maxlength=\"50\"\r\n          placeholder=\"添加计划标题（必填）\"\r\n          show-word-limit\r\n        />\r\n      </div>\r\n      <div class=\"center-content\" style=\"margin-top:0.2rem;\">\r\n        <van-field name=\"semester\">\r\n          <template #input>\r\n            <div style=\"width:100%\" @click=\"selectSchool\">\r\n              <div class=\"flex flex-m plan-item\">\r\n                <div class=\"red-sign\">*</div>\r\n                <div class=\"plan-item-label\">添加学校：</div>\r\n                <div\r\n                  class=\"flex flex-m\"\r\n                  style=\"margin-left:auto;margin-right:0;\"\r\n                >\r\n                  <div class=\"plan-item-value\" style=\"margin-right:0.2rem;\">\r\n                    {{ detail.schoolName }}\r\n                  </div>\r\n                  <div class=\"detail-arrow\"></div>\r\n                </div>\r\n              </div>\r\n              <div class=\"dash-line\"></div>\r\n            </div>\r\n          </template>\r\n        </van-field>\r\n\r\n        <van-field name=\"semester\">\r\n          <template #input>\r\n            <div style=\"width:100%\" @click=\"selectSubject\">\r\n              <div class=\"flex flex-m plan-item\">\r\n                <div class=\"red-sign\">*</div>\r\n                <div class=\"plan-item-label\">添加学科：</div>\r\n                <div\r\n                  class=\"flex flex-m\"\r\n                  style=\"margin-left:auto;margin-right:0;\"\r\n                >\r\n                  <div class=\"plan-item-value\" style=\"margin-right:0.2rem;\">\r\n                    {{ detail.subjectName }}\r\n                  </div>\r\n                  <div class=\"detail-arrow\"></div>\r\n                </div>\r\n              </div>\r\n              <div class=\"dash-line\"></div>\r\n            </div>\r\n          </template>\r\n        </van-field>\r\n\r\n        <van-field name=\"semester\">\r\n          <template #input>\r\n            <div style=\"width:100%\" @click=\"selectSemester\">\r\n              <div class=\"flex flex-m plan-item\">\r\n                <div class=\"red-sign\">*</div>\r\n                <div class=\"plan-item-label\">添加学期：</div>\r\n                <div\r\n                  class=\"flex flex-m\"\r\n                  style=\"margin-left:auto;margin-right:0;\"\r\n                >\r\n                  <div class=\"plan-item-value\" style=\"margin-right:0.2rem;\">\r\n                    {{ detail.semester }}\r\n                  </div>\r\n                  <div class=\"detail-arrow\"></div>\r\n                </div>\r\n              </div>\r\n              <div class=\"dash-line\"></div>\r\n            </div>\r\n          </template>\r\n        </van-field>\r\n\r\n        <van-field name=\"semester\">\r\n          <template #input>\r\n            <div style=\"width:100%\">\r\n              <div class=\"flex flex-m plan-item\">\r\n                <div class=\"red-sign\">*</div>\r\n                <div class=\"plan-item-label\">计划描述：</div>\r\n              </div>\r\n              <div class=\"p-edit\">\r\n                <wangEdit v-model=\"detail.planDescribe\"></wangEdit>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </van-field>\r\n\r\n        <div v-if=\"fileList && fileList.length > 0\" style=\"margin-top:0.1rem;\">\r\n          <div class=\"text-label\">\r\n            自定义成果：<span>(附件上传与编辑请到电脑端操作) </span>\r\n          </div>\r\n          <ul class=\"extra-fileList\">\r\n            <li\r\n              v-for=\"(item, index) in fileList\"\r\n              @click=\"toPdfPreview(item)\"\r\n              :key=\"index\"\r\n            >\r\n              <img :src=\"item | ComputedImg\" alt=\"\" />\r\n              <p>{{ item.name }}</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <!-- <van-field name=\"uploader\">\r\n          <template #input>\r\n            <div>\r\n              <div\r\n                class=\"plan-item-label\"\r\n                style=\"margin-bottom:0.24rem;margin-top:0.26rem;\"\r\n              >\r\n                添加照片:\r\n              </div>\r\n              <van-uploader\r\n                :after-read=\"afterRead\"\r\n                :max-count=\"9\"\r\n                :before-delete=\"deleteRead\"\r\n                v-model=\"fileList\"\r\n                multiple\r\n              />\r\n            </div>\r\n          </template>\r\n        </van-field> -->\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from '../../plugins/common/eventBus.js';\r\nimport { mapGetters } from 'vuex';\r\n// import VHtml from '../../components/common/VHtml/index';\r\nimport wangEdit from '../../components/common/wangEdit';\r\nimport { Field, Form, Uploader, Toast, Overlay, Loading } from 'vant';\r\nimport { uploadGeturl } from '../../api/base/types-all';\r\nimport { savePlanActive, getPlanInfo } from '../../api/teaching-activity/plan';\r\nimport { toPreview } from '../../plugins/common/utils';\r\nexport default {\r\n  components: {\r\n    // ['preparation']: Preparation, // 筛选\r\n    // ['d-select']: DSelect, // 下拉选择\r\n    // 'v-dateDialog': DatePicker,\r\n    [Field.name]: Field,\r\n    [Form.name]: Form,\r\n    [Toast.name]: Toast,\r\n    [Uploader.name]: Uploader,\r\n    [Overlay.name]: Overlay,\r\n    [Loading.name]: Loading,\r\n    wangEdit\r\n    // 'r-html': VHtml\r\n  },\r\n  data() {\r\n    return {\r\n      id: '',\r\n      detail: {\r\n        id: '',\r\n        activeName: '',\r\n        schoolName: '',\r\n        schoolCode: '',\r\n        subjectName: '',\r\n        subjectCode: '',\r\n        semester: '',\r\n        planDescribe: '',\r\n        url: ''\r\n      },\r\n      uploader: [{}],\r\n      selectList: [],\r\n      fileList: [],\r\n      getSemesterOptionList: []\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'getSchoolOptions',\r\n      'getSubjectOptions',\r\n      'getAllSchoolOptions',\r\n      'getAllSubjectOptions',\r\n      'getSemesterOptions'\r\n    ])\r\n  },\r\n  filters: {\r\n    ComputedImg(val) {\r\n      let url;\r\n      switch (val.type) {\r\n        case 'zip':\r\n          url = require('../../assets/images/zip.png');\r\n          break;\r\n        case 'avi':\r\n          url = require('../../assets/images/avi.png');\r\n          break;\r\n        case 'mp4':\r\n          url = require('../../assets/images/mp4.png');\r\n          break;\r\n        case 'doc':\r\n        case 'docx':\r\n        case 'DOC':\r\n        case 'DOCX':\r\n          url = require('../../assets/images/word.png');\r\n          break;\r\n        case 'xlsx':\r\n        case 'xls':\r\n        case 'XLSX':\r\n        case 'XLS':\r\n          url = require('../../assets/images/excel.png');\r\n          break;\r\n        case 'ppt':\r\n        case 'pptx':\r\n        case 'PPT':\r\n        case 'PPTX':\r\n          url = require('../../assets/images/ppt.png');\r\n          break;\r\n        case 'pdf':\r\n        case 'PDF':\r\n          url = require('../../assets/images/pdf.png');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      return url;\r\n    }\r\n  },\r\n  async created() {\r\n    // this.init();\r\n  },\r\n  mounted() {},\r\n  watch: {},\r\n  activated() {\r\n    //根据key名获取传递回来的参数，data就是map\r\n    let self = this;\r\n    this.$dd.biz.navigation.setRight({\r\n      show: true, //控制按钮显示， true 显示， false 隐藏， 默认true\r\n      // bug: HQAQ-365\r\n      control: true, //是否控制点击事件，true 控制，false 不控制， 默认false\r\n      text: '完成', //控制显示文本，空字符串表示显示默认文本\r\n      onSuccess: function(result) {\r\n        //如果control为true，则onSuccess将在发生按钮点击事件被回调\r\n        return self.savePlanDetails();\r\n      },\r\n      onFail: function(err) {\r\n        console.error(err);\r\n      }\r\n    });\r\n    // 获取selectPage 返回的数据\r\n    eventBus.$on(\r\n      'selectList',\r\n      function(data, item, keyType) {\r\n        console.log('activated  selectList', data);\r\n        if (keyType === 'school') {\r\n          console.log('selectList data', item.label);\r\n          // this.detail.schoolName = item.label;\r\n          for (let index = 0; index < data.length; index++) {\r\n            const element = data[index];\r\n            this.getSchoolOptions[index].isChosed = element.isChosed;\r\n            this.getSchoolOptions[index].label = element.label;\r\n          }\r\n          this.$set(this.detail, 'schoolName', item.label);\r\n          this.detail.schoolCode = item.code;\r\n\r\n          // console.log('schoolName', this.detail.schoolName);\r\n        } else if (keyType === 'subject') {\r\n          for (let index = 0; index < data.length; index++) {\r\n            const element = data[index];\r\n            this.getSubjectOptions[index].isChosed = element.isChosed;\r\n            this.getSubjectOptions[index].label = element.label;\r\n          }\r\n          this.$set(this.detail, 'subjectName', item.label);\r\n          this.detail.subjectCode = item.code;\r\n        } else if (keyType === 'semester') {\r\n          for (let index = 0; index < data.length; index++) {\r\n            const element = data[index];\r\n            this.getSemesterOptionList[index].isChosed = element.isChosed;\r\n            this.getSemesterOptionList[index].label = element.label;\r\n          }\r\n          this.$set(this.detail, 'semester', item.label);\r\n        }\r\n      }.bind(this)\r\n    );\r\n  },\r\n\r\n  methods: {\r\n    // 初始化\r\n    async init() {\r\n      this.id = this.$route.query.id;\r\n      if (this.$route.name === 'planDetailsEdit') {\r\n        this.detail.id = this.id;\r\n        this.getPlanInfo();\r\n      }\r\n      // await this.getTypeOptions('SCHOOL_CODE', 'SET_ALL_SCHOOL_OPTIONS');\r\n      // await this.getTypeOptions('XK', 'SET_ALL_SUBJECT_OPTIONS');\r\n\r\n      this.$store.dispatch('loadSchoolOptions', {\r\n        staffCode: this.$store.getters.staffCode\r\n      });\r\n      this.$store.dispatch('loadSubjectOptions', {\r\n        staffCode: this.$store.getters.staffCode\r\n      });\r\n      await this.getSemesterList();\r\n      // 学校\r\n      this.getSchoolOptions.forEach(element => {\r\n        element.isChosed = false;\r\n      });\r\n      // 学科\r\n      this.getSubjectOptions.forEach(element => {\r\n        element.isChosed = false;\r\n      });\r\n      // 学期\r\n      this.getSemesterOptionList = [];\r\n      this.getSemesterOptions.forEach(element => {\r\n        let a = {};\r\n        a.code = element;\r\n        a.isChosed = false;\r\n        a.label = element;\r\n        this.getSemesterOptionList.push(a);\r\n      });\r\n    },\r\n\r\n    toPdfPreview(item) {\r\n      toPreview(item);\r\n    },\r\n\r\n    // 获取计划详情\r\n    getPlanInfo() {\r\n      let loading = Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true\r\n      });\r\n      let params = {\r\n        id: this.id\r\n      };\r\n\r\n      getPlanInfo(params).then(res => {\r\n        if (res.data) {\r\n          // for (const key in this.detail) {\r\n          //   if (Object.hasOwnProperty.call(res.data, key)) {\r\n          //     const element = res.data[key];\r\n          //     this.detail[key] = element;\r\n          //   }\r\n          // }\r\n          this.detail = res.data;\r\n          if (this.detail.url) {\r\n            // this.fileList = this.detail.url.split(',').map(item => {\r\n            //   let arr = item.split('.');\r\n            //   return Object.assign({}, { type: arr[arr.length - 1] });\r\n            // });\r\n\r\n            let resultTitle;\r\n            if (this.detail.urlName) {\r\n              resultTitle = this.detail.urlName.split(',');\r\n            }\r\n            this.fileList = this.detail.url.split(',').map((item, index) => {\r\n              let arr = item.split('.');\r\n              return Object.assign(\r\n                {},\r\n                {\r\n                  type: arr[arr.length - 1],\r\n                  url: item,\r\n                  name: resultTitle ? resultTitle[index] : ''\r\n                }\r\n              );\r\n            });\r\n          }\r\n        } else {\r\n          this.detail = {};\r\n          this.fileList = [];\r\n        }\r\n        loading.clear();\r\n        return res;\r\n      });\r\n    },\r\n    // 保存计划\r\n    savePlanDetails() {\r\n      // this.$router.push({name:'seacher',params:{id:flg}}) // bug：刷新后params里的数据就是空的\r\n      // this.$router.push(`/secher/${flg}`);\r\n\r\n      if (!this.detail.activeName) {\r\n        Toast.fail('请添加计划标题');\r\n      } else if (!this.detail.schoolName) {\r\n        Toast.fail('请选择学校');\r\n      } else if (!this.detail.subjectName) {\r\n        Toast.fail('请选择学科');\r\n      } else if (!this.detail.semester) {\r\n        Toast.fail('请选择学期');\r\n      } else if (!this.detail.planDescribe) {\r\n        Toast.fail('请填写计划描述');\r\n      } else {\r\n        // console.log('params:', this.detail);\r\n        let params = this.detail;\r\n        let loading = Toast.loading({\r\n          message: '正在提交...',\r\n          forbidClick: true\r\n        });\r\n        savePlanActive(params)\r\n          .then(res => {\r\n            loading.clear();\r\n            if (res.success) {\r\n              this.$router.push({\r\n                name: 'teachingActivity'\r\n              });\r\n            } else {\r\n              Toast.fail(res.message | '服务器返回错误');\r\n            }\r\n            return res;\r\n          })\r\n          .catch(err => {\r\n            loading.clear();\r\n          });\r\n      }\r\n    },\r\n\r\n    getTypeOptions(code, type) {\r\n      let payload = {\r\n        params: { parentKey: code },\r\n        types: type\r\n      };\r\n      return this.$store.dispatch('loadChildrenOptions', payload);\r\n    },\r\n\r\n    getSemesterList() {\r\n      return this.$store.dispatch('loadSemesterOptions', {});\r\n    },\r\n\r\n    // 选择学校\r\n    selectSchool() {\r\n      this.selectList = JSON.parse(JSON.stringify(this.getSchoolOptions));\r\n      // console.log('selectList', this.selectList);\r\n      this.selectList.forEach(element => {\r\n        element.label = element.DICTIONARY_TEXT;\r\n      });\r\n\r\n      this.selectList.forEach(element => {\r\n        element.code = element.DICTIONARY_KEY;\r\n        element.label = element.DICTIONARY_TEXT;\r\n      });\r\n      this.$router.push({\r\n        name: 'selectPage',\r\n        query: {\r\n          title: '选择学校'\r\n        },\r\n        params: {\r\n          selectList: this.selectList,\r\n          keyType: 'school',\r\n          currentCode: this.detail.schoolCode\r\n        }\r\n      });\r\n    },\r\n    // 选择学科\r\n    selectSubject() {\r\n      // this.selectList = Object.assign([], this.getSubjectOptions);\r\n      this.selectList = JSON.parse(JSON.stringify(this.getSubjectOptions));\r\n      this.selectList.forEach(element => {\r\n        element.code = element.DICTIONARY_KEY;\r\n        element.label = element.DICTIONARY_TEXT;\r\n      });\r\n      this.$router.push({\r\n        name: 'selectPage',\r\n        query: {\r\n          title: '选择学科'\r\n        },\r\n        params: {\r\n          selectList: this.selectList,\r\n          keyType: 'subject',\r\n          currentCode: this.detail.subjectCode\r\n        }\r\n      });\r\n    },\r\n    // 选择学期\r\n    selectSemester() {\r\n      // this.selectList = Object.assign([], this.getSemesterOptions);\r\n      this.selectList = JSON.parse(JSON.stringify(this.getSemesterOptionList));\r\n      this.getSemesterOptionList.forEach(element => {\r\n        element.code = element.label;\r\n      });\r\n      this.$router.push({\r\n        name: 'selectPage',\r\n        query: {\r\n          title: '选择学期'\r\n        },\r\n        params: {\r\n          selectList: this.selectList,\r\n          keyType: 'semester',\r\n          currentCode: this.detail.semester\r\n        }\r\n      });\r\n    },\r\n    onSubmit(values) {\r\n      console.log('submit', values);\r\n    }\r\n  },\r\n  // 导航离开该组件的对应路由时调用[可以访问组件实例 `this`]\r\n  beforeRouteLeave(to, from, next) {\r\n    // 销毁组件，避免通过vue-router再次进入时，仍是上次的history缓存的状态\r\n    // console.log('to', to.name);\r\n    // if (to.name !== 'selectPage') {\r\n    //   this.$destroy(true);\r\n    // }\r\n\r\n    next();\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      if (from.name === 'planDetails' && to.name == 'planDetailsEdit') {\r\n        //一定是从A进到B页面才刷新\r\n        // console.log('to22222,');\r\n        vm.detail = {\r\n          id: '',\r\n          activeName: '',\r\n          schoolName: '',\r\n          schoolCode: '',\r\n          subjectName: '',\r\n          subjectCode: '',\r\n          semester: '',\r\n          planDescribe: '',\r\n          url: ''\r\n        };\r\n\r\n        vm.id = '';\r\n\r\n        vm.uploader = [{}];\r\n        vm.selectList = [];\r\n        vm.fileList = [];\r\n        vm.getSemesterOptionList = [];\r\n        vm.init();\r\n      } else if (\r\n        from.name === 'teachingActivity' &&\r\n        to.name === 'planDetailsAdd'\r\n      ) {\r\n        vm.detail = {\r\n          id: '',\r\n          activeName: '',\r\n          schoolName: '',\r\n          schoolCode: '',\r\n          subjectName: '',\r\n          subjectCode: '',\r\n          semester: '',\r\n          planDescribe: '',\r\n          url: ''\r\n        };\r\n\r\n        vm.id = '';\r\n\r\n        vm.uploader = [{}];\r\n        vm.selectList = [];\r\n        vm.fileList = [];\r\n        vm.getSemesterOptionList = [];\r\n\r\n        vm.init();\r\n      }\r\n    });\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  background: #f6f6f6;\r\n  padding-top: 0.2rem;\r\n  height: 100%;\r\n}\r\n\r\n/deep/ .van-cell {\r\n  position: relative;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: flex;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  padding: 0 0;\r\n  overflow: hidden;\r\n  color: #323233;\r\n  font-size: 0.28rem;\r\n  line-height: 0.48rem;\r\n  background-color: #fff;\r\n}\r\n\r\n.center-content {\r\n  background: #ffffff;\r\n  padding-left: 0.32rem;\r\n  padding-right: 0.32rem;\r\n  .plan-item {\r\n    height: 0.96rem;\r\n    font-size: 0.28rem;\r\n    font-family: PingFangSC-Regular, PingFang SC;\r\n    font-weight: 400;\r\n\r\n    &-label {\r\n      width: fit-content;\r\n      line-height: 0.44rem;\r\n      color: rgba(0, 0, 0, 0.45);\r\n    }\r\n    &-vlaue {\r\n      width: fit-content;\r\n      line-height: 0.44rem;\r\n      color: rgba(0, 0, 0);\r\n    }\r\n  }\r\n}\r\n\r\n.detail-arrow {\r\n  width: 0.32rem;\r\n  height: 0.32rem;\r\n  margin-left: auto;\r\n  margin-right: 0;\r\n  background: url('../../assets/images/icon/icon-arrow-details.png') no-repeat;\r\n  background-size: 100%;\r\n}\r\n\r\n.single-line {\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\n.dash-line {\r\n  width: 100%;\r\n  height: 2px;\r\n  background: rgba(25, 31, 37, 0.08);\r\n  transform: scaleY(0.5);\r\n}\r\n.green-circle {\r\n  width: 0.12rem;\r\n  height: 0.12rem;\r\n  border-radius: 50%;\r\n  background: #52c41a;\r\n}\r\n\r\n.extra-fileList {\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  > li {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 33.3%;\r\n    justify-content: center;\r\n    p {\r\n      text-align: center;\r\n      height: 0.4rem;\r\n      line-height: 0.4rem;\r\n      width: 100%;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n  img {\r\n    width: 1.6rem;\r\n    height: 1.6rem;\r\n  }\r\n}\r\n\r\n.red-sign {\r\n  width: 0.24rem;\r\n  color: #f25643;\r\n}\r\n\r\n/deep/ .editor-text {\r\n  height: auto;\r\n  min-height: 4rem;\r\n  background: #fff;\r\n  z-index: 1000 !important;\r\n}\r\n/deep/ .van-picker {\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  z-index: 99999;\r\n}\r\n/deep/ .van-overlay {\r\n  z-index: 1005;\r\n}\r\n/deep/ .van-uploader__preview-delete-icon {\r\n  color: #fff;\r\n  line-height: 0.32rem;\r\n}\r\n/deep/ .w-e-text {\r\n  ul,\r\n  li,\r\n  ol {\r\n    list-style: revert;\r\n  }\r\n}\r\n/deep/ .w-e-panel-tab-title .w-e-item:last-of-type {\r\n  display: none;\r\n}\r\n[class*='van-hairline']::after {\r\n  border: none;\r\n}\r\n/deep/ .editor-text {\r\n  height: auto;\r\n  min-height: 5rem;\r\n  background: #fff;\r\n  z-index: 1000 !important;\r\n}\r\n.p-edit {\r\n  padding-bottom: 0.3rem;\r\n}\r\n/deep/ .editor {\r\n  position: relative;\r\n  z-index: 1000;\r\n  border-top: 1px solid #cdcdcd;\r\n}\r\n</style>\r\n"]}]}