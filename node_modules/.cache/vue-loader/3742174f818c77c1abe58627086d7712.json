{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BUserManage/user-permission.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/score-analysis-admin/components/business/BUserManage/user-permission.vue","mtime":1645178321163},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0VXNlck1hbmFnZUF1dGgsCiAgc3VibWl0VXNlck1hbmFnZUF1dGgKfSBmcm9tICcuLy4uLy4uLy4uL2FwaS91c2VyL2luZGV4JzsKaW1wb3J0IGFwaVBhcGVyTWFuYWdlIGZyb20gJy4vLi4vLi4vLi4vYXBpL3BhcGVyTWFuYWdlJzsKaW1wb3J0IGFwaUV4YW1NYW5hZ2UgZnJvbSAnLi8uLi8uLi8uLi9hcGkvZXhhbU1hbmFnZSc7CmltcG9ydCBzY2hvb2xJbmZvIGZyb20gJy4vY29tcG9uZW50cy9zY2hvb2wtaW5mbyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhZmZDb2RlOiAnJywKICAgICAgc3RhZmZOYW1lOiAnJywKICAgICAgZ3JvdXBPcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfljLrln58nLAogICAgICAgICAgb3B0aW9uczogW10KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5a2m5qChJywKICAgICAgICAgIG9wdGlvbnM6IFtdCiAgICAgICAgfQogICAgICBdLCAvL+WMuuWfn+OAgeWtpuagoeWQiOmbhgogICAgICBhcmVhTGlzdDogW10sIC8v5Yy65Z+f5YiX6KGoCiAgICAgIHNjaG9vbExpc3Q6IFtdLCAvL+WtpuagoeWIl+ihqAogICAgICBmb3JtRGF0YTogewogICAgICAgIHNjaG9vbEFycjogW10gLy/ku7vogYzlrabpg6gKICAgICAgfSwKICAgICAgc3ViamVjdExpc3Q6IFsKICAgICAgICAvLyB7CiAgICAgICAgLy8gICBpZDogJycsCiAgICAgICAgLy8gICBuYW1lOiAnJywKICAgICAgICAvLyAgIGdyYWRlQ2xhc3NMaXN0OiBbXQogICAgICAgIC8vIH0KICAgICAgXSAvL+enkeebruWIl+ihqAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHNjaG9vbEluZm8KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLnN0YWZmQ29kZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuc3RhZmZDb2RlOwogICAgLy8gdGhpcy5zdGFmZk5hbWUgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnN0YWZmTmFtZTsKICAgIHRoaXMuc3RhZmZDb2RlID0gdGhpcy4kcm91dGUucXVlcnkuc3RhZmZDb2RlOwogICAgdGhpcy5zdGFmZk5hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zdGFmZk5hbWU7CiAgICB0aGlzLmdldEFyZWFMaXN0KCk7IC8v6I635Y+W5Yy65Z+f5YiX6KGoCiAgfSwKICBtb3VudGVkKCkge30sCiAgd2F0Y2g6IHt9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluWMuuWfn+WIl+ihqAogICAgZ2V0QXJlYUxpc3QoKSB7CiAgICAgIGFwaUV4YW1NYW5hZ2UuZ2V0QXJlYUxpc3QoKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHRoaXMuYXJlYUxpc3QucHVzaCh7CiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIHNjaG9vbENvZGU6IGl0ZW0uYXJlYUNvZGUsCiAgICAgICAgICAgIHNjaG9vbE5hbWU6IGl0ZW0uYXJlYU5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0U2Nob29sKCk7IC8v6I635Y+W5a2m5qCh5YiX6KGoCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluWtpuagoeWIl+ihqAogICAgZ2V0U2Nob29sKCkgewogICAgICBhcGlFeGFtTWFuYWdlLmdldFNjaG9vbCgpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgdGhpcy5zY2hvb2xMaXN0ID0gZGF0YTsKICAgICAgICAvLyDlpITnkIbljLrln58v5a2m5qCh5pWw5o2uCiAgICAgICAgdGhpcy5ncm91cE9wdGlvbnNbMF0ub3B0aW9ucyA9IHRoaXMuYXJlYUxpc3Q7CiAgICAgICAgdGhpcy5ncm91cE9wdGlvbnNbMV0ub3B0aW9ucyA9IGRhdGE7CiAgICAgICAgdGhpcy5nZXRTdWJqZWN0TGlzdCgpOyAvL+iOt+WPluWtpuenkeWIl+ihqAogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bmlbDmja4g5Zue5pi+CiAgICBnZXRVc2VyTWFuYWdlQXV0aCgpIHsKICAgICAgZ2V0VXNlck1hbmFnZUF1dGgodGhpcy5zdGFmZkNvZGUpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgZGF0YS5zdGFmZkF1dGguc2Nob29sQXV0aExpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHRoaXMuZm9ybURhdGEuc2Nob29sQXJyLnB1c2goewogICAgICAgICAgICBzY2hvb2xDb2RlOiBpdGVtLnNjaG9vbENvZGUsCiAgICAgICAgICAgIHNjaG9vbE5hbWU6IGl0ZW0uc2Nob29sTmFtZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlU2Nob29sSXRlbURhdGEoaXRlbSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBkYXRhLnN0YWZmQXV0aC5hcmVhQXV0aExpc3QuZm9yRWFjaChhcmVhSXRlbSA9PiB7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnNjaG9vbEFyci5wdXNoKHsKICAgICAgICAgICAgYXJlYUNvZGU6IGFyZWFJdGVtLmFyZWFDb2RlLAogICAgICAgICAgICBhcmVhTmFtZTogYXJlYUl0ZW0uYXJlYU5hbWUsCiAgICAgICAgICAgIHNjaG9vbENvZGU6IGFyZWFJdGVtLmFyZWFDb2RlLAogICAgICAgICAgICBzY2hvb2xOYW1lOiBhcmVhSXRlbS5hcmVhTmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOavj+S4gOmhueWtpuagoeaVsOaNruWkhOeQhgogICAgaGFuZGxlU2Nob29sSXRlbURhdGEoaXRlbSkgewogICAgICBsZXQgcmVmU2Nob29sSW5mb05hbWUgPSB0aGlzLiRyZWZzWydzY2hvb2xJbmZvJyArIGl0ZW0uc2Nob29sQ29kZV1bMF07IC8v5a2Q57uE5Lu2cmVm55qE5ZCN56ewCiAgICAgIGxldCBfZGF0YVNjaG9vbEluZm8gPSByZWZTY2hvb2xJbmZvTmFtZS5fZGF0YS5zY2hvb2xJdGVtOyAvL+WtkOe7hOS7tmRhdGHkuK3nmoRzY2hvb2xpdGVt55qE5YC8CiAgICAgIGxldCBfc2VsZlJvbGVMaXN0ID0gX2RhdGFTY2hvb2xJbmZvLnNlbGZSb2xlTGlzdDsgLy/oh6rnu4Tlu7rlt7LpgInop5LoibIKCiAgICAgIGxldCBncmFkZUNsYXNzTGlzdDIgPSBbXTsKICAgICAgbGV0IGdyYWRlQ2xhc3NMaXN0NCA9IFtdOwogICAgICBpdGVtLnJvbGVMaXN0LmZvckVhY2gocm9sZUl0ZW0gPT4gewogICAgICAgIC8vIOa3u+WKoOinkuiJsgogICAgICAgIGxldCBoYXNOb3RSb2xlID0KICAgICAgICAgIF9zZWxmUm9sZUxpc3QuZmlsdGVyKGkgPT4gaSA9PT0gcm9sZUl0ZW0ucm9sZUlkKS5sZW5ndGggPT09IDA7CiAgICAgICAgaWYgKGhhc05vdFJvbGUpIHsKICAgICAgICAgIF9zZWxmUm9sZUxpc3QucHVzaChyb2xlSXRlbS5yb2xlSWQpOwogICAgICAgIH0KICAgICAgICAvL+inkuiJsjEt5Lu76K++5pWZ5biICiAgICAgICAgaWYgKHJvbGVJdGVtLnJvbGVJZCA9PT0gMSkgewogICAgICAgICAgbGV0IHN1YmplY3RJdGVtID0gdGhpcy5zdWJqZWN0TGlzdC5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSByb2xlSXRlbS5zdWJqZWN0SWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBoYXNTdWJqZWN0SXRlbUluZGV4ID0gX2RhdGFTY2hvb2xJbmZvLnJvbGVMaXN0MS5zdWJqZWN0TGlzdC5maW5kSW5kZXgoCiAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS5pZCA9PT0gcm9sZUl0ZW0uc3ViamVjdElkCiAgICAgICAgICApOwogICAgICAgICAgaWYgKGhhc1N1YmplY3RJdGVtSW5kZXggPCAwKSB7CiAgICAgICAgICAgIF9kYXRhU2Nob29sSW5mby5yb2xlTGlzdDEuc3ViamVjdExpc3QucHVzaCh7CiAgICAgICAgICAgICAgaWQ6IHJvbGVJdGVtLnN1YmplY3RJZCwKICAgICAgICAgICAgICBuYW1lOiBzdWJqZWN0SXRlbVswXS5uYW1lLAogICAgICAgICAgICAgIGdyYWRlQ2xhc3NMaXN0OiBbXQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2RhdGFTY2hvb2xJbmZvLnJvbGVMaXN0MS5zdWJqZWN0TGlzdFsKICAgICAgICAgICAgICBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QxLnN1YmplY3RMaXN0Lmxlbmd0aCAtIDEKICAgICAgICAgICAgXS5ncmFkZUNsYXNzTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBncmFkZUNvZGU6IHJvbGVJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgICBlbnJvbGxtZW50WWVhcjogcm9sZUl0ZW0uZW5yb2xsbWVudFllYXIsCiAgICAgICAgICAgICAgY2xhc3NDb2RlOiByb2xlSXRlbS5jbGFzc0NvZGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QxLnN1YmplY3RMaXN0WwogICAgICAgICAgICAgIGhhc1N1YmplY3RJdGVtSW5kZXgKICAgICAgICAgICAgXS5ncmFkZUNsYXNzTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBncmFkZUNvZGU6IHJvbGVJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgICBlbnJvbGxtZW50WWVhcjogcm9sZUl0ZW0uZW5yb2xsbWVudFllYXIsCiAgICAgICAgICAgICAgY2xhc3NDb2RlOiByb2xlSXRlbS5jbGFzc0NvZGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8v6KeS6ImyMi3nj63kuLvku7sKICAgICAgICBpZiAocm9sZUl0ZW0ucm9sZUlkID09PSAyKSB7CiAgICAgICAgICBncmFkZUNsYXNzTGlzdDIucHVzaCh7CiAgICAgICAgICAgIGNsYXNzQ29kZTogcm9sZUl0ZW0uY2xhc3NDb2RlLAogICAgICAgICAgICBncmFkZUNvZGU6IHJvbGVJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgZW5yb2xsbWVudFllYXI6IHJvbGVJdGVtLmVucm9sbG1lbnRZZWFyCiAgICAgICAgICB9KTsKICAgICAgICAgIF9kYXRhU2Nob29sSW5mby5yb2xlTGlzdDIuZ3JhZGVDbGFzc0xpc3QgPSBncmFkZUNsYXNzTGlzdDI7CiAgICAgICAgfQogICAgICAgIC8v6KeS6ImyMy3lrabnp5Hnu4Tplb8KICAgICAgICBpZiAocm9sZUl0ZW0ucm9sZUlkID09PSAzKSB7CiAgICAgICAgICBsZXQgc3ViamVjdEl0ZW0gPSB0aGlzLnN1YmplY3RMaXN0LmZpbHRlcihpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT0gcm9sZUl0ZW0uc3ViamVjdElkOwogICAgICAgICAgfSk7CiAgICAgICAgICBsZXQgaGFzU3ViamVjdEl0ZW1JbmRleCA9IF9kYXRhU2Nob29sSW5mby5yb2xlTGlzdDMuc3ViamVjdExpc3QuZmluZEluZGV4KAogICAgICAgICAgICBpdGVtID0+IGl0ZW0uaWQgPT09IHJvbGVJdGVtLnN1YmplY3RJZAogICAgICAgICAgKTsKICAgICAgICAgIGlmIChoYXNTdWJqZWN0SXRlbUluZGV4IDwgMCkgewogICAgICAgICAgICBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QzLnN1YmplY3RMaXN0LnB1c2goewogICAgICAgICAgICAgIGlkOiByb2xlSXRlbS5zdWJqZWN0SWQsCiAgICAgICAgICAgICAgbmFtZTogc3ViamVjdEl0ZW1bMF0ubmFtZSwKICAgICAgICAgICAgICBncmFkZUNsYXNzTGlzdDogW10KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9kYXRhU2Nob29sSW5mby5yb2xlTGlzdDMuc3ViamVjdExpc3RbCiAgICAgICAgICAgICAgX2RhdGFTY2hvb2xJbmZvLnJvbGVMaXN0My5zdWJqZWN0TGlzdC5sZW5ndGggLSAxCiAgICAgICAgICAgIF0uZ3JhZGVDbGFzc0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgZ3JhZGVDb2RlOiByb2xlSXRlbS5ncmFkZUNvZGUsCiAgICAgICAgICAgICAgZW5yb2xsbWVudFllYXI6IHJvbGVJdGVtLmVucm9sbG1lbnRZZWFyCiAgICAgICAgICAgICAgLy8gc2Nob29sWWVhckdyYWRlOiByb2xlSXRlbS5zY2hvb2xZZWFyR3JhZGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QzLnN1YmplY3RMaXN0WwogICAgICAgICAgICAgIGhhc1N1YmplY3RJdGVtSW5kZXgKICAgICAgICAgICAgXS5ncmFkZUNsYXNzTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBncmFkZUNvZGU6IHJvbGVJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgICBlbnJvbGxtZW50WWVhcjogcm9sZUl0ZW0uZW5yb2xsbWVudFllYXIKICAgICAgICAgICAgICAvLyBzY2hvb2xZZWFyR3JhZGU6IHJvbGVJdGVtLnNjaG9vbFllYXJHcmFkZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy/op5LoibI0LeW5tOe6p+e7hOmVvwogICAgICAgIGlmIChyb2xlSXRlbS5yb2xlSWQgPT09IDQpIHsKICAgICAgICAgIGdyYWRlQ2xhc3NMaXN0NC5wdXNoKHsKICAgICAgICAgICAgZ3JhZGVDb2RlOiByb2xlSXRlbS5ncmFkZUNvZGUsCiAgICAgICAgICAgIGVucm9sbG1lbnRZZWFyOiByb2xlSXRlbS5lbnJvbGxtZW50WWVhcgogICAgICAgICAgICAvLyBzY2hvb2xZZWFyR3JhZGU6IHJvbGVJdGVtLnNjaG9vbFllYXJHcmFkZQogICAgICAgICAgfSk7CiAgICAgICAgICBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3Q0LmdyYWRlQ2xhc3NMaXN0ID0gZ3JhZGVDbGFzc0xpc3Q0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5YmN5pWw5o2u5aSE55CGCiAgICBoYW5kbGVTdWJtaXREYXRhKCkgewogICAgICBpZiAodGhpcy5mb3JtRGF0YS5zY2hvb2xBcnIubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5zdWJtaXRVc2VyTWFuYWdlQXV0aChbXSwgW10pOwogICAgICAgIHJldHVybjsKICAgICAgICAvLyByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nku7vogYzlrabpg6gnKTsKICAgICAgfQogICAgICBsZXQgYXJyID0gW107CiAgICAgIGxldCBhcnJBcmVhID0gW107IC8v5Yy65Z+fCiAgICAgIGxldCB2YWxpZCA9IHRydWU7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mb3JtRGF0YS5zY2hvb2xBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgaXRlbSA9IHRoaXMuZm9ybURhdGEuc2Nob29sQXJyW2ldOwogICAgICAgIGlmIChpdGVtLmFyZWFDb2RlKSB7CiAgICAgICAgICBhcnJBcmVhLnB1c2goewogICAgICAgICAgICBhcmVhQ29kZTogaXRlbS5hcmVhQ29kZSwKICAgICAgICAgICAgYXJlYU5hbWU6IGl0ZW0uYXJlYU5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgIHNjaG9vbENvZGU6IGl0ZW0uc2Nob29sQ29kZSwKICAgICAgICAgICAgc2Nob29sTmFtZTogaXRlbS5zY2hvb2xOYW1lLAogICAgICAgICAgICByb2xlTGlzdDogW10KICAgICAgICAgIH0pOwogICAgICAgICAgbGV0IHZhbGlkU2Nob29sSXRlbSA9IHRoaXMuaGFuZGxlU3VibWl0U2Nob29sSXRlbURhdGEoaXRlbSwgYXJyKTsKICAgICAgICAgIGlmICghdmFsaWRTY2hvb2xJdGVtKSB7CiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodmFsaWQpIHsKICAgICAgICB0aGlzLnN1Ym1pdFVzZXJNYW5hZ2VBdXRoKGFyciwgYXJyQXJlYSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTdWJtaXRTY2hvb2xJdGVtRGF0YShpdGVtLCBhcnIpIHsKICAgICAgbGV0IGluZGV4ID0gYXJyLmZpbmRJbmRleChpID0+IGkuc2Nob29sQ29kZSA9PT0gaXRlbS5zY2hvb2xDb2RlKTsKICAgICAgbGV0IHJlZlNjaG9vbEluZm9OYW1lID0gdGhpcy4kcmVmc1snc2Nob29sSW5mbycgKyBpdGVtLnNjaG9vbENvZGVdWzBdOyAvL+iHque7hOS7tnJlZueahOWQjeensAogICAgICBsZXQgX2RhdGFTY2hvb2xJbmZvID0gcmVmU2Nob29sSW5mb05hbWUuX2RhdGEuc2Nob29sSXRlbTsgLy/lrZDnu4Tku7ZkYXRh5Lit55qEc2Nob29saXRlbeeahOWAvAogICAgICBsZXQgX3NlbGZSb2xlTGlzdCA9IF9kYXRhU2Nob29sSW5mby5zZWxmUm9sZUxpc3Q7IC8v6Ieq57uE5bu65bey6YCJ6KeS6ImyCiAgICAgIGlmIChfc2VsZlJvbGVMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup6KeS6ImyJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3NlbGZSb2xlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCByb2xlSWQgPSBfc2VsZlJvbGVMaXN0W2ldOwogICAgICAgIGlmIChyb2xlSWQgPT09IDEpIHsKICAgICAgICAgIGxldCByb2xlTGlzdDEgPSBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QxOyAvL+inkuiJsjEt5Lu76K++5pWZ5biICiAgICAgICAgICBpZiAocm9sZUxpc3QxLnN1YmplY3RMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS7u+ivvuaVmeW4iOeahOS7u+aVmeenkeebricpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJvbGVMaXN0MS5zdWJqZWN0TGlzdC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBsZXQgc3ViamVjdEl0ZW0gPSByb2xlTGlzdDEuc3ViamVjdExpc3Rbal07CiAgICAgICAgICAgIGlmIChzdWJqZWN0SXRlbS5ncmFkZUNsYXNzTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS7u+ivvuaVmeW4iOeahOS7u+aVmeePree6pycpOwogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdWJqZWN0SXRlbS5ncmFkZUNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzSXRlbSA9PiB7CiAgICAgICAgICAgICAgYXJyW2luZGV4XS5yb2xlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIHJvbGVJZDogcm9sZUxpc3QxLnJvbGVJZCwKICAgICAgICAgICAgICAgIHN1YmplY3RJZDogc3ViamVjdEl0ZW0uaWQsCiAgICAgICAgICAgICAgICBzdWJqZWN0TmFtZTogc3ViamVjdEl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgIGdyYWRlQ29kZTogY2xhc3NJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgICAgIGdyYWRlTmFtZTogY2xhc3NJdGVtLmdyYWRlTmFtZSwKICAgICAgICAgICAgICAgIGNsYXNzQ29kZTogY2xhc3NJdGVtLmNsYXNzQ29kZSwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NJdGVtLmNsYXNzTmFtZSwKICAgICAgICAgICAgICAgIGVucm9sbG1lbnRZZWFyOiBjbGFzc0l0ZW0uZW5yb2xsbWVudFllYXIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChyb2xlSWQgPT09IDIpIHsKICAgICAgICAgIGxldCByb2xlTGlzdDIgPSBfZGF0YVNjaG9vbEluZm8ucm9sZUxpc3QyOyAvL+inkuiJsjIt54+t5Li75Lu7CiAgICAgICAgICBpZiAocm9sZUxpc3QyLmdyYWRlQ2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeePreS4u+S7u+euoeeQhueahOihjOaUv+ePrScpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICByb2xlTGlzdDIuZ3JhZGVDbGFzc0xpc3QuZm9yRWFjaChjbGFzc0l0ZW0gPT4gewogICAgICAgICAgICBhcnJbaW5kZXhdLnJvbGVMaXN0LnB1c2goewogICAgICAgICAgICAgIHJvbGVJZDogcm9sZUxpc3QyLnJvbGVJZCwKICAgICAgICAgICAgICBncmFkZU5hbWU6IGNsYXNzSXRlbS5ncmFkZU5hbWUsCiAgICAgICAgICAgICAgZ3JhZGVDb2RlOiBjbGFzc0l0ZW0uZ3JhZGVDb2RlLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NJdGVtLmNsYXNzTmFtZSwKICAgICAgICAgICAgICBjbGFzc0NvZGU6IGNsYXNzSXRlbS5jbGFzc0NvZGUsCiAgICAgICAgICAgICAgZW5yb2xsbWVudFllYXI6IGNsYXNzSXRlbS5lbnJvbGxtZW50WWVhcgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAocm9sZUlkID09PSAzKSB7CiAgICAgICAgICBsZXQgcm9sZUxpc3QzID0gX2RhdGFTY2hvb2xJbmZvLnJvbGVMaXN0MzsgLy/op5LoibIzLeWtpuenkee7hOmVvwogICAgICAgICAgaWYgKHJvbGVMaXN0My5zdWJqZWN0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nlrabnp5Hnu4Tplb/nmoTku7vmlZnnp5Hnm64nKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb2xlTGlzdDMuc3ViamVjdExpc3QubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgbGV0IHN1YmplY3RJdGVtID0gcm9sZUxpc3QzLnN1YmplY3RMaXN0W2pdOwogICAgICAgICAgICBpZiAoc3ViamVjdEl0ZW0uZ3JhZGVDbGFzc0xpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nlrabnp5Hnu4Tplb/nmoTku7vogYzlubTnuqcnKTsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3ViamVjdEl0ZW0uZ3JhZGVDbGFzc0xpc3QuZm9yRWFjaChncmFkZUl0ZW0gPT4gewogICAgICAgICAgICAgIGFycltpbmRleF0ucm9sZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICByb2xlSWQ6IHJvbGVMaXN0My5yb2xlSWQsCiAgICAgICAgICAgICAgICBzdWJqZWN0TmFtZTogc3ViamVjdEl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgIHN1YmplY3RJZDogc3ViamVjdEl0ZW0uaWQsCiAgICAgICAgICAgICAgICBncmFkZU5hbWU6IGdyYWRlSXRlbS5ncmFkZU5hbWUsCiAgICAgICAgICAgICAgICBncmFkZUNvZGU6IGdyYWRlSXRlbS5ncmFkZUNvZGUsCiAgICAgICAgICAgICAgICBlbnJvbGxtZW50WWVhcjogZ3JhZGVJdGVtLmVucm9sbG1lbnRZZWFyCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocm9sZUlkID09PSA0KSB7CiAgICAgICAgICBsZXQgcm9sZUxpc3Q0ID0gX2RhdGFTY2hvb2xJbmZvLnJvbGVMaXN0NDsgLy/op5LoibI0LeW5tOe6p+e7hOmVvwogICAgICAgICAgaWYgKHJvbGVMaXN0NC5ncmFkZUNsYXNzTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nlrabnp5Hnu4Tplb/nmoTku7vogYzlubTnuqcnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcm9sZUxpc3Q0LmdyYWRlQ2xhc3NMaXN0LmZvckVhY2goZ3JhZGVJdGVtID0+IHsKICAgICAgICAgICAgYXJyW2luZGV4XS5yb2xlTGlzdC5wdXNoKHsKICAgICAgICAgICAgICByb2xlSWQ6IHJvbGVMaXN0NC5yb2xlSWQsCiAgICAgICAgICAgICAgZ3JhZGVOYW1lOiBncmFkZUl0ZW0uZ3JhZGVOYW1lLAogICAgICAgICAgICAgIGdyYWRlQ29kZTogZ3JhZGVJdGVtLmdyYWRlQ29kZSwKICAgICAgICAgICAgICBlbnJvbGxtZW50WWVhcjogZ3JhZGVJdGVtLmVucm9sbG1lbnRZZWFyCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChyb2xlSWQgPT09IDUpIHsKICAgICAgICAgIGFycltpbmRleF0ucm9sZUxpc3QucHVzaCh7IHJvbGVJZDogNSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g5o+Q5Lqk5pWw5o2uCiAgICBzdWJtaXRVc2VyTWFuYWdlQXV0aChhcnIsIGFyckFyZWEpIHsKICAgICAgc3VibWl0VXNlck1hbmFnZUF1dGgodGhpcy5zdGFmZkNvZGUsIHsKICAgICAgICBzY2hvb2xBdXRoTGlzdDogYXJyLAogICAgICAgIGFyZWFBdXRoTGlzdDogYXJyQXJlYQogICAgICB9KS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y+W5raICiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5iYWNrKC0xKTsKICAgIH0sCiAgICAvLyDojrflj5bnp5Hnm67liJfooagKICAgIGdldFN1YmplY3RMaXN0KCkgewogICAgICBhcGlQYXBlck1hbmFnZS5nZXRTdWJqZWN0TGlzdCgpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgY29uc3Qgb2JqID0gewogICAgICAgICAgICBpZDogaXRlbS5zdWJqZWN0SWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0uc3ViamVjdE5hbWUsCiAgICAgICAgICAgIGdyYWRlQ2xhc3NMaXN0OiBbXQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuc3ViamVjdExpc3QucHVzaChvYmopOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0VXNlck1hbmFnZUF1dGgoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["user-permission.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-permission.vue","sourceRoot":"src/pages/score-analysis-admin/components/business/BUserManage","sourcesContent":["<template>\n  <div class=\"userPermission\">\n    <el-form ref=\"form\" :model=\"formData\" label-width=\"84px\">\n      <div class=\"header-box no-choose\">\n        <div class=\"col-item\">\n          <span class=\"col-item-left\">姓名：</span>\n          <span>{{ staffName }}</span>\n        </div>\n        <div class=\"col-item\">\n          <span class=\"col-item-left\">工号：</span>\n          <span>{{ staffCode }}</span>\n        </div>\n        <el-form-item label=\"区域/学校：\">\n          <el-select\n            v-model=\"formData.schoolArr\"\n            multiple\n            filterable\n            value-key=\"schoolCode\"\n            placeholder=\"请选择区域/学校，可通过名称搜索\"\n          >\n            <el-option-group\n              v-for=\"group in groupOptions\"\n              :key=\"group.label\"\n              :label=\"group.label\"\n            >\n              <el-option\n                v-for=\"item in group.options\"\n                :key=\"item.schoolCode\"\n                :value=\"item\"\n                :label=\"item.schoolName\"\n              />\n            </el-option-group>\n          </el-select>\n        </el-form-item>\n      </div>\n      <div class=\"col-list\" v-if=\"formData.schoolArr.length > 0\">\n        <template v-for=\"item in formData.schoolArr\">\n          <school-info\n            v-if=\"item.areaCode == undefined || item.areaCode == ''\"\n            :key=\"item.schoolCode\"\n            :school=\"item\"\n            :ref=\"'schoolInfo' + item.schoolCode\"\n          ></school-info>\n        </template>\n      </div>\n\n      <!-- 按钮 -->\n      <el-form-item class=\"btn-box\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"handleSubmitData\"\n          >保存</el-button\n        >\n        <el-button size=\"mini\" @click=\"goBack\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport {\n  getUserManageAuth,\n  submitUserManageAuth\n} from './../../../api/user/index';\nimport apiPaperManage from './../../../api/paperManage';\nimport apiExamManage from './../../../api/examManage';\nimport schoolInfo from './components/school-info';\nexport default {\n  data() {\n    return {\n      staffCode: '',\n      staffName: '',\n      groupOptions: [\n        {\n          label: '区域',\n          options: []\n        },\n        {\n          label: '学校',\n          options: []\n        }\n      ], //区域、学校合集\n      areaList: [], //区域列表\n      schoolList: [], //学校列表\n      formData: {\n        schoolArr: [] //任职学部\n      },\n      subjectList: [\n        // {\n        //   id: '',\n        //   name: '',\n        //   gradeClassList: []\n        // }\n      ] //科目列表\n    };\n  },\n  components: {\n    schoolInfo\n  },\n  created() {\n    // this.staffCode = this.$store.state.user.staffCode;\n    // this.staffName = this.$store.state.user.staffName;\n    this.staffCode = this.$route.query.staffCode;\n    this.staffName = this.$route.query.staffName;\n    this.getAreaList(); //获取区域列表\n  },\n  mounted() {},\n  watch: {},\n  methods: {\n    // 获取区域列表\n    getAreaList() {\n      apiExamManage.getAreaList().then(({ data }) => {\n        data.forEach(item => {\n          this.areaList.push({\n            ...item,\n            schoolCode: item.areaCode,\n            schoolName: item.areaName\n          });\n        });\n        this.getSchool(); //获取学校列表\n      });\n    },\n    // 获取学校列表\n    getSchool() {\n      apiExamManage.getSchool().then(({ data }) => {\n        this.schoolList = data;\n        // 处理区域/学校数据\n        this.groupOptions[0].options = this.areaList;\n        this.groupOptions[1].options = data;\n        this.getSubjectList(); //获取学科列表\n      });\n    },\n    // 获取数据 回显\n    getUserManageAuth() {\n      getUserManageAuth(this.staffCode).then(({ data }) => {\n        data.staffAuth.schoolAuthList.forEach(item => {\n          this.formData.schoolArr.push({\n            schoolCode: item.schoolCode,\n            schoolName: item.schoolName\n          });\n          this.$nextTick(() => {\n            this.handleSchoolItemData(item);\n          });\n        });\n        data.staffAuth.areaAuthList.forEach(areaItem => {\n          this.formData.schoolArr.push({\n            areaCode: areaItem.areaCode,\n            areaName: areaItem.areaName,\n            schoolCode: areaItem.areaCode,\n            schoolName: areaItem.areaName\n          });\n        });\n      });\n    },\n    // 每一项学校数据处理\n    handleSchoolItemData(item) {\n      let refSchoolInfoName = this.$refs['schoolInfo' + item.schoolCode][0]; //子组件ref的名称\n      let _dataSchoolInfo = refSchoolInfoName._data.schoolItem; //子组件data中的schoolitem的值\n      let _selfRoleList = _dataSchoolInfo.selfRoleList; //自组建已选角色\n\n      let gradeClassList2 = [];\n      let gradeClassList4 = [];\n      item.roleList.forEach(roleItem => {\n        // 添加角色\n        let hasNotRole =\n          _selfRoleList.filter(i => i === roleItem.roleId).length === 0;\n        if (hasNotRole) {\n          _selfRoleList.push(roleItem.roleId);\n        }\n        //角色1-任课教师\n        if (roleItem.roleId === 1) {\n          let subjectItem = this.subjectList.filter(item => {\n            return item.id === roleItem.subjectId;\n          });\n          let hasSubjectItemIndex = _dataSchoolInfo.roleList1.subjectList.findIndex(\n            item => item.id === roleItem.subjectId\n          );\n          if (hasSubjectItemIndex < 0) {\n            _dataSchoolInfo.roleList1.subjectList.push({\n              id: roleItem.subjectId,\n              name: subjectItem[0].name,\n              gradeClassList: []\n            });\n            _dataSchoolInfo.roleList1.subjectList[\n              _dataSchoolInfo.roleList1.subjectList.length - 1\n            ].gradeClassList.push({\n              gradeCode: roleItem.gradeCode,\n              enrollmentYear: roleItem.enrollmentYear,\n              classCode: roleItem.classCode\n            });\n          } else {\n            _dataSchoolInfo.roleList1.subjectList[\n              hasSubjectItemIndex\n            ].gradeClassList.push({\n              gradeCode: roleItem.gradeCode,\n              enrollmentYear: roleItem.enrollmentYear,\n              classCode: roleItem.classCode\n            });\n          }\n        }\n        //角色2-班主任\n        if (roleItem.roleId === 2) {\n          gradeClassList2.push({\n            classCode: roleItem.classCode,\n            gradeCode: roleItem.gradeCode,\n            enrollmentYear: roleItem.enrollmentYear\n          });\n          _dataSchoolInfo.roleList2.gradeClassList = gradeClassList2;\n        }\n        //角色3-学科组长\n        if (roleItem.roleId === 3) {\n          let subjectItem = this.subjectList.filter(item => {\n            return item.id == roleItem.subjectId;\n          });\n          let hasSubjectItemIndex = _dataSchoolInfo.roleList3.subjectList.findIndex(\n            item => item.id === roleItem.subjectId\n          );\n          if (hasSubjectItemIndex < 0) {\n            _dataSchoolInfo.roleList3.subjectList.push({\n              id: roleItem.subjectId,\n              name: subjectItem[0].name,\n              gradeClassList: []\n            });\n            _dataSchoolInfo.roleList3.subjectList[\n              _dataSchoolInfo.roleList3.subjectList.length - 1\n            ].gradeClassList.push({\n              gradeCode: roleItem.gradeCode,\n              enrollmentYear: roleItem.enrollmentYear\n              // schoolYearGrade: roleItem.schoolYearGrade\n            });\n          } else {\n            _dataSchoolInfo.roleList3.subjectList[\n              hasSubjectItemIndex\n            ].gradeClassList.push({\n              gradeCode: roleItem.gradeCode,\n              enrollmentYear: roleItem.enrollmentYear\n              // schoolYearGrade: roleItem.schoolYearGrade\n            });\n          }\n        }\n        //角色4-年级组长\n        if (roleItem.roleId === 4) {\n          gradeClassList4.push({\n            gradeCode: roleItem.gradeCode,\n            enrollmentYear: roleItem.enrollmentYear\n            // schoolYearGrade: roleItem.schoolYearGrade\n          });\n          _dataSchoolInfo.roleList4.gradeClassList = gradeClassList4;\n        }\n      });\n    },\n    // 提交前数据处理\n    handleSubmitData() {\n      if (this.formData.schoolArr.length === 0) {\n        this.submitUserManageAuth([], []);\n        return;\n        // return this.$message.warning('请选择任职学部');\n      }\n      let arr = [];\n      let arrArea = []; //区域\n      let valid = true;\n      for (let i = 0; i < this.formData.schoolArr.length; i++) {\n        let item = this.formData.schoolArr[i];\n        if (item.areaCode) {\n          arrArea.push({\n            areaCode: item.areaCode,\n            areaName: item.areaName\n          });\n        } else {\n          arr.push({\n            schoolCode: item.schoolCode,\n            schoolName: item.schoolName,\n            roleList: []\n          });\n          let validSchoolItem = this.handleSubmitSchoolItemData(item, arr);\n          if (!validSchoolItem) {\n            valid = false;\n            break;\n          }\n        }\n      }\n      if (valid) {\n        this.submitUserManageAuth(arr, arrArea);\n      }\n    },\n    handleSubmitSchoolItemData(item, arr) {\n      let index = arr.findIndex(i => i.schoolCode === item.schoolCode);\n      let refSchoolInfoName = this.$refs['schoolInfo' + item.schoolCode][0]; //自组件ref的名称\n      let _dataSchoolInfo = refSchoolInfoName._data.schoolItem; //子组件data中的schoolitem的值\n      let _selfRoleList = _dataSchoolInfo.selfRoleList; //自组建已选角色\n      if (_selfRoleList.length === 0) {\n        this.$message.warning('请选择角色');\n        return false;\n      }\n      for (let i = 0; i < _selfRoleList.length; i++) {\n        let roleId = _selfRoleList[i];\n        if (roleId === 1) {\n          let roleList1 = _dataSchoolInfo.roleList1; //角色1-任课教师\n          if (roleList1.subjectList.length === 0) {\n            this.$message.warning('请选择任课教师的任教科目');\n            return false;\n          }\n          for (let j = 0; j < roleList1.subjectList.length; j++) {\n            let subjectItem = roleList1.subjectList[j];\n            if (subjectItem.gradeClassList.length === 0) {\n              this.$message.warning('请选择任课教师的任教班级');\n              return false;\n            }\n            subjectItem.gradeClassList.forEach(classItem => {\n              arr[index].roleList.push({\n                roleId: roleList1.roleId,\n                subjectId: subjectItem.id,\n                subjectName: subjectItem.name,\n                gradeCode: classItem.gradeCode,\n                gradeName: classItem.gradeName,\n                classCode: classItem.classCode,\n                className: classItem.className,\n                enrollmentYear: classItem.enrollmentYear\n              });\n            });\n          }\n        }\n        if (roleId === 2) {\n          let roleList2 = _dataSchoolInfo.roleList2; //角色2-班主任\n          if (roleList2.gradeClassList.length === 0) {\n            this.$message.warning('请选择班主任管理的行政班');\n            return false;\n          }\n          roleList2.gradeClassList.forEach(classItem => {\n            arr[index].roleList.push({\n              roleId: roleList2.roleId,\n              gradeName: classItem.gradeName,\n              gradeCode: classItem.gradeCode,\n              className: classItem.className,\n              classCode: classItem.classCode,\n              enrollmentYear: classItem.enrollmentYear\n            });\n          });\n        }\n        if (roleId === 3) {\n          let roleList3 = _dataSchoolInfo.roleList3; //角色3-学科组长\n          if (roleList3.subjectList.length === 0) {\n            this.$message.warning('请选择学科组长的任教科目');\n            return false;\n          }\n          for (let j = 0; j < roleList3.subjectList.length; j++) {\n            let subjectItem = roleList3.subjectList[j];\n            if (subjectItem.gradeClassList.length === 0) {\n              this.$message.warning('请选择学科组长的任职年级');\n              return false;\n            }\n            subjectItem.gradeClassList.forEach(gradeItem => {\n              arr[index].roleList.push({\n                roleId: roleList3.roleId,\n                subjectName: subjectItem.name,\n                subjectId: subjectItem.id,\n                gradeName: gradeItem.gradeName,\n                gradeCode: gradeItem.gradeCode,\n                enrollmentYear: gradeItem.enrollmentYear\n              });\n            });\n          }\n        }\n        if (roleId === 4) {\n          let roleList4 = _dataSchoolInfo.roleList4; //角色4-年级组长\n          if (roleList4.gradeClassList.length === 0) {\n            this.$message.warning('请选择学科组长的任职年级');\n            return false;\n          }\n          roleList4.gradeClassList.forEach(gradeItem => {\n            arr[index].roleList.push({\n              roleId: roleList4.roleId,\n              gradeName: gradeItem.gradeName,\n              gradeCode: gradeItem.gradeCode,\n              enrollmentYear: gradeItem.enrollmentYear\n            });\n          });\n        }\n        if (roleId === 5) {\n          arr[index].roleList.push({ roleId: 5 });\n        }\n      }\n      return true;\n    },\n    // 提交数据\n    submitUserManageAuth(arr, arrArea) {\n      submitUserManageAuth(this.staffCode, {\n        schoolAuthList: arr,\n        areaAuthList: arrArea\n      }).then(({ data }) => {\n        this.$message.success('保存成功');\n        this.$router.go(-1);\n      });\n    },\n    // 取消\n    goBack() {\n      this.$router.back(-1);\n    },\n    // 获取科目列表\n    getSubjectList() {\n      apiPaperManage.getSubjectList().then(({ data }) => {\n        data.forEach(item => {\n          const obj = {\n            id: item.subjectId,\n            name: item.subjectName,\n            gradeClassList: []\n          };\n          this.subjectList.push(obj);\n        });\n        this.getUserManageAuth();\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\n::-webkit-input-placeholder {\n  font-size: 14px;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.25);\n}\n.userPermission {\n  font-size: 14px;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.65);\n  line-height: 20px;\n  .header-box {\n    border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n    padding-bottom: 20px;\n    &.no-choose {\n      border-bottom: 0;\n      padding-bottom: 0px;\n    }\n  }\n  .col-item {\n    margin-top: 20px;\n    &-left {\n      width: 92px;\n      display: inline-block;\n      text-align: right;\n      padding-right: 4px;\n    }\n  }\n  .btn-box.el-form-item {\n    margin-top: 30px;\n    /deep/ .el-form-item__content {\n      margin-left: 0 !important;\n    }\n  }\n\n  /deep/ .el-form-item {\n    margin-bottom: 0;\n    margin-top: 20px;\n  }\n  /deep/ .el-form-item__label {\n    color: rgba(0, 0, 0, 0.65);\n    padding-right: 4px;\n    width: 96px !important;\n  }\n  /deep/ .el-form-item__content {\n    margin-left: 96px !important;\n  }\n  /deep/ .el-select .el-input__inner {\n    width: 300px;\n    height: 32px;\n    background: #ffffff;\n    border-radius: 2px;\n    border: 1px solid #eaedf3;\n  }\n  /deep/ .el-tag {\n    height: 22px;\n    background: rgba(0, 0, 0, 0.04);\n    border-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.65);\n    line-height: 20px;\n    .el-tag__close.el-icon-close {\n      background: none !important;\n      color: rgba(0, 0, 0, 0.45);\n      font-size: 14px;\n    }\n  }\n}\n</style>\n"]}]}