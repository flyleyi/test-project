{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/DeparturePlace.vue?vue&type=style&index=0&id=4823cdfa&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/DeparturePlace.vue","mtime":1645176309886},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKL2RlZXAvIC52YW4tdGFiLS1hY3RpdmUgewogIGNvbG9yOiAjMzM4OGZmOwp9Cg=="},{"version":3,"sources":["DeparturePlace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA","file":"DeparturePlace.vue","sourceRoot":"src/pages/visitor-h5/views/my-visitor/components","sourcesContent":["<template>\n  <div>\n    <van-index-bar :index-list=\"indexList\">\n      <div v-for=\"(item, index) in provinceList\" :key=\"index\">\n        <van-index-anchor :index=\"index\" />\n        <ul>\n          <li v-for=\"el in item\" :key=\"el.id\">\n            <van-cell :title=\"el.name\" @click=\"selectProvince(el)\" />\n          </li>\n        </ul>\n      </div>\n    </van-index-bar>\n    <van-popup v-model=\"show\" round position=\"bottom\">\n      <van-cascader\n        v-model=\"cascaderValue\"\n        title=\"请选择所在地区\"\n        :options=\"options\"\n        :field-names=\"fieldNames\"\n        @close=\"show = false\"\n        @finish=\"onFinish\"\n      />\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport { getProvinceList } from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  data() {\n    return {\n      activeName: 'china',\n      provinceList: [],\n      options: [],\n      show: false,\n      cascaderValue: '',\n      indexList: [\n        'A',\n        'B',\n        'F',\n        'G',\n        'H',\n        'J',\n        'L',\n        'N',\n        'Q',\n        'S',\n        'T',\n        'X',\n        'Y',\n        'Z'\n      ],\n      fieldNames: {\n        text: 'name',\n        value: 'code',\n        children: 'childList'\n      },\n      fieldValue: '',\n      fieldCode: '',\n      selectedProvince: {}\n    };\n  },\n  methods: {\n    toListDF(list) {\n      let newList = list.map(item => {\n        if (item.childList.length !== 0) {\n          this.toListDF(item.childList);\n        } else {\n          delete item.childList;\n        }\n        return item;\n      });\n      return newList;\n    },\n    selectProvince(item) {\n      this.show = true;\n      this.selectedProvince = item;\n      this.options = this.toListDF(item.childList);\n    },\n    onFinish({ selectedOptions }) {\n      this.show = false;\n      let fieldValue = selectedOptions.map(option => option.name).join('-');\n      if (selectedOptions.length > 1) {\n        this.fieldCode = selectedOptions[1].code;\n      } else {\n        this.fieldCode = selectedOptions[0].code;\n      }\n\n      this.fieldValue = this.selectedProvince.name + '-' + fieldValue;\n      eventBus.$emit(\n        'selectDeparturePlace',\n        this.fieldValue,\n        this.fieldCode,\n        this.$route.query.id\n      );\n      eventBus.$emit('setcurType', this.$route.query.type);\n      this.$router.go(-1);\n    },\n    getProvinceList() {\n      getProvinceList().then(res => {\n        this.provinceList = res.data;\n      });\n    }\n  },\n  created() {\n    this.getProvinceList();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-tab--active {\n  color: #3388ff;\n}\n</style>\n"]}]}