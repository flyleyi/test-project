{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/searchResult/index.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/views/searchResult/index.vue","mtime":1645176309829},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWNvbGxhcHNlLWl0ZW1fX2hlYWRlci5pcy1hY3RpdmUgewogIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50OwogIGJhY2tncm91bmQtY29sb3I6ICNkY2RmZTYyOTsKfQouZWwtY29sbGFwc2UtaXRlbV9fd3JhcCB7CiAgd2lsbC1jaGFuZ2U6IGhlaWdodDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjA7Cn0KLmVsLWNvbGxhcHNlLWl0ZW1fX2hlYWRlciB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKICBib3JkZXItcmFkaXVzOiA1cHg7Cn0KLyrpmpDol4/nuqfogZTnmoRyYWRpbyovCi5lbC1jYXNjYWRlci1wYW5lbCAuZWwtcmFkaW9fX2lucHV0IHsKICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0KLmVsLWNhc2NhZGVyLXBhbmVsIC5lbC1pbnB1dC1ub2RlX19wb3N0Zml4IHsKICB0b3A6IDEwcHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAo2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/share-platform-front/views/searchResult","sourcesContent":["<template>\n  <div class=\"loginRole\">\n    <div class=\"head-background\">\n      <div class=\"log-content\">\n        <a href=\"#\"><img :src=\"imgSrcLogo\" alt=\"\" @click=\"goPage('1')\" /> </a>\n      </div>\n      <div class=\"search-item\">\n        <div class=\"search\">\n          <el-autocomplete\n            class=\"inline-input\"\n            ref=\"elautocomplete\"\n            v-model.trim=\"inputSearchKey\"\n            placeholder=\"请输入您需要的资源\"\n            :fetch-suggestions=\"querySearchAsync\"\n            :trigger-on-focus=\"false\"\n            @keyup.enter.native=\"funSearch()\"\n            @select=\"handleSelect\"\n            @input=\"imageSelect\"\n            @focus=\"onFocus\"\n            @blur=\"onBlur()\"\n          >\n            <template slot-scope=\"{ item }\">\n              <el-tooltip\n                effect=\"dark\"\n                :content=\"item.resourcesName\"\n                placement=\"top\"\n                popper-class=\"tooltip\"\n              >\n                <span v-html=\"item.resourcesNameHtml\"></span>\n              </el-tooltip>\n            </template>\n          </el-autocomplete>\n          <el-button\n            style=\"border-radius: 0 5px 5px 0;height: 40px;\"\n            type=\"primary\"\n            @click=\"funSearch()\"\n            >{{ inputSearchKey === '' ? '查看全部' : '搜索' }}</el-button\n          >\n        </div>\n      </div>\n      <div>\n        <div class=\"nav\">\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcHome\"\n              alt=\"返回首页\"\n              title=\"返回首页\"\n              @click=\"goPage('1')\"\n            />\n          </a>\n          <a href=\"#\">\n            <img\n              :src=\"imgSrcOne\"\n              alt=\"我的需求\"\n              title=\"我的需求\"\n              @click=\"goPage('2')\"\n            />\n          </a>\n          <el-badge :is-dot=\"ismessageDot\">\n            <a href=\"#\">\n              <img\n                :src=\"imgSrcTwo\"\n                alt=\"我的消息\"\n                title=\"我的消息\"\n                @click=\"goPage('3')\"\n              />\n            </a>\n          </el-badge>\n          <el-badge :is-dot=\"isDot\">\n            <a href=\"#\">\n              <img\n                :src=\"imgSrcThree\"\n                alt=\"个人中心\"\n                title=\"个人中心\"\n                @click=\"goPage('4')\"\n              />\n            </a>\n          </el-badge>\n          <el-button type=\"primary\" size=\"mini\" @click.native=\"logOut\"\n            >退出</el-button\n          >\n        </div>\n      </div>\n    </div>\n    <div class=\"resultBg\">\n      <div class=\"loading-content\">\n        <!-- 有搜索结果 -->\n        <div class=\"true-result\">\n          <div class=\"true-result-left\">\n            <div class=\"left-top\">搜索结果筛选</div>\n            <div\n              :class=\"['left-item', { active: currentId === '' }]\"\n              @click=\"changeTab('全部')\"\n            >\n              全部内容\n            </div>\n            <div\n              :class=\"['left-item', { active: currentId === item.id }]\"\n              v-for=\"(item, index) in firstLableListRes\"\n              :key=\"index\"\n              @click=\"changeTab(item)\"\n            >\n              {{ item.resourcesName }}({{\n                item.count >= 100 ? '99+' : item.count ? item.count : 0\n              }})\n            </div>\n          </div>\n          <div class=\"true-result-center\" v-loading=\"loading\">\n            <!-- 无搜索结果 -->\n            <el-container v-if=\"resultTip\">\n              <el-header\n                ><div class=\"tips\">\n                  <img :src=\"noResultImg\" alt=\"\" />\n                  <p class=\"tips-font\">暂无相关资源</p>\n                </div></el-header\n              >\n            </el-container>\n            <div class=\"center-top\" v-if=\"!resultTip\">\n              为您找到相关结果{{ resultTotal }}条\n            </div>\n            <el-card class=\"filter-card\" v-if=\"!resultTip && filterList.length\">\n              <div class=\"center-filter\">\n                <div\n                  :class=\"[\n                    'center-filter-list',\n                    { 'center-filter-list-show': showFilter }\n                  ]\"\n                >\n                  <div\n                    :class=\"['filter-list-item', { active: filterId === '' }]\"\n                    @click=\"changeFilter('全部')\"\n                  >\n                    全部\n                  </div>\n                  <div\n                    :class=\"[\n                      'filter-list-item',\n                      { active: filterId === item.id }\n                    ]\"\n                    v-for=\"(item, index) in filterList\"\n                    :key=\"index\"\n                    @click=\"changeFilter(item)\"\n                  >\n                    {{ item.resourcesName }}\n                  </div>\n                </div>\n                <div class=\"btn-more\" @click=\"showFilter = !showFilter\">\n                  {{ !showFilter ? '展开' : '收起' }}\n                  <i class=\"el-icon-arrow-down\"></i>\n                </div>\n              </div>\n            </el-card>\n            <el-card\n              class=\"box-card\"\n              v-show=\"!resultTip\"\n              v-for=\"item in resultDataList\"\n              :key=\"item.id\"\n            >\n              <div class=\"box-con\">\n                <div class=\"left\">\n                  <h3 v-html=\"item.firstMesColor\"></h3>\n                  <p>{{ item.secondMes }}</p>\n                  <span\n                    v-if=\"item.list != '' ? item.list[0].businessName : null\"\n                    ><span\n                      >企业名称:{{\n                        item.list != '' ? item.list[0].businessName : null\n                      }}</span\n                    >\n                    <span>|</span></span\n                  >\n                  <span\n                    >对接人:{{\n                      item.list != '' ? item.list[0].staffName : null\n                    }}</span\n                  >\n                  <span>|</span>\n                  <span\n                    >联系方式:{{\n                      item.list != '' ? item.list[0].mobile : null\n                    }}</span\n                  >\n                  <span>|</span>\n                  <span\n                    >对方积分:{{\n                      item.list != '' ? item.list[0].score : null\n                    }}</span\n                  >\n                </div>\n                <div class=\"right\">\n                  <p>\n                    本条资源被查看{{\n                      item.list != '' ? item.list[0].seeCount : null\n                    }}次，被需要{{\n                      item.list != '' ? item.list[0].needCount : null\n                    }}次\n                  </p>\n                  <el-button\n                    type=\"primary\"\n                    plain\n                    class=\"btn\"\n                    @click=\"postInitDemand(item)\"\n                    size=\"small\"\n                    >发起需求</el-button\n                  >\n                </div>\n              </div>\n            </el-card>\n            <div class=\"pagination\" v-if=\"resultDataList.length\">\n              <el-pagination\n                background\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentPage\"\n                :page-sizes=\"[5, 10, 20, 30]\"\n                layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"resultTotal\"\n              >\n              </el-pagination>\n            </div>\n          </div>\n          <el-card class=\"true-result-right\">\n            <div class=\"result-right-title\">\n              平台资源库 <span>（点击可搜索目标资源）</span>\n            </div>\n            <div\n              class=\"result-right-content\"\n              v-for=\"(item, index) in firstLableList\"\n              :key=\"index\"\n            >\n              <div class=\"result-right-content-item\">\n                <p @click=\"onClickRight(item.resourcesName)\">\n                  {{ item.resourcesName }}\n                </p>\n                <div class=\"list\">\n                  <div\n                    class=\"list-item\"\n                    v-for=\"(val, key) in item.child\"\n                    :key=\"key\"\n                    @click=\"onClickRight(val.resourcesName)\"\n                  >\n                    {{ val.resourcesName }}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  Input,\n  Pagination,\n  Collapse,\n  CollapseItem,\n  Container,\n  Header,\n  Loading,\n  Badge,\n  Autocomplete,\n  CascaderPanel\n} from 'element-ui';\nimport axios from 'axios';\nimport {\n  gethotSearch,\n  getsourceInfo,\n  getscoreList,\n  getfirstLableList,\n  getsecondLableList,\n  postInitDemand,\n  getkeySelectList,\n  getSearchResultV\n} from '@/pages/share-platform-front/api/search';\nimport {\n  getLabelAdjusted,\n  getReadMessage\n} from '@/pages/share-platform-front/api/user';\nexport default {\n  name: 'Result',\n  components: {\n    [Input.name]: Input,\n    [Pagination.name]: Pagination,\n    [Container.name]: Container,\n    [Header.name]: Header,\n    [Collapse.name]: Collapse,\n    [CollapseItem.name]: CollapseItem,\n    [Autocomplete.name]: Autocomplete,\n    [CascaderPanel.name]: CascaderPanel,\n    [Badge.name]: Badge\n  },\n  data() {\n    return {\n      imgSrcHome: require('../../assets/images/home.webp'),\n      imgSrcOne: require('../../assets/images/need.webp'),\n      imgSrcTwo: require('../../assets/images/message.webp'),\n      imgSrcThree: require('../../assets/images/personal.webp'),\n      imgSrcLogo: require('../../assets/images/newlogo.png'),\n      noResultImg: require('../../assets/images/noResult.webp'),\n      isDot: false,\n      ismessageDot: false,\n      //搜索关键字\n      inputSearchKey: '',\n      //搜索结果页面显示控制：true--无结果、false-有结果\n      resultTip: false,\n      accountType: '',\n      activeFlag: '',\n      flag: '0',\n      firstLableList: [], //一级标签\n      props: {\n        value: 'id', //设置每个menu的ID值\n        label: 'resourcesName', //设置每个menu的name值\n        children: 'child', //子级\n        expandTrigger: 'hover',\n        checkStrictly: true //遵守父子节点不互相关联--可以选择级联面板的任何一级\n      },\n      selectOption: [], //选中的节点值，用于回显\n      //secondLableList: [], //二级标签\n      //结果数据\n      resultDataList: [],\n      //热门搜索\n      hotSearch: [],\n      //资源列表\n      sourceInfo: [],\n      //积分排行列表\n      scoreList: [],\n      currentId: '',\n      firstLableListRes: [],\n      loadList: [],\n      restaurants: [],\n      isShow: false,\n      filterList: [],\n      filterId: '',\n      showFilter: false,\n      currentTab: null,\n      currentPage: 1,\n      limit: 10,\n      offset: 0,\n      resultTotal: 0,\n      boxName: '',\n      loading: false\n    };\n  },\n  created() {\n    this.accountType = window.sessionStorage.getItem('accountType');\n    //初始化调用搜索接口、获取所有一级标签等\n    this.getSearchResult();\n    this.getAllList();\n    this.getfirstLable();\n    this.getSignTip();\n  },\n  mounted() {\n    this.restaurants = this.loadAll();\n    setInterval(function() {\n      document.querySelectorAll('.el-cascader-node__label').forEach(el => {\n        el.onclick = function() {\n          if (this.previousElementSibling) this.previousElementSibling.click();\n        };\n      });\n    }, 1000);\n  },\n  watch: {\n    loadList: {\n      handler(newVal, oldVal) {\n        this.restaurants = this.loadList;\n      },\n      deep: true\n    },\n    inputSearchKey: function(newVal, oldVal) {\n      this.restaurants = this.loadList;\n    },\n    isShow: function() {\n      //悬浮框关闭时，重置选中节点\n      if (!this.isShow) {\n        this.selectOption = [];\n      } else {\n        //悬浮框打开时，默认选中第一行\n        // if (this.inputSearchKey == '') {\n        //   this.selectOption = [\n        //     this.firstLableList[0].id,\n        //     this.firstLableList[0].child[0].id\n        //   ];\n        // }\n      }\n    }\n  },\n  methods: {\n    funSearch() {\n      this.filterName = '';\n      this.boxName = '';\n      this.limit = 10;\n      this.offset = 0;\n      this.currentPage = 1;\n      this.getSearchResult();\n    },\n    handleCurrentChange(page) {\n      this.offset = (page - 1) * this.limit;\n      this.getsecondResult(this.currentTab);\n    },\n    handleSizeChange(pagesize) {\n      this.limit = pagesize;\n      this.currentPage = 1;\n      this.getsecondResult(this.currentTab);\n    },\n    onClickRight(name) {\n      this.limit = 10;\n      this.offset = 0;\n      this.currentPage = 1;\n      this.filterId = '';\n      this.inputSearchKey = '';\n\n      this.filterList = [];\n      this.boxName = '';\n      this.currentId = '';\n      this.currentTab = {};\n      this.inputSearchKey = name;\n      const queryParams = {\n        resourceName: this.inputSearchKey,\n        accountType: this.accountType,\n        filterName: '',\n        boxName: this.boxName,\n        limit: this.limit,\n        offset: this.offset\n      };\n\n      this.getsecondResult();\n    },\n    changeFilter(item) {\n      this.limit = 10;\n      this.offset = 0;\n      this.currentPage = 1;\n      if (item === '全部') {\n        this.filterId = '';\n        this.boxName = '';\n      } else {\n        this.filterId = item.id;\n        this.boxName = item.resourcesName;\n      }\n      this.getsecondResult(this.currentTab);\n    },\n    changeTab(item) {\n      this.boxName = '';\n      this.filterId = '';\n      this.limit = 10;\n      this.offset = 0;\n      this.currentPage = 1;\n      if (item === '全部') {\n        this.filterList = [];\n        this.currentId = '';\n        this.currentTab = null;\n\n        this.getsecondResult();\n      } else {\n        this.filterList = item.child;\n        this.currentId = item.id;\n        this.currentTab = item;\n        this.getsecondResult(item);\n      }\n    },\n    /*输入框失去焦点触发事件,加异步操作,避免事件冒泡的影响 */\n    onBlur() {\n      setTimeout(() => {\n        this.isShow = false;\n      }, 300);\n    },\n    onFocus() {\n      if (this.inputSearchKey != '' && this.inputSearchKey != null)\n        this.isShow = false;\n      else this.isShow = true;\n    },\n\n    //dropdown一级标签点击事件\n    getfirstTipShearch(value) {\n      if (value.count == 0) {\n        this.resultDataList = [];\n      } else {\n        const queryParams = {\n          resourceName: this.inputSearchKey,\n          accountType: this.accountType,\n          filterName: value.resourcesName,\n          boxName: '',\n          limit: this.limit,\n          offset: this.offset\n        };\n        this.loading = true;\n\n        getSearchResultV(queryParams)\n          .then(res => {\n            if (\n              res.data == null ||\n              res.data == '' ||\n              res.data.key.length == 0\n            ) {\n              this.resultTip = true;\n              this.resultDataList = [];\n            } else {\n              this.resultDataList = res.data.key.records;\n              this.currentPage = res.data.key.current;\n              let reg = new RegExp(this.inputSearchKey, 'g');\n              for (let item of this.resultDataList) {\n                if (item.firstMes.includes(this.inputSearchKey)) {\n                  item.firstMesColor = item.firstMes.replace(\n                    reg,\n                    `<span style=\"color:#D50201\">${this.inputSearchKey}</span>`\n                  );\n                }\n              }\n              this.resultTotal = res.data.key.total;\n\n              this.firstLableListRes = res.data.value;\n              this.resultTip = false;\n            }\n            this.loading = false;\n          })\n          .catch(res => {\n            this.resultTip = true;\n            this.resultDataList = [];\n            this.$message({\n              type: 'error',\n              message: res.message\n            });\n          });\n      }\n    },\n    //退出登录\n    async logOut() {\n      window.localStorage.clear();\n      window.sessionStorage.clear();\n      await this.$store.dispatch('user/logout');\n      this.$router.push(`/login?redirect=${this.$route.fullPath}`);\n    },\n    //获取个人中心是否有待办事项\n    getSignTip() {\n      getLabelAdjusted(this.accountType)\n        .then(res => {\n          if (res.data == '0') {\n            this.isDot = false;\n          } else {\n            this.isDot = true;\n          }\n        })\n        .catch(res => {\n          this.isDot = false;\n        });\n      getReadMessage(this.accountType)\n        .then(res => {\n          if (res.data.length) {\n            this.ismessageDot = true;\n          } else {\n            this.ismessageDot = false;\n          }\n        })\n        .catch(res => {\n          this.ismessageDot = false;\n        });\n    },\n    //点击图标跳转页面\n    goPage(key) {\n      switch (key) {\n        case '1':\n          this.$router.push('/Search');\n          break;\n        case '2':\n          this.$router.push('/Demand');\n          break;\n        case '3':\n          this.$router.push('/Message');\n          break;\n        case '4':\n          this.$router.push('/Personal');\n          break;\n      }\n    },\n    //获取资源概括等列表\n    getAllList() {\n      axios.all([gethotSearch, getsourceInfo, getscoreList]).then(res => {\n        gethotSearch().then(res => {\n          if (res.data) {\n            this.hotSearch = res.data.slice(0, 10);\n          } else {\n            this.hotSearch = [];\n          }\n        });\n        getsourceInfo().then(res => {\n          if (res.data) {\n            this.sourceInfo = res.data;\n          } else {\n            this.sourceInfo = [];\n          }\n        });\n        getscoreList().then(res => {\n          if (res.data) {\n            this.scoreList = res.data;\n          } else {\n            this.scoreList = [];\n          }\n        });\n      });\n    },\n    //获取所有一类标签和二类标签并将二类拼接进一类中\n    getfirstLable() {\n      getfirstLableList()\n        .then(res => {\n          this.firstLableList = res.data;\n\n          for (let index in this.firstLableList) {\n            getsecondLableList(this.firstLableList[index].id).then(res => {\n              // this.firstLableList[index].child = res.data;\n              this.$set(this.firstLableList[index], 'child', res.data);\n            });\n          }\n        })\n        .catch(res => {\n          this.firstLableListRes = [];\n        });\n      getfirstLableList()\n        .then(res => {\n          this.firstLableListRes = res.data;\n          for (let item of this.firstLableListRes) {\n            getsecondLableList(item.id).then(res => {\n              item.child = res.data;\n            });\n          }\n        })\n        .catch(res => {\n          this.firstLableListRes = [];\n        });\n    },\n    //关键字联想搜索\n    querySearchAsync(queryString, cb) {\n      var results = this.restaurants;\n      if (\n        !/[`~!@#$%^&*()_\\-+=<>?:\"{}|,.;'\\\\[\\]·~！@#￥%……&*（）——\\-+={}|《》？：“”【】、；‘'，。、]/im.test(\n          this.inputSearchKey\n        )\n      ) {\n        let reg = new RegExp(this.inputSearchKey, 'i', 'g');\n        for (let item of results) {\n          if (\n            item.resourcesName.includes(this.inputSearchKey) ||\n            item.resourcesName.includes(this.inputSearchKey.toLowerCase()) ||\n            item.resourcesName.includes(this.inputSearchKey.toUpperCase())\n          ) {\n            let str = item.resourcesName.match(reg);\n            item.resourcesNameHtml = item.resourcesName.replace(\n              reg,\n              `<span style=\"color:#D50201\">${str}</span>`\n            );\n          }\n        }\n      }\n\n      cb(results);\n    },\n    imageSelect() {\n      if (this.inputSearchKey == '') {\n        this.isShow = true;\n      } else {\n        this.isShow = false;\n        getkeySelectList(encodeURIComponent(this.inputSearchKey))\n          .then(res => {\n            this.loadList = res.data;\n          })\n          .catch(res => {\n            this.loadList = [];\n          });\n      }\n    },\n    loadAll() {\n      return this.loadList;\n    },\n    //select事件\n    handleSelect(item) {\n      this.inputSearchKey = item.resourcesName;\n      this.getSearchResult();\n    },\n    //点击二类标签获取搜索结果\n    getsecondResult(command) {\n      let queryParams;\n      if (command) {\n        if (command.count && command.count != '0') {\n          queryParams = {\n            resourceName: this.inputSearchKey,\n            accountType: this.accountType,\n            filterName: command.resourcesName,\n            boxName: this.boxName\n          };\n        } else {\n          this.resultTip = true;\n          return;\n        }\n      } else {\n        queryParams = {\n          resourceName: this.inputSearchKey,\n          accountType: this.accountType,\n          filterName: '',\n          boxName: this.boxName\n        };\n      }\n      this.loading = true;\n\n      getSearchResultV({\n        ...queryParams,\n        limit: this.limit,\n        offset: this.offset\n      })\n        .then(res => {\n          if (\n            res.data == null ||\n            res.data == '' ||\n            res.data.key.records.length == 0\n          ) {\n            this.resultTip = true;\n            this.resultDataList = [];\n          } else {\n            this.resultTip = false;\n            this.resultDataList = res.data.key.records;\n\n            this.currentPage = res.data.key.current;\n            let reg = new RegExp(this.inputSearchKey, 'g');\n            for (let item of this.resultDataList) {\n              if (item.firstMes.includes(this.inputSearchKey)) {\n                item.firstMesColor = item.firstMes.replace(\n                  reg,\n                  `<span style=\"color:#D50201\">${this.inputSearchKey}</span>`\n                );\n              }\n            }\n            this.resultTotal = res.data.key.total;\n          }\n          this.firstLableListRes = res.data.value;\n          this.loading = false;\n        })\n        .catch(res => {\n          this.$message({\n            type: 'error',\n            message: res.message\n          });\n          this.resultDataList = [];\n          this.resultTip = true;\n        });\n    },\n    //根据传进来的状态改变建议输入框的状态（展开|隐藏）\n    changeStyle(status, className) {\n      let dom = document.querySelectorAll(className);\n      dom[0].style.display = status;\n    },\n    //搜索页跳转获取搜索结果&&搜索按钮触发事件\n    getSearchResult() {\n      this.$nextTick(() => {\n        //异步打开遮罩层，优化视觉效果\n        const loading = Loading.service({\n          text: '搜索中...',\n          background: 'rgb(255, 255, 255)',\n          target: document.querySelector('.resultBg')\n        });\n        setTimeout(() => {\n          loading.close();\n        }, 500);\n        // console.log(this.$refs['elautocomplete']);\n        //主动使el-autocomplete失去焦点\n        this.$refs['elautocomplete'].$refs.input.blur();\n        this.isShow = false;\n        ///主动关闭搜索建议悬浮窗\n        this.changeStyle('none', '.el-autocomplete-suggestion');\n      });\n      let resultKey = '';\n      this.currentId = '';\n      if (this.inputSearchKey) {\n        //结果页搜索框输入搜索\n        resultKey = this.inputSearchKey;\n      } else {\n        let searchType = localStorage.getItem('searchType');\n        switch (searchType) {\n          case '1':\n            resultKey = localStorage.getItem('searchKey');\n            //搜索页输入框搜索\n            break;\n          case '2':\n            resultKey = localStorage.getItem('searchHisKey');\n            break;\n          case '3':\n            resultKey = localStorage.getItem('searchHotKey');\n            break;\n        }\n        //清除搜索页传入的key\n        window.localStorage.removeItem('searchType');\n        window.localStorage.removeItem('searchKey');\n        window.localStorage.removeItem('searchHisKey');\n        window.localStorage.removeItem('searchHotKey');\n      }\n      this.inputSearchKey = resultKey;\n      // if (resultKey) {\n      const queryParams = {\n        resourceName: resultKey,\n        accountType: this.accountType,\n        filterName: '',\n        boxName: this.boxName,\n        limit: this.limit,\n        offset: this.offset\n      };\n      this.loading = true;\n\n      //关键字搜索\n\n      getSearchResultV(queryParams)\n        .then(res => {\n          if (\n            res.data == null ||\n            res.data == '' ||\n            res.data.key.records.length == 0\n          ) {\n            this.resultTip = true;\n            this.resultDataList = [];\n            this.firstLableListRes = this.firstLableList;\n          } else {\n            this.resultDataList = res.data.key.records;\n            this.currentPage = res.data.key.current;\n            let reg = new RegExp(this.inputSearchKey, 'g');\n            for (let item of this.resultDataList) {\n              if (item.firstMes.includes(this.inputSearchKey)) {\n                item.firstMesColor = item.firstMes.replace(\n                  reg,\n                  `<span style=\"color:#D50201\">${this.inputSearchKey}</span>`\n                );\n              }\n            }\n\n            this.resultTotal = res.data.key.total;\n\n            this.firstLableListRes = res.data.value;\n\n            this.resultTip = false;\n          }\n          this.loading = false;\n        })\n        .catch(res => {\n          this.resultTip = true;\n          this.resultDataList = [];\n          this.loading = false;\n        });\n      // } else {\n      //   this.inputSearchKey = '';\n      //   this.resultTip = true;\n      //   this.resultDataList = [];\n      //   this.firstLableListRes = this.firstLableList;\n      // }\n    },\n    //发起需求\n    postInitDemand(item) {\n      const h = this.$createElement;\n      this.$msgbox({\n        title: '提示',\n        message: h('p', null, [\n          h('span', null, '是否确认发起需求' + '\"' + item.firstMes + '\",内容\"'),\n          h('i', { style: 'color: teal' }, item.secondMes),\n          h('span', null, ' \"')\n        ]),\n        showCancelButton: true,\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        beforeClose: (action, instance, done) => {\n          if (action === 'confirm') {\n            const params = {\n              accountType: Number(this.accountType),\n              resourcesId: item.resourceId\n            };\n            instance.confirmButtonLoading = true;\n            instance.confirmButtonText = '发送中...';\n            postInitDemand(params)\n              .then(res => {\n                this.$message({\n                  type: 'success',\n                  message: res.message\n                });\n                //需求发起成功后刷新搜索结果\n                this.getSearchResult();\n              })\n              .catch(res => {\n                // this.$message({\n                //   type: 'error',\n                //   message: res.message\n                // });\n              });\n            instance.confirmButtonLoading = false;\n            setTimeout(() => {\n              done();\n              setTimeout(() => {\n                instance.confirmButtonLoading = false;\n              }, 300);\n            }, 1000);\n          } else {\n            done();\n          }\n        }\n      }).then(action => {});\n    },\n    //按热门资源、资源标签搜索\n    searchHot(data) {\n      this.currentId = '';\n      this.inputSearchKey = data;\n      //异步打开遮罩层，优化视觉效果\n      this.$nextTick(() => {\n        const loading = Loading.service({\n          text: '搜索中...',\n          background: 'rgb(255, 255, 255)',\n          target: document.querySelector('.resultBg')\n        });\n        setTimeout(() => {\n          loading.close();\n        }, 500);\n      });\n\n      const queryParams = {\n        resourceName: data,\n        accountType: this.accountType,\n        filterName: '',\n        boxName: '',\n        limit: this.limit,\n        offset: this.offset\n      };\n      this.loading = true;\n\n      getSearchResultV(queryParams)\n        .then(res => {\n          if (\n            res.data == null ||\n            res.data == '' ||\n            res.data.key.records.length == 0\n          ) {\n            this.resultTip = true;\n            this.resultDataList = [];\n          } else {\n            this.resultTip = false;\n            this.resultDataList = res.data.key.records;\n            this.currentPage = res.data.key.current;\n            let reg = new RegExp(this.inputSearchKey, 'g');\n            for (let item of this.resultDataList) {\n              if (item.firstMes.includes(this.inputSearchKey)) {\n                item.firstMesColor = item.firstMes.replace(\n                  reg,\n                  `<span style=\"color:#D50201\">${this.inputSearchKey}</span>`\n                );\n              }\n            }\n            this.resultTotal = res.data.key.total;\n\n            this.firstLableListRes = res.data.value;\n          }\n          this.loading = false;\n        })\n        .catch(res => {\n          this.resultTip = true;\n          this.resultDataList = [];\n          this.$message({\n            type: 'error',\n            message: res.message\n          });\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.loginRole {\n  margin: 0;\n  padding: 0;\n}\n.resultBg {\n  max-width: 100vw;\n  min-height: 90vh;\n  min-width: 1050px;\n  background: url('../../assets/images/searchResultBg.png') no-repeat,\n    url('../../assets/images/searchResultBg.webp') no-repeat;\n  background-size: cover;\n  padding-top: 15px;\n  padding-bottom: 100px;\n}\n.head-background {\n  min-width: 1050px;\n  background: url('../../assets/images/bg.jpg') no-repeat;\n  background-size: cover;\n  display: flex;\n  justify-content: space-between;\n  .log-content {\n    display: inline-block;\n    margin-left: 20px;\n    padding: 10px 0;\n  }\n  .search-item {\n    text-align: center;\n    .search {\n      margin-top: 10px;\n      width: inherit;\n      min-width: 444px;\n      position: relative;\n      .inline-input {\n        min-width: 300px;\n        width: 30vw;\n      }\n    }\n  }\n  .nav {\n    width: 350px;\n    display: flex;\n    justify-content: space-evenly;\n    margin-top: 15px;\n    float: right;\n    .nav img {\n      width: 25px;\n      height: 25px;\n    }\n  }\n}\n.cascader-box {\n  background-color: #fff;\n  position: absolute;\n  z-index: 999;\n  border-radius: 5px;\n  min-width: 400px;\n  margin: auto;\n  top: 40px;\n  left: 0;\n}\n@keyframes fadeindown {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(-20px);\n    -ms-transform: translateY(-20px);\n    transform: translateY(-20px);\n  }\n\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0);\n    -ms-transform: translateY(0);\n    transform: translateY(0);\n  }\n}\n.fadeInDown {\n  animation: fadeindown 0.5s;\n}\n/deep/.el-scrollbar__wrap {\n  overflow: auto;\n  position: relative;\n}\n.bottom-right {\n  text-align: center;\n  margin-top: 40px;\n  padding-bottom: 10px;\n}\n/deep/.el-collapse-item__content {\n  padding-bottom: 0;\n  font-size: 13px;\n  color: #303133;\n  line-height: 1.769230769230769;\n}\n.channel-menu-itnl {\n  font-style: normal;\n  font-size: 12px;\n  display: inline-block;\n  background: #73c9e5;\n  border-radius: 2px;\n  color: #fff;\n  margin-left: 1px;\n  transform: scale(0.85);\n  width: 32px;\n  text-align: center;\n}\n.menuitnl-color-change {\n  background: #e58473;\n}\n.box-card {\n  width: 750px;\n  //height: 150px;\n  margin: auto;\n  margin-bottom: 20px;\n}\n.box-con {\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n  .left {\n    width: 60%;\n    h3 {\n      font-size: 18px;\n    }\n    p {\n      font-size: 14px;\n      margin-top: 15px;\n    }\n    span {\n      font-size: 12px;\n      color: rgba(0, 0, 0, 0.5);\n      margin-right: 5px;\n      display: inline-block;\n      margin-top: 17px;\n    }\n  }\n  .right {\n    margin-left: 80px;\n    width: 250px;\n    p {\n      font-size: 13px;\n      color: rgba(0, 0, 0, 0.25);\n      text-align: right;\n    }\n    .btn {\n      float: right;\n      margin-top: 60px;\n    }\n  }\n}\n.el-dropdown-link {\n  cursor: pointer;\n  font-size: 14px;\n  min-width: 90px;\n\n  &:hover,\n  &:focus,\n  &:visited {\n    color: #409eff;\n  }\n}\n.color-change {\n  color: #409eff !important;\n}\n.el-icon-arrow-down {\n  font-size: 11px;\n}\n.result {\n  width: 750px;\n  margin: auto;\n  padding-top: 15px;\n}\n.true-result {\n  display: flex;\n  justify-content: center;\n  .true-result-left {\n    width: 121px;\n    margin-right: 21px;\n    .left-top {\n      color: rgba(0, 0, 0, 0.45);\n      height: 50px;\n      line-height: 50px;\n      text-align: center;\n    }\n    .left-item {\n      background: #ffffff;\n      border-radius: 10px;\n      color: rgba(0, 0, 0, 0.65);\n      text-align: center;\n      height: 50px;\n      line-height: 50px;\n      font-size: 14px;\n      margin-bottom: 10px;\n      cursor: pointer;\n      border: 1px solid #fff;\n      &:hover {\n        border: 1px solid #4372fd;\n        color: #4372fd;\n      }\n    }\n    .active {\n      background: #4372fd;\n      color: #fff;\n      &:hover {\n        border: 1px solid #4372fd;\n        color: #fff;\n      }\n    }\n  }\n  .true-result-center {\n    width: 750px;\n    .center-top {\n      height: 50px;\n      line-height: 50px;\n      color: rgba(0, 0, 0, 0.45);\n      text-align: right;\n      padding-right: 25px;\n    }\n    .filter-card {\n      margin-bottom: 20px;\n      .center-filter {\n        display: flex;\n        .center-filter-list {\n          flex: 1;\n          display: flex;\n          flex-wrap: wrap;\n          height: 32px;\n          .filter-list-item {\n            padding: 8px 15px;\n            font-size: 14px;\n            color: rgba(0, 0, 0, 0.45);\n            cursor: pointer;\n            margin-bottom: 10px;\n          }\n          .active {\n            background: rgba(67, 114, 253, 0.15);\n            color: #4372fd;\n            border-radius: 5px;\n          }\n        }\n        .center-filter-list-show {\n          height: auto;\n        }\n        .btn-more {\n          width: 88px;\n          height: 36px;\n          line-height: 36px;\n          cursor: pointer;\n          color: rgba(0, 0, 0, 0.45);\n          text-align: center;\n          position: relative;\n          &::before {\n            content: '';\n            width: 1px;\n            height: 14px;\n            background: #d8d8d8;\n            position: absolute;\n            left: 0;\n            top: 13px;\n          }\n        }\n      }\n    }\n  }\n  .true-result-right {\n    width: 275px;\n    margin: 50px 0 0 20px;\n    .result-right-title {\n      font-size: 18px;\n      color: #000;\n      font-weight: bold;\n      padding-bottom: 15px;\n      border-bottom: 1px solid #e0e0e0;\n      span {\n        font-size: 13px;\n        color: rgba(0, 0, 0, 0.25);\n      }\n    }\n    .result-right-content {\n      .result-right-content-item {\n        p {\n          padding: 20px 0 15px;\n          font-size: 14px;\n          font-weight: bold;\n          cursor: pointer;\n          &:hover {\n            color: #4372fd;\n          }\n        }\n        .list {\n          display: flex;\n          flex-wrap: wrap;\n          .list-item {\n            margin: 0 15px 10px 0;\n            color: rgba(0, 0, 0, 0.45);\n            font-size: 13px;\n            cursor: pointer;\n            &:hover {\n              color: #4372fd;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n.tips {\n  //position: absolute;\n  margin-top: 50px;\n  margin-left: 50%;\n}\n.span-title-name {\n  display: inline-block;\n  width: 250px;\n  text-align: right;\n  margin-left: 30%;\n  font-size: 0.8rem;\n  color: #4372fd;\n}\n.tips-font {\n  margin-top: 10px;\n  font-size: 1rem;\n  font-weight: bold;\n  color: rgba(17, 17, 17, 0.4);\n}\n.content-box {\n  display: flex;\n  justify-content: center;\n  margin-top: 170px;\n  overflow: hidden;\n}\n.chil-item,\n.item-aside {\n  background-color: rgba(167, 163, 163, 0.062);\n  border-radius: 5px;\n}\n.item-main {\n  height: 300px;\n  width: 550px;\n  color: gray;\n}\n.item-aside {\n  height: 320px;\n  width: 450px;\n  margin-left: 20px;\n}\n.chil-item {\n  height: 120px;\n  font-size: 1rem;\n  margin-bottom: 10px;\n  padding: 20px;\n  overflow: hidden;\n}\n.item-tittle-aside {\n  font-size: 1rem;\n  margin: 20px;\n  color: gray;\n}\n.item-content {\n  margin-top: 20px;\n}\n.el-button-self {\n  background-color: rgba(240, 236, 236, 0.2);\n  padding: 5px;\n  margin-left: 10px;\n\n  &:focus,\n  &:hover {\n    background: rgba(236, 238, 240, 0.2);\n  }\n}\n\n.item-list {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 10px;\n  font-size: 0.8rem;\n}\n.score-index {\n  display: inline-block;\n  width: 20px;\n  padding-left: 5px;\n}\n/deep/.el-input__inner {\n  border-radius: 5px 0 0 5px;\n}\n\nli {\n  padding-bottom: 8px;\n}\n//积分排行序号渐变色\n.fontNumColor_1 {\n  color: rgba(236, 61, 61, 0.979);\n}\n.fontNumColor_2 {\n  color: rgb(236, 102, 61);\n}\n.fontNumColor_3 {\n  color: rgb(236, 154, 61);\n}\n.pagination {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: #fff;\n  width: 100%;\n  height: 75px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n<style>\n.el-collapse-item__header.is-active {\n  border-bottom-color: transparent;\n  background-color: #dcdfe629;\n}\n.el-collapse-item__wrap {\n  will-change: height;\n  overflow: hidden;\n  box-sizing: border-box;\n  background-color: #fff0;\n}\n.el-collapse-item__header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  border-radius: 5px;\n}\n/*隐藏级联的radio*/\n.el-cascader-panel .el-radio__input {\n  visibility: hidden;\n}\n.el-cascader-panel .el-input-node__postfix {\n  top: 10px;\n}\n</style>\n<style lang=\"less\">\n.filter-card {\n  .el-card__body {\n    padding: 8px 12px;\n  }\n}\n.true-result-right {\n  .el-card__body {\n    padding: 20px 16px;\n  }\n}\n.tooltip.el-tooltip__popper {\n  max-width: 30%;\n}\n</style>\n"]}]}