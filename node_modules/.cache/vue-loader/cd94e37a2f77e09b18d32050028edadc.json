{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/PeopleNumber/index.vue?vue&type=style&index=0&id=44204fc3&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/PeopleNumber/index.vue","mtime":1627979214288},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBlb3BsZS1udW0tYm94IHsKICBtaW4taGVpZ2h0OiBjYWxjKDEwMHZoIC0gNTBweCk7CiAgd2lkdGg6IDEwMCU7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgbWFyZ2luOiAyNXB4IDUwcHg7CiAgLmJhckNoYXJ0IHsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAuYm94LWNhcmQgewogICAgICB3aWR0aDogOTYlOwogICAgICBtYXJnaW46IDAgMiU7CiAgICAgIC5oZWFkZXItdGlwIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgcCB7CiAgICAgICAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg1KTsKICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgfQogICAgICAgIHNwYW4gewogICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgd2lkdGg6IDU4cHg7CiAgICAgICAgICBoZWlnaHQ6IDE2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjM2I3OGUzOwogICAgICAgICAgY29sb3I6ICMzYjc4ZTM7CiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQogICAgICAgIHNwYW4uZGlzYWJsZWQgewogICAgICAgICAgYm9yZGVyLWNvbG9yOiAjYzBjNGNjOwogICAgICAgICAgY29sb3I6ICNjMGM0Y2M7CiAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAubWFwQ2hhcnQgewogICAgbWFyZ2luLXRvcDogMTVweDsKICB9Cn0KL2RlZXAvLmVsLWNhcmRfX2JvZHkgewogIHBhZGRpbmc6IDE1cHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/StatisticalChart/PeopleNumber","sourcesContent":["<template>\n  <div class=\"people-num-box\" v-loading=\"loading\">\n    <div class=\"barChart\">\n      <el-col :span=\"12\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>雏鹰高飞孤儿培养工程人数汇总情况</p>\n            <span\n              @click=\"exportProple('chuying')\"\n              :class=\"\n                chuyingGradeCount && chuyingGradeCount.length > 0\n                  ? ''\n                  : 'disabled'\n              \"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"barchart-box\">\n            <pie-charts\n              :chartData=\"chuyingGradeCount\"\n              name=\"gradeName\"\n              value=\"nums\"\n              :total=\"chuyingTotal\"\n              txtName=\"总人数\"\n            ></pie-charts>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>贫困少年英才培养工程人数汇总情况</p>\n            <span\n              @click=\"exportProple('yingcai')\"\n              :class=\"\n                yincaiGradeCount && yincaiGradeCount.length > 0\n                  ? ''\n                  : 'disabled'\n              \"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"barchart-box\">\n            <pie-charts\n              :chartData=\"yincaiGradeCount\"\n              name=\"gradeName\"\n              value=\"nums\"\n              :total=\"yincaiTotal\"\n              txtName=\"总人数\"\n            ></pie-charts>\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n    <div class=\"barChart mapChart\">\n      <el-col :span=\"12\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>雏鹰高飞孤儿培养工程人数地区分布</p>\n            <span\n              @click=\"exportMapData('chuying')\"\n              :class=\"\n                chuyingMapCount && chuyingMapCount.length > 0 ? '' : 'disabled'\n              \"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"barchart-box\">\n            <map-charts\n              :chartData=\"chuyingMapCount\"\n              name=\"name\"\n              value=\"nums\"\n            ></map-charts>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>贫困少年英才培养工程人数地区分布</p>\n            <span\n              @click=\"exportMapData('yingcai')\"\n              :class=\"\n                yincaiMapCount && yincaiMapCount.length > 0 ? '' : 'disabled'\n              \"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"barchart-box\">\n            <map-charts\n              :chartData=\"yincaiMapCount\"\n              name=\"name\"\n              value=\"nums\"\n            ></map-charts>\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Col, Card } from 'element-ui';\nimport PieCharts from '../components/PieCharts/index';\nimport MapCharts from '../components/MapCharts/index';\nimport {\n  getStudentGradeCount,\n  getStudentProvinceCount,\n  exportGradeNums,\n  exportProvinceNums\n} from '../../../api/statistics/index';\nexport default {\n  name: 'PeopleNumber',\n  components: {\n    [Col.name]: Col,\n    [Card.name]: Card,\n    PieCharts,\n    MapCharts\n  },\n  data() {\n    return {\n      loading: false,\n      chuyingGradeCount: [], // 雏鹰高飞孤儿培养工程人数汇总情况\n      chuyingMapCount: [], // 雏鹰高飞孤儿培养工程人数地区分布\n      yincaiGradeCount: [], // 贫困少年英才培养工程人数汇总情况\n      yincaiMapCount: [] // 贫困少年英才培养工程人数地区分布\n    };\n  },\n  computed: {\n    chuyingTotal() {\n      let total = 0;\n      this.chuyingGradeCount.forEach(item => {\n        total += Number(item.nums);\n      });\n      return total;\n    },\n    yincaiTotal() {\n      let total = 0;\n      this.yincaiGradeCount.forEach(item => {\n        total += Number(item.nums);\n      });\n      return total;\n    }\n  },\n  mounted() {\n    this.initData();\n  },\n  methods: {\n    initData() {\n      this.chuyingGradeCount = [];\n      this.yincaiGradeCount = [];\n      this.chuyingMapCount = [];\n      this.yincaiMapCount = [];\n      this.loading = true;\n      Promise.all([getStudentGradeCount(), getStudentProvinceCount()]).then(\n        res => {\n          this.loading = false;\n          this.chuyingGradeCount = res[0].data.chuYing;\n          this.yincaiGradeCount = res[0].data.yinCai;\n          this.chuyingMapCount = res[1].data.chuYing;\n          this.yincaiMapCount = res[1].data.yinCai;\n        }\n      );\n    },\n    // 导出人数数据\n    exportProple(type) {\n      let exportType = '';\n      if (type === 'chuying') {\n        exportType = 0;\n        if (!this.chuyingGradeCount || this.chuyingGradeCount.length <= 0) {\n          return false;\n        }\n      } else {\n        exportType = 1;\n        if (!this.yincaiGradeCount || this.yincaiGradeCount.length <= 0) {\n          return false;\n        }\n      }\n      exportGradeNums({ type: exportType }).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute(\n          'download',\n          exportType === 0\n            ? '雏鹰高飞孤儿培养工程人数统计.xls'\n            : '贫困少年英才培养工程人数统计.xls'\n        );\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    },\n    // 导出地图数据\n    exportMapData(type) {\n      let exportType = '';\n      let provinceNames = '省份,';\n      let nums = '人数,';\n      let total = 0;\n      if (type === 'chuying') {\n        exportType = 0;\n        if (!this.chuyingMapCount || this.chuyingMapCount.length <= 0) {\n          return false;\n        }\n        this.chuyingMapCount.forEach(item => {\n          provinceNames += `${item.name},`;\n          nums += `${item.nums},`;\n          total += item.nums;\n        });\n      } else {\n        exportType = 1;\n        if (!this.yincaiMapCount || this.yincaiMapCount.length <= 0) {\n          return false;\n        }\n        this.yincaiMapCount.forEach(item => {\n          provinceNames += `${item.name},`;\n          nums += `${item.nums},`;\n          total += item.nums;\n        });\n      }\n      provinceNames += '总人数';\n      nums += total;\n      console.log(provinceNames, nums);\n      let params = {\n        type: exportType,\n        provinceNames: provinceNames,\n        nums: nums\n      };\n      exportProvinceNums(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute(\n          'download',\n          exportType === 0\n            ? '雏鹰高飞孤儿培养工程人数地区分布统计.xls'\n            : '贫困少年英才培养工程人数地区分布统计.xls'\n        );\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.people-num-box {\n  min-height: calc(100vh - 50px);\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  margin: 25px 50px;\n  .barChart {\n    overflow: hidden;\n    .box-card {\n      width: 96%;\n      margin: 0 2%;\n      .header-tip {\n        display: flex;\n        align-items: center;\n        p {\n          color: rgba(0, 0, 0, 0.85);\n          font-weight: 400;\n          font-size: 16px;\n        }\n        span {\n          margin-left: 10px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 58px;\n          height: 16px;\n          border-radius: 2px;\n          border: 1px solid #3b78e3;\n          color: #3b78e3;\n          cursor: pointer;\n        }\n        span.disabled {\n          border-color: #c0c4cc;\n          color: #c0c4cc;\n          cursor: not-allowed;\n        }\n      }\n    }\n  }\n  .mapChart {\n    margin-top: 15px;\n  }\n}\n/deep/.el-card__body {\n  padding: 15px;\n}\n</style>\n"]}]}