{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/views/system/User/components/ClassAuth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/views/system/User/components/ClassAuth.vue","mtime":1627979214401},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgRGlhbG9nLAogIEJ1dHRvbiwKICBNZXNzYWdlLAogIENoZWNrYm94LAogIFBvcG92ZXIsCiAgU2Nyb2xsYmFyCn0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBCVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2J1c2luZXNzL0JUYWJsZSc7CmltcG9ydCBDVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DVGFibGUnOwppbXBvcnQgewogIHF1ZXJ5QWxsQ2xhc3NCeURlcGFydENvZGVzLAogIHF1ZXJ5Q2xhc3NCeUNvZGVMaXN0Cn0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpL3N5c3RlbS91c2VyJzsKaW1wb3J0IHsgZGljdCB9IGZyb20gJy4uLy4uLy4uLy4uL3BsdWdpbnMvY29yZS9kaWN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2xhc3NBdXRoJywKICBjb21wb25lbnRzOiB7CiAgICBbRGlhbG9nLm5hbWVdOiBEaWFsb2csCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24sCiAgICBbQlRhYmxlLm5hbWVdOiBCVGFibGUsCiAgICBbQ2hlY2tib3gubmFtZV06IENoZWNrYm94LAogICAgW1BvcG92ZXIubmFtZV06IFBvcG92ZXIsCiAgICBbU2Nyb2xsYmFyLm5hbWVdOiBTY3JvbGxiYXIsCiAgICBbQ1RhYmxlLm5hbWVdOiBDVGFibGUKICB9LAogIHByb3BzOiB7CiAgICAvKioKICAgICAqIOmAieaLqeS4reeahOePree6p+WIl+ihqAogICAgICovCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICAvKioKICAgICAqIOagh+mimAogICAgICovCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgLyoqCiAgICAgKiDor7fmsYLmlrnms5UKICAgICAqLwogICAgYWpheDogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIC8qKgogICAgICog5YW25LuW5Y+C5pWwCiAgICAgKi8KICAgIG90aGVyUGFyYW1zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIC8qKgogICAgICog5p+l6K+i6KGo5Y2V6aG5CiAgICAgKi8KICAgIGN1c3RvbUZvcm1JdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gWwogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+ePree6p+WQjeensCcsCiAgICAgICAgICBwcm9wOiAnY2xhc3NOYW1lJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIG1heGxlbmd0aDogMzAKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0KICAgIH0sCiAgICAvKioKICAgICAqIOW8guatpeiOt+WPluaVsOaNrgogICAgICovCiAgICBjdXN0b21BamF4OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgLyoqCiAgICAgKiDoh6rlrprkuYnliJcKICAgICAqLwogICAgY3VzdG9tQ29sdW1uczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5a2m5bm0JywKICAgICAgICAgIHByb3A6ICdzaWduWWVhclR5cGUnLAogICAgICAgICAgZm9ybWF0dGVyKG1vZGVsLCBjb2x1bW4sIHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBkaWN0KCdYTk0nLCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+WtpumDqCcsCiAgICAgICAgICBwcm9wOiAnZGVwYXJ0TmFtZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5bm057qnJywKICAgICAgICAgIHByb3A6ICdncmFkZU5hbWUnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+ePreWeiycsCiAgICAgICAgICBwcm9wOiAnY2xhc3NUeXBlTmFtZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn54+t57qnJywKICAgICAgICAgIHByb3A6ICdjbGFzc05hbWUnCiAgICAgICAgfQogICAgICBdCiAgICB9LAogICAgLyoqCiAgICAgKiDmnIDlpJrpgInmi6kKICAgICAqIOm7mOiupO+8mjDvvIzkuI3pmZDliLYKICAgICAqLwogICAgbGltaXQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsIC8vIOaooeaAgeahhuaYvuekuumakOiXjwogICAgICBzZWxlY3Rpb246IFtdLCAvLyDpgInmi6nnmoTnj63nuqfliJfooagKICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLCAvLyDmj5DkuqTkuK0KICAgICAgdGFibGVEYXRhOiBbXSwgLy8g5YiX6KGo5pWw5o2uCiAgICAgIGNvdW50OiAwLAogICAgICBzZWxlY3RlZFZpc2libGU6IGZhbHNlLCAvLyDlt7LpgInkuK3nj63nuqfmqKHmgIHmoYbmmL7npLrkuI7pmpDol48KICAgICAgc2VsZWN0ZWREaWFsb2dMb2FkaW5nOiBmYWxzZSwgLy8g5bey6YCJ5Lit54+t57qn5qih5oCB5qGG5Yqg6L295LitCiAgICAgIHNlbGVjdGVkTGlzdDogW10gLy8g6YCJ5Lit55qE54+t57qn5YiX6KGoCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICog5YiX6KGo5YiX5pWw5o2uCiAgICAgKi8KICAgIGNvbHVtbnMoKSB7CiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgbGV0IGNvbHVtbnMgPSB0aGlzLmN1c3RvbUNvbHVtbnM7CiAgICAgIGNvbHVtbnMudW5zaGlmdCh7CiAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgbGFiZWw6ICfpgInmi6knLAogICAgICAgIHByb3A6ICdpZCcsCiAgICAgICAgd2lkdGg6ICc2MHB4JwogICAgICB9KTsKICAgICAgcmV0dXJuIGNvbHVtbnM7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLyoqCiAgICAgKiDmr4/mrKHmmL7npLrnmoTml7blgJnliLfmlrDliJfooagKICAgICAqLwogICAgdmlzaWJsZSgpIHsKICAgICAgdGhpcy52aXNpYmxlICYmCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5iVGFibGUgJiYgdGhpcy4kcmVmcy5iVGFibGUuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwogICAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog6I635Y+W5pWw5o2u5pa55rOVCiAgICAgKi8KICAgIGFqYXhHZXREYXRhKHBhcmFtcykgewogICAgICBwYXJhbXMgPSB7CiAgICAgICAgLi4ucGFyYW1zLAogICAgICAgIC4uLnRoaXMub3RoZXJQYXJhbXMKICAgICAgfTsKICAgICAgcGFyYW1zLmRlcGFydENvZGVzID0gcGFyYW1zLmRlcGFydENvZGUKICAgICAgICA/IHBhcmFtcy5kZXBhcnRDb2RlCiAgICAgICAgOiBwYXJhbXMuZGVwYXJ0Q29kZXMuam9pbignLCcpOwogICAgICBpZiAodHlwZW9mIHRoaXMuY3VzdG9tQWpheCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHRoaXMuY3VzdG9tQWpheChwYXJhbXMpOwogICAgICByZXR1cm4gcXVlcnlBbGxDbGFzc0J5RGVwYXJ0Q29kZXMocGFyYW1zKTsKICAgIH0sCiAgICAvKioKICAgICAqIOaYvuekuuaooeaAgeahhgogICAgICovCiAgICBzaG93KCkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICog6ZqQ6JeP5qih5oCB5qGGCiAgICAgKi8KICAgIGhpZGUoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8qKgogICAgICog5aSa6YCJ5qih5byP56Gu5a6a6YCJ5oup5YWD57SgCiAgICAgKi8KICAgIG9uQ2xpY2tDb25maXJtKCkgewogICAgICBsZXQgcm93cyA9IHRoaXMuc2VsZWN0aW9uLnNsaWNlKDApOwogICAgICAvLyDmoKHpqozmnIDlpKfpgInmi6nnj63nuqcKICAgICAgaWYgKHRoaXMubGltaXQgPiAwICYmIHJvd3MubGVuZ3RoID4gdGhpcy5saW1pdCkKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKAogICAgICAgICAgYOacgOWkmumAieaLqSR7dGhpcy5saW1pdH3pobnvvIzlvZPliY3lt7LpgInmi6kke3Jvd3MubGVuZ3RofemhueOAgmAKICAgICAgICApOwogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHJvd3MpOwogICAgICB0aGlzLiRlbWl0KCdzZWxlY3QnLCByb3dzKTsKICAgICAgLy8g5qCh6aqM5piv5ZCm6ZyA6KaB5byC5q2l5a6M5oiQ5ZCO5YWz6Zet56qX5Y+jCiAgICAgIGlmICh0eXBlb2YgdGhpcy5hamF4ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5zZWxlY3RlZFZpc2libGUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5pbnZva2VBamF4KHJvd3MpOwogICAgfSwKICAgIC8qKgogICAgICog6YCJ5oupCiAgICAgKi8KICAgIG9uU2VsZWN0KCkgewogICAgICB0aGlzLnNlbGVjdGlvbiA9IHRoaXMudmFsdWUuc2xpY2UoMCk7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuY291bnQrKzsKICAgIH0sCiAgICAvKioKICAgICAqIOaJp+ihjOW8guatpeWbnuiwg+aOpeWPowogICAgICogQHBhcmFtIHtBcnJheX0gcm93cyDnj63nuqfliJfooagKICAgICAqLwogICAgYXN5bmMgaW52b2tlQWpheChyb3dzKSB7CiAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLmFqYXgocm93cyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDpgInkuK3lhYPntKAKICAgICAqIEBwYXJhbSB7Kn0gcm93IOWFg+e0oAogICAgICogQHBhcmFtIHtib29sZWFufSBzZWxlY3RlZCDmmK/lkKbpgInkuK0KICAgICAqLwogICAgdG9nZ2xlUm93U2VsZWN0ZWQocm93LCBzZWxlY3RlZCkgewogICAgICAvLyDmn6Xmib7lhYPntKDntKLlvJUKICAgICAgbGV0IGluZGV4ID0gdGhpcy5zZWxlY3Rpb24uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PT0gcm93LmNsYXNzQ29kZSk7CiAgICAgIHNlbGVjdGVkCiAgICAgICAgPyBpbmRleCA9PT0gLTEgJiYgdGhpcy5zZWxlY3Rpb24ucHVzaChyb3cuY2xhc3NDb2RlKSAvLyDmlrDlop4KICAgICAgICA6IGluZGV4ID49IDAgJiYgdGhpcy5zZWxlY3Rpb24uc3BsaWNlKGluZGV4LCAxKTsgLy8g5Yig6ZmkCiAgICB9LAogICAgLyoqCiAgICAgKiDpgInmi6kKICAgICAqLwogICAgaGFuZGxlU2VsZWN0KHNlbGVjdGlvbiwgcm93KSB7CiAgICAgIC8vIOaYr+WQpumAieS4rQogICAgICBsZXQgc2VsZWN0ZWQgPSBzZWxlY3Rpb24uaW5kZXhPZihyb3cpID49IDA7CiAgICAgIHRoaXMudG9nZ2xlUm93U2VsZWN0ZWQocm93LCBzZWxlY3RlZCk7CiAgICB9LAogICAgLy8g5YWo6YCJCiAgICBoYW5kbGVTZWxlY3RBbGwoc2VsZWN0aW9uLCB0YWJsZSkgewogICAgICAvLyDmmK/lkKbpgInkuK0KICAgICAgbGV0IHNlbGVjdGVkID0gISFzZWxlY3Rpb24ubGVuZ3RoOwogICAgICBpZiAoIXNlbGVjdGVkKSBzZWxlY3Rpb24gPSB0YWJsZS50YWJsZURhdGE7CiAgICAgIHNlbGVjdGlvbi5mb3JFYWNoKGl0ZW0gPT4gdGhpcy50b2dnbGVSb3dTZWxlY3RlZChpdGVtLCBzZWxlY3RlZCkpOwogICAgfSwKICAgIC8qKgogICAgICog5pWw5o2u5YiX6KGo5Y+Y5YyW77yM5Zue5pi+6YCJ5LitCiAgICAgKiBAcGFyYW0geyp9IHRhYmxlRGF0YSDliJfooajmlbDmja4KICAgICAqLwogICAgY2hhbmdlVGFibGVEYXRhKHRhYmxlRGF0YSkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IHRhYmxlID0gdGhpcy4kcmVmcy5iVGFibGUuJHJlZnMudGFibGUuJHJlZnMudGFibGU7CiAgICAgICAgLy8gY29uc29sZS5sb2coCiAgICAgICAgLy8gICB0YWJsZURhdGEuZmlsdGVyKGl0ZW0gPT4gdGhpcy5zZWxlY3Rpb24uZmluZChpZCA9PiBpdGVtLmlkID09PSBpZCkpCiAgICAgICAgLy8gKTsKICAgICAgICAvLyDlm57mmL7pgInkuK0KICAgICAgICB0YWJsZS50YWJsZURhdGEKICAgICAgICAgIC5maWx0ZXIoaXRlbSA9PiB0aGlzLnNlbGVjdGlvbi5maW5kKHJvdyA9PiBpdGVtLmNsYXNzQ29kZSA9PT0gcm93KSkKICAgICAgICAgIC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICB0YWJsZS50b2dnbGVSb3dTZWxlY3Rpb24oaXRlbSwgdHJ1ZSk7CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDmiZPlvIDlt7LpgInkuK3nj63nuqfmqKHmgIHmoYYKICAgICAqLwogICAgb25PcGVuU2VsZWN0ZWREaWFsb2coKSB7CiAgICAgIHRoaXMuY291bnQrKzsKICAgICAgdGhpcy5zZWxlY3Rpb24gPSB0aGlzLnZhbHVlLnNsaWNlKDApOwogICAgICB0aGlzLnNlbGVjdGVkVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuc2VsZWN0ZWREaWFsb2dMb2FkaW5nID0gdHJ1ZTsKICAgICAgcXVlcnlDbGFzc0J5Q29kZUxpc3QodGhpcy52YWx1ZSkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRMaXN0ID0gZGF0YTsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5jVGFibGUgJiYKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNUYWJsZS4kcmVmcy50YWJsZSAmJgogICAgICAgICAgICAgIHRoaXMuJHJlZnMuY1RhYmxlLiRyZWZzLnRhYmxlLnRvZ2dsZUFsbFNlbGVjdGlvbigpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkRGlhbG9nTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["ClassAuth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClassAuth.vue","sourceRoot":"src/pages/sims/views/system/User/components","sourcesContent":["<template>\n  <div>\n    <el-button type=\"primary\" @click=\"onSelect\">请选择</el-button>\n    <el-button type=\"text\" @click=\"onOpenSelectedDialog\">\n      已授权{{ value.length }}个班级\n    </el-button>\n    <!-- 班级选择列表 -->\n    <el-dialog\n      :visible.sync=\"visible\"\n      :title=\"title || '班级权限'\"\n      width=\"860px\"\n      center\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :show-close=\"false\"\n      :append-to-body=\"true\"\n      v-on=\"$listeners\"\n    >\n      <b-table\n        :key=\"count\"\n        class=\"b-table\"\n        ref=\"bTable\"\n        loading\n        row-key=\"id\"\n        :form-items=\"customFormItems\"\n        :immediate-load=\"false\"\n        :page-limit=\"10\"\n        :headers=\"columns\"\n        :show-column=\"false\"\n        :ajax-get-data=\"ajaxGetData\"\n        :reserve-selection=\"true\"\n        @select=\"handleSelect\"\n        @select-all=\"\n          selections =>\n            handleSelectAll(selections, $refs.bTable.$refs.table.$refs.table)\n        \"\n        @table-data-change=\"\n          selection =>\n            changeTableData(selection, $refs.bTable.$refs.table.$refs.table)\n        \"\n      >\n        <!-- 列表前的插槽 -->\n        <div class=\"class-selected\" slot=\"table-before\">\n          已选中{{ selection.length }}个班级\n        </div>\n        <!-- 多选列 -->\n        <!-- <template slot=\"column|id\" slot-scope=\"{ row }\">\n          <el-checkbox v-model=\"selected\" :label=\"row.id\"><span /></el-checkbox>\n        </template>\n        <template slot=\"column|header|id\">\n          <el-checkbox\n            :key=\"isAllCheck\"\n            :indeterminate=\"selected.length > 0 && !isAllCheck\"\n            :value=\"isAllCheck\"\n            @click.native=\"onClickAllCheck\"\n          >\n            {{ isAllCheck }}\n          </el-checkbox>\n        </template> -->\n      </b-table>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          :loading=\"confirmLoading\"\n          size=\"small\"\n          @click=\"visible = false\"\n        >\n          取消\n        </el-button>\n        <el-button\n          :loading=\"confirmLoading\"\n          size=\"small\"\n          type=\"primary\"\n          @click=\"onClickConfirm\"\n        >\n          确定\n        </el-button>\n      </span>\n    </el-dialog>\n    <!-- 已选中班级列表 -->\n    <el-dialog\n      :key=\"count\"\n      title=\"已授权班级\"\n      :visible.sync=\"selectedVisible\"\n      width=\"860px\"\n      center\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :show-close=\"false\"\n      :append-to-body=\"true\"\n    >\n      <!-- 列表前的插槽 -->\n      <div class=\"class-selected\">已选中{{ selection.length }}个班级</div>\n      <c-table\n        ref=\"cTable\"\n        row-key=\"id\"\n        border\n        size=\"small\"\n        :data=\"selectedList\"\n        :headers=\"columns\"\n        :loading=\"selectedDialogLoading\"\n        @select=\"handleSelect\"\n        @select-all=\"\n          selection => handleSelectAll(selection, $refs.cTable.$refs.table)\n        \"\n      >\n      </c-table>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          :loading=\"confirmLoading\"\n          size=\"small\"\n          @click=\"selectedVisible = false\"\n        >\n          取消\n        </el-button>\n        <el-button\n          :loading=\"confirmLoading\"\n          size=\"small\"\n          type=\"primary\"\n          @click=\"onClickConfirm\"\n        >\n          确定\n        </el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  Dialog,\n  Button,\n  Message,\n  Checkbox,\n  Popover,\n  Scrollbar\n} from 'element-ui';\nimport BTable from '@/components/business/BTable';\nimport CTable from '@/components/common/CTable';\nimport {\n  queryAllClassByDepartCodes,\n  queryClassByCodeList\n} from '../../../../api/system/user';\nimport { dict } from '../../../../plugins/core/dict';\n\nexport default {\n  name: 'ClassAuth',\n  components: {\n    [Dialog.name]: Dialog,\n    [Button.name]: Button,\n    [BTable.name]: BTable,\n    [Checkbox.name]: Checkbox,\n    [Popover.name]: Popover,\n    [Scrollbar.name]: Scrollbar,\n    [CTable.name]: CTable\n  },\n  props: {\n    /**\n     * 选择中的班级列表\n     */\n    value: {\n      type: Array,\n      default: () => []\n    },\n    /**\n     * 标题\n     */\n    title: {\n      type: String,\n      default: ''\n    },\n    /**\n     * 请求方法\n     */\n    ajax: {\n      type: Function,\n      default: null\n    },\n    /**\n     * 其他参数\n     */\n    otherParams: {\n      type: Object,\n      default: null\n    },\n    /**\n     * 查询表单项\n     */\n    customFormItems: {\n      type: Array,\n      default: () => [\n        {\n          type: 'input',\n          label: '班级名称',\n          prop: 'className',\n          attrs: {\n            maxlength: 30\n          }\n        }\n      ]\n    },\n    /**\n     * 异步获取数据\n     */\n    customAjax: {\n      type: Function,\n      default: null\n    },\n    /**\n     * 自定义列\n     */\n    customColumns: {\n      type: Array,\n      default: () => [\n        {\n          label: '学年',\n          prop: 'signYearType',\n          formatter(model, column, value) {\n            return dict('XNM', value);\n          }\n        },\n        {\n          label: '学部',\n          prop: 'departName'\n        },\n        {\n          label: '年级',\n          prop: 'gradeName'\n        },\n        {\n          label: '班型',\n          prop: 'classTypeName'\n        },\n        {\n          label: '班级',\n          prop: 'className'\n        }\n      ]\n    },\n    /**\n     * 最多选择\n     * 默认：0，不限制\n     */\n    limit: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      visible: false, // 模态框显示隐藏\n      selection: [], // 选择的班级列表\n      confirmLoading: false, // 提交中\n      tableData: [], // 列表数据\n      count: 0,\n      selectedVisible: false, // 已选中班级模态框显示与隐藏\n      selectedDialogLoading: false, // 已选中班级模态框加载中\n      selectedList: [] // 选中的班级列表\n    };\n  },\n  computed: {\n    /**\n     * 列表列数据\n     */\n    columns() {\n      let self = this;\n      let columns = this.customColumns;\n      columns.unshift({\n        type: 'selection',\n        label: '选择',\n        prop: 'id',\n        width: '60px'\n      });\n      return columns;\n    }\n  },\n  watch: {\n    /**\n     * 每次显示的时候刷新列表\n     */\n    visible() {\n      this.visible &&\n        this.$nextTick(() => {\n          this.$refs.bTable && this.$refs.bTable.ajaxGetTableDataByPage();\n        });\n    }\n  },\n  created() {},\n  methods: {\n    /**\n     * 获取数据方法\n     */\n    ajaxGetData(params) {\n      params = {\n        ...params,\n        ...this.otherParams\n      };\n      params.departCodes = params.departCode\n        ? params.departCode\n        : params.departCodes.join(',');\n      if (typeof this.customAjax === 'function') return this.customAjax(params);\n      return queryAllClassByDepartCodes(params);\n    },\n    /**\n     * 显示模态框\n     */\n    show() {\n      this.visible = true;\n    },\n    /**\n     * 隐藏模态框\n     */\n    hide() {\n      this.visible = false;\n    },\n    /**\n     * 多选模式确定选择元素\n     */\n    onClickConfirm() {\n      let rows = this.selection.slice(0);\n      // 校验最大选择班级\n      if (this.limit > 0 && rows.length > this.limit)\n        return this.$message.warning(\n          `最多选择${this.limit}项，当前已选择${rows.length}项。`\n        );\n      this.$emit('input', rows);\n      this.$emit('select', rows);\n      // 校验是否需要异步完成后关闭窗口\n      if (typeof this.ajax !== 'function') {\n        this.visible = false;\n        this.selectedVisible = false;\n        return;\n      }\n      this.invokeAjax(rows);\n    },\n    /**\n     * 选择\n     */\n    onSelect() {\n      this.selection = this.value.slice(0);\n      this.visible = true;\n      this.count++;\n    },\n    /**\n     * 执行异步回调接口\n     * @param {Array} rows 班级列表\n     */\n    async invokeAjax(rows) {\n      this.confirmLoading = true;\n      try {\n        let res = await this.ajax(rows);\n      } finally {\n        this.confirmLoading = false;\n        this.visible = false;\n      }\n    },\n    /**\n     * 选中元素\n     * @param {*} row 元素\n     * @param {boolean} selected 是否选中\n     */\n    toggleRowSelected(row, selected) {\n      // 查找元素索引\n      let index = this.selection.findIndex(item => item === row.classCode);\n      selected\n        ? index === -1 && this.selection.push(row.classCode) // 新增\n        : index >= 0 && this.selection.splice(index, 1); // 删除\n    },\n    /**\n     * 选择\n     */\n    handleSelect(selection, row) {\n      // 是否选中\n      let selected = selection.indexOf(row) >= 0;\n      this.toggleRowSelected(row, selected);\n    },\n    // 全选\n    handleSelectAll(selection, table) {\n      // 是否选中\n      let selected = !!selection.length;\n      if (!selected) selection = table.tableData;\n      selection.forEach(item => this.toggleRowSelected(item, selected));\n    },\n    /**\n     * 数据列表变化，回显选中\n     * @param {*} tableData 列表数据\n     */\n    changeTableData(tableData) {\n      this.$nextTick(() => {\n        let table = this.$refs.bTable.$refs.table.$refs.table;\n        // console.log(\n        //   tableData.filter(item => this.selection.find(id => item.id === id))\n        // );\n        // 回显选中\n        table.tableData\n          .filter(item => this.selection.find(row => item.classCode === row))\n          .forEach(item => {\n            table.toggleRowSelection(item, true);\n          });\n      });\n    },\n    /**\n     * 打开已选中班级模态框\n     */\n    onOpenSelectedDialog() {\n      this.count++;\n      this.selection = this.value.slice(0);\n      this.selectedVisible = true;\n      this.selectedDialogLoading = true;\n      queryClassByCodeList(this.value)\n        .then(({ data }) => {\n          this.selectedList = data;\n          this.$nextTick(() => {\n            this.$refs.cTable &&\n              this.$refs.cTable.$refs.table &&\n              this.$refs.cTable.$refs.table.toggleAllSelection();\n          });\n        })\n        .finally(() => {\n          this.selectedDialogLoading = false;\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.class-selected {\n  font-size: 14px;\n  font-weight: bold;\n  line-height: 24px;\n}\n</style>\n"]}]}