{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/components/business/BTable/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/components/business/BTable/index.vue","mtime":1646020538151},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpsZXQgQ0ZpbHRlckNoZWNrUGFuZWwgPSAoKSA9Pg0KICBpbXBvcnQoJ0AvY29tcG9uZW50cy9jb21tb24vQ0ZpbHRlckNoZWNrUGFuZWwvaW5kZXguanMnKTsNCmltcG9ydCBheGlvcyBmcm9tICdAL3BsdWdpbnMvYXhpb3MnOw0KaW1wb3J0IHsgQnV0dG9uLCBQYWdpbmF0aW9uLCBMb2FkaW5nLCBGb3JtSXRlbSwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOw0KaW1wb3J0IENEeW5hbWljRm9ybSBmcm9tICcuLi8uLi9jb21tb24vQ0R5bmFtaWNGb3JtJzsNCmltcG9ydCBDVGFibGUgZnJvbSAnLi4vLi4vY29tbW9uL0NUYWJsZSc7DQppbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZyc7DQovKioNCiAqIOagvOW8j+WMluepuuaVsOaNruaYvuekug0KICovDQpsZXQgZm9ybWF0dGVyRW1wdHlEYXRhID0gc3RyID0+DQogIFsnJywgbnVsbCwgdW5kZWZpbmVkXS5pbmRleE9mKHN0cikgPj0gMCA/ICctJyA6IHN0cjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0JUYWJsZScsDQogIHByb3BzOiB7DQogICAgLy/mlbDmja7mn6Xor6LmmK/lkKblsZXnpLpsb2FkaW5nDQogICAgbG9hZGluZzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICAvL+aVsOaNruafpeivomZ1bmPvvIzov5Tlm55wcm9taXNl5a+56LGhDQogICAgYWpheEdldERhdGE6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgZGVmYXVsdDogKCkgPT4ge30NCiAgICB9LA0KICAgIC8v5L+d5a2Y562b6YCJ57uT5p6c77yI5pi+56S65YiXL+etm+mAiemhue+8iQ0KICAgIGFqYXhGaWx0ZXJTYXZlOiB7DQogICAgICB0eXBlOiBGdW5jdGlvbg0KICAgIH0sDQogICAgLy/mn6Xor6LnrZvpgInnu5PmnpzvvIjmmL7npLrliJcv562b6YCJ6aG577yJDQogICAgYWpheEZpbHRlclF1ZXJ5OiB7DQogICAgICB0eXBlOiBGdW5jdGlvbg0KICAgIH0sDQogICAgLy/ooajlpLTmlbDnu4QNCiAgICBoZWFkZXJzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdDQogICAgfSwNCiAgICAvL+WIhumhtee7hOS7tuS4juihqOmXtOi3nQ0KICAgIHBnTWFyZ2luVG9wOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiAyMA0KICAgIH0sDQogICAgLy/mr4/pobXlsZXnpLrmlbDph4/pgInmi6kNCiAgICBwYWdlU2l6ZXM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdDogKCkgPT4gWzEwLCA1MCwgMTAwLCA1MDAsIDEwMDBdDQogICAgfSwNCiAgICAvL+m7mOiupOavj+mhteWxleekuuaVsOmHjw0KICAgIHBhZ2VMaW1pdDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogNTANCiAgICB9LA0KICAgIC8vIOihqOWNlemFjee9rg0KICAgIGZvcm1JdGVtczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXQ0KICAgIH0sDQogICAgLy8g5Yid5aeL5YyW6KGo5Y2V5pWw5o2uDQogICAgaW5pdGlhbEZvcm1EYXRhOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pDQogICAgfSwNCiAgICAvLyDlt6XlhbfmoI8NCiAgICB0b29sYmFyczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXQ0KICAgIH0sDQogICAgLy/mmL7npLrliLfmlrDmjInpkq4NCiAgICBzaG93UmVmcmVzaDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIC8v5pi+56S65YiXDQogICAgc2hvd0NvbHVtbjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICAvL+aYvuekuuetm+mAiemhueaMiemSrg0KICAgIHNob3dRdWVyeUZpbHRlcjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICAvL+S/neWtmGNvbHVtbuWIl+aYvuekuuaJgOS9v+eUqOeahOeahGtleQ0KICAgIHNhdmVDb2x1bW5LZXk6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICAvL+S/neWtmOetm+mAiemhueaYvuekuuaJgOS9v+eUqOeahOeahGtleQ0KICAgIHNhdmVRdWVyeUtleTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIC8v6aG555uu57O757ufKOeUqOS6juS/neWtmOWIl+aVsOaNruaXtueahOWPguaVsCkNCiAgICBzeXN0ZW06IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZA0KICAgIH0sDQogICAgLy/kv53lrZjliJflr7nlupTnmoTmiJDlip/mj5DnpLrmlofmoYgNCiAgICBzYXZlU3VjY2Vzc01zZzogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ+S/neWtmOaIkOWKnycNCiAgICB9LA0KICAgIC8v5L+d5a2Y5YiX5a+55bqU55qE5aSx6LSl5o+Q56S65paH5qGIDQogICAgc2F2ZUVycm9yTXNnOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAn5pWw5o2u5L+d5a2Y5aSx6LSlJw0KICAgIH0sDQogICAgLyoqDQogICAgICog56uL5Y2z5Yqg6L29DQogICAgICovDQogICAgaW1tZWRpYXRlTG9hZDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9DQogICAgLyoqDQogICAgICog6KGM5pWw5o2u6ZSu5YC8DQogICAgICovDQogICAgLy8gcm93S2V5OiB7DQogICAgLy8gICB0eXBlOiBbRnVuY3Rpb24sIFN0cmluZ10NCiAgICAvLyB9LA0KICAgIC8vIGV4cGFuZFJvd0tleXM6IHsNCiAgICAvLyAgIHR5cGU6IEFycmF5DQogICAgLy8gfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQ1RhYmxlLA0KICAgIEVsUGFnaW5hdGlvbjogUGFnaW5hdGlvbiwNCiAgICBDRHluYW1pY0Zvcm0sDQogICAgW0Zvcm1JdGVtLm5hbWVdOiBGb3JtSXRlbSwNCiAgICBbQnV0dG9uLm5hbWVdOiBCdXR0b24NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaGVhZGVyUHJvbWlzZTogbnVsbCwNCiAgICAgIGNvbXB1dGVkSGVhZGVyczogW10sDQogICAgICBjb21wdXRlZEZvcm1JdGVtczogW10sDQogICAgICBhamF4Q291bnQ6IDAsDQogICAgICBzZWxlY3RSb3dzOiBbXSwNCiAgICAgIGxvYWRpbmdJbnM6IG51bGwsDQogICAgICAvL+WIhumhteWPguaVsA0KICAgICAgcGFnZVBhcmFtczogew0KICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgb2Zmc2V0OiAwLA0KICAgICAgICBsaW1pdDogdGhpcy5wYWdlTGltaXQsDQogICAgICAgIHBhZ2U6IDENCiAgICAgIH0sDQogICAgICAvL+aOkuW6j+WPguaVsA0KICAgICAgc29ydFBhcmFtczogew0KICAgICAgICBzb3J0OiB1bmRlZmluZWQsDQogICAgICAgIG9yZGVyOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgLy8g6KGo5Y2V5pWw5o2uDQogICAgICBmb3JtRGF0YTogeyAuLi50aGlzLmluaXRpYWxGb3JtRGF0YSB9LA0KICAgICAgLy8g6KGo5Y2V5pWw5o2uDQogICAgICBmb3JtQXR0cnM6IHsNCiAgICAgICAgaW5saW5lOiB0cnVlLA0KICAgICAgICBzaXplOiAnc21hbGwnDQogICAgICB9LA0KICAgICAgLy8g5piv5ZCm5piv5pWw57uEDQogICAgICBpc0FycmF5OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpLA0KICAgICAgc3lzQ29uZmlnOiB7fSAvL+agueaNrumFjee9ruWPguaVsOWPinByb3DlhaXlj4LvvIzliqjmgIHphY3nva4NCiAgICB9Ow0KICB9LA0KICB3YXRjaDogew0KICAgIC8v5q+P6aG15bGV56S65pWw6YeP5Y+Y5YyWDQogICAgJ3BhZ2VQYXJhbXMubGltaXQnKCkgew0KICAgICAgbGV0IHsgcGFnZSB9ID0gdGhpcy5wYWdlUGFyYW1zOw0KICAgICAgaWYgKHBhZ2UgPT0gMSkgew0KICAgICAgICAvL+WcqOesrOS4gOmhteS/ruaUueavj+mhteaVsOmHj+aXtu+8jOinpuWPkemHjeaWsOivt+axgg0KICAgICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8v6Z2e6aaW6aG15L+u5pS577yM5bCG6aG156CB5pS55Li66aaW6aG177yM6Kem5Y+R6aG156CB5pu05paw55uR5ZCsDQogICAgICAgIHRoaXMucGFnZVBhcmFtcy5wYWdlID0gMTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5b2T5YmN6aG156CB5Y+Y5YyWDQogICAgJ3BhZ2VQYXJhbXMucGFnZScoKSB7DQogICAgICBsZXQgeyBwYWdlLCBsaW1pdCB9ID0gdGhpcy5wYWdlUGFyYW1zOw0KICAgICAgdGhpcy5wYWdlUGFyYW1zLm9mZnNldCA9IGxpbWl0ICogKHBhZ2UgLSAxKTsNCiAgICAgIHRoaXMuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOw0KICAgIH0sDQogICAgLy8g5pWw5o2u5Y+Y5YyWDQogICAgdGFibGVEYXRhKCkgew0KICAgICAgdGhpcy4kZW1pdCgndGFibGUtZGF0YS1jaGFuZ2UnLCB0aGlzLnRhYmxlRGF0YSk7DQogICAgfSwNCiAgICBmb3JtSXRlbXMoKSB7DQogICAgICAvL2Zvcm1JdGVtcyDlj5jljJblpITnkIYNCiAgICAgIHRoaXMuZGVhbFF1ZXJ5SXRlbXMoKTsNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLy/or7fmsYLlhaXlj4INCiAgICBhamF4UGFnZVBhcmFtcygpIHsNCiAgICAgIC8vIGxldCBwYXJhbSA9IHRoaXMucGFnZVBhcmFtczsNCiAgICAgIGxldCB7IG9mZnNldCwgbGltaXQsIHBhZ2UgfSA9IHRoaXMucGFnZVBhcmFtczsNCiAgICAgIHJldHVybiB7IG9mZnNldCwgbGltaXQsIHBhZ2VTaXplOiBsaW1pdCwgcGFnZU51bTogcGFnZSB9Ow0KICAgIH0sDQogICAgLy/lrZjlgqjliJfmlbDmja7miYDnlKhrZXkNCiAgICBjb21wdXRlZFNhdmVDb2x1bW5LZXkoKSB7DQogICAgICBpZiAodGhpcy5zYXZlQ29sdW1uS2V5KSByZXR1cm4gdGhpcy5zYXZlQ29sdW1uS2V5Ow0KICAgICAgbGV0IGtleTsNCiAgICAgIHRyeSB7DQogICAgICAgIGtleSA9IHRoaXMuJHJvdXRlLnBhdGg7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBrZXkgPSAnZGVmYXVsdCc7DQogICAgICB9DQogICAgICByZXR1cm4gJ3RhYmxlfCcgKyBrZXk7DQogICAgfSwNCiAgICAvL+WtmOWCqOetm+mAiemhueaJgOeUqGtleQ0KICAgIGNvbXB1dGVkU2F2ZVF1ZXJ5S2V5KCkgew0KICAgICAgaWYgKHRoaXMuc2F2ZVF1ZXJ5S2V5KSByZXR1cm4gdGhpcy5zYXZlUXVlcnlLZXk7DQogICAgICBsZXQga2V5Ow0KICAgICAgdHJ5IHsNCiAgICAgICAga2V5ID0gdGhpcy4kcm91dGUucGF0aDsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGtleSA9ICdkZWZhdWx0JzsNCiAgICAgIH0NCiAgICAgIHJldHVybiAncXVlcnl8JyArIGtleTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0Q29uZmlnKCk7IC8v6buY6K6k6YWN572u5Yid5aeL5YyWDQogICAgdGhpcy5oZWFkZXJQcm9taXNlID0gdGhpcy5kZWFsSGVhZGVycygpOyAvL+ihqOWktOWkhOeQhg0KICAgIHRoaXMuZGVhbFF1ZXJ5SXRlbXMoKTsgLy/ooajljZXmn6Xor6LpobnlpITnkIYNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmltbWVkaWF0ZUxvYWQgJiYgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+WIhumhteaOpeWPo+ivt+axguaVsOaNruWkhOeQhg0KICAgIGFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKSB7DQogICAgICAodGhpcy4kcmVmcy5jRHluYW1pY0Zvcm0NCiAgICAgICAgPyB0aGlzLiRyZWZzLmNEeW5hbWljRm9ybS52YWxpZGF0ZSgpDQogICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCkNCiAgICAgICkudGhlbigoKSA9PiB7DQogICAgICAgIGxldCB0QWpheENvdW50ID0gKyt0aGlzLmFqYXhDb3VudDsNCiAgICAgICAgbGV0IGxhc3RMb2FkaW5nTWFwID0gdGhpcy5sYXN0TG9hZGluZ01hcDsNCiAgICAgICAgaWYgKCF0aGlzLiRyZWZzLnRhYmxlKSByZXR1cm47IC8v5p+l6K+i5Lit6YCU5a6e5L6L6KKr6ZSA5q+B77yM57uI56uvDQogICAgICAgIC8v6buY6K6kbG9hZOWunuS+i+S4jeWtmOWcqO+8jOWIm+W7ui/lt7LlrZjlnKjvvIzkvb/nlKjljp/mnIlsb2Fk5a+56LGhDQogICAgICAgIGlmICghdGhpcy5sb2FkaW5nSW5zKSB7DQogICAgICAgICAgLy/loavlhYVsb2FkaW5n5bGV56S66buY6K6k5YC877yM5YW85a655aSE55CGDQogICAgICAgICAgbGV0IGxvYWRJbnMgPSB7DQogICAgICAgICAgICBjbG9zZSgpIHt9DQogICAgICAgICAgfTsNCiAgICAgICAgICAvL+mcgOimgeWxleekumxvYWRpbmcNCiAgICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7DQogICAgICAgICAgICBsb2FkSW5zID0gTG9hZGluZy5zZXJ2aWNlKHsNCiAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLiRyZWZzLnRhYmxlLiRlbA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMubG9hZGluZ0lucyA9IGxvYWRJbnM7DQogICAgICAgIH0NCiAgICAgICAgbGV0IGFqYXhQYXJhbXMgPSB7DQogICAgICAgICAgLi4udGhpcy5hamF4UGFnZVBhcmFtcywNCiAgICAgICAgICAuLi50aGlzLmZvcm1EYXRhLA0KICAgICAgICAgIC4uLnRoaXMuc29ydFBhcmFtcw0KICAgICAgICB9Ow0KICAgICAgICAvL+iOt+WPlmZ1bmPlhaXlj4INCiAgICAgICAgbGV0IGRhdGFGdW4gPSB0aGlzLmFqYXhHZXREYXRhOw0KICAgICAgICAvL+WujOaIkOWbnuiwgw0KICAgICAgICBsZXQgY2FsbEZ1biA9IHJlcyA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJy0nLCB0QWpheENvdW50LCBhamF4Q291bnQsIHJlcywgdGhpcy5wYWdlUGFyYW1zKTsNCiAgICAgICAgICBpZiAodEFqYXhDb3VudCAhPSB0aGlzLmFqYXhDb3VudCkgcmV0dXJuOyAvL+W9k+WJjeivt+axgumdnuacgOaWsOivt+axgu+8jOi3s+i/h+WkhOeQhg0KICAgICAgICAgIHRoaXMubG9hZGluZ0lucy5jbG9zZSgpOyAvL+WFs+mXrWxvYWRpbmcNCiAgICAgICAgICB0aGlzLmxvYWRpbmdJbnMgPSBudWxsOyAvL+e9ruepumxvYWTnpLrkvosNCiAgICAgICAgICBpZiAoIXJlcykgcmV0dXJuOw0KICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEgfHwge307DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBBcnJheS5pc0FycmF5KGRhdGEucmVjb3JkcykgPyBkYXRhLnJlY29yZHMgOiBbXTsgLy/ooajmlbDmja4NCiAgICAgICAgICB0aGlzLnBhZ2VQYXJhbXMudG90YWwgPSBkYXRhLnRvdGFsIHx8IDA7IC8v5pWw5o2u6ZW/5bqmDQogICAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA9PT0gMCkgdGhpcy5wYWdlUGFyYW1zLnBhZ2UgPSAxOyAvL+aXoOaVsOaNruaXtu+8jOmHjeWumuWQkeesrOS4gOmhtQ0KICAgICAgICB9Ow0KICAgICAgICAvL2Z1bmPliKTpnZ7nqbrlubbmiafooYwNCiAgICAgICAgbGV0IGRhdGFQcm9taXNlID0gZGF0YUZ1biAmJiBkYXRhRnVuKGFqYXhQYXJhbXMpOw0KICAgICAgICAvL3Byb21pc2XmjqXmlLbov5Tlm57lgLwNCiAgICAgICAgaWYgKGRhdGFQcm9taXNlICYmIHR5cGVvZiBkYXRhUHJvbWlzZS50aGVuID09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICBQcm9taXNlLmFsbChbZGF0YVByb21pc2UsIHRoaXMuaGVhZGVyUHJvbWlzZV0pDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBjYWxsRnVuKHJlc1swXSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgICAgICAgICAgICBjYWxsRnVuKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjYWxsRnVuKCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqDQogICAgICog6I635Y+W5pyN5Yqh56uv5L+d5a2Y55qE5YiXL+etm+mAiemhuemFjee9ruS/oeaBrw0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIDE96KGo5aS05YiX5L+h5oGvICAyPeetm+mAiemhueS/oeaBrw0KICAgICAqLw0KICAgIGFqYXhHZXRTaG93RmlsdGVyRGF0YSh0eXBlID0gMSkgew0KICAgICAgbGV0IHsgc3lzdGVtLCBhamF4RmlsdGVyUXVlcnkgfSA9IHRoaXMuc3lzQ29uZmlnOw0KICAgICAgbGV0IGtleSA9IHRoaXMuZ2V0U2F2ZUtleSh0eXBlKTsNCiAgICAgIGlmICh0eXBlb2YgYWpheEZpbHRlclF1ZXJ5ID09ICdmdW5jdGlvbicpDQogICAgICAgIHJldHVybiBhamF4RmlsdGVyUXVlcnkoew0KICAgICAgICAgIHN5c3RlbSwNCiAgICAgICAgICBrZXkNCiAgICAgICAgfSk7DQogICAgICByZXR1cm4gW107DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDkv53lrZjmmL7npLrliJcv562b6YCJ6aG5DQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgMT3ooajlpLTliJfkv6Hmga8gIDI9562b6YCJ6aG55L+h5oGvDQogICAgICovDQogICAgYWpheFNhdmVGaWx0ZXJEYXRhKHBhcmFtcywgdHlwZSA9IDEpIHsNCiAgICAgIGxldCB7IHN5c3RlbSwgYWpheEZpbHRlclNhdmUgfSA9IHRoaXMuc3lzQ29uZmlnOw0KICAgICAgbGV0IGtleSA9IHRoaXMuZ2V0U2F2ZUtleSh0eXBlKTsNCiAgICAgIGlmICh0eXBlb2YgYWpheEZpbHRlclNhdmUgPT0gJ2Z1bmN0aW9uJykNCiAgICAgICAgcmV0dXJuIGFqYXhGaWx0ZXJTYXZlKHsNCiAgICAgICAgICBzeXN0ZW0sDQogICAgICAgICAga2V5LA0KICAgICAgICAgIGNvbHVtbnM6IHBhcmFtcw0KICAgICAgICB9KTsNCiAgICAgIHJldHVybiBbXTsNCiAgICB9LA0KICAgIC8v6KGo5Y2V5p+l6K+i6aG56aKE5aSE55CG77yM6buY6K6k562b6YCJ5pi+56S65pWw5o2u5LuO6L+c56iL5oiW5pys5Zyw6I635Y+W5bm26KaG55uWDQogICAgYXN5bmMgZGVhbFF1ZXJ5SXRlbXMoKSB7DQogICAgICBsZXQgZm9ybUl0ZW1zID0gdGhpcy5mb3JtSXRlbXM7DQogICAgICBsZXQgeyBhamF4RmlsdGVyUXVlcnksIGFqYXhGaWx0ZXJTYXZlIH0gPSB0aGlzLnN5c0NvbmZpZzsNCiAgICAgIC8v6ZyA6KaB4oCc5pi+56S65YiX4oCd5oyJ6ZKu5pe277yM6KGo5aS06ZyA6KaB6I635Y+W5pys5Zyw5oiW6L+c56iL5L+d5a2Y5pWw5o2uDQogICAgICBpZiAodGhpcy5zaG93UXVlcnlGaWx0ZXIpIHsNCiAgICAgICAgbGV0IHJlbW90ZVF1ZXJ5czsNCiAgICAgICAgLy/mnI3liqHnq6/kv53lrZgNCiAgICAgICAgaWYgKGFqYXhGaWx0ZXJRdWVyeSAmJiBhamF4RmlsdGVyU2F2ZSkgew0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5hamF4R2V0U2hvd0ZpbHRlckRhdGEoMik7DQogICAgICAgICAgICByZW1vdGVRdWVyeXMgPSByZXM7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncmVtb3RlLXF1ZXJ5cycsIHJlbW90ZVF1ZXJ5cyk7DQogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIHJlbW90ZVF1ZXJ5cyA9IFtdOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZW1vdGVRdWVyeXMgPSB0aGlzLmdldExvY2FsRmlsdGVyRGF0YSgyKTsNCiAgICAgICAgICBjb25zb2xlLmxvZygnbG9jYWwtcXVlcnlzJywgcmVtb3RlUXVlcnlzKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRlYWxDb2x1bW5zSGVhZGVyKGZvcm1JdGVtcywgcmVtb3RlUXVlcnlzKTsgLy/kvb/nlKjmnI3liqHnq6/mlbDmja7opobnm5bmnKzlnLDmlbDmja4NCiAgICAgIH0NCiAgICAgIC8v5a+5aGVhZGVy5YGa6buY6K6k6LWL5YC85aSE55CGDQogICAgICBmb3JtSXRlbXMgPSBmb3JtSXRlbXMubWFwKGhlYWRJdGVtID0+IHsNCiAgICAgICAgLy/liJ3lp4vpnIDopoHotYvlgLzlrZfmrrXvvIzlkKbliJnpobXpnaLml6Dms5XmoLnmja7lrZfmrrXlk43lupQNCiAgICAgICAgaGVhZEl0ZW0ucmVxdWlyZWQgPSBoZWFkSXRlbS5yZXF1aXJlZCB8fCBmYWxzZTsNCiAgICAgICAgaGVhZEl0ZW0uaGlkZGVuID0gaGVhZEl0ZW0uaGlkZGVuIHx8IGZhbHNlOw0KDQogICAgICAgIC8vIOS4i+aLiemAieaLqem7mOiupOWQr+eUqOa4hemZpOaMiemSruWKn+iDvQ0KICAgICAgICBpZiAoaGVhZEl0ZW0udHlwZSA9PT0gJ3NlbGVjdCcpIHsNCiAgICAgICAgICBsZXQgY2xlYXJhYmxlID0gaGVhZEl0ZW0uYXR0cnMgJiYgaGVhZEl0ZW0uYXR0cnMuY2xlYXJhYmxlOw0KICAgICAgICAgIGNsZWFyYWJsZSA9IGNsZWFyYWJsZSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGNsZWFyYWJsZTsNCiAgICAgICAgICBpZiAoIWhlYWRJdGVtLmF0dHJzKSBoZWFkSXRlbS5hdHRycyA9IHt9Ow0KICAgICAgICAgIGhlYWRJdGVtLmF0dHJzLmNsZWFyYWJsZSA9IGNsZWFyYWJsZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaGVhZEl0ZW07DQogICAgICB9KTsNCiAgICAgIHRoaXMuY29tcHV0ZWRGb3JtSXRlbXMgPSBmb3JtSXRlbXM7DQogICAgfSwNCiAgICAvL2hlYWRlcuS6jOasoeWwgeijhe+8jOWkhOeQhuWIhumhtei/lOWbnuaVsOaNrg0KICAgIGFzeW5jIGRlYWxIZWFkZXJzKCkgew0KICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLmhlYWRlcnM7DQogICAgICBsZXQgeyBhamF4RmlsdGVyUXVlcnksIGFqYXhGaWx0ZXJTYXZlIH0gPSB0aGlzLnN5c0NvbmZpZzsNCiAgICAgIC8v6ZyA6KaB4oCc5pi+56S65YiX4oCd5oyJ6ZKu5pe277yM6KGo5aS06ZyA6KaB6I635Y+W5pys5Zyw5oiW6L+c56iL5L+d5a2Y5pWw5o2uDQogICAgICBpZiAodGhpcy5zaG93Q29sdW1uKSB7DQogICAgICAgIGxldCByZW1vdGVIZWFkZXJzOw0KICAgICAgICAvL+acjeWKoeerr+S/neWtmA0KICAgICAgICBpZiAoYWpheEZpbHRlclF1ZXJ5ICYmIGFqYXhGaWx0ZXJTYXZlKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLmFqYXhHZXRTaG93RmlsdGVyRGF0YSgpOw0KICAgICAgICAgICAgcmVtb3RlSGVhZGVycyA9IHJlczsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdGUtaGVhZGVycycsIHJlbW90ZUhlYWRlcnMpOw0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICByZW1vdGVIZWFkZXJzID0gW107DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlbW90ZUhlYWRlcnMgPSB0aGlzLmdldExvY2FsRmlsdGVyRGF0YSgpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2NhbC1oZWFkZXJzJywgcmVtb3RlSGVhZGVycyk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kZWFsQ29sdW1uc0hlYWRlcihoZWFkZXJzLCByZW1vdGVIZWFkZXJzKTsgLy/kvb/nlKjmnI3liqHnq6/mlbDmja7opobnm5bmnKzlnLDmlbDmja4NCiAgICAgIH0NCiAgICAgIC8v5a+5aGVhZGVy5YGa6buY6K6k6LWL5YC85aSE55CGDQogICAgICB0aGlzLmNvbXB1dGVkSGVhZGVycyA9IGhlYWRlcnMubWFwKGhlYWRJdGVtID0+IHsNCiAgICAgICAgLy/liJ3lp4vpnIDopoHotYvlgLzlrZfmrrXvvIzlkKbliJnpobXpnaLml6Dms5XmoLnmja7lrZfmrrXlk43lupQNCiAgICAgICAgaGVhZEl0ZW0ucmVxdWlyZWQgPSBoZWFkSXRlbS5yZXF1aXJlZCB8fCBmYWxzZTsNCiAgICAgICAgaGVhZEl0ZW0uaGlkZGVuID0gaGVhZEl0ZW0uaGlkZGVuIHx8IGZhbHNlOw0KICAgICAgICBoZWFkSXRlbS5yZXNpemFibGUgPSBoZWFkSXRlbS5yZXNpemFibGUgfHwgZmFsc2U7DQogICAgICAgIGxldCBmdW4gPSBoZWFkSXRlbS5pbmRleDsNCiAgICAgICAgLy/luo/lj7fnsbvlnovvvIzooaXlhYXliIbpobXkv6Hmga/ov5Tlm54NCiAgICAgICAgaWYgKGhlYWRJdGVtLnR5cGUgPT0gJ2luZGV4JyAmJiB0eXBlb2YgZnVuID09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICBoZWFkSXRlbS5pbmRleCA9IGluZGV4ID0+DQogICAgICAgICAgICBmdW4oaW5kZXgsIHRoaXMucGFnZVBhcmFtcy5wYWdlLCB0aGlzLnBhZ2VQYXJhbXMubGltaXQpOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhlYWRJdGVtLmluZGV4KTsNCiAgICAgICAgfQ0KICAgICAgICAvLyDlpITnkIbnqbrmlbDmja7mmL7npLrmqKrmnaANCiAgICAgICAgbGV0IGZvcm1hdHRlciA9IGhlYWRJdGVtLmZvcm1hdHRlcjsNCiAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICBoZWFkSXRlbS5mb3JtYXR0ZXIgPSAoLi4uYXJncykgPT4gew0KICAgICAgICAgICAgbGV0IHJlcyA9IGZvcm1hdHRlci5hcHBseShudWxsLCBhcmdzKTsNCiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXJFbXB0eURhdGEocmVzKTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGhlYWRJdGVtLmZvcm1hdHRlciA9IChyb3csIGNvbCwgdmFsdWUpID0+IGZvcm1hdHRlckVtcHR5RGF0YSh2YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGhlYWRJdGVtOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDliJ3lp4vljJbphY3nva7vvIzku47lhajlsYDlj5bphY3nva4NCiAgICBpbml0Q29uZmlnKCkgew0KICAgICAgbGV0IGNvbmZpZyA9IGdldENvbmZpZygpOw0KICAgICAgbGV0IHsgc3lzdGVtLCBhamF4RmlsdGVyU2F2ZSwgYWpheEZpbHRlclF1ZXJ5IH0gPSB0aGlzLiRwcm9wczsNCiAgICAgIHRoaXMuc3lzQ29uZmlnLnN5c3RlbSA9IHN5c3RlbSAhPT0gdW5kZWZpbmVkID8gc3lzdGVtIDogY29uZmlnLnN5c3RlbTsNCiAgICAgIHRoaXMuc3lzQ29uZmlnLmFqYXhGaWx0ZXJTYXZlID0NCiAgICAgICAgYWpheEZpbHRlclNhdmUgIT09IHVuZGVmaW5lZCA/IGFqYXhGaWx0ZXJTYXZlIDogY29uZmlnLmFqYXhGaWx0ZXJTYXZlOw0KICAgICAgdGhpcy5zeXNDb25maWcuYWpheEZpbHRlclF1ZXJ5ID0NCiAgICAgICAgYWpheEZpbHRlclF1ZXJ5ICE9PSB1bmRlZmluZWQNCiAgICAgICAgICA/IGFqYXhGaWx0ZXJRdWVyeQ0KICAgICAgICAgIDogY29uZmlnLmFqYXhGaWx0ZXJRdWVyeTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiOt+WPluS/neWtmOWIl+aIluetm+mAiemhueeahGtleQ0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIDE96KGo5aS05YiX5L+h5oGvICAyPeetm+mAiemhueS/oeaBrw0KICAgICAqLw0KICAgIGdldFNhdmVLZXkodHlwZSkgew0KICAgICAgcmV0dXJuIHR5cGUgPT0gMSA/IHRoaXMuY29tcHV0ZWRTYXZlQ29sdW1uS2V5IDogdGhpcy5jb21wdXRlZFNhdmVRdWVyeUtleTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOS/neWtmOacrOWcsOWIly/nrZvpgInpobnmlbDmja4NCiAgICAgKiBAcGFyYW0ge0FycmF5fSBzYXZlRGF0YSDpnIDopoHkv53lrZjnmoTooajlpLTliJcv562b6YCJ6aG55pWw5o2uDQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgMT3pnIDopoHkv53lrZjnmoTooajlpLTliJcvMj3nrZvpgInpobnmlbDmja4NCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0g6L+U5ZuecHJvbWlzZeWvueixoQ0KICAgICAqLw0KICAgIHNhdmVMb2NhbEZpbHRlckRhdGEoc2F2ZURhdGEsIHR5cGUgPSAxKSB7DQogICAgICBsZXQga2V5ID0gdGhpcy5nZXRTYXZlS2V5KHR5cGUpOw0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhKSk7DQogICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIE1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubmFtZSArICc6JyArIGVycm9yLm1lc3NhZ2UsDQogICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZWplY3QoKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDojrflj5bmnKzlnLDliJfmlbDmja4NCiAgICAgKiBAcGFyYW0ge051bWJlcn0gdHlwZSAxPemcgOimgeS/neWtmOeahOihqOWktOWIly8yPeetm+mAiemhueaVsOaNrg0KICAgICAqLw0KICAgIGdldExvY2FsRmlsdGVyRGF0YSh0eXBlID0gMSkgew0KICAgICAgbGV0IGtleSA9IHRoaXMuZ2V0U2F2ZUtleSh0eXBlKTsNCiAgICAgIGxldCByZXN1bHQ7DQogICAgICB0cnkgew0KICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpIHx8IFtdOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgcmVzdWx0ID0gW107DQogICAgICB9DQogICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0sDQogICAgLyoqDQogICAgICog6I635Y+W5p+l6K+i5Y+C5pWwDQogICAgICovDQogICAgZ2V0UXVlcnlQYXJhbSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIC4uLnRoaXMuYWpheFBhZ2VQYXJhbXMsDQogICAgICAgIC4uLnRoaXMuZm9ybURhdGEsDQogICAgICAgIC4uLnRoaXMuc29ydFBhcmFtcw0KICAgICAgfTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOe7n+S4gOWkhOeQhuihqOWktOaVsOaNru+8jOacjeWKoeerr+aVsOaNruimhuebluacrOWcsOaVsOaNru+8iOaVsOaNruS7peacrOWcsOS4uuWHhu+8jOacrOWcsOS4jeWtmOWcqOeahOWIl+S4jeS9nOWkhOeQhu+8iQ0KICAgICAqIEBwYXJhbSB7QXJyYXl9IGxvY2FsTGlzdCDmnKzlnLDliJ3lp4vnmoTooajlpLTmlbDmja4NCiAgICAgKiBAcGFyYW0ge0FycmF5fSByZW1vdGVMaXN0IOacjeWKoeerr+mFjee9rueahOihqOWktOaVsOaNrg0KICAgICAqLw0KICAgIGRlYWxDb2x1bW5zSGVhZGVyKGxvY2FsTGlzdCwgcmVtb3RlTGlzdCkgew0KICAgICAgLy8gY29uc29sZS50aW1lKCdkZWFsQ29sdW1uc0hlYWRlci10aW1lJyk7DQogICAgICBsZXQgdGVtcFJlbW90ZUxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlbW90ZUxpc3QpKTsgLy/mi7fotJ3ov5znqIvmlbDmja4NCiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBsb2NhbExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgbGV0IGxvY2FsSXRlbSA9IGxvY2FsTGlzdFtpXTsNCiAgICAgICAgbGV0IGxvY2FsUHJvcCA9IGxvY2FsSXRlbS5wcm9wOw0KICAgICAgICAvL+aVsOaNruWFs+mUrmtleeS4jeWtmOWcqO+8jOatpOaVsOaNrumhueS4jeWBmuWkhOeQhg0KICAgICAgICBpZiAoIWxvY2FsUHJvcCkgew0KICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGVtcFJlbW90ZUxpc3QubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBsZXQgcmVtb3RlSXRlbSA9IHRlbXBSZW1vdGVMaXN0W2pdOw0KICAgICAgICAgIGxldCByZW1vdGVQcm9wID0gcmVtb3RlSXRlbS5wcm9wOw0KICAgICAgICAgIC8v5pWw5o2ua2V55LiA6Ie077yM6KaG55uW5pys5Zyw5pWw5o2u77yM5bm25Zyo5ou36LSd5pWw5o2u5Lit56e76Zmk5q2k6aG577yM5LiN5YGa6YeN5aSN5b6q546vDQogICAgICAgICAgaWYgKHJlbW90ZVByb3AgPT0gbG9jYWxQcm9wKSB7DQogICAgICAgICAgICBPYmplY3QuYXNzaWduKGxvY2FsSXRlbSwgcmVtb3RlSXRlbSwgew0KICAgICAgICAgICAgICByZXF1aXJlZDogbG9jYWxJdGVtLnJlcXVpcmVkLA0KICAgICAgICAgICAgICBsYWJlbDogbG9jYWxJdGVtLmxhYmVsIC8v5LyY5YWI5L2/55So5pys5Zyw5ZCN56ewDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRlbXBSZW1vdGVMaXN0LnNwbGljZShqLCAxKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdkZWFsQ29sdW1uc0hlYWRlci10aW1lJyk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDpobXnoIHliIfmjaINCiAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VyciDlvZPliY3pobXljaHntKLlvJUNCiAgICAgKi8NCiAgICAvLyBvblBnQ3VycmVudENoYW5nZShjdXJyKSB7DQogICAgLy8gICBjb25zb2xlLmxvZyhjdXJyKTsNCiAgICAvLyAgIHRoaXMucGFnZVBhcmFtcy5wYWdlID0gY3VycjsNCiAgICAvLyB9LA0KICAgIC8v5q+P6aG15bGV56S65pWw6YeP5YiH5o2iDQogICAgb25QZ1NpemVDaGFuZ2Uoc2l6ZSkgew0KICAgICAgdGhpcy5wYWdlUGFyYW1zLmxpbWl0ID0gc2l6ZTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOihqOWNleafpeivog0KICAgICAqLw0KICAgIG9uUXVlcnlGb3JtKCkgew0KICAgICAgdGhpcy4kZW1pdCgncXVlcnktZm9ybScpOw0KICAgICAgbGV0IHsgcGFnZSB9ID0gdGhpcy5wYWdlUGFyYW1zOw0KICAgICAgcGFnZSA9PT0gMSA/IHRoaXMuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpIDogKHRoaXMucGFnZVBhcmFtcy5wYWdlID0gMSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDooajljZXph43nva4NCiAgICAgKi8NCiAgICBvblJlc2V0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLnRoaXMuaW5pdGlhbEZvcm1EYXRhIH07DQogICAgICB0aGlzLiRyZWZzLmNEeW5hbWljRm9ybSAmJiB0aGlzLiRyZWZzLmNEeW5hbWljRm9ybS5pbml0KCk7DQogICAgICB0aGlzLiRlbWl0KCdyZXNldC1mb3JtJyk7DQogICAgfSwNCiAgICAvL+i/h+a7pOetm+mAieadoeS7tg0KICAgIGFzeW5jIG9uRmlsdGVyUXVlcnlDb25kaXRpb24oKSB7DQogICAgICBsZXQgeyBhamF4RmlsdGVyU2F2ZSwgYWpheEZpbHRlclF1ZXJ5IH0gPSB0aGlzLnN5c0NvbmZpZzsNCiAgICAgIGxldCBjaGVja0ZpbHRlclBsdWdpbiA9IChhd2FpdCBDRmlsdGVyQ2hlY2tQYW5lbCgpKS5kZWZhdWx0Ow0KICAgICAgLy/osIPnlKjmmL7npLrliJfmj5Lku7YNCiAgICAgIGNoZWNrRmlsdGVyUGx1Z2luLnNob3coew0KICAgICAgICBkYXRhOiB0aGlzLmZvcm1JdGVtcywgLy/mupDmlbDmja4gY2hlY2tib3jpm4blkIgNCiAgICAgICAgLy/ngrnlh7vmj5DkuqTml7bosIPnlKjnmoTmjqXlj6MNCiAgICAgICAgYWpheEZ1bjoNCiAgICAgICAgICBhamF4RmlsdGVyU2F2ZSAmJiBhamF4RmlsdGVyUXVlcnkNCiAgICAgICAgICAgID8gcGFyYW1zID0+IHRoaXMuYWpheFNhdmVGaWx0ZXJEYXRhKHBhcmFtcywgMikgLy/mnKzlnLDnvJPlrZgNCiAgICAgICAgICAgIDogcGFyYW1zID0+IHRoaXMuc2F2ZUxvY2FsRmlsdGVyRGF0YShwYXJhbXMsIDIpLCAvL+aOpeWPo+S/neWtmA0KICAgICAgICBzdWNjZXNzTXNnOiB0aGlzLnNhdmVTdWNjZXNzTXNnLA0KICAgICAgICBlcnJvck1zZzogdGhpcy5zYXZlRXJyb3JNc2cNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/nm5HlkKzpgInmi6nlj5jljJYNCiAgICBvblNlbGVjdGlvbkNoYW5nZShyb3dzKSB7DQogICAgICB0aGlzLnNlbGVjdFJvd3MgPSByb3dzOw0KICAgIH0sDQogICAgLy/nm5HlkKzmjpLluo/lj5jljJYNCiAgICBvblNvcnRDaGFuZ2UoeyBvcmRlciwgcHJvcCB9KSB7DQogICAgICB0aGlzLnNvcnRQYXJhbXMgPSB7DQogICAgICAgIG9yZGVyOiBvcmRlciA9PSAnYXNjZW5kaW5nJyA/ICdhc2MnIDogJ2Rlc2MnLA0KICAgICAgICBzb3J0OiBwcm9wDQogICAgICB9Ow0KICAgICAgdGhpcy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7DQogICAgfSwNCiAgICAvL+WIt+aWsHRhYmxlDQogICAgb25SZWZyZXNoVGFibGUoKSB7DQogICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsNCiAgICB9LA0KICAgIC8v5pi+56S65YiXDQogICAgYXN5bmMgb25DaGFuZ2VDb2x1bW4oKSB7DQogICAgICBsZXQgeyBhamF4RmlsdGVyU2F2ZSwgYWpheEZpbHRlclF1ZXJ5IH0gPSB0aGlzLnN5c0NvbmZpZzsNCiAgICAgIGxldCBjaGVja0ZpbHRlclBsdWdpbiA9IChhd2FpdCBDRmlsdGVyQ2hlY2tQYW5lbCgpKS5kZWZhdWx0Ow0KICAgICAgLy/osIPnlKjmmL7npLrliJfmj5Lku7YNCiAgICAgIGNoZWNrRmlsdGVyUGx1Z2luLnNob3coew0KICAgICAgICB0aXRsZTogJ+iHquWumuS5ieaYvuekuuWIlycsDQogICAgICAgIGRhdGE6IHRoaXMuaGVhZGVycywgLy/mupDmlbDmja4gY2hlY2tib3jpm4blkIgNCiAgICAgICAgLy/ngrnlh7vmj5DkuqTml7bosIPnlKjnmoTmjqXlj6MNCiAgICAgICAgYWpheEZ1bjoNCiAgICAgICAgICBhamF4RmlsdGVyU2F2ZSAmJiBhamF4RmlsdGVyUXVlcnkNCiAgICAgICAgICAgID8gdGhpcy5hamF4U2F2ZUZpbHRlckRhdGEgLy/mnKzlnLDnvJPlrZgNCiAgICAgICAgICAgIDogdGhpcy5zYXZlTG9jYWxGaWx0ZXJEYXRhLCAvL+aOpeWPo+S/neWtmA0KICAgICAgICBzdWNjZXNzTXNnOiB0aGlzLnNhdmVTdWNjZXNzTXNnLA0KICAgICAgICBlcnJvck1zZzogdGhpcy5zYXZlRXJyb3JNc2cNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqDQogICAgICog5piv5ZCm5pi+56S65oyJ6ZKuDQogICAgICogQHBhcmFtIHsqfSBidG4g5L+u5pS55YiX6KGoDQogICAgICovDQogICAgaXNIaWRkZW5CdXR0b24oYnRuKSB7DQogICAgICBsZXQgeyBoaWRkZW4gfSA9IGJ0bjsNCiAgICAgIGlmICh0eXBlb2YgaGlkZGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gaGlkZGVuKGJ0bik7DQogICAgICByZXR1cm4gaGlkZGVuOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/business/BTable","sourcesContent":["<template>\r\n  <div class=\"c-table\">\r\n    <c-dynamic-form\r\n      v-if=\"formItems && formItems.length\"\r\n      ref=\"cDynamicForm\"\r\n      :form-data=\"formData\"\r\n      :form-items=\"computedFormItems\"\r\n      :form-attrs=\"formAttrs\"\r\n      @change-model=\"model => (formData = model)\"\r\n      @keyup.enter.native=\"onQueryForm\"\r\n    >\r\n      <el-form-item slot=\"form-after\">\r\n        <el-button @click=\"onResetForm\">重置</el-button>\r\n        <el-button type=\"primary\" @click=\"onQueryForm\">查询</el-button>\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showQueryFilter\"\r\n          @click=\"onFilterQueryCondition\"\r\n          >设置筛选项</el-button\r\n        >\r\n      </el-form-item>\r\n    </c-dynamic-form>\r\n    <div class=\"toolbars\">\r\n      <div class=\"toolbars-left\">\r\n        <template v-for=\"(tool, index) in toolbars\">\r\n          <el-dropdown\r\n            v-if=\"tool.type === 'dropdown'\"\r\n            :key=\"index\"\r\n            size=\"small\"\r\n            @command=\"\r\n              command =>\r\n                typeof tool.command === 'function' &&\r\n                tool.command(command, selectRows)\r\n            \"\r\n          >\r\n            <el-button type=\"primary\" v-bind=\"tool.attrs\" size=\"small\">\r\n              {{ tool.label }}<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n            </el-button>\r\n            <el-dropdown-menu\r\n              v-if=\"tool.btns && tool.btns.length\"\r\n              slot=\"dropdown\"\r\n            >\r\n              <el-dropdown-item\r\n                v-for=\"(btn, i) in tool.btns\"\r\n                v-bind=\"btn.attrs\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                :key=\"'' + index + i\"\r\n                v-show=\"!isHiddenButton(tool)\"\r\n                @click.native=\"\r\n                  typeof btn.click === 'function' && btn.click(selectRows)\r\n                \"\r\n              >\r\n                {{ btn.label }}\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          <slot\r\n            v-else-if=\"tool.type === 'slot'\"\r\n            :name=\"'toolbars|' + tool.slotName\"\r\n            v-bind:rows=\"selectRows\"\r\n          />\r\n          <el-button\r\n            v-else\r\n            v-bind=\"tool.attrs\"\r\n            :key=\"index\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            v-show=\"!isHiddenButton(tool)\"\r\n            @click=\"typeof tool.click === 'function' && tool.click(selectRows)\"\r\n          >\r\n            {{ tool.label }}\r\n          </el-button>\r\n        </template>\r\n      </div>\r\n      <div class=\"toolbars-right\">\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showRefresh\"\r\n          size=\"small\"\r\n          @click=\"onRefreshTable\"\r\n          >刷新</el-button\r\n        >\r\n        <el-button\r\n          type=\"primary\"\r\n          v-if=\"showColumn\"\r\n          size=\"small\"\r\n          @click=\"onChangeColumn\"\r\n          >自定义显示列</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!-- <hl-table :data=\"data\" :headers=\"headers\"></hl-table> -->\r\n    <slot name=\"table-before\" />\r\n    <slot name=\"table-title\"></slot>\r\n    <c-table\r\n      :border=\"true\"\r\n      v-bind=\"$attrs\"\r\n      v-on=\"$listeners\"\r\n      size=\"small\"\r\n      :data=\"tableData\"\r\n      :headers=\"computedHeaders\"\r\n      @selection-change=\"onSelectionChange\"\r\n      @sort-change=\"onSortChange\"\r\n      ref=\"table\"\r\n    >\r\n      <!-- 自定义列插槽 -->\r\n      <template\r\n        v-for=\"col in headers\"\r\n        :slot=\"'column|' + (col.slotName || col.prop)\"\r\n        slot-scope=\"scope\"\r\n      >\r\n        <slot\r\n          :name=\"'column|' + (col.slotName || col.prop)\"\r\n          :row=\"scope.row\"\r\n          :$index=\"scope.$index\"\r\n        ></slot>\r\n      </template>\r\n    </c-table>\r\n    <el-pagination\r\n      background\r\n      layout=\"total, prev, pager, next, sizes, slot, jumper\"\r\n      :page-sizes=\"pageSizes\"\r\n      :total=\"pageParams.total\"\r\n      :current-page.sync=\"pageParams.page\"\r\n      :page-size=\"pageParams.limit\"\r\n      :style=\"{ 'margin-top': pgMarginTop + 'px' }\"\r\n      @size-change=\"onPgSizeChange\"\r\n    >\r\n      <span class=\"el-pagination-slot\">跳至</span>\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nlet CFilterCheckPanel = () =>\r\n  import('@/components/common/CFilterCheckPanel/index.js');\r\nimport axios from '@/plugins/axios';\r\nimport { Button, Pagination, Loading, FormItem, Message } from 'element-ui';\r\nimport CDynamicForm from '../../common/CDynamicForm';\r\nimport CTable from '../../common/CTable';\r\nimport { getConfig } from './config';\r\n/**\r\n * 格式化空数据显示\r\n */\r\nlet formatterEmptyData = str =>\r\n  ['', null, undefined].indexOf(str) >= 0 ? '-' : str;\r\nexport default {\r\n  name: 'BTable',\r\n  props: {\r\n    //数据查询是否展示loading\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //数据查询func，返回promise对象\r\n    ajaxGetData: {\r\n      type: Function,\r\n      default: () => {}\r\n    },\r\n    //保存筛选结果（显示列/筛选项）\r\n    ajaxFilterSave: {\r\n      type: Function\r\n    },\r\n    //查询筛选结果（显示列/筛选项）\r\n    ajaxFilterQuery: {\r\n      type: Function\r\n    },\r\n    //表头数组\r\n    headers: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //分页组件与表间距\r\n    pgMarginTop: {\r\n      type: Number,\r\n      default: 20\r\n    },\r\n    //每页展示数量选择\r\n    pageSizes: {\r\n      type: Array,\r\n      default: () => [10, 50, 100, 500, 1000]\r\n    },\r\n    //默认每页展示数量\r\n    pageLimit: {\r\n      type: Number,\r\n      default: 50\r\n    },\r\n    // 表单配置\r\n    formItems: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 初始化表单数据\r\n    initialFormData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    // 工具栏\r\n    toolbars: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    //显示刷新按钮\r\n    showRefresh: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //显示列\r\n    showColumn: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //显示筛选项按钮\r\n    showQueryFilter: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    //保存column列显示所使用的的key\r\n    saveColumnKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    //保存筛选项显示所使用的的key\r\n    saveQueryKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    //项目系统(用于保存列数据时的参数)\r\n    system: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    //保存列对应的成功提示文案\r\n    saveSuccessMsg: {\r\n      type: String,\r\n      default: '保存成功'\r\n    },\r\n    //保存列对应的失败提示文案\r\n    saveErrorMsg: {\r\n      type: String,\r\n      default: '数据保存失败'\r\n    },\r\n    /**\r\n     * 立即加载\r\n     */\r\n    immediateLoad: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n    /**\r\n     * 行数据键值\r\n     */\r\n    // rowKey: {\r\n    //   type: [Function, String]\r\n    // },\r\n    // expandRowKeys: {\r\n    //   type: Array\r\n    // }\r\n  },\r\n  components: {\r\n    CTable,\r\n    ElPagination: Pagination,\r\n    CDynamicForm,\r\n    [FormItem.name]: FormItem,\r\n    [Button.name]: Button\r\n  },\r\n  data() {\r\n    return {\r\n      headerPromise: null,\r\n      computedHeaders: [],\r\n      computedFormItems: [],\r\n      ajaxCount: 0,\r\n      selectRows: [],\r\n      loadingIns: null,\r\n      //分页参数\r\n      pageParams: {\r\n        total: 0,\r\n        offset: 0,\r\n        limit: this.pageLimit,\r\n        page: 1\r\n      },\r\n      //排序参数\r\n      sortParams: {\r\n        sort: undefined,\r\n        order: undefined\r\n      },\r\n      tableData: [],\r\n      // 表单数据\r\n      formData: { ...this.initialFormData },\r\n      // 表单数据\r\n      formAttrs: {\r\n        inline: true,\r\n        size: 'small'\r\n      },\r\n      // 是否是数组\r\n      isArray: arr => Array.isArray(arr),\r\n      sysConfig: {} //根据配置参数及prop入参，动态配置\r\n    };\r\n  },\r\n  watch: {\r\n    //每页展示数量变化\r\n    'pageParams.limit'() {\r\n      let { page } = this.pageParams;\r\n      if (page == 1) {\r\n        //在第一页修改每页数量时，触发重新请求\r\n        this.ajaxGetTableDataByPage();\r\n      } else {\r\n        //非首页修改，将页码改为首页，触发页码更新监听\r\n        this.pageParams.page = 1;\r\n      }\r\n    },\r\n    //当前页码变化\r\n    'pageParams.page'() {\r\n      let { page, limit } = this.pageParams;\r\n      this.pageParams.offset = limit * (page - 1);\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    // 数据变化\r\n    tableData() {\r\n      this.$emit('table-data-change', this.tableData);\r\n    },\r\n    formItems() {\r\n      //formItems 变化处理\r\n      this.dealQueryItems();\r\n    }\r\n  },\r\n  computed: {\r\n    //请求入参\r\n    ajaxPageParams() {\r\n      // let param = this.pageParams;\r\n      let { offset, limit, page } = this.pageParams;\r\n      return { offset, limit, pageSize: limit, pageNum: page };\r\n    },\r\n    //存储列数据所用key\r\n    computedSaveColumnKey() {\r\n      if (this.saveColumnKey) return this.saveColumnKey;\r\n      let key;\r\n      try {\r\n        key = this.$route.path;\r\n      } catch (error) {\r\n        key = 'default';\r\n      }\r\n      return 'table|' + key;\r\n    },\r\n    //存储筛选项所用key\r\n    computedSaveQueryKey() {\r\n      if (this.saveQueryKey) return this.saveQueryKey;\r\n      let key;\r\n      try {\r\n        key = this.$route.path;\r\n      } catch (error) {\r\n        key = 'default';\r\n      }\r\n      return 'query|' + key;\r\n    }\r\n  },\r\n  created() {\r\n    this.initConfig(); //默认配置初始化\r\n    this.headerPromise = this.dealHeaders(); //表头处理\r\n    this.dealQueryItems(); //表单查询项处理\r\n  },\r\n  mounted() {\r\n    this.immediateLoad && this.ajaxGetTableDataByPage();\r\n  },\r\n  methods: {\r\n    //分页接口请求数据处理\r\n    ajaxGetTableDataByPage() {\r\n      (this.$refs.cDynamicForm\r\n        ? this.$refs.cDynamicForm.validate()\r\n        : Promise.resolve()\r\n      ).then(() => {\r\n        let tAjaxCount = ++this.ajaxCount;\r\n        let lastLoadingMap = this.lastLoadingMap;\r\n        if (!this.$refs.table) return; //查询中途实例被销毁，终端\r\n        //默认load实例不存在，创建/已存在，使用原有load对象\r\n        if (!this.loadingIns) {\r\n          //填充loading展示默认值，兼容处理\r\n          let loadIns = {\r\n            close() {}\r\n          };\r\n          //需要展示loading\r\n          if (this.loading) {\r\n            loadIns = Loading.service({\r\n              target: this.$refs.table.$el\r\n            });\r\n          }\r\n          this.loadingIns = loadIns;\r\n        }\r\n        let ajaxParams = {\r\n          ...this.ajaxPageParams,\r\n          ...this.formData,\r\n          ...this.sortParams\r\n        };\r\n        //获取func入参\r\n        let dataFun = this.ajaxGetData;\r\n        //完成回调\r\n        let callFun = res => {\r\n          // console.log('-', tAjaxCount, ajaxCount, res, this.pageParams);\r\n          if (tAjaxCount != this.ajaxCount) return; //当前请求非最新请求，跳过处理\r\n          this.loadingIns.close(); //关闭loading\r\n          this.loadingIns = null; //置空load示例\r\n          if (!res) return;\r\n          let data = res.data || {};\r\n          this.tableData = Array.isArray(data.records) ? data.records : []; //表数据\r\n          this.pageParams.total = data.total || 0; //数据长度\r\n          if (this.tableData.length === 0) this.pageParams.page = 1; //无数据时，重定向第一页\r\n        };\r\n        //func判非空并执行\r\n        let dataPromise = dataFun && dataFun(ajaxParams);\r\n        //promise接收返回值\r\n        if (dataPromise && typeof dataPromise.then == 'function') {\r\n          Promise.all([dataPromise, this.headerPromise])\r\n            .then(res => {\r\n              callFun(res[0]);\r\n            })\r\n            .catch(e => {\r\n              console.error(e);\r\n              callFun();\r\n            });\r\n        } else {\r\n          callFun();\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取服务端保存的列/筛选项配置信息\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    ajaxGetShowFilterData(type = 1) {\r\n      let { system, ajaxFilterQuery } = this.sysConfig;\r\n      let key = this.getSaveKey(type);\r\n      if (typeof ajaxFilterQuery == 'function')\r\n        return ajaxFilterQuery({\r\n          system,\r\n          key\r\n        });\r\n      return [];\r\n    },\r\n    /**\r\n     * 保存显示列/筛选项\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    ajaxSaveFilterData(params, type = 1) {\r\n      let { system, ajaxFilterSave } = this.sysConfig;\r\n      let key = this.getSaveKey(type);\r\n      if (typeof ajaxFilterSave == 'function')\r\n        return ajaxFilterSave({\r\n          system,\r\n          key,\r\n          columns: params\r\n        });\r\n      return [];\r\n    },\r\n    //表单查询项预处理，默认筛选显示数据从远程或本地获取并覆盖\r\n    async dealQueryItems() {\r\n      let formItems = this.formItems;\r\n      let { ajaxFilterQuery, ajaxFilterSave } = this.sysConfig;\r\n      //需要“显示列”按钮时，表头需要获取本地或远程保存数据\r\n      if (this.showQueryFilter) {\r\n        let remoteQuerys;\r\n        //服务端保存\r\n        if (ajaxFilterQuery && ajaxFilterSave) {\r\n          try {\r\n            let res = await this.ajaxGetShowFilterData(2);\r\n            remoteQuerys = res;\r\n            console.log('remote-querys', remoteQuerys);\r\n          } catch (error) {\r\n            remoteQuerys = [];\r\n          }\r\n        } else {\r\n          remoteQuerys = this.getLocalFilterData(2);\r\n          console.log('local-querys', remoteQuerys);\r\n        }\r\n        this.dealColumnsHeader(formItems, remoteQuerys); //使用服务端数据覆盖本地数据\r\n      }\r\n      //对header做默认赋值处理\r\n      formItems = formItems.map(headItem => {\r\n        //初始需要赋值字段，否则页面无法根据字段响应\r\n        headItem.required = headItem.required || false;\r\n        headItem.hidden = headItem.hidden || false;\r\n\r\n        // 下拉选择默认启用清除按钮功能\r\n        if (headItem.type === 'select') {\r\n          let clearable = headItem.attrs && headItem.attrs.clearable;\r\n          clearable = clearable === undefined ? true : clearable;\r\n          if (!headItem.attrs) headItem.attrs = {};\r\n          headItem.attrs.clearable = clearable;\r\n        }\r\n        return headItem;\r\n      });\r\n      this.computedFormItems = formItems;\r\n    },\r\n    //header二次封装，处理分页返回数据\r\n    async dealHeaders() {\r\n      let headers = this.headers;\r\n      let { ajaxFilterQuery, ajaxFilterSave } = this.sysConfig;\r\n      //需要“显示列”按钮时，表头需要获取本地或远程保存数据\r\n      if (this.showColumn) {\r\n        let remoteHeaders;\r\n        //服务端保存\r\n        if (ajaxFilterQuery && ajaxFilterSave) {\r\n          try {\r\n            let res = await this.ajaxGetShowFilterData();\r\n            remoteHeaders = res;\r\n            console.log('remote-headers', remoteHeaders);\r\n          } catch (error) {\r\n            remoteHeaders = [];\r\n          }\r\n        } else {\r\n          remoteHeaders = this.getLocalFilterData();\r\n          console.log('local-headers', remoteHeaders);\r\n        }\r\n        this.dealColumnsHeader(headers, remoteHeaders); //使用服务端数据覆盖本地数据\r\n      }\r\n      //对header做默认赋值处理\r\n      this.computedHeaders = headers.map(headItem => {\r\n        //初始需要赋值字段，否则页面无法根据字段响应\r\n        headItem.required = headItem.required || false;\r\n        headItem.hidden = headItem.hidden || false;\r\n        headItem.resizable = headItem.resizable || false;\r\n        let fun = headItem.index;\r\n        //序号类型，补充分页信息返回\r\n        if (headItem.type == 'index' && typeof fun == 'function') {\r\n          headItem.index = index =>\r\n            fun(index, this.pageParams.page, this.pageParams.limit);\r\n          // console.log(headItem.index);\r\n        }\r\n        // 处理空数据显示横杠\r\n        let formatter = headItem.formatter;\r\n        if (typeof formatter === 'function') {\r\n          headItem.formatter = (...args) => {\r\n            let res = formatter.apply(null, args);\r\n            return formatterEmptyData(res);\r\n          };\r\n        } else {\r\n          headItem.formatter = (row, col, value) => formatterEmptyData(value);\r\n        }\r\n        return headItem;\r\n      });\r\n    },\r\n    // 初始化配置，从全局取配置\r\n    initConfig() {\r\n      let config = getConfig();\r\n      let { system, ajaxFilterSave, ajaxFilterQuery } = this.$props;\r\n      this.sysConfig.system = system !== undefined ? system : config.system;\r\n      this.sysConfig.ajaxFilterSave =\r\n        ajaxFilterSave !== undefined ? ajaxFilterSave : config.ajaxFilterSave;\r\n      this.sysConfig.ajaxFilterQuery =\r\n        ajaxFilterQuery !== undefined\r\n          ? ajaxFilterQuery\r\n          : config.ajaxFilterQuery;\r\n    },\r\n    /**\r\n     * 获取保存列或筛选项的key\r\n     * @param {Number} type 1=表头列信息  2=筛选项信息\r\n     */\r\n    getSaveKey(type) {\r\n      return type == 1 ? this.computedSaveColumnKey : this.computedSaveQueryKey;\r\n    },\r\n    /**\r\n     * 保存本地列/筛选项数据\r\n     * @param {Array} saveData 需要保存的表头列/筛选项数据\r\n     * @param {Number} type 1=需要保存的表头列/2=筛选项数据\r\n     * @returns {Promise} 返回promise对象\r\n     */\r\n    saveLocalFilterData(saveData, type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          localStorage.setItem(key, JSON.stringify(saveData));\r\n          resolve();\r\n        } catch (error) {\r\n          Message({\r\n            message: error.name + ':' + error.message,\r\n            type: 'warning',\r\n            duration: 5 * 1000\r\n          });\r\n          reject();\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 获取本地列数据\r\n     * @param {Number} type 1=需要保存的表头列/2=筛选项数据\r\n     */\r\n    getLocalFilterData(type = 1) {\r\n      let key = this.getSaveKey(type);\r\n      let result;\r\n      try {\r\n        result = JSON.parse(localStorage.getItem(key)) || [];\r\n      } catch (error) {\r\n        result = [];\r\n      }\r\n      return result;\r\n    },\r\n    /**\r\n     * 获取查询参数\r\n     */\r\n    getQueryParam() {\r\n      return {\r\n        ...this.ajaxPageParams,\r\n        ...this.formData,\r\n        ...this.sortParams\r\n      };\r\n    },\r\n    /**\r\n     * 统一处理表头数据，服务端数据覆盖本地数据（数据以本地为准，本地不存在的列不作处理）\r\n     * @param {Array} localList 本地初始的表头数据\r\n     * @param {Array} remoteList 服务端配置的表头数据\r\n     */\r\n    dealColumnsHeader(localList, remoteList) {\r\n      // console.time('dealColumnsHeader-time');\r\n      let tempRemoteList = JSON.parse(JSON.stringify(remoteList)); //拷贝远程数据\r\n      for (let i = 0, len = localList.length; i < len; i++) {\r\n        let localItem = localList[i];\r\n        let localProp = localItem.prop;\r\n        //数据关键key不存在，此数据项不做处理\r\n        if (!localProp) {\r\n          continue;\r\n        }\r\n        for (let j = 0; j < tempRemoteList.length; j++) {\r\n          let remoteItem = tempRemoteList[j];\r\n          let remoteProp = remoteItem.prop;\r\n          //数据key一致，覆盖本地数据，并在拷贝数据中移除此项，不做重复循环\r\n          if (remoteProp == localProp) {\r\n            Object.assign(localItem, remoteItem, {\r\n              required: localItem.required,\r\n              label: localItem.label //优先使用本地名称\r\n            });\r\n            tempRemoteList.splice(j, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      // console.timeEnd('dealColumnsHeader-time');\r\n    },\r\n    /**\r\n     * 页码切换\r\n     * @param {Number} curr 当前页卡索引\r\n     */\r\n    // onPgCurrentChange(curr) {\r\n    //   console.log(curr);\r\n    //   this.pageParams.page = curr;\r\n    // },\r\n    //每页展示数量切换\r\n    onPgSizeChange(size) {\r\n      this.pageParams.limit = size;\r\n    },\r\n    /**\r\n     * 表单查询\r\n     */\r\n    onQueryForm() {\r\n      this.$emit('query-form');\r\n      let { page } = this.pageParams;\r\n      page === 1 ? this.ajaxGetTableDataByPage() : (this.pageParams.page = 1);\r\n    },\r\n    /**\r\n     * 表单重置\r\n     */\r\n    onResetForm() {\r\n      this.formData = { ...this.initialFormData };\r\n      this.$refs.cDynamicForm && this.$refs.cDynamicForm.init();\r\n      this.$emit('reset-form');\r\n    },\r\n    //过滤筛选条件\r\n    async onFilterQueryCondition() {\r\n      let { ajaxFilterSave, ajaxFilterQuery } = this.sysConfig;\r\n      let checkFilterPlugin = (await CFilterCheckPanel()).default;\r\n      //调用显示列插件\r\n      checkFilterPlugin.show({\r\n        data: this.formItems, //源数据 checkbox集合\r\n        //点击提交时调用的接口\r\n        ajaxFun:\r\n          ajaxFilterSave && ajaxFilterQuery\r\n            ? params => this.ajaxSaveFilterData(params, 2) //本地缓存\r\n            : params => this.saveLocalFilterData(params, 2), //接口保存\r\n        successMsg: this.saveSuccessMsg,\r\n        errorMsg: this.saveErrorMsg\r\n      });\r\n    },\r\n    //监听选择变化\r\n    onSelectionChange(rows) {\r\n      this.selectRows = rows;\r\n    },\r\n    //监听排序变化\r\n    onSortChange({ order, prop }) {\r\n      this.sortParams = {\r\n        order: order == 'ascending' ? 'asc' : 'desc',\r\n        sort: prop\r\n      };\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    //刷新table\r\n    onRefreshTable() {\r\n      this.ajaxGetTableDataByPage();\r\n    },\r\n    //显示列\r\n    async onChangeColumn() {\r\n      let { ajaxFilterSave, ajaxFilterQuery } = this.sysConfig;\r\n      let checkFilterPlugin = (await CFilterCheckPanel()).default;\r\n      //调用显示列插件\r\n      checkFilterPlugin.show({\r\n        title: '自定义显示列',\r\n        data: this.headers, //源数据 checkbox集合\r\n        //点击提交时调用的接口\r\n        ajaxFun:\r\n          ajaxFilterSave && ajaxFilterQuery\r\n            ? this.ajaxSaveFilterData //本地缓存\r\n            : this.saveLocalFilterData, //接口保存\r\n        successMsg: this.saveSuccessMsg,\r\n        errorMsg: this.saveErrorMsg\r\n      });\r\n    },\r\n    /**\r\n     * 是否显示按钮\r\n     * @param {*} btn 修改列表\r\n     */\r\n    isHiddenButton(btn) {\r\n      let { hidden } = btn;\r\n      if (typeof hidden === 'function') return hidden(btn);\r\n      return hidden;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.toolbars {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.el-button + .el-dropdown,\r\n.el-dropdown + .el-button {\r\n  margin-left: 10px;\r\n}\r\n.el-pagination-slot {\r\n  color: @normal-txt;\r\n  font-weight: normal;\r\n  margin-right: -54px;\r\n  background: #fff;\r\n  display: inline-block;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n</style>\r\n"]}]}