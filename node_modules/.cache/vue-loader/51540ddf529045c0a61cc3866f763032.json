{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/AchievementStatistics/index.vue?vue&type=style&index=0&id=369e9f46&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/views/StatisticalChart/AchievementStatistics/index.vue","mtime":1627979214288},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGVvcGxlLW51bS1ib3ggewogIG1pbi1oZWlnaHQ6IGNhbGMoMTAwdmggLSA1MHB4KTsKICB3aWR0aDogMTAwJTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBtYXJnaW46IDI1cHggNTBweDsKICAuYmFyQ2hhcnQgewogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIC5ib3gtY2FyZCB7CiAgICAgIHdpZHRoOiA5NiU7CiAgICAgIG1hcmdpbjogMCAyJTsKICAgICAgLmhlYWRlci10aXAgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBwIHsKICAgICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODUpOwogICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CiAgICAgICAgc3BhbiB7CiAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICB3aWR0aDogNThweDsKICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMzYjc4ZTM7CiAgICAgICAgICBjb2xvcjogIzNiNzhlMzsKICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB9CiAgICAgICAgc3Bhbi5kaXNhYmxlZCB7CiAgICAgICAgICBib3JkZXItY29sb3I6ICNjMGM0Y2M7CiAgICAgICAgICBjb2xvcjogI2MwYzRjYzsKICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC5tb250aFRhYiB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgLnRhYkNvbiB7CiAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgIHAgewogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNDUpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgIH0KICAgICAgICAgIHAuYWN0aXZlZFN0eWxlIHsKICAgICAgICAgICAgY29sb3I6ICMzYjc4ZTM7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICB9CiAgICAgICAgICBwLmFjdGl2ZWRTdHlsZTo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogMTRweDsKICAgICAgICAgICAgaGVpZ2h0OiAxcHg7CiAgICAgICAgICAgIGJvdHRvbTogLTVweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogLTdweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2I3OGUzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQovZGVlcC8uZWwtY2FyZF9fYm9keSB7CiAgcGFkZGluZzogMTVweDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/charity-foundation/views/StatisticalChart/AchievementStatistics","sourcesContent":["<template>\n  <div class=\"people-num-box\">\n    <div class=\"barChart\">\n      <el-col :span=\"12\" v-loading=\"orphanLoading\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>雏鹰高飞孤儿培养工程学员成绩情况</p>\n            <span\n              @click=\"exportOrphanFn\"\n              :class=\"orphanList && orphanList.length > 0 ? '' : 'disabled'\"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"monthTab\">\n            <div class=\"tabCon\">\n              <p\n                v-for=\"(item, index) in orphanSelectList\"\n                :key=\"index\"\n                @click=\"changeOrphanGradeType(index)\"\n                :class=\"activeOrphan === index ? 'activedStyle' : ''\"\n              >\n                {{ item }}\n              </p>\n            </div>\n            <div class=\"PaginationBox\"></div>\n          </div>\n          <div class=\"achievement-table-box\">\n            <achievement-table\n              @handleSelectionChange=\"getOrphanData\"\n              :currentPage.sync=\"orphanCurrentPage\"\n              :total=\"orphanToatl\"\n              :pageSize=\"5\"\n              :tableData=\"orphanList\"\n              @handleCurrentChange=\"handlerOrphanCurrent\"\n            ></achievement-table>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\" v-loading=\"poorLoading\">\n        <el-card class=\"box-card\">\n          <div class=\"header-tip\">\n            <p>贫困少年英才培养工程学员成绩情况</p>\n            <span\n              @click=\"exportPoorFn\"\n              :class=\"poorList && poorList.length > 0 ? '' : 'disabled'\"\n              >一键导出</span\n            >\n          </div>\n          <div class=\"monthTab\">\n            <div class=\"tabCon\">\n              <p\n                v-for=\"(item, index) in poorSelectList\"\n                :key=\"index\"\n                @click=\"changePoorGradeType(index)\"\n                :class=\"activePoor === index ? 'activedStyle' : ''\"\n              >\n                {{ item }}\n              </p>\n            </div>\n            <div class=\"PaginationBox\"></div>\n          </div>\n          <div class=\"achievement-table-box\">\n            <achievement-table\n              @handleSelectionChange=\"getPoorData\"\n              :currentPage.sync=\"poorCurrentPage\"\n              :total=\"poorToatl\"\n              :pageSize=\"5\"\n              :tableData=\"poorList\"\n              @handleCurrentChange=\"handlerPoorCurrent\"\n            ></achievement-table>\n          </div>\n        </el-card>\n      </el-col>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Col, Card } from 'element-ui';\nimport AchievementTable from '../components/AchievementTable/index';\nimport {\n  getChuYingScoreList,\n  getYinCaiScoreList,\n  exportHistoryScore\n} from '../../../api/statistics/index';\nexport default {\n  name: 'AchievementStatistics',\n  components: {\n    [Col.name]: Col,\n    [Card.name]: Card,\n    AchievementTable\n  },\n  data() {\n    return {\n      orphanLoading: false,\n      poorLoading: false,\n      poorSelectList: ['小学', '初中', '高中', '大学'],\n      orphanSelectList: ['小学', '初中', '高中', '大学'],\n      selectOrphan: [], // 选中的雏鹰高飞列表\n      orphanList: [], // 雏鹰学生列表\n      selectPoor: [], // 选中的贫困少年列表\n      poorList: [], // 贫困少年列表\n      activeOrphan: 0, // 雏鹰高飞孤儿培养展示类型\n      activePoor: 0, // 贫困少年英才培养展示类型\n      orphanCurrentPage: 1, //雏鹰高飞孤儿培养当前页\n      poorCurrentPage: 1, // 贫困少年英才培养当前页\n      orphanToatl: 0, //雏鹰高飞孤儿培养总数\n      poorToatl: 0 // 贫困少年英才培养总数\n    };\n  },\n  mounted() {\n    this.initData();\n  },\n  methods: {\n    initData() {\n      this.getChuYingScoreList();\n      this.getYinCaiScoreList();\n    },\n    getChuYingScoreList() {\n      this.orphanLoading = true;\n      this.orphanToatl = 0;\n      this.orphanList = [];\n      let params = {\n        limit: 5,\n        offset: this.orphanCurrentPage,\n        gradeType: this.activeOrphan\n      };\n      getChuYingScoreList(params).then(res => {\n        this.orphanLoading = false;\n        this.orphanToatl = res.data.total;\n        this.orphanList = res.data.records;\n      });\n    },\n    getYinCaiScoreList() {\n      this.poorLoading = true;\n      this.poorToatl = 0;\n      this.poorList = [];\n      let params = {\n        limit: 5,\n        offset: this.poorCurrentPage,\n        gradeType: this.activePoor\n      };\n      getYinCaiScoreList(params).then(res => {\n        this.poorLoading = false;\n        this.poorToatl = res.data.total;\n        this.poorList = res.data.records;\n      });\n    },\n    changeOrphanGradeType(index) {\n      this.activeOrphan = index;\n      this.getChuYingScoreList();\n    },\n    changePoorGradeType(index) {\n      this.activePoor = index;\n      this.getYinCaiScoreList();\n    },\n    /*\n     * 导出雏鹰高飞\n     */\n    exportOrphanFn() {\n      if (!this.orphanList || this.orphanList.length <= 0) {\n        return false;\n      }\n      let params = {};\n      let stundetInformationIds = '';\n      let studentNames = '';\n      if (Array.isArray(this.selectOrphan) && this.selectOrphan.length > 0) {\n        this.selectOrphan.forEach(item => {\n          stundetInformationIds += `${item.informationId},`;\n          studentNames += `${item.name},`;\n        });\n      } else {\n        this.orphanList.forEach(item => {\n          stundetInformationIds += `${item.informationId},`;\n          studentNames += `${item.name},`;\n        });\n      }\n      params = {\n        stundetInformationIds: stundetInformationIds.substring(\n          0,\n          stundetInformationIds.length - 1\n        ),\n        type: 0,\n        studentNames: studentNames.substring(0, studentNames.length - 1)\n      };\n      exportHistoryScore(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', '雏鹰高飞孤儿培养工程学员历史成绩.xls');\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    },\n    /*\n     * 导出贫困少年\n     */\n    exportPoorFn() {\n      if (!this.poorList || this.poorList.length <= 0) {\n        return false;\n      }\n      let params = {};\n      let stundetInformationIds = '';\n      let studentNames = '';\n      if (Array.isArray(this.selectPoor) && this.selectPoor.length > 0) {\n        this.selectPoor.forEach(item => {\n          stundetInformationIds += `${item.informationId},`;\n          studentNames += `${item.name},`;\n        });\n      } else {\n        this.poorList.forEach(item => {\n          stundetInformationIds += `${item.informationId},`;\n          studentNames += `${item.name},`;\n        });\n      }\n      params = {\n        stundetInformationIds: stundetInformationIds.substring(\n          0,\n          stundetInformationIds.length - 1\n        ),\n        type: 1,\n        studentNames: studentNames.substring(0, studentNames.length - 1)\n      };\n      exportHistoryScore(params).then(res => {\n        const blob = new Blob([res], {\n          type: 'application/vnd.ms-excel'\n        });\n        let link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.setAttribute('download', '贫困少年英才培养工程学员历史成绩.xls');\n        link.click();\n        link = null;\n        this.$message.success('导出成功');\n      });\n    },\n    /*\n     * 获取雏鹰高飞列表选中数据\n     */\n    getOrphanData(item) {\n      this.selectOrphan = item;\n    },\n    /*\n     * 雏鹰高飞列表翻页\n     */\n    handlerOrphanCurrent(val) {\n      this.poorCurrentPage = val;\n      this.getChuYingScoreList();\n    },\n    /*\n     * 贫困少年列表选中数据\n     */\n    getPoorData(item) {\n      this.selectPoor = item;\n    },\n    /*\n     * 获取贫困少年列表翻页\n     */\n    handlerPoorCurrent(val) {\n      this.poorCurrentPage = val;\n      this.getYinCaiScoreList();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.people-num-box {\n  min-height: calc(100vh - 50px);\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  margin: 25px 50px;\n  .barChart {\n    overflow: hidden;\n    .box-card {\n      width: 96%;\n      margin: 0 2%;\n      .header-tip {\n        display: flex;\n        align-items: center;\n        p {\n          color: rgba(0, 0, 0, 0.85);\n          font-weight: 400;\n          font-size: 16px;\n        }\n        span {\n          margin-left: 10px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 58px;\n          height: 16px;\n          border-radius: 2px;\n          border: 1px solid #3b78e3;\n          color: #3b78e3;\n          cursor: pointer;\n        }\n        span.disabled {\n          border-color: #c0c4cc;\n          color: #c0c4cc;\n          cursor: not-allowed;\n        }\n      }\n      .monthTab {\n        display: flex;\n        align-items: center;\n        margin-top: 20px;\n        .tabCon {\n          display: flex;\n          align-items: center;\n          p {\n            margin-right: 20px;\n            font-weight: 400;\n            color: rgba(0, 0, 0, 0.45);\n            cursor: pointer;\n            position: relative;\n          }\n          p.activedStyle {\n            color: #3b78e3;\n            font-weight: 500;\n          }\n          p.activedStyle::after {\n            content: '';\n            position: absolute;\n            width: 14px;\n            height: 1px;\n            bottom: -5px;\n            left: 50%;\n            margin-left: -7px;\n            border-radius: 3px;\n            background-color: #3b78e3;\n          }\n        }\n      }\n    }\n  }\n}\n/deep/.el-card__body {\n  padding: 15px;\n}\n</style>\n"]}]}