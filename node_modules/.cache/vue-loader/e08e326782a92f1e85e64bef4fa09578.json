{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/newTask/components/ChooseRole.vue?vue&type=style&index=0&id=520d3cbe&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/views/newTask/components/ChooseRole.vue","mtime":1627979214256},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi9kZWVwLyAuZWwtY2hlY2tib3gtZ3JvdXAgewogIC5lbC1jaGVja2JveCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1hcmdpbi1sZWZ0OiAxNHB4OwogIH0KfQouZGlhbG9nLWZvb3RlciB7CiAgYnV0dG9uOm50aC1jaGlsZCgyKSB7CiAgICBtYXJnaW4tbGVmdDogNjZweDsKICB9CiAgLmVsLWJ1dHRvbi0tZGVmYXVsdCwKICAuZWwtYnV0dG9uLS1wcmltYXJ5IHsKICAgIG1pbi13aWR0aDogODhweDsKICAgIGhlaWdodDogMzZweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9CiAgLmVsLWJ1dHRvbi0tZGVmYXVsdCB7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJhY2tncm91bmQ6ICNkMGQwZDA7CiAgfQp9Ci5jaGVja2JveC1ib3ggewogIGJhY2tncm91bmQ6ICNmN2Y3Zjc7CiAgcGFkZGluZzogMTNweCAzNHB4Owp9Cg=="},{"version":3,"sources":["ChooseRole.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChooseRole.vue","sourceRoot":"src/pages/bonus-tool-admin/views/newTask/components","sourcesContent":["<template>\n  <!-- 参与角色选择 -->\n  <el-dialog :visible.sync=\"visible\" title=\"参与角色选择\" center>\n    <div class=\"checkbox-box\">\n      <el-checkbox\n        :indeterminate=\"isIndeterminate\"\n        v-model=\"checkAll\"\n        @change=\"handleCheckAllChange\"\n        >全部</el-checkbox\n      >\n      <div style=\"margin: 15px 0;\"></div>\n      <el-checkbox-group\n        v-model=\"checkedSchools\"\n        @change=\"onCheckedSchoolsChange\"\n      >\n        <el-checkbox\n          v-for=\"(item, index) in schoolList\"\n          :label=\"item.associatedAccount\"\n          :key=\"index\"\n          >{{ item.schoolName }}</el-checkbox\n        >\n      </el-checkbox-group>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button\n        size=\"small\"\n        :loading=\"loading || dataLoading\"\n        @click=\"visible = false\"\n      >\n        取消\n      </el-button>\n      <el-button\n        size=\"small\"\n        :loading=\"loading || dataLoading\"\n        type=\"primary\"\n        @click=\"onConfirm\"\n      >\n        确定\n      </el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { Dialog, Button, Checkbox, CheckboxGroup } from 'element-ui';\nimport { getSchools } from '../../../api/task';\nconst cityOptions = ['上海', '北京', '广州', '深圳'];\nexport default {\n  name: 'ChooseRole',\n  components: {\n    [Dialog.name]: Dialog,\n    [Button.name]: Button,\n    [Checkbox.name]: Checkbox,\n    [CheckboxGroup.name]: CheckboxGroup\n  },\n  props: {\n    taskName: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      visible: false, // 默认隐藏\n      loading: false, // 数据提交\n      dataLoading: false, // 数据加载\n      checkAll: false, // 全选，默认不选\n      checkedSchools: [], // 选中的学校\n      allSchools: [], // 全部学校\n      isIndeterminate: true,\n      schoolList: [], // 可选学校\n      checkedSchoolList: [] // 选中的学校\n    };\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {},\n  methods: {\n    /**\n     * 初始化数据\n     */\n    initData() {\n      this.checkedSchools = []; // 选中的学校\n      this.allSchools = []; // 全部学校\n      this.schoolList = []; // 可选学校\n      this.checkedSchoolList = []; // 选中的学校\n    },\n    /**\n     * 获取学校数据\n     */\n    getSchools() {\n      getSchools().then(({ data }) => {\n        console.log(data);\n        for (let i in data) {\n          console.log(i, data[i]);\n          this.schoolList.push({\n            schoolName: i,\n            associatedAccount: data[i]\n          });\n          this.allSchools.push(data[i]);\n        }\n      });\n    },\n    /**\n     * 全选\n     */\n    handleCheckAllChange(val) {\n      console.log(val);\n      this.checkedSchools = val ? this.allSchools : [];\n      this.isIndeterminate = false;\n    },\n    /**\n     * 单选\n     */\n    onCheckedSchoolsChange(value) {\n      console.log(value);\n      let checkedCount = value.length;\n      this.checkAll = checkedCount === this.allSchools.length;\n      console.log('checkAll', this.checkAll);\n      this.isIndeterminate =\n        checkedCount > 0 && checkedCount < this.allSchools.length;\n    },\n    /**\n     * 弹框显示\n     */\n    show() {\n      this.initData();\n      this.getSchools();\n      this.visible = true;\n    },\n    /**\n     * 弹框隐藏\n     */\n    hide() {\n      this.visible = false;\n    },\n    /**\n     * 获取选中学校\n     */\n    getSchoolList() {\n      this.checkedSchoolList = this.schoolList\n        .filter(\n          item => this.checkedSchools.indexOf(item.associatedAccount) !== -1\n        )\n        .map(item => ({ ...item, taskName: this.taskName, bonus: null }));\n    },\n    /**\n     * 提交角色\n     */\n    onConfirm() {\n      this.hide();\n      this.getSchoolList();\n      this.$emit('checkedSchool', this.checkedSchoolList);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .el-checkbox-group {\n  .el-checkbox {\n    display: block;\n    margin-left: 14px;\n  }\n}\n.dialog-footer {\n  button:nth-child(2) {\n    margin-left: 66px;\n  }\n  .el-button--default,\n  .el-button--primary {\n    min-width: 88px;\n    height: 36px;\n    border-radius: 4px;\n    font-size: 14px;\n  }\n  .el-button--default {\n    color: #fff;\n    background: #d0d0d0;\n  }\n}\n.checkbox-box {\n  background: #f7f7f7;\n  padding: 13px 34px;\n}\n</style>\n"]}]}