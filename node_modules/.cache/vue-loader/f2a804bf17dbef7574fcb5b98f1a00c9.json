{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/UrgencyArrive.vue?vue&type=style&index=0&id=b4cb578a&lang=less&scoped=true&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/UrgencyArrive.vue","mtime":1645178321203},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gLnZhbi1jZWxsLS1yZXF1aXJlZDo6YmVmb3JlIHsKICBsZWZ0OiAtMTFweDsKICB0b3A6IC0zMHB4Owp9Ci9kZWVwLyAuZm9ybS1kZXRhaWwgLnZhbi1jZWxsLS1yZXF1aXJlZDo6YmVmb3JlIHsKICB0b3A6IDhweDsKfQovZGVlcC8gLnZhbi1maWVsZF9fZXJyb3ItbWVzc2FnZSB7CiAgbWFyZ2luLXRvcDogN3B4OwogIG1hcmdpbi1sZWZ0OiAtMTJweDsKICBmb250LXdlaWdodDogNDAwOwogIGNvbG9yOiAjZmY1NzU2Owp9Ci51cmdlbmN5LXdyYXBwZXIgewogIHBhZGRpbmctdG9wOiAxNXB4Owp9Ci5mb3JtLWxpbmUgewogIHBhZGRpbmc6IDAgMTZweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW4tYm90dG9tOiAxNnB4OwogIC5mb3JtLWVycm9yIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGJvdHRvbTogLTE4cHg7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgY29sb3I6ICNmZjU3NTY7CiAgICBmb250LXNpemU6IDEycHg7CiAgfQogICYuZm9ybS10aW1lIHsKICAgIC5mb3JtLWlucHV0IHsKICAgICAgcGFkZGluZy10b3A6IDA7CiAgICB9CiAgfQogIC5mb3JtLXRpdGxlIHsKICAgIGZvbnQtc2l6ZTogMTVweDsKICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXIsIFBpbmdGYW5nIFNDOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuODUpOwogICAgbGluZS1oZWlnaHQ6IDIxcHg7CiAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogIH0KICAuZm9ybS1pbnB1dCwKICAuZm9ybS10ZXh0YXJlYSB7CiAgICB3aWR0aDogMzQzcHg7CiAgICBoZWlnaHQ6IDQwcHg7CiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2FiYmZkNjsKICAgIHBhZGRpbmctdG9wOiA3cHg7CiAgfQoKICAuZm9ybS10ZXh0YXJlYSB7CiAgICBoZWlnaHQ6IDEzMHB4OwogIH0KCiAgLnNwYW4tdGFiIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBsaSB7CiAgICAgIHdpZHRoOiA4MnB4OwogICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4OwogICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNhYmJmZDY7CiAgICAgIG1hcmdpbi1yaWdodDogNXB4OwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICYuYWN0aXZlIHsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMzM4OGZmOwogICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNTEsIDEzNiwgMjU1LCAwLjA4KTsKICAgICAgfQogICAgfQogIH0KCiAgLmV4YW1wbGUtdWwgewogICAgZGlzcGxheTogZmxleDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGJvdHRvbTogMTBweDsKICAgIGxlZnQ6IDI0cHg7CiAgICBsaSB7CiAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7CiAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgICAgYm9yZGVyOiAxcHggc29saWQgI2FiYmZkNjsKICAgICAgcGFkZGluZzogNHB4IDlweDsKICAgICAgYm9yZGVyLXJhZGl1czogMnB4OwogICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgIH0KICB9Cn0KCi5idG4tc2F2ZSB7CiAgd2lkdGg6IDM1MHB4OwogIG1hcmdpbjogMCBhdXRvOwp9CgouZm9ybS1yZXF1aXJlZCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDVweDsKICB0b3A6IDNweDsKICBjb2xvcjogcmVkOwp9Cg=="},{"version":3,"sources":["UrgencyArrive.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"UrgencyArrive.vue","sourceRoot":"src/pages/visitor-h5/views/verify-visitor","sourcesContent":["<template>\n  <div class=\"urgency-wrapper\">\n    <van-form ref=\"urgencyForm\">\n      <div class=\"form-line\">\n        <div class=\"form-title\">访客部门</div>\n        <ul class=\"span-tab\">\n          <li\n            :class=\"item.value == formObj.visitDepartment ? 'active' : ''\"\n            v-for=\"item in labelList\"\n            :key=\"item.value\"\n            @click=\"changeLabel(item)\"\n          >\n            {{ item.title }}\n          </li>\n        </ul>\n      </div>\n      <div class=\"form-line\">\n        <div class=\"form-title\">到访人数</div>\n        <van-field\n          required\n          type=\"number\"\n          class=\"form-input\"\n          name=\"number\"\n          v-model=\"formObj.number\"\n          placeholder=\"请输入到访人数\"\n          :rules=\"[\n            {\n              required: true,\n              message: '到访人数小于等于99',\n              pattern: /^([1-9]|[1-9]\\d)$/\n            }\n          ]\"\n        />\n      </div>\n      <div class=\"form-line form-time\">\n        <span class=\"form-required\">*</span>\n        <div class=\"form-title\">到访时间</div>\n        <time-picker\n          ref=\"urgencyTime\"\n          class=\"form-input\"\n          @setDateTime=\"getTime\"\n        ></time-picker>\n        <span v-if=\"!formObj.visitTime && isSave\" class=\"form-error\"\n          >到访时间未填写</span\n        >\n      </div>\n      <div class=\"form-line \">\n        <div class=\"form-title\">备注</div>\n        <van-field\n          required\n          class=\"form-textarea\"\n          rows=\"4\"\n          autosize\n          type=\"textarea\"\n          v-model=\"formObj.remarks\"\n          maxlength=\"50\"\n          placeholder=\"请填写拜访单位、拜访人员及拜访事由（最多50个字）\"\n          :rules=\"[{ required: true, message: '' }]\"\n        />\n        <!--   <div class=\"example\">\n          <ul class=\"example-ul\">\n            <li\n              @click=\"selectReason(item)\"\n              v-for=\"item in reasonList\"\n              :key=\"item.value\"\n            >\n              {{ item.title }}\n            </li>\n          </ul>\n        </div> -->\n      </div>\n\n      <div class=\"form-line\">\n        <image-upload\n          :imageShowList=\"formObj.url\"\n          @backUrlData=\"getUrl($event)\"\n        ></image-upload>\n      </div>\n\n      <div class=\"btn-save\">\n        <van-button type=\"info\" size=\"large\" @click=\"save\">提交</van-button>\n      </div>\n    </van-form>\n\n    <confirm-modal\n      :showPanel=\"showPanel\"\n      title=\"提交完成\"\n      @closePanel=\"closePanel\"\n    ></confirm-modal>\n  </div>\n</template>\n\n<script>\nimport { formateDate } from '@/pages/visitor-h5/plugins/common/utils';\nimport confirmModal from './components/ConfirmModal';\nimport timePicker from './components/TimeSelect';\nimport imageUpload from './components/ImageUpload';\nimport { addUrgentVisit } from '@/pages/visitor-h5/api/verify';\nexport default {\n  components: { confirmModal, timePicker, imageUpload },\n  data() {\n    return {\n      isSave: false,\n      showPanel: false,\n      labelList: [\n        { title: '公安', value: '2' },\n        { title: '交警', value: '3' },\n        { title: '消防', value: '1' },\n        { title: '其他', value: '0' }\n      ],\n      reasonList: [\n        { title: '例行检查', value: '1' },\n        { title: '案件', value: '2' }\n      ],\n      formObj: {\n        visitDepartment: '2',\n        number: '',\n        remarks: '',\n        visitTime: new Date().getTime(),\n        url: []\n      }\n    };\n  },\n  methods: {\n    init() {\n      this.formObj = {\n        visitDepartment: '2',\n        number: '',\n        remarks: '',\n        visitTime: new Date().getTime(),\n        url: []\n      };\n      this.isSave = false;\n      this.$refs.urgencyTime.date = formateDate(new Date(), 4);\n      this.$refs.urgencyTime.selectedTime = formateDate(new Date(), 5);\n    },\n    changeLabel(item) {\n      this.formObj.visitDepartment = item.value;\n    },\n    selectReason(item) {\n      this.formObj.remarks = item.title;\n    },\n    getTime(date) {\n      date = date.replace(/-/g, '/');\n      this.formObj.visitTime = new Date(date).getTime();\n    },\n    getUrl(value) {\n      this.formObj.url = value;\n    },\n    save() {\n      this.isSave = true;\n      this.$refs.urgencyForm.validate().then(res => {\n        if (!this.formObj.visitTime) {\n          return;\n        }\n        addUrgentVisit(this.formObj)\n          .then(res => {\n            if (res.success) {\n              this.showPanel = true;\n              this.init();\n            }\n          })\n          .catch(e => {\n            this.$toast.loading({\n              message: e.data.message\n            });\n          });\n      });\n    },\n    closePanel() {\n      this.showPanel = false;\n      this.$router.push('/verify-list');\n    }\n  },\n  mounted() {\n    this.$refs.urgencyTime.date = formateDate(new Date(), 4);\n    this.$refs.urgencyTime.selectedTime = formateDate(new Date(), 5);\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-cell--required::before {\n  left: -11px;\n  top: -30px;\n}\n/deep/ .form-detail .van-cell--required::before {\n  top: 8px;\n}\n/deep/ .van-field__error-message {\n  margin-top: 7px;\n  margin-left: -12px;\n  font-weight: 400;\n  color: #ff5756;\n}\n.urgency-wrapper {\n  padding-top: 15px;\n}\n.form-line {\n  padding: 0 16px;\n  box-sizing: border-box;\n  position: relative;\n  margin-bottom: 16px;\n  .form-error {\n    position: absolute;\n    bottom: -18px;\n    font-weight: 400;\n    color: #ff5756;\n    font-size: 12px;\n  }\n  &.form-time {\n    .form-input {\n      padding-top: 0;\n    }\n  }\n  .form-title {\n    font-size: 15px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.85);\n    line-height: 21px;\n    margin-bottom: 10px;\n  }\n  .form-input,\n  .form-textarea {\n    width: 343px;\n    height: 40px;\n    background: #ffffff;\n    border-radius: 5px;\n    border: 1px solid #abbfd6;\n    padding-top: 7px;\n  }\n\n  .form-textarea {\n    height: 130px;\n  }\n\n  .span-tab {\n    display: flex;\n    li {\n      width: 82px;\n      height: 40px;\n      line-height: 40px;\n      background: #ffffff;\n      border-radius: 5px;\n      border: 1px solid #abbfd6;\n      margin-right: 5px;\n      text-align: center;\n      &.active {\n        border: 1px solid #3388ff;\n        background: rgba(51, 136, 255, 0.08);\n      }\n    }\n  }\n\n  .example-ul {\n    display: flex;\n    position: absolute;\n    bottom: 10px;\n    left: 24px;\n    li {\n      background: #ffffff;\n      border-radius: 2px;\n      border: 1px solid #abbfd6;\n      padding: 4px 9px;\n      border-radius: 2px;\n      margin-right: 5px;\n    }\n  }\n}\n\n.btn-save {\n  width: 350px;\n  margin: 0 auto;\n}\n\n.form-required {\n  position: absolute;\n  left: 5px;\n  top: 3px;\n  color: red;\n}\n</style>\n"]}]}