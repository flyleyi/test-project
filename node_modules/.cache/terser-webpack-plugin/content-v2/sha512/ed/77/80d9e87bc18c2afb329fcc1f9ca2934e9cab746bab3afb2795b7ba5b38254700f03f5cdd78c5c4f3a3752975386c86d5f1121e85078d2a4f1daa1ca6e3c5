{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-7a8ae762\"],{\"5b22\":function(e,t,i){\"use strict\";i.r(t);var n,a,s=i(\"2b0e\"),o=(i(\"0fb7\"),i(\"450d\"),i(\"f529\")),l=i.n(o),c=i(\"5530\"),d=i(\"ade3\"),r=(i(\"a7cc\"),i(\"df33\")),u=i.n(r),h=(i(\"1951\"),i(\"eedf\")),f=i.n(h),p=(i(\"d4df\"),i(\"7fc1\")),g=i.n(p),b=(i(\"560b\"),i(\"dcdc\")),k=i.n(b),v=(i(\"b0c0\"),i(\"d81d\"),i(\"4de4\"),i(\"159b\"),i(\"caad\"),i(\"2532\"),{name:\"CFilterCheckPanel\",components:(n={},Object(d.a)(n,k.a.name,k.a),Object(d.a)(n,g.a.name,g.a),Object(d.a)(n,f.a.name,f.a),Object(d.a)(n,u.a.name,u.a),n),props:{data:{type:Array,default:function(){return[]}},title:{type:String,default:\"显示列\"},editOriginData:{type:Boolean,default:!0},labelField:{type:String,default:\"label\"},propField:{type:String,default:\"prop\"},hiddenField:{type:String,default:\"hidden\"},requiredField:{type:String,default:\"required\"},successMsg:{type:String,default:\"\"},errorMsg:{type:String,default:\"数据保存失败\"},onClosed:{type:Function,default:function(){}},ajaxFun:{type:Function},callback:{type:Function}},data:function(){return{inited:!1,visible:!1,loading:!1,defaultCheckList:[],initCheckList:[],checkedList:[]}},mounted:function(){},methods:{show:function(){var e=this;this.data&&(this.inited||(this.inited=!0,this.defaultCheckList=this.data.filter((function(t){return t[e.propField]})).map((function(t){var i=t[e.propField];if(i){var n=t[e.labelField],a=t[e.hiddenField]||!1,s=t[e.requiredField]||!1;return!s&&a||e.checkedList.push(i),{label:n,prop:i,hidden:a,required:s}}})),this.initCheckList=JSON.parse(JSON.stringify(this.checkedList))),this.visible=!0)},getData:function(){var e=this,t=[];return this.defaultCheckList.forEach((function(i){t.push(Object(c.a)(Object(c.a)({},i),{},{hidden:!e.checkedList.includes(i[e.propField])}))})),t},saveData:function(){var e=this;if(this.editOriginData)this.data.forEach((function(t,i){var n=t[e.propField];if(n){var a=e.checkedList.includes(n);t[e.hiddenField]=!a,e.$set(e.data,i,t)}}));else{var t=this.callback;\"function\"==typeof t&&t(this.checkedList)}},compareCheckChange:function(){var e=this.initCheckList,t=this.checkedList;return JSON.stringify(e.sort())==JSON.stringify(t.sort())},onSubmit:function(){var e,t=this;0!=this.checkedList.length?this.compareCheckChange()?this.onCloseDialog():this.loading||(this.loading=!0,\"function\"==typeof this.ajaxFun&&(e=this.ajaxFun(this.getData())),e&&\"function\"==typeof e.then?e.then((function(){t.loading=!1,t.saveData(),t.successMsg&&l()({message:t.successMsg,type:\"success\",duration:5e3}),t.onCloseDialog()})).catch((function(e){t.loading=!1})):(this.loading=!1,this.saveData(),this.onCloseDialog())):l()({message:\"请至少选中一项\",type:\"warning\",duration:5e3})},onBeforeClose:function(e){this.loading||e()},onCloseDialog:function(){this.loading||(this.visible=!1)}}}),C=(i(\"b06e\"),i(\"2877\")),y=Object(C.a)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",e._g({staticClass:\"check-dialog\",attrs:{visible:e.visible,title:e.title,center:\"\",\"before-close\":e.onBeforeClose},on:{\"update:visible\":function(t){e.visible=t},closed:e.onClosed}},e.$listeners),[i(\"el-checkbox-group\",{attrs:{disabled:e.loading},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:\"checkedList\"}},e._l(e.defaultCheckList,(function(t){return i(\"el-checkbox\",{key:t.prop,attrs:{label:t.prop,disabled:t.required}},[e._v(e._s(t.label))])})),1),i(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{size:\"small\",loading:e.loading},on:{click:e.onCloseDialog}},[e._v(\" 取消 \")]),i(\"el-button\",{attrs:{type:\"primary\",size:\"small\",loading:e.loading},on:{click:e.onSubmit}},[e._v(\"确定\")])],1)],1)}),[],!1,null,\"08844580\",null).exports,m=s.default.extend(y);function F(){document.body.removeChild(a.$el),a=null}var L={show:function(e){a&&F(),(a=new m({propsData:Object.assign({},e,{onClosed:F})})).$mount(),document.body.appendChild(a.$el),s.default.nextTick((function(){a.show()}))}};t.default=L},\"970b\":function(e,t,i){},b06e:function(e,t,i){\"use strict\";var n=i(\"970b\");i.n(n).a}}]);","extractedComments":[]}