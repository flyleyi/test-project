{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"sims-b-role-manage\"],{\"4abb\":function(e,t,o){},\"83cf\":function(e,t,o){\"use strict\";o.r(t);var r,a=o(\"a34a\"),n=o.n(a),i=o(\"1da1\"),l=o(\"ade3\"),s=(o(\"eca7\"),o(\"450d\"),o(\"3787\")),c=o.n(s),u=(o(\"425f\"),o(\"4105\")),d=o.n(u),p=(o(\"10cb\"),o(\"f3ad\")),f=o.n(p),m=(o(\"6611\"),o(\"e772\")),h=o.n(m),b=(o(\"1f1a\"),o(\"4e4b\")),v=o.n(b),g=(o(\"1951\"),o(\"eedf\")),y=o.n(g),_=(o(\"a7cc\"),o(\"df33\")),$=o.n(_),w=(o(\"d3b7\"),o(\"b0c0\"),o(\"4de4\"),o(\"9f27\")),C=o(\"be3b\");var T={name:\"BRoleManage\",components:(r={},Object(l.a)(r,$.a.name,$.a),Object(l.a)(r,y.a.name,y.a),Object(l.a)(r,v.a.name,v.a),Object(l.a)(r,h.a.name,h.a),Object(l.a)(r,f.a.name,f.a),Object(l.a)(r,d.a.name,d.a),Object(l.a)(r,c.a.name,c.a),Object(l.a)(r,\"BTable\",w.a),r),props:{serverType:{type:String,default:\"\"}},data:function(){var e=this.$has;return\"function\"!=typeof e&&(e=function(){return!0}),{$has:e,dialog:{visible:!1,isedit:!1},ruleForm:{roleName:\"\",roleDesc:\"\",isShow:\"\"},rules:{roleName:[{required:!0,trigger:\"blur\",message:\"角色名称未填写\"}],isShow:[{required:!0,trigger:\"blur\",message:\"角色状态未填写\"}]}}},computed:{columns:function(){var e=this;return[{label:\"角色编码\",prop:\"roleId\"},{label:\"角色名称\",prop:\"roleName\",\"show-overflow-tooltip\":!0},{label:\"角色描述\",prop:\"roleDesc\",\"show-overflow-tooltip\":!0},{label:\"角色状态\",prop:\"isShow\",formatter:function(e,t,o){return\"0\"==o?\"启用\":\"禁用\"}},{label:\"操作\",colType:\"btns\",btns:[{label:\"编辑\",click:this.editTableRole,hidden:function(){return!e.$has([\"role-edit\"])},size:\"mini\",type:\"primary\"},{label:\"删除\",click:function(t){return e.del(t.roleId)},hidden:function(){return!e.$has([\"role-delete\"])},size:\"mini\",type:\"primary\"},{label:\"菜单授权\",click:function(t){return e.menuPermission(t.roleId)},hidden:function(){return!e.$has([\"role-permission\"])},size:\"mini\",type:\"primary\"},{label:\"分配用户\",click:function(t){return e.allotUser(t.roleId)},hidden:function(){return!e.$has([\"role-allotUser\"])},size:\"mini\",type:\"primary\"}].filter((function(t){return e.$has(t.auth)})),width:\"340px\"}]},formItems:function(){return[{type:\"input\",prop:\"roleName\",label:\"角色名称：\"},{type:\"input\",prop:\"roleId\",label:\"角色编码：\"},{type:\"select\",options:[{value:\"0\",label:\"启用\"},{value:\"1\",label:\"禁用\"}],prop:\"isShow\",label:\"状态：\"}]},toolbars:function(){var e=this;return[{label:\"新增\",click:this.addtableRole,auth:[\"role-add\"]}].filter((function(t){return e.$has(t.auth)}))}},watch:{},created:function(){},mounted:function(){},methods:{ajaxGetRoleData:function(e){return Object(C.b)({method:\"GET\",url:\"/usergw/admin/common/pageList/301\",params:e},this.serverType)},menuPermission:function(e){this.$router.push({path:\"/system/role/menu-auth\",query:{id:e}})},del:function(e){var t=this;this.$confirm(\"删除后不可恢复，确定删除？\",\"删除确认\",{customClass:\"box-danger\",center:!0}).then((function(){t.confirmLoading=!0,Object(C.b)({method:\"GET\",url:\"/usergw/admin/roleAuth/deleteRole/\".concat(e)},t.serverType).then((function(e){e.data,t.$message({type:\"success\",message:\"删除成功!\"}),t.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){t.confirmLoading=!1}))})).catch((function(){t.$message({type:\"info\",message:\"已取消删除\"})}))},allotUser:function(e){this.$router.push({path:\"/system/role/allot-user\",query:{roleId:e}})},addtableRole:function(){for(var e in this.dialog.visible=!0,this.dialog.isedit=!1,this.ruleForm)this.ruleForm[e]=\"\";delete this.ruleForm.roleId},editTableRole:function(e){this.dialog.visible=!0,this.dialog.isedit=!0,function(){var e,t,o,r,a={},n=arguments.length,i=arguments[n-1],l=0;\"boolean\"==typeof i&&(l++,t=i),\"[object Array]\"===Object.prototype.toString.call(arguments[0])?(o=!0,r=arguments[0],e=arguments[1]):e=arguments[0]||{};for(var s=0;s<n-l;s++){var c=arguments[s];for(var u in o?r:e){var d=o?r[u]:u;c&&void 0!==c[d]?t?a[d]=c[d]:e[d]=c[d]:t&&0==s&&(a[d]=e[d])}}}(this.ruleForm,e),this.ruleForm.roleId=e.roleId},sureDialog:function(){var e=this;return Object(i.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog.isedit||(e.ruleForm.isShow=\"0\"),t.prev=1,t.next=4,e.$refs.elForm.validate();case 4:e.confirmLoading=!0,e.dialog.isedit?Object(C.b)({method:\"POST\",url:\"/usergw/admin/common/save/301/02\",data:e.ruleForm},e.serverType).then((function(t){t.data,e.dialog.visible=!1,e.$message({type:\"success\",message:\"编辑成功!\"}),e.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){e.confirmLoading=!1})):Object(C.b)({method:\"POST\",url:\"/usergw/admin/common/save/301/01\",data:e.ruleForm},e.serverType).then((function(t){t.data,e.dialog.visible=!1,e.$message({type:\"success\",message:\"新增成功!\"}),e.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){e.confirmLoading=!1})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(\"表单校验失败\",t.t0);case 11:case\"end\":return t.stop()}}),t,null,[[1,8]])})))()}}},x=(o(\"a694\"),o(\"2877\")),O=Object(x.a)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{staticClass:\"app-container\"},[o(\"b-table\",{ref:\"bTable\",attrs:{loading:\"\",headers:e.columns,\"form-items\":e.formItems,\"ajax-get-data\":e.ajaxGetRoleData,toolbars:e.toolbars,\"show-column\":!1}}),o(\"el-dialog\",{staticClass:\"dialog\",attrs:{title:e.dialog.isedit?\"编辑\":\"新增\",width:\"540px\",center:\"\",visible:e.dialog.visible},on:{\"update:visible\":function(t){return e.$set(e.dialog,\"visible\",t)}}},[o(\"el-form\",{ref:\"elForm\",attrs:{\"label-width\":\"80px\",model:e.ruleForm,rules:e.rules}},[o(\"el-form-item\",{attrs:{label:\"角色名称\",prop:\"roleName\"}},[o(\"el-input\",{attrs:{type:\"input\"},model:{value:e.ruleForm.roleName,callback:function(t){e.$set(e.ruleForm,\"roleName\",\"string\"==typeof t?t.trim():t)},expression:\"ruleForm.roleName\"}})],1),o(\"el-form-item\",{attrs:{label:\"角色描述\",prop:\"roleDesc\"}},[o(\"el-input\",{attrs:{type:\"input\"},model:{value:e.ruleForm.roleDesc,callback:function(t){e.$set(e.ruleForm,\"roleDesc\",\"string\"==typeof t?t.trim():t)},expression:\"ruleForm.roleDesc\"}})],1),e.dialog.isedit?o(\"el-form-item\",{attrs:{label:\"角色状态\",prop:\"roleDesc\"}},[o(\"el-select\",{model:{value:e.ruleForm.isShow,callback:function(t){e.$set(e.ruleForm,\"isShow\",t)},expression:\"ruleForm.isShow\"}},e._l(e.formItems[2].options,(function(e,t){return o(\"el-option\",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1):e._e()],1),o(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{size:\"small\"},on:{click:function(t){e.dialog.visible=!1}}},[e._v(\"取消\")]),o(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.sureDialog}},[e._v(\"确定\")])],1)],1)],1)}),[],!1,null,\"e5073bf0\",null);t.default=O.exports},a694:function(e,t,o){\"use strict\";var r=o(\"4abb\");o.n(r).a},a7cc:function(e,t,o){},df33:function(e,t,o){e.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"/dist/\",o(o.s=89)}({0:function(e,t,o){\"use strict\";function r(e,t,o,r,a,n,i,l){var s,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=o,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId=\"data-v-\"+n),i?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=s):a&&(s=l?function(){a.call(this,this.$root.$options.shadowRoot)}:a),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}o.d(t,\"a\",(function(){return r}))},11:function(e,t){e.exports=o(\"2bb5\")},15:function(e,t){e.exports=o(\"5128\")},4:function(e,t){e.exports=o(\"d010\")},89:function(e,t,o){\"use strict\";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"transition\",{attrs:{name:\"dialog-fade\"},on:{\"after-enter\":e.afterEnter,\"after-leave\":e.afterLeave}},[o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"el-dialog__wrapper\",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[o(\"div\",{key:e.key,ref:\"dialog\",class:[\"el-dialog\",{\"is-fullscreen\":e.fullscreen,\"el-dialog--center\":e.center},e.customClass],style:e.style,attrs:{role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":e.title||\"dialog\"}},[o(\"div\",{staticClass:\"el-dialog__header\"},[e._t(\"title\",[o(\"span\",{staticClass:\"el-dialog__title\"},[e._v(e._s(e.title))])]),e.showClose?o(\"button\",{staticClass:\"el-dialog__headerbtn\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:e.handleClose}},[o(\"i\",{staticClass:\"el-dialog__close el-icon el-icon-close\"})]):e._e()],2),e.rendered?o(\"div\",{staticClass:\"el-dialog__body\"},[e._t(\"default\")],2):e._e(),e.$slots.footer?o(\"div\",{staticClass:\"el-dialog__footer\"},[e._t(\"footer\")],2):e._e()])])])};r._withStripped=!0;var a=o(15),n=o.n(a),i=o(11),l=o.n(i),s=o(4),c=o.n(s),u={name:\"ElDialog\",mixins:[n.a,c.a,l.a],props:{title:{type:String,default:\"\"},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:\"\"},top:{type:String,default:\"15vh\"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit(\"open\"),this.$el.addEventListener(\"scroll\",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener(\"scroll\",this.updatePopper),this.closed||this.$emit(\"close\"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:\"size is removed.\"}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){\"function\"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit(\"update:visible\",!1),this.$emit(\"close\"),this.closed=!0)},updatePopper:function(){this.broadcast(\"ElSelectDropdown\",\"updatePopper\"),this.broadcast(\"ElDropdownMenu\",\"updatePopper\")},afterEnter:function(){this.$emit(\"opened\")},afterLeave:function(){this.$emit(\"closed\")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},d=o(0),p=Object(d.a)(u,r,[],!1,null,null,null);p.options.__file=\"packages/dialog/src/component.vue\";var f=p.exports;f.install=function(e){e.component(f.name,f)},t.default=f}})}}]);","extractedComments":[]}