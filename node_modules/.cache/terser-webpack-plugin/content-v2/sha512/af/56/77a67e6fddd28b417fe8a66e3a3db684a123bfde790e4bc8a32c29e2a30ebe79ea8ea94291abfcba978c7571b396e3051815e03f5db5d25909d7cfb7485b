{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"sims-dynamic-form\"],{\"4cc7\":function(e,t,n){\"use strict\";n.r(t);var a,o=n(\"ade3\"),i=(n(\"10cb\"),n(\"450d\"),n(\"f3ad\")),l=n.n(i),r=(n(\"b0c0\"),n(\"8421\")),s=n(\"9f27\"),c=n(\"5530\"),u=n(\"2b0e\"),p=null,d=u.default.extend(Object.assign({},r.a,{methods:Object(c.a)(Object(c.a)({},r.a.methods),{},{onClosed:function(){document.body.removeChild(this.$el)}})})),f=function(e){p&&(p.hide(),p=null),\"string\"==typeof(e=e||{})&&(e={url:e}),p=new d({el:document.createElement(\"div\"),propsData:e}),document.body.appendChild(p.$el),u.default.nextTick((function(){p.show()}))},h=n(\"6fac\"),m=(n(\"2f62\"),{name:\"DynamicFormPage\",components:(a={},Object(o.a)(a,h.a.name,h.a),Object(o.a)(a,r.a.name,r.a),Object(o.a)(a,l.a.name,l.a),Object(o.a)(a,\"BTable\",s.a),a),data:function(){var e=this;return{visible:!1,formData:{campus:\"01\",division:\"010701\",grade:\"01070101\",school:\"0107\",signYearType:\"2020\"},departProjectData:{signYearType:\"2020\",departName:\"海亮外国语学校初中部\",departCode:\"060101\",schoolName:\"海亮外国语学校\",schoolCode:\"0601\",campusName:\"教育园区\",campusCode:\"06\"},formItems:[{label:\"姓名\",prop:\"name\",type:\"input\",rules:[{required:!0,trigger:\"blur\",message:\"姓名未填写\"}]},{label:\"是否成年\",prop:\"isAdult\",type:\"select\",labelProp:\"isAdultName\",options:[{label:\"是\",value:1},{label:\"否\",value:0}]},{label:\"出生日期\",prop:\"date\",type:\"date-picker\",attrs:{type:\"daterange\"}},{label:\"性别\",prop:\"sex\",type:\"radio\",options:[{label:\"男\",value:1},{label:\"女\",value:2}]},{label:\"爱好\",prop:\"like\",type:\"checkbox\",options:[{label:\"游泳\",value:\"yy\"},{label:\"篮球\",value:\"lq\"},{label:\"读书\",value:\"df\"},{label:\"看电影\",value:\"kdy\"}]},{label:\"账号状态\",prop:\"status\",type:\"switch\",attrs:{activeText:\"启用\",inactiveText:\"禁用\"}},{label:\"学年\",prop:\"signYearType\",type:\"select\",options:[{label:\"2018-2019\",value:\"2019\"},{label:\"2019-2020\",value:\"2020\"}]},{label:\"校区\",prop:\"campus\",type:\"select\",labelKey:\"campusName\",valueKey:\"campusCode\",parentProp:\"signYearType\",ajax:function(t){return e.$axios({method:\"GET\",url:\"/growth/common/linkageStudentOrganization\",params:{type:\"signCampus\",signYearType:t.signYearType}},\"simsbff\").then((function(e){return e.data}))}},{label:\"学校\",prop:\"school\",type:\"select\",labelKey:\"schoolName\",valueKey:\"schoolCode\",parentProp:\"campus\",ajax:function(t){return e.$axios({method:\"GET\",url:\"/growth/common/linkageStudentOrganization\",params:{type:\"signSchool\",signYearType:t.signYearType,signCampus:t.campus}}).then((function(e){return e.data}))}},{label:\"学部\",prop:\"division\",type:\"select\",labelKey:\"departName\",valueKey:\"departCode\",parentProp:\"school\",ajax:function(t){return e.$axios({method:\"GET\",url:\"/growth/common/linkageStudentOrganization\",params:{type:\"signDivision\",signYearType:t.signYearType,signCampus:t.campus,signSchool:t.school}}).then((function(e){return e.data}))}},{label:\"年级\",prop:\"grade\",type:\"select\",labelKey:\"gradeName\",valueKey:\"gradeCode\",parentProp:\"division\",ajax:function(t){return e.$axios({method:\"GET\",url:\"/growth/common/linkageStudentOrganization\",params:{type:\"signGrade\",signYearType:t.signYearType,signCampus:t.campus,signSchool:t.school,signDivision:t.division}}).then((function(e){return e.data}))}},{label:\"学年-字典\",prop:\"signYearType\",type:\"select\",options:this.$D(\"XNM\")}],teacher:null,toolbars:[{label:\"按钮1\"},{type:\"dropdown\",label:\"下拉菜单\",btns:[{label:\"下拉按钮1\"},{label:\"下拉按钮2\"},{label:\"下拉按钮3\"}]}]}},computed:{teacherName:function(){return this.teacher&&this.teacher.staffName}},mounted:function(){this.$D(\"XNM\",\"2019\")},methods:{onChangeModel:function(e){this.formData=e},onClickImportData:function(e){f({title:e,url:\"/teacher-admin/awardInfo/importAndUpdateAward\"})},onSelectTeacher:function(e){this.teacher=e}}}),b=n(\"2877\"),v=Object(b.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"h1\",[e._v(\"--------- 动态表单 ---------\")]),n(\"c-dynamic-form\",{attrs:{\"form-data\":e.formData,\"form-items\":e.formItems},on:{\"change-model\":e.onChangeModel}}),n(\"h1\",[e._v(\"--------- 导入数据 ---------\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.$refs.bImportData.show()}}},[e._v(\" 导入数据(组件方式) \")]),n(\"b-import-data-panel\",{ref:\"bImportData\",attrs:{title:\"导入数据(组件方式)\",visible:e.visible,url:\"/teacher-admin/awardInfo/importAndUpdateAward\"},on:{\"update:visible\":function(t){e.visible=t}}}),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.onClickImportData(\"导入数据(方法方式)-1\")}}},[e._v(\" 导入数据(方法方式) \")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.onClickImportData(\"导入数据(方法方式)-2\")}}},[e._v(\" 导入数据(方法方式) \")]),n(\"h1\",[e._v(\"--------- 选择教师面版 ---------\")]),n(\"div\",[e._v(\" 选择老师：\"),n(\"el-input\",{attrs:{value:e.teacherName}},[n(\"el-button\",{attrs:{slot:\"append\"},on:{click:function(t){return e.$refs.bSelectTeacherPanel.show()}},slot:\"append\"},[e._v(\" 选择 \")])],1)],1),n(\"h1\",[e._v(\"--------- 业务列表组件 --------\")]),n(\"b-table\",{attrs:{toolbars:e.toolbars}}),n(\"h1\",[e._v(\"--------- 数据字典 --------\")]),e._v(\" 学年：\"+e._s(e.$D(\"XNM\",\"2019\"))+\" \")],1)}),[],!1,null,\"4699a75a\",null);t.default=v.exports},\"7e32\":function(e,t,n){},8421:function(e,t,n){\"use strict\";var a,o=(n(\"9e1f\"),n(\"450d\"),n(\"6ed5\")),i=n.n(o),l=(n(\"be4f\"),n(\"896a\")),r=n.n(l),s=(n(\"0fb7\"),n(\"f529\")),c=n.n(s),u=n(\"ade3\"),p=(n(\"10cb\"),n(\"f3ad\")),d=n.n(p),f=(n(\"a7cc\"),n(\"df33\")),h=n.n(f),m=(n(\"1951\"),n(\"eedf\")),b=n.n(m),v=(n(\"ac1f\"),n(\"b0c0\"),n(\"a9e3\"),n(\"d3b7\"),n(\"99af\"),n(\"be3b\"));var y={name:\"BImportDataPanel\",components:(a={},Object(u.a)(a,b.a.name,b.a),Object(u.a)(a,h.a.name,h.a),Object(u.a)(a,d.a.name,d.a),a),props:{url:{type:String,default:\"\"},ajaxImport:{type:Function,default:function(){}},maxFileSize:{type:Number,default:2},title:{type:String,default:\"\"},templateUrl:{type:String,default:\"\"},onSuccess:{type:Function}},data:function(){return{renderFile:!0,visible:!1,file:null}},computed:{fileName:function(){return this.file&&this.file.name||\"\"}},watch:{},methods:{onChange:function(e){var t=e.target.files,n=t[0];this.resetFile(),t.length&&this.checkFile(t[0])&&(this.file=n)},checkFile:function(e){var t=-1!==[\"xls\",\"xlsx\"].indexOf(function(e){if(!e||\"string\"!=typeof e)return\"\";var t=/\\.([0-9a-zA-Z]+)(?:[\\?#]|$)/i.exec(e);return t?t[1]:\"\"}(e.name).toLowerCase()),n=e.size/1024/1024<this.maxFileSize;return t||c.a.warning(\"上传文件只能是xls、xlsx格式\"),n||c.a.warning(\"上传文件只能最大2MB\"),t&&n},resetFile:function(){var e=this;this.renderFile=!1,this.$nextTick((function(){e.renderFile=!0}))},startUpalodFile:function(){var e=this;if(!(this.file&&this.file instanceof File))return c.a.warning(\"文件未填写\");var t=new FormData;t.append(\"file\",this.file);var n=r.a.service({text:\"导入中...\"}),a=this.ajaxImport&&this.ajaxImport(t);a&&\"function\"==typeof a.then||(a=Object(v.b)({method:\"POST\",url:this.url})),a.then((function(t){var n=t.data;if(e.hide(),n&&n.total!=n.successNum){var a=\"共\".concat(n.total,\"条数据，已成功导入\").concat(n.successNum,\"条，点击“下载”下载错误报告\");i.a.confirm(a,\"提示\",{confirmButtonText:\"下载\",cancelButtonText:\"取消\",type:\"warning\",closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1}).then((function(){window.open(n.fileUrl)}))}else i.a.alert(\"恭喜！共\".concat(n.total,\"条数据，全部完成导入\"),\"提示\",{confirmButtonText:\"确定\",type:\"success\"});\"function\"==typeof e.onSuccess&&e.onSuccess.call()})).catch((function(e){})).finally((function(){n.close()}))},downloadTemplate:function(){window.open(this.templateUrl)},show:function(){this.file=null,this.visible=!0},hide:function(){this.visible=!1},onClosed:function(){this.$emit(\"close\")}}},g=(n(\"b843\"),n(\"2877\")),_=Object(g.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"el-dialog\",e._g({attrs:{visible:e.visible,title:e.title||\"导入数据\",center:\"\",\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t},closed:e.onClosed}},e.$listeners),[n(\"div\",{staticClass:\"import-data-content\"},[n(\"h3\",[e._v(\"导入流程\")]),n(\"p\",[e._v(\" 1、我们为您设置了导入模板，下载后按照模板格式内容上传即可； \"),e.templateUrl?n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.downloadTemplate}},[e._v(\" 下载模板 \")]):e._e()],1),n(\"p\",[e._v(\"2、黄色表头表示的列为必填项；\")]),n(\"p\",[e._v(\"3、请不要进行插入列操作；\")]),n(\"p\",[e._v(\"4、excel表格数据行之间不要有空行。\")]),n(\"el-input\",{attrs:{value:e.fileName,placeholder:\"选择文件\",readonly:\"\"}},[n(\"el-button\",{attrs:{slot:\"append\"},on:{click:function(t){return e.$refs.file.click()}},slot:\"append\"},[e._v(\"浏览\")])],1),e.renderFile?n(\"input\",{directives:[{name:\"show\",rawName:\"v-show\",value:!1,expression:\"false\"}],ref:\"file\",attrs:{type:\"file\",accept:\".xls,.xlsx\"},on:{change:e.onChange}}):e._e()],1),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{size:\"small\"},on:{click:function(t){e.visible=!1}}},[e._v(\"取消\")]),n(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.startUpalodFile}},[e._v(\" 确定上传 \")])],1)])}),[],!1,null,\"bab7de12\",null);t.a=_.exports},a7cc:function(e,t,n){},b843:function(e,t,n){\"use strict\";var a=n(\"7e32\");n.n(a).a},df33:function(e,t,n){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/dist/\",n(n.s=89)}({0:function(e,t,n){\"use strict\";function a(e,t,n,a,o,i,l,r){var s,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId=\"data-v-\"+i),l?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=s):o&&(s=r?function(){o.call(this,this.$root.$options.shadowRoot)}:o),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,s):[s]}return{exports:e,options:c}}n.d(t,\"a\",(function(){return a}))},11:function(e,t){e.exports=n(\"2bb5\")},15:function(e,t){e.exports=n(\"5128\")},4:function(e,t){e.exports=n(\"d010\")},89:function(e,t,n){\"use strict\";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"transition\",{attrs:{name:\"dialog-fade\"},on:{\"after-enter\":e.afterEnter,\"after-leave\":e.afterLeave}},[n(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"el-dialog__wrapper\",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n(\"div\",{key:e.key,ref:\"dialog\",class:[\"el-dialog\",{\"is-fullscreen\":e.fullscreen,\"el-dialog--center\":e.center},e.customClass],style:e.style,attrs:{role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":e.title||\"dialog\"}},[n(\"div\",{staticClass:\"el-dialog__header\"},[e._t(\"title\",[n(\"span\",{staticClass:\"el-dialog__title\"},[e._v(e._s(e.title))])]),e.showClose?n(\"button\",{staticClass:\"el-dialog__headerbtn\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:e.handleClose}},[n(\"i\",{staticClass:\"el-dialog__close el-icon el-icon-close\"})]):e._e()],2),e.rendered?n(\"div\",{staticClass:\"el-dialog__body\"},[e._t(\"default\")],2):e._e(),e.$slots.footer?n(\"div\",{staticClass:\"el-dialog__footer\"},[e._t(\"footer\")],2):e._e()])])])};a._withStripped=!0;var o=n(15),i=n.n(o),l=n(11),r=n.n(l),s=n(4),c=n.n(s),u={name:\"ElDialog\",mixins:[i.a,c.a,r.a],props:{title:{type:String,default:\"\"},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:\"\"},top:{type:String,default:\"15vh\"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit(\"open\"),this.$el.addEventListener(\"scroll\",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener(\"scroll\",this.updatePopper),this.closed||this.$emit(\"close\"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:\"size is removed.\"}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){\"function\"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit(\"update:visible\",!1),this.$emit(\"close\"),this.closed=!0)},updatePopper:function(){this.broadcast(\"ElSelectDropdown\",\"updatePopper\"),this.broadcast(\"ElDropdownMenu\",\"updatePopper\")},afterEnter:function(){this.$emit(\"opened\")},afterLeave:function(){this.$emit(\"closed\")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},p=n(0),d=Object(p.a)(u,a,[],!1,null,null,null);d.options.__file=\"packages/dialog/src/component.vue\";var f=d.exports;f.install=function(e){e.component(f.name,f)},t.default=f}})}}]);","extractedComments":[]}