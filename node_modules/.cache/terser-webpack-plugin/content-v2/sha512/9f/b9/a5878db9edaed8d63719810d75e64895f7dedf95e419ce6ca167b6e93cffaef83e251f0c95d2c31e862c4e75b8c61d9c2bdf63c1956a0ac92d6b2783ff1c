{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"catering-role-manage\"],{\"4abb\":function(e,t,a){},\"83cf\":function(e,t,a){\"use strict\";a.r(t);var r,o=a(\"a34a\"),l=a.n(o),i=a(\"1da1\"),n=a(\"ade3\"),s=(a(\"eca7\"),a(\"450d\"),a(\"3787\")),c=a.n(s),u=(a(\"425f\"),a(\"4105\")),m=a.n(u),d=(a(\"10cb\"),a(\"f3ad\")),b=a.n(d),p=(a(\"6611\"),a(\"e772\")),f=a.n(p),h=(a(\"1f1a\"),a(\"4e4b\")),g=a.n(h),v=(a(\"1951\"),a(\"eedf\")),y=a.n(v),w=(a(\"a7cc\"),a(\"df33\")),$=a.n(w),j=(a(\"d3b7\"),a(\"b0c0\"),a(\"4de4\"),a(\"9f27\")),F=a(\"be3b\");var T={name:\"BRoleManage\",components:(r={},Object(n.a)(r,$.a.name,$.a),Object(n.a)(r,y.a.name,y.a),Object(n.a)(r,g.a.name,g.a),Object(n.a)(r,f.a.name,f.a),Object(n.a)(r,b.a.name,b.a),Object(n.a)(r,m.a.name,m.a),Object(n.a)(r,c.a.name,c.a),Object(n.a)(r,\"BTable\",j.a),r),props:{serverType:{type:String,default:\"\"}},data:function(){var e=this.$has;return\"function\"!=typeof e&&(e=function(){return!0}),{$has:e,dialog:{visible:!1,isedit:!1},ruleForm:{roleName:\"\",roleDesc:\"\",isShow:\"\"},rules:{roleName:[{required:!0,trigger:\"blur\",message:\"角色名称未填写\"}],isShow:[{required:!0,trigger:\"blur\",message:\"角色状态未填写\"}]}}},computed:{columns:function(){var e=this;return[{label:\"角色编码\",prop:\"roleId\"},{label:\"角色名称\",prop:\"roleName\",\"show-overflow-tooltip\":!0},{label:\"角色描述\",prop:\"roleDesc\",\"show-overflow-tooltip\":!0},{label:\"角色状态\",prop:\"isShow\",formatter:function(e,t,a){return\"0\"==a?\"启用\":\"禁用\"}},{label:\"操作\",colType:\"btns\",btns:[{label:\"编辑\",click:this.editTableRole,hidden:function(){return!e.$has([\"role-edit\"])},size:\"mini\",type:\"primary\"},{label:\"删除\",click:function(t){return e.del(t.roleId)},hidden:function(){return!e.$has([\"role-delete\"])},size:\"mini\",type:\"primary\"},{label:\"菜单授权\",click:function(t){return e.menuPermission(t.roleId)},hidden:function(){return!e.$has([\"role-permission\"])},size:\"mini\",type:\"primary\"},{label:\"分配用户\",click:function(t){return e.allotUser(t.roleId)},hidden:function(){return!e.$has([\"role-allotUser\"])},size:\"mini\",type:\"primary\"}].filter((function(t){return e.$has(t.auth)})),width:\"340px\"}]},formItems:function(){return[{type:\"input\",prop:\"roleName\",label:\"角色名称：\"},{type:\"input\",prop:\"roleId\",label:\"角色编码：\"},{type:\"select\",options:[{value:\"0\",label:\"启用\"},{value:\"1\",label:\"禁用\"}],prop:\"isShow\",label:\"状态：\"}]},toolbars:function(){var e=this;return[{label:\"新增\",click:this.addtableRole,auth:[\"role-add\"]}].filter((function(t){return e.$has(t.auth)}))}},watch:{},created:function(){},mounted:function(){},methods:{ajaxGetRoleData:function(e){return Object(F.b)({method:\"GET\",url:\"/usergw/admin/common/pageList/301\",params:e},this.serverType)},menuPermission:function(e){this.$router.push({path:\"/system/role/menu-auth\",query:{id:e}})},del:function(e){var t=this;this.$confirm(\"删除后不可恢复，确定删除？\",\"删除确认\",{customClass:\"box-danger\",center:!0}).then((function(){t.confirmLoading=!0,Object(F.b)({method:\"GET\",url:\"/usergw/admin/roleAuth/deleteRole/\".concat(e)},t.serverType).then((function(e){e.data,t.$message({type:\"success\",message:\"删除成功!\"}),t.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){t.confirmLoading=!1}))})).catch((function(){t.$message({type:\"info\",message:\"已取消删除\"})}))},allotUser:function(e){this.$router.push({path:\"/system/role/allot-user\",query:{roleId:e}})},addtableRole:function(){for(var e in this.dialog.visible=!0,this.dialog.isedit=!1,this.ruleForm)this.ruleForm[e]=\"\";delete this.ruleForm.roleId},editTableRole:function(e){this.dialog.visible=!0,this.dialog.isedit=!0,function(){var e,t,a,r,o={},l=arguments.length,i=arguments[l-1],n=0;\"boolean\"==typeof i&&(n++,t=i),\"[object Array]\"===Object.prototype.toString.call(arguments[0])?(a=!0,r=arguments[0],e=arguments[1]):e=arguments[0]||{};for(var s=0;s<l-n;s++){var c=arguments[s];for(var u in a?r:e){var m=a?r[u]:u;c&&void 0!==c[m]?t?o[m]=c[m]:e[m]=c[m]:t&&0==s&&(o[m]=e[m])}}}(this.ruleForm,e),this.ruleForm.roleId=e.roleId},sureDialog:function(){var e=this;return Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialog.isedit||(e.ruleForm.isShow=\"0\"),t.prev=1,t.next=4,e.$refs.elForm.validate();case 4:e.confirmLoading=!0,e.dialog.isedit?Object(F.b)({method:\"POST\",url:\"/usergw/admin/common/save/301/02\",data:e.ruleForm},e.serverType).then((function(t){t.data,e.dialog.visible=!1,e.$message({type:\"success\",message:\"编辑成功!\"}),e.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){e.confirmLoading=!1})):Object(F.b)({method:\"POST\",url:\"/usergw/admin/common/save/301/01\",data:e.ruleForm},e.serverType).then((function(t){t.data,e.dialog.visible=!1,e.$message({type:\"success\",message:\"新增成功!\"}),e.$refs.bTable.ajaxGetTableDataByPage()})).catch((function(){e.confirmLoading=!1})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(\"表单校验失败\",t.t0);case 11:case\"end\":return t.stop()}}),t,null,[[1,8]])})))()}}},x=(a(\"a694\"),a(\"2877\")),O=Object(x.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"b-table\",{ref:\"bTable\",attrs:{loading:\"\",headers:e.columns,\"form-items\":e.formItems,\"ajax-get-data\":e.ajaxGetRoleData,toolbars:e.toolbars,\"show-column\":!1}}),a(\"el-dialog\",{staticClass:\"dialog\",attrs:{title:e.dialog.isedit?\"编辑\":\"新增\",width:\"540px\",center:\"\",visible:e.dialog.visible},on:{\"update:visible\":function(t){return e.$set(e.dialog,\"visible\",t)}}},[a(\"el-form\",{ref:\"elForm\",attrs:{\"label-width\":\"80px\",model:e.ruleForm,rules:e.rules}},[a(\"el-form-item\",{attrs:{label:\"角色名称\",prop:\"roleName\"}},[a(\"el-input\",{attrs:{type:\"input\"},model:{value:e.ruleForm.roleName,callback:function(t){e.$set(e.ruleForm,\"roleName\",\"string\"==typeof t?t.trim():t)},expression:\"ruleForm.roleName\"}})],1),a(\"el-form-item\",{attrs:{label:\"角色描述\",prop:\"roleDesc\"}},[a(\"el-input\",{attrs:{type:\"input\"},model:{value:e.ruleForm.roleDesc,callback:function(t){e.$set(e.ruleForm,\"roleDesc\",\"string\"==typeof t?t.trim():t)},expression:\"ruleForm.roleDesc\"}})],1),e.dialog.isedit?a(\"el-form-item\",{attrs:{label:\"角色状态\",prop:\"roleDesc\"}},[a(\"el-select\",{model:{value:e.ruleForm.isShow,callback:function(t){e.$set(e.ruleForm,\"isShow\",t)},expression:\"ruleForm.isShow\"}},e._l(e.formItems[2].options,(function(e,t){return a(\"el-option\",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1):e._e()],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{size:\"small\"},on:{click:function(t){e.dialog.visible=!1}}},[e._v(\"取消\")]),a(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.sureDialog}},[e._v(\"确定\")])],1)],1)],1)}),[],!1,null,\"e5073bf0\",null);t.default=O.exports},a694:function(e,t,a){\"use strict\";var r=a(\"4abb\");a.n(r).a}}]);","extractedComments":[]}