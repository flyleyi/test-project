{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"sims-b-data-dict\"],{\"3fbe\":function(t,e,i){},\"7a87\":function(t,e,i){\"use strict\";var a=i(\"944e\"),n=i.n(a);n.a},\"7d15\":function(t,e,i){\"use strict\";var a=i(\"3fbe\"),n=i.n(a);n.a},\"944e\":function(t,e,i){},\"975d\":function(t,e,i){\"use strict\";i.r(e);var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"app-container\",on:{click:t.closeMenu}},[i(\"div\",{staticClass:\"header\"},[i(\"el-form\",{staticClass:\"search-form\",attrs:{inline:\"\",size:\"small\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.query(e)}}},[i(\"el-form-item\",{attrs:{label:\"业务ID：\"}},[i(\"el-input\",{staticStyle:{width:\"160px\"},model:{value:t.queryParams.dictionaryKey,callback:function(e){t.$set(t.queryParams,\"dictionaryKey\",\"string\"===typeof e?e.trim():e)},expression:\"queryParams.dictionaryKey\"}})],1),i(\"el-form-item\",{attrs:{label:\"业务名称：\"}},[i(\"el-input\",{staticStyle:{width:\"160px\"},model:{value:t.queryParams.dictionaryValueZh,callback:function(e){t.$set(t.queryParams,\"dictionaryValueZh\",\"string\"===typeof e?e.trim():e)},expression:\"queryParams.dictionaryValueZh\"}})],1),i(\"el-form-item\",{attrs:{label:\"状态：\"}},[i(\"el-select\",{staticStyle:{width:\"160px\"},attrs:{clearable:\"\"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,\"status\",e)},expression:\"queryParams.status\"}},[i(\"el-option\",{attrs:{value:0,label:\"启用\"}}),i(\"el-option\",{attrs:{value:1,label:\"禁用\"}})],1)],1),i(\"el-form-item\",[i(\"el-button\",{attrs:{loading:t.loading},on:{click:t.query}},[t._v(\" 查询 \")]),i(\"el-button\",{attrs:{loading:t.loading,type:\"primary\"},on:{click:t.resetForm}},[t._v(\" 重置 \")])],1)],1)],1),i(\"el-row\",{staticClass:\"plate-group\"},[i(\"el-col\",{attrs:{md:12}},[i(\"div\",{staticClass:\"plate plate-tree shortcut-menu-box\"},[i(\"el-tree\",{ref:\"treeDict\",staticClass:\"tree-dict\",attrs:{data:t.treeData,props:t.propsOptions,lazy:!0,load:t.loadNode,\"default-expanded-keys\":t.defaultExpandedKeys,\"expand-on-click-node\":!1,\"node-key\":\"id\",\"highlight-current\":\"\"},on:{\"node-contextmenu\":t.onContextMenu,\"node-click\":t.onNodeClick}}),i(\"c-shortcut-menu\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showMenu,expression:\"showMenu\"}],ref:\"shortcutMenu\",staticClass:\"shortcut-menu\",style:t.menuStyle,attrs:{\"menu-items\":t.menuItems},on:{command:t.command}})],1)]),i(\"el-col\",{attrs:{md:12}},[i(\"div\",{staticClass:\"plate plate-info\"},[i(\"el-form\",[i(\"el-form-item\",{attrs:{label:\"父业务ID：\"}},[t._v(\" \"+t._s(t.nowDictData.parentKey)+\" \")]),i(\"el-form-item\",{attrs:{label:\"父业务名称：\"}},[t._v(\" \"+t._s(t.nowDictData.parentText)+\" \")]),i(\"el-form-item\",{attrs:{label:\"业务ID：\"}},[t._v(\" \"+t._s(t.nowDictData.dictionaryKey)+\" \")]),i(\"el-form-item\",{attrs:{label:\"业务名称：\"}},[t._v(\" \"+t._s(t.nowDictData.dictionaryValueZh)+\" \")]),i(\"el-form-item\",{attrs:{label:\"状态：\"}},[t._v(\" \"+t._s(t._f(\"filtersStatus\")(t.nowDictData.status))+\" \")])],1)],1)])],1),i(\"el-dialog\",{attrs:{center:\"\",visible:t.showDialog,title:t.dialogTitle,\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(e){t.showDialog=e}}},[i(\"el-form\",{ref:\"editForm\",staticClass:\"edit-form\",attrs:{model:t.editForm,rules:t.formRules,size:\"1\",\"label-position\":\"left\",\"label-width\":\"105px\"}},[i(\"el-form-item\",{attrs:{label:\"父业务ID\"}},[t._v(\" \"+t._s(t.editForm.parentKey)+\" \")]),i(\"el-form-item\",{attrs:{label:\"父业务名称\"}},[t._v(\" \"+t._s(t.editForm.parentText)+\" \")]),i(\"el-form-item\",{attrs:{label:\"业务ID\",prop:\"dictionaryKey\"}},[i(\"el-input\",{attrs:{disabled:\"editor\"===t.editStatus},model:{value:t.editForm.dictionaryKey,callback:function(e){t.$set(t.editForm,\"dictionaryKey\",\"string\"===typeof e?e.trim():e)},expression:\"editForm.dictionaryKey\"}})],1),i(\"el-form-item\",{attrs:{label:\"业务名称\",prop:\"dictionaryValueZh\"}},[i(\"el-input\",{model:{value:t.editForm.dictionaryValueZh,callback:function(e){t.$set(t.editForm,\"dictionaryValueZh\",\"string\"===typeof e?e.trim():e)},expression:\"editForm.dictionaryValueZh\"}})],1),i(\"el-form-item\",{attrs:{label:\"状态\",prop:\"status\"}},[i(\"el-radio-group\",{model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,\"status\",e)},expression:\"editForm.status\"}},[i(\"el-radio\",{attrs:{label:0}},[t._v(\"启用\")]),i(\"el-radio\",{attrs:{label:1}},[t._v(\"禁用\")])],1)],1)],1),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{loading:t.confirmLoading,size:\"small\",type:\"primary\"},on:{click:t.confirm}},[t._v(\"确定\")]),i(\"el-button\",{attrs:{loading:t.confirmLoading,size:\"small\"},on:{click:function(e){t.showDialog=!1}}},[t._v(\"取消\")])],1)],1)],1)},o=[],r=i(\"5530\"),s=i(\"ade3\"),c=(i(\"b5d8\"),i(\"450d\"),i(\"f494\")),l=i.n(c),d=(i(\"fe07\"),i(\"6ac5\")),u=i.n(d),m=(i(\"6611\"),i(\"e772\")),f=i.n(m),h=(i(\"1f1a\"),i(\"4e4b\")),p=i.n(h),y=(i(\"5e32\"),i(\"6721\")),b=i.n(y),g=(i(\"10cb\"),i(\"f3ad\")),v=i.n(g),w=(i(\"a7cc\"),i(\"df33\")),D=i.n(w),_=(i(\"eca7\"),i(\"3787\")),C=i.n(_),x=(i(\"425f\"),i(\"4105\")),k=i.n(x),$=(i(\"f4f9\"),i(\"c2cc\")),T=i.n($),O=(i(\"7a0f\"),i(\"0f6c\")),E=i.n(O),L=(i(\"b0c0\"),i(\"159b\"),i(\"b64b\"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"ul\",{staticClass:\"shortcut-menu\"},[t._l(t.menuItems,(function(e,a){return[i(\"li\",{directives:[{name:\"auth\",rawName:\"v-auth\",value:e.auth,expression:\"item.auth\"}],key:a,staticClass:\"shortcut-menu__item\",on:{click:function(i){return t.triggerCommand(i,e,a)}}},[t._v(\" \"+t._s(e.label)+\" \")])]}))],2)}),S=[],N={name:\"CShortcutMenu\",props:{menuItems:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{triggerCommand:function(t,e,i){this.$emit(\"command\",t,e.command,e)},onClickRight:function(t){}}},j=N,P=(i(\"7d15\"),i(\"2877\")),F=Object(P[\"a\"])(j,L,S,!1,null,\"ea1ec488\",null),K=F.exports,M=i(\"bc34\"),V=i(\"be3b\"),Z={NEW:\"new\",EDITOR:\"editor\",DELETE:\"delete\"};function I(t){var e=t.getBoundingClientRect(),i=e.top-document.documentElement.clientTop+document.documentElement.scrollTop,a=e.bottom,n=e.left-document.documentElement.clientLeft+document.documentElement.scrollLeft,o=e.right,r=e.width||o-n,s=e.height||a-i;return{top:i,right:o,bottom:a,left:n,width:r,height:s}}var q={name:\"BDataDict\",components:(a={},Object(s[\"a\"])(a,K.name,K),Object(s[\"a\"])(a,E.a.name,E.a),Object(s[\"a\"])(a,T.a.name,T.a),Object(s[\"a\"])(a,k.a.name,k.a),Object(s[\"a\"])(a,C.a.name,C.a),Object(s[\"a\"])(a,D.a.name,D.a),Object(s[\"a\"])(a,v.a.name,v.a),Object(s[\"a\"])(a,b.a.name,b.a),Object(s[\"a\"])(a,p.a.name,p.a),Object(s[\"a\"])(a,f.a.name,f.a),Object(s[\"a\"])(a,u.a.name,u.a),Object(s[\"a\"])(a,l.a.name,l.a),a),props:{serverType:{type:String,default:\"\"}},data:function(){return{loading:!1,queryParams:{dictionaryKey:\"\",dictionaryValueZh:\"\",status:\"\"},treeData:[],nowDictData:{},nowDictNode:{},propsOptions:{label:\"dictionaryValueZh\"},showMenu:!1,menuTop:0,menuLeft:0,menuLocation:{pageX:0,pageY:0,relativeX:0,relativeY:0},screenWidth:document.body.clientWidth,showDialog:!1,editForm:{parentKey:\"\",parentText:\"\",parentId:\"\",dictionaryKey:\"\",dictionaryValueZh:\"\",status:0},formRules:{dictionaryKey:[{required:!0,trigger:\"blur\",message:\"业务ID未填写\"},{validator:function(t,e,i){/,/.test(e)?i(new Error(\"非法字符，不允许存在“ , ”。\")):i()}},{max:64,trigger:\"\",message:\"最大长度64个字符\"}],dictionaryValueZh:[{required:!0,trigger:\"blur\",message:\"业务名称未填写\"},{max:128,trigger:\"\",message:\"最大长度128个字符\"}],status:[{required:!0,trigger:\"click\",message:\"业务名称未填写\"}]},editStatus:\"\",confirmLoading:!1,defaultExpandedKeys:[\"-1\"]}},computed:{menuItems:function(){return console.log(\"this.nowDictNode\",this.nowDictNode),1===this.nowDictNode.level?[{label:\"新增\",command:Z.NEW,auth:[\"datadict-add\"]}]:this.nowDictNode.isLeaf?[{label:\"新增\",command:Z.NEW,auth:[\"datadict-add\"]},{label:\"编辑\",command:Z.EDITOR,auth:[\"datadict-edit\"]},{label:\"删除\",command:Z.DELETE,auth:[\"datadict-delete\"]}]:[{label:\"新增\",command:Z.NEW,auth:[\"datadict-add\"]},{label:\"编辑\",command:Z.EDITOR,auth:[\"datadict-edit\"]}]},menuStyle:function(){return{top:this.menuTop+\"px\",left:this.menuLeft+\"px\"}},dialogTitle:function(){return{new:\"新增\",editor:\"编辑\"}[this.editStatus]||\"\"}},watch:{screenWidth:function(t,e){this.calcMenuPosition()}},created:function(){},mounted:function(){window.addEventListener(\"resize\",this.onResize)},destroyed:function(){window.removeEventListener(\"resize\",this.onResize)},methods:{query:function(){this.treeData=[{id:\"-1\",dictionaryKey:\"-1\",dictionaryValueZh:\"数据字典\",status:0}]},loadNode:function(t,e){var i=this;if(0===t.level)return e([{id:\"-1\",dictionaryKey:\"-1\",dictionaryValueZh:\"数据字典\",status:0}]);this.loading||(this.loading=!0,Object(V[\"b\"])({method:\"POST\",url:\"/commonData/dictionaryApi/select/dic/children\",data:{keyList:[t.data.dictionaryKey],dictionaryValueZh:this.queryParams.dictionaryValueZh,status:this.queryParams.status}},this.serverType).then((function(t){var a=t.data;e(a||[]),i.loading=!1})).catch((function(){e([]),i.loading=!1})))},resetForm:function(t){this.queryParams={dictionaryKey:\"\",dictionaryValueZh:\"\",status:\"\"}},onContextMenu:function(t,e,i,a){var n=this;this.nowDictData=e,this.nowDictNode=i,this.showMenu=!0,Object.keys(this.menuLocation).forEach((function(e){n.menuLocation[e]=t[e]})),this.$nextTick((function(){var t=I(n.$refs[\"treeDict\"].$el);n.menuLocation.relativeX=n.menuLocation.pageX-t.left,n.menuLocation.relativeY=n.menuLocation.pageY-t.top,n.calcMenuPosition()}))},closeMenu:function(){this.showMenu=!1},calcMenuPosition:function(){var t=this;this.showMenu&&this.$nextTick((function(){var e=t.$refs[\"shortcutMenu\"],i=t.$refs[\"treeDict\"],a=e.$el.offsetWidth,n=i.$el.offsetWidth,o=t.menuLocation.relativeX,r=t.menuLocation.relativeY;t.menuTop=r,t.menuLeft=o+a>n?n-a:o}))},onResize:M[\"a\"].debounce((function(){window.screenWidth=document.body.clientWidth,this.screenWidth=window.screenWidth}),200),command:function(t,e,i){var a=this;switch(e){case Z.NEW:this.editStatus=e,this.editForm={isLeaf:\"1\",parentId:this.nowDictData.dictionaryId,parentText:this.nowDictData.dictionaryValueZh,parentKey:this.nowDictData.dictionaryKey,dictionaryKey:\"\",dictionaryValueZh:\"\",status:0,dicOrder:(this.nowDictNode.childNodes&&this.nowDictNode.childNodes.length||0)+1},this.initShowDialog();break;case Z.EDITOR:this.editStatus=e;var n=new Object;[\"isLeaf\",\"parentKey\",\"parentId\",\"dictionaryId\",\"dictionaryKey\",\"dictionaryValueZh\",\"status\",\"dicOrder\"].forEach((function(t){n[t]=a.nowDictData[t]})),n.parentText=this.nowDictNode.parent&&this.nowDictNode.parent.data&&this.nowDictNode.parent.data.dictionaryValueZh||\"\",this.editForm=n,this.initShowDialog();break;case Z.DELETE:this.$confirm(\"是否确定删除?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return Object(V[\"b\"])({method:\"GET\",url:\"/dictionary/deleteDictionary\",params:{ids:a.nowDictData.dictionaryId}},a.serverType)})).then((function(){return a.$nextTick()})).then((function(){a.$refs[\"treeDict\"].remove(a.nowDictNode),a.$message.success(\"删除成功\")})).catch((function(){}));break}},confirm:function(){var t=this;this.confirmLoading||this.$refs[\"editForm\"].validate((function(e){var i={};if(e)switch(t.editStatus){case\"new\":i=Object(r[\"a\"])({},t.editForm),delete i[\"isLeaf\"],t.confirmLoading=!0,Object(V[\"b\"])({method:\"POST\",url:\"/commonData/dictionaryApi/add/dic\",data:i},t.serverType).then((function(e){var i=e.data;t.$nextTick((function(){t.nowDictData.children||t.$set(t.nowDictData,\"children\",[]),t.nowDictData.children.push(i),t.showDialog=!1,t.confirmLoading=!1,t.$message.success(\"新增成功\")}))})).catch((function(){t.confirmLoading=!1}));break;case\"editor\":t.confirmLoading=!0,Object(V[\"b\"])({method:\"POST\",url:\"/commonData/dictionaryApi/update/dic\",data:Object(r[\"a\"])({},t.editForm)},t.serverType).then((function(){Object.assign(t.nowDictData,t.editForm),t.showDialog=!1,t.confirmLoading=!1,t.$message.success(\"修改成功\")})).catch((function(){t.confirmLoading=!1}));break;default:t.$message.warning(\"提交异常，无处理方法\");break}}))},initShowDialog:function(){var t=this;this.showDialog=!0,this.$nextTick((function(){t.$refs[\"editForm\"].clearValidate()}))},onNodeClick:function(t,e,i){this.showMenu=!1,this.nowDictData=t,this.nowDictNode=e,this.nowDictData.parentText=this.nowDictNode.parent&&this.nowDictNode.parent.data&&this.nowDictNode.parent.data.dictionaryValueZh||\"\"}},filters:{filtersStatus:function(t){return{0:\"启用\",1:\"禁用\"}[t]||\"\"}}},B=q,R=(i(\"7a87\"),Object(P[\"a\"])(B,n,o,!1,null,\"38dcd615\",null));e[\"default\"]=R.exports},a7cc:function(t,e,i){},df33:function(t,e,i){t.exports=function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t[\"default\"]}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"/dist/\",i(i.s=89)}({0:function(t,e,i){\"use strict\";function a(t,e,i,a,n,o,r,s){var c,l=\"function\"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),a&&(l.functional=!0),o&&(l._scopeId=\"data-v-\"+o),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||\"undefined\"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):n&&(c=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i.d(e,\"a\",(function(){return a}))},11:function(t,e){t.exports=i(\"2bb5\")},15:function(t,e){t.exports=i(\"5128\")},4:function(t,e){t.exports=i(\"d010\")},89:function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"transition\",{attrs:{name:\"dialog-fade\"},on:{\"after-enter\":t.afterEnter,\"after-leave\":t.afterLeave}},[i(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.visible,expression:\"visible\"}],staticClass:\"el-dialog__wrapper\",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[i(\"div\",{key:t.key,ref:\"dialog\",class:[\"el-dialog\",{\"is-fullscreen\":t.fullscreen,\"el-dialog--center\":t.center},t.customClass],style:t.style,attrs:{role:\"dialog\",\"aria-modal\":\"true\",\"aria-label\":t.title||\"dialog\"}},[i(\"div\",{staticClass:\"el-dialog__header\"},[t._t(\"title\",[i(\"span\",{staticClass:\"el-dialog__title\"},[t._v(t._s(t.title))])]),t.showClose?i(\"button\",{staticClass:\"el-dialog__headerbtn\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:t.handleClose}},[i(\"i\",{staticClass:\"el-dialog__close el-icon el-icon-close\"})]):t._e()],2),t.rendered?i(\"div\",{staticClass:\"el-dialog__body\"},[t._t(\"default\")],2):t._e(),t.$slots.footer?i(\"div\",{staticClass:\"el-dialog__footer\"},[t._t(\"footer\")],2):t._e()])])])},n=[];a._withStripped=!0;var o=i(15),r=i.n(o),s=i(11),c=i.n(s),l=i(4),d=i.n(l),u={name:\"ElDialog\",mixins:[r.a,d.a,c.a],props:{title:{type:String,default:\"\"},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:\"\"},top:{type:String,default:\"15vh\"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit(\"open\"),this.$el.addEventListener(\"scroll\",this.updatePopper),this.$nextTick((function(){e.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener(\"scroll\",this.updatePopper),this.closed||this.$emit(\"close\"),this.destroyOnClose&&this.$nextTick((function(){e.key++})))}},computed:{style:function(){var t={};return this.fullscreen||(t.marginTop=this.top,this.width&&(t.width=this.width)),t}},methods:{getMigratingConfig:function(){return{props:{size:\"size is removed.\"}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){\"function\"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(t){!1!==t&&(this.$emit(\"update:visible\",!1),this.$emit(\"close\"),this.closed=!0)},updatePopper:function(){this.broadcast(\"ElSelectDropdown\",\"updatePopper\"),this.broadcast(\"ElDropdownMenu\",\"updatePopper\")},afterEnter:function(){this.$emit(\"opened\")},afterLeave:function(){this.$emit(\"closed\")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},m=u,f=i(0),h=Object(f[\"a\"])(m,a,n,!1,null,null,null);h.options.__file=\"packages/dialog/src/component.vue\";var p=h.exports;p.install=function(t){t.component(p.name,p)};e[\"default\"]=p}})}}]);","extractedComments":[]}