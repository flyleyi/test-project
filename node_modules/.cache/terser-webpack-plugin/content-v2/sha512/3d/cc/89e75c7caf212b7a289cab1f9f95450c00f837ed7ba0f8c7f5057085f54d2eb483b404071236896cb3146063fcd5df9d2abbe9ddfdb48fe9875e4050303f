{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"sims-b-role-auth-menu\"],{\"00bb\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAt1BMVEUAAABPhPZJffFJfPFJffFJfPBLffBMfvBNf/BSgvBSg/BUhPBZh/FaiPFijvJkj/JulvNvl/NwmPNxmfNzmvN1m/N7oPR8oPSBpPSDpvSFp/WKq/WMrPWRsPaWs/aYtfabt/adufeowPesw/iuxPivxfi5zfm+0Pm/0fnA0vnO3PvP3fvb5fzc5fzc5vzm7f3n7v3w9P3y9v72+P73+f75+v76+/77/P78/P78/f79/f7+/v7///+U4lsgAAAABXRSTlMAHafm7WqwCLkAAACqSURBVDjLzZO3FsIwDEVlO4+a0HvvLbTQIfr/72LhHBgceeVNHu4gXesRKW2QEKMVkfIgxFOkIUaTkQFDcOSPAT8cikB2y1MJSG84zEjAivc5aYYZHwNpyBFHRWmLbnwpW9YMqp9H4/5o2jwsuQ8AKJ3jnlVU/fZsAShEPE4w2Xlda/APPE9UPeBTZcdr4S8mHH8FWtdc/Ai0Aql2/k9PzlkcZ/Wc5XXV/w0tTR1d77YjrgAAAABJRU5ErkJggg==\"},\"4f2b\":function(e,t,n){},\"5f23\":function(e,t,n){\"use strict\";n.r(t);var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticClass:\"rolePermission\"},[n(\"div\",{staticClass:\"header\"},[n(\"div\",{staticClass:\"header-right\"},[n(\"span\",{staticClass:\"current-role\"},[e._v(\"当前角色：\")]),n(\"el-tag\",[e._v(e._s(e.roleName))])],1),n(\"div\",{staticClass:\"header-left\"},[n(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-arrow-left\",size:\"small\"},on:{click:function(t){return e.$router.push(\"/system/role\")}}},[e._v(\"返回\")]),n(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.saveData}},[e._v(\"保存\")])],1)]),n(\"div\",{staticClass:\"table\"},[n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"row-key\":\"menuId\",border:\"\",\"default-expand-all\":\"\",\"header-cell-class-name\":e.headerStyle,\"cell-class-name\":e.cellStyle,\"tree-props\":{children:\"children\",hasChildren:\"hasChildren\"}}},[n(\"el-table-column\",{attrs:{prop:\"menuName\",label:\"菜单列表\",width:\"300\"}}),n(\"el-table-column\",{attrs:{label:\"菜单权限\",width:\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[\"-1\"==t.row.hasParent&&t.row.children&&t.row.children.length>0||\"-1\"==t.row.hasParent&&(!t.row.children||t.row.children.length<=0)?n(\"div\",{staticStyle:{\"text-align\":\"center\"}},[n(\"img\",{staticClass:\"f-l\",attrs:{src:t.row.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon},on:{click:function(n){return e.check(t.row.checked,t.row,\"0\")}}})]):(t.row.buttons&&t.row.buttons.length,n(\"div\",[n(\"img\",{staticClass:\"f-l\",attrs:{src:t.row.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon},on:{click:function(n){return e.check(t.row.checked,t.row,\"1\")}}})]))]}}])}),n(\"el-table-column\",{attrs:{label:\"按钮权限\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"div\",{staticClass:\"f-c table-list\"},e._l(t.row.buttons,(function(i,o){return n(\"div\",{key:o,staticClass:\"f-c f-l table-list-item\",on:{click:function(n){i.checked=!i.checked,e.check(i.checked,t.row,\"2\")}}},[n(\"img\",{staticClass:\"f-l\",attrs:{src:i.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon}}),n(\"div\",{staticClass:\"f-l\"},[e._v(e._s(i.btnName))])])})),0)]}}])})],1)],1)])])},r=[],a=n(\"ade3\"),s=(n(\"cbb5\"),n(\"450d\"),n(\"8bbc\")),c=n.n(s),l=(n(\"1951\"),n(\"eedf\")),d=n.n(l),u=(n(\"5466\"),n(\"ecdf\")),h=n.n(u),f=(n(\"38a0\"),n(\"ad41\")),b=n.n(f),m=n(\"53ca\"),p=(n(\"d3b7\"),n(\"b0c0\"),n(\"159b\"),n(\"be3b\")),v=n(\"9a10\"),g=n.n(v),k=n(\"00bb\"),A=n.n(k),_=n(\"bc34\");function x(e,t){var n;if(t=t||{},t.refer=void 0===t.refer?1:t.refer,\"[object Array]\"===Object.prototype.toString.call(e))for(var i in n=[],e)n.push(this.treeDataChangeField(e[i],t));else if(e&&\"object\"===Object(m[\"a\"])(e)){var o=t.data;for(var r in n={},t.refer?e:o)if(void 0!==e[r])if(t.contain&&(n[r]=e[r]),\"function\"==typeof o[r]){var a=o[r](r,e[r],e);if(\"[object Array]\"===Object.prototype.toString.call(a))n[a[0]]=a[1];else if(a&&\"object\"===Object(m[\"a\"])(a))for(var s in a)n[s]=a[s]}else{var c=\"[object Array]\"===Object.prototype.toString.call(t.treeNodes),l=o[r]?o[r]:r;n[l]=c?t.treeNodes.indexOf(r)>=0:t.treeNodes&&t.treeNodes!==r?e[r]:this.treeDataChangeField(e[r],t)}}else n=e;return n}var y={name:\"BRoleAuthMenu\",components:(i={},Object(a[\"a\"])(i,b.a.name,b.a),Object(a[\"a\"])(i,h.a.name,h.a),Object(a[\"a\"])(i,d.a.name,d.a),Object(a[\"a\"])(i,c.a.name,c.a),i),props:{serverType:{type:String,default:\"\"}},data:function(){return{id:this.$route.query.id,tableData:[],normalCheckboxIcon:g.a,selectedCheckboxIcon:A.a,roleName:\"\",loading:!1}},computed:{},watch:{},created:function(){this.getData(),this.getName()},mounted:function(){},methods:{check:function(e,t,n){if(\"0\"==n){if(t.checked=!e,t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){t.children[i].checked=!e;for(var o=0;o<t.children[i].buttons.length;o++)t.children[i].buttons[o].checked=!e}t.buttons&&t.buttons.length>0&&t.buttons.forEach((function(t){t.checked=!e}))}else{if(\"1\"==n){if(t.checked=!e,t.buttons&&t.buttons.length>0)for(var r=0;r<t.buttons.length;r++)t.buttons[r].checked=!e}else{var a=!!(t.buttons&&t.buttons.length>0&&t.buttons.some((function(e){return e.checked})));a&&(t.checked=!0)}this.tableData.forEach((function(e,t,n){if(e.children&&e.children.length>0)return e.checked=!!e.children.some((function(e){return e.checked}))}))}},goBack:function(){this.$router.push({name:\"role\"})},headerStyle:function(e){e.row,e.rowIndex;return\"bskHeader\"},cellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return\"bskCell\"},getData:function(){var e=this;this.loading=!0,Object(p[\"b\"])({method:\"GET\",url:\"/usergw/admin/roleAuth/selectRoleAuth/\".concat(this.id)},this.serverType).then((function(t){e.tableData=_[\"a\"].listConvertTree(t.data,\"menuId\",\"hasParent\",!0),e.loading=!1})).catch((function(){e.loading=!1}))},getChildTree:function(e){var t=[];return t=x(t,{data:{buttons:\"list\"},treeNodes:\"buttons\"}),t},getName:function(){var e=this;return Object(p[\"b\"])({method:\"GET\",url:\"/usergw/admin/roleAuth/getRoleName/\".concat(this.id)},this.serverType).then((function(t){e.roleName=t.data})).catch((function(){}))},isTopMenu:function(e){return\"-1\"==e.hasParent},saveData:function(){var e=this,t=[],n=[];this.tableData.forEach((function(e,i,o){e.checked&&n.push(e.menuId),Array.isArray(e.buttons)&&e.buttons.forEach((function(e){e.checked&&t.push(e.btnId)})),e.children&&e.children.length>0&&e.children.forEach((function(e,i,o){e.checked&&n.push(e.menuId),e.buttons&&e.buttons.length>0&&e.buttons.forEach((function(e,n,i){e.checked&&t.push(e.btnId)}))}))})),this.loading=!0,Object(p[\"b\"])({method:\"POST\",url:\"/usergw/admin/roleAuth/saveRoleAuth\",data:{btnIds:t,menuids:n,roleId:this.id}},this.serverType).then((function(t){e.$message({type:\"success\",message:\"保存成功!\"}),e.loading=!1})).catch((function(){e.loading=!1}))}}},C=y,S=(n(\"a4af\"),n(\"2877\")),w=Object(S[\"a\"])(C,o,r,!1,null,\"4f6397cc\",null);t[\"default\"]=w.exports},\"8bbc\":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/dist/\",n(n.s=124)}({0:function(e,t,n){\"use strict\";function i(e,t,n,i,o,r,a,s){var c,l=\"function\"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId=\"data-v-\"+r),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||\"undefined\"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,\"a\",(function(){return i}))},124:function(e,t,n){\"use strict\";n.r(t);var i,o,r={name:\"ElTag\",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:\"light\",validator:function(e){return-1!==[\"dark\",\"light\",\"plain\"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit(\"close\",e)},handleClick:function(e){this.$emit(\"click\",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,i=this.hit,o=this.effect,r=[\"el-tag\",t?\"el-tag--\"+t:\"\",n?\"el-tag--\"+n:\"\",o?\"el-tag--\"+o:\"\",i&&\"is-hit\"],a=e(\"span\",{class:r,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e(\"i\",{class:\"el-tag__close el-icon-close\",on:{click:this.handleClose}})]);return this.disableTransitions?a:e(\"transition\",{attrs:{name:\"el-zoom-in-center\"}},[a])}},a=r,s=n(0),c=Object(s[\"a\"])(a,i,o,!1,null,null,null);c.options.__file=\"packages/tag/src/tag.vue\";var l=c.exports;l.install=function(e){e.component(l.name,l)};t[\"default\"]=l}})},\"9a10\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAG1BMVEUAAACNsP+Iqf+Hqv+Iqv+Hqf+qwv/y9v////+NUaisAAAABXRSTlMAHafm7WqwCLkAAAA4SURBVCjPY2BUDkUCRgIMIqEowJFBNb0DCZQFMZhWIAu0BzOEdqCA0FGBwSGAEVEYUYkR2ejJAQCtG/RhhxRTQAAAAABJRU5ErkJggg==\"},a4af:function(e,t,n){\"use strict\";var i=n(\"4f2b\"),o=n.n(i);o.a},cbb5:function(e,t,n){},dcdc:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/dist/\",n(n.s=83)}({0:function(e,t,n){\"use strict\";function i(e,t,n,i,o,r,a,s){var c,l=\"function\"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId=\"data-v-\"+r),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||\"undefined\"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,\"a\",(function(){return i}))},4:function(e,t){e.exports=n(\"d010\")},83:function(e,t,n){\"use strict\";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"label\",{staticClass:\"el-checkbox\",class:[e.border&&e.checkboxSize?\"el-checkbox--\"+e.checkboxSize:\"\",{\"is-disabled\":e.isDisabled},{\"is-bordered\":e.border},{\"is-checked\":e.isChecked}],attrs:{id:e.id}},[n(\"span\",{staticClass:\"el-checkbox__input\",class:{\"is-disabled\":e.isDisabled,\"is-checked\":e.isChecked,\"is-indeterminate\":e.indeterminate,\"is-focus\":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&\"checkbox\",\"aria-checked\":!!e.indeterminate&&\"mixed\"}},[n(\"span\",{staticClass:\"el-checkbox__inner\"}),e.trueLabel||e.falseLabel?n(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.model,expression:\"model\"}],staticClass:\"el-checkbox__original\",attrs:{type:\"checkbox\",\"aria-hidden\":e.indeterminate?\"true\":\"false\",name:e.name,disabled:e.isDisabled,\"true-value\":e.trueLabel,\"false-value\":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,o=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var r=null,a=e._i(n,r);i.checked?a<0&&(e.model=n.concat([r])):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=o},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.model,expression:\"model\"}],staticClass:\"el-checkbox__original\",attrs:{type:\"checkbox\",\"aria-hidden\":e.indeterminate?\"true\":\"false\",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=e.label,a=e._i(n,r);i.checked?a<0&&(e.model=n.concat([r])):a>-1&&(e.model=n.slice(0,a).concat(n.slice(a+1)))}else e.model=o},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n(\"span\",{staticClass:\"el-checkbox__label\"},[e._t(\"default\"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},o=[];i._withStripped=!0;var r=n(4),a=n.n(r),s={name:\"ElCheckbox\",mixins:[a.a],inject:{elForm:{default:\"\"},elFormItem:{default:\"\"}},componentName:\"ElCheckbox\",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch(\"ElCheckboxGroup\",\"input\",[e])):(this.$emit(\"input\",e),this.selfModel=e)}},isChecked:function(){return\"[object Boolean]\"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if(\"ElCheckboxGroup\"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit(\"change\",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch(\"ElCheckboxGroup\",\"change\",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute(\"aria-controls\",this.controls)},watch:{value:function(e){this.dispatch(\"ElFormItem\",\"el.form.change\",e)}}},c=s,l=n(0),d=Object(l[\"a\"])(c,i,o,!1,null,null,null);d.options.__file=\"packages/checkbox/src/checkbox.vue\";var u=d.exports;u.install=function(e){e.component(u.name,u)};t[\"default\"]=u}})}}]);","extractedComments":[]}