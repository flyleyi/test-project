{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"catering-role-auth-menu\"],{\"00bb\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAt1BMVEUAAABPhPZJffFJfPFJffFJfPBLffBMfvBNf/BSgvBSg/BUhPBZh/FaiPFijvJkj/JulvNvl/NwmPNxmfNzmvN1m/N7oPR8oPSBpPSDpvSFp/WKq/WMrPWRsPaWs/aYtfabt/adufeowPesw/iuxPivxfi5zfm+0Pm/0fnA0vnO3PvP3fvb5fzc5fzc5vzm7f3n7v3w9P3y9v72+P73+f75+v76+/77/P78/P78/f79/f7+/v7///+U4lsgAAAABXRSTlMAHafm7WqwCLkAAACqSURBVDjLzZO3FsIwDEVlO4+a0HvvLbTQIfr/72LhHBgceeVNHu4gXesRKW2QEKMVkfIgxFOkIUaTkQFDcOSPAT8cikB2y1MJSG84zEjAivc5aYYZHwNpyBFHRWmLbnwpW9YMqp9H4/5o2jwsuQ8AKJ3jnlVU/fZsAShEPE4w2Xlda/APPE9UPeBTZcdr4S8mHH8FWtdc/Ai0Aql2/k9PzlkcZ/Wc5XXV/w0tTR1d77YjrgAAAABJRU5ErkJggg==\"},\"4f2b\":function(e,t,n){},\"5f23\":function(e,t,n){\"use strict\";n.r(t);var a,c=n(\"ade3\"),r=(n(\"cbb5\"),n(\"450d\"),n(\"8bbc\")),o=n.n(r),i=(n(\"1951\"),n(\"eedf\")),s=n.n(i),l=(n(\"5466\"),n(\"ecdf\")),d=n.n(l),h=(n(\"38a0\"),n(\"ad41\")),u=n.n(h),f=n(\"53ca\"),b=(n(\"d3b7\"),n(\"b0c0\"),n(\"159b\"),n(\"be3b\")),A=n(\"9a10\"),g=n.n(A),m=n(\"00bb\"),v=n.n(m),k=n(\"bc34\");var p={name:\"BRoleAuthMenu\",components:(a={},Object(c.a)(a,u.a.name,u.a),Object(c.a)(a,d.a.name,d.a),Object(c.a)(a,s.a.name,s.a),Object(c.a)(a,o.a.name,o.a),a),props:{serverType:{type:String,default:\"\"}},data:function(){return{id:this.$route.query.id,tableData:[],normalCheckboxIcon:g.a,selectedCheckboxIcon:v.a,roleName:\"\",loading:!1}},computed:{},watch:{},created:function(){this.getData(),this.getName()},mounted:function(){},methods:{check:function(e,t,n){if(\"0\"==n){if(t.checked=!e,t.children&&t.children.length>0)for(var a=0;a<t.children.length;a++){t.children[a].checked=!e;for(var c=0;c<t.children[a].buttons.length;c++)t.children[a].buttons[c].checked=!e}t.buttons&&t.buttons.length>0&&t.buttons.forEach((function(t){t.checked=!e}))}else{if(\"1\"==n){if(t.checked=!e,t.buttons&&t.buttons.length>0)for(var r=0;r<t.buttons.length;r++)t.buttons[r].checked=!e}else!!(t.buttons&&t.buttons.length>0&&t.buttons.some((function(e){return e.checked})))&&(t.checked=!0);this.tableData.forEach((function(e,t,n){if(e.children&&e.children.length>0)return e.checked=!!e.children.some((function(e){return e.checked}))}))}},goBack:function(){this.$router.push({name:\"role\"})},headerStyle:function(e){return e.row,e.rowIndex,\"bskHeader\"},cellStyle:function(e){return e.row,e.column,e.rowIndex,e.columnIndex,\"bskCell\"},getData:function(){var e=this;this.loading=!0,Object(b.b)({method:\"GET\",url:\"/usergw/admin/roleAuth/selectRoleAuth/\".concat(this.id)},this.serverType).then((function(t){e.tableData=k.a.listConvertTree(t.data,\"menuId\",\"hasParent\",!0),e.loading=!1})).catch((function(){e.loading=!1}))},getChildTree:function(e){var t=[];return t=function(e,t){var n;if((t=t||{}).refer=void 0===t.refer?1:t.refer,\"[object Array]\"===Object.prototype.toString.call(e))for(var a in n=[],e)n.push(this.treeDataChangeField(e[a],t));else if(e&&\"object\"===Object(f.a)(e)){var c=t.data;for(var r in n={},t.refer?e:c)if(void 0!==e[r])if(t.contain&&(n[r]=e[r]),\"function\"==typeof c[r]){var o=c[r](r,e[r],e);if(\"[object Array]\"===Object.prototype.toString.call(o))n[o[0]]=o[1];else if(o&&\"object\"===Object(f.a)(o))for(var i in o)n[i]=o[i]}else{var s=\"[object Array]\"===Object.prototype.toString.call(t.treeNodes);n[c[r]?c[r]:r]=s?t.treeNodes.indexOf(r)>=0:t.treeNodes&&t.treeNodes!==r?e[r]:this.treeDataChangeField(e[r],t)}}else n=e;return n}(t,{data:{buttons:\"list\"},treeNodes:\"buttons\"})},getName:function(){var e=this;return Object(b.b)({method:\"GET\",url:\"/usergw/admin/roleAuth/getRoleName/\".concat(this.id)},this.serverType).then((function(t){e.roleName=t.data})).catch((function(){}))},isTopMenu:function(e){return\"-1\"==e.hasParent},saveData:function(){var e=this,t=[],n=[];this.tableData.forEach((function(e,a,c){e.checked&&n.push(e.menuId),Array.isArray(e.buttons)&&e.buttons.forEach((function(e){e.checked&&t.push(e.btnId)})),e.children&&e.children.length>0&&e.children.forEach((function(e,a,c){e.checked&&n.push(e.menuId),e.buttons&&e.buttons.length>0&&e.buttons.forEach((function(e,n,a){e.checked&&t.push(e.btnId)}))}))})),this.loading=!0,Object(b.b)({method:\"POST\",url:\"/usergw/admin/roleAuth/saveRoleAuth\",data:{btnIds:t,menuids:n,roleId:this.id}},this.serverType).then((function(t){e.$message({type:\"success\",message:\"保存成功!\"}),e.loading=!1})).catch((function(){e.loading=!1}))}}},w=(n(\"a4af\"),n(\"2877\")),C=Object(w.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticClass:\"rolePermission\"},[n(\"div\",{staticClass:\"header\"},[n(\"div\",{staticClass:\"header-right\"},[n(\"span\",{staticClass:\"current-role\"},[e._v(\"当前角色：\")]),n(\"el-tag\",[e._v(e._s(e.roleName))])],1),n(\"div\",{staticClass:\"header-left\"},[n(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-arrow-left\",size:\"small\"},on:{click:function(t){return e.$router.push(\"/system/role\")}}},[e._v(\"返回\")]),n(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.saveData}},[e._v(\"保存\")])],1)]),n(\"div\",{staticClass:\"table\"},[n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.tableData,\"row-key\":\"menuId\",border:\"\",\"default-expand-all\":\"\",\"header-cell-class-name\":e.headerStyle,\"cell-class-name\":e.cellStyle,\"tree-props\":{children:\"children\",hasChildren:\"hasChildren\"}}},[n(\"el-table-column\",{attrs:{prop:\"menuName\",label:\"菜单列表\",width:\"300\"}}),n(\"el-table-column\",{attrs:{label:\"菜单权限\",width:\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[\"-1\"==t.row.hasParent&&t.row.children&&t.row.children.length>0||\"-1\"==t.row.hasParent&&(!t.row.children||t.row.children.length<=0)?n(\"div\",{staticStyle:{\"text-align\":\"center\"}},[n(\"img\",{staticClass:\"f-l\",attrs:{src:t.row.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon},on:{click:function(n){return e.check(t.row.checked,t.row,\"0\")}}})]):(t.row.buttons&&t.row.buttons.length,n(\"div\",[n(\"img\",{staticClass:\"f-l\",attrs:{src:t.row.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon},on:{click:function(n){return e.check(t.row.checked,t.row,\"1\")}}})]))]}}])}),n(\"el-table-column\",{attrs:{label:\"按钮权限\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"div\",{staticClass:\"f-c table-list\"},e._l(t.row.buttons,(function(a,c){return n(\"div\",{key:c,staticClass:\"f-c f-l table-list-item\",on:{click:function(n){a.checked=!a.checked,e.check(a.checked,t.row,\"2\")}}},[n(\"img\",{staticClass:\"f-l\",attrs:{src:a.checked?e.selectedCheckboxIcon:e.normalCheckboxIcon}}),n(\"div\",{staticClass:\"f-l\"},[e._v(e._s(a.btnName))])])})),0)]}}])})],1)],1)])])}),[],!1,null,\"4f6397cc\",null);t.default=C.exports},\"9a10\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAG1BMVEUAAACNsP+Iqf+Hqv+Iqv+Hqf+qwv/y9v////+NUaisAAAABXRSTlMAHafm7WqwCLkAAAA4SURBVCjPY2BUDkUCRgIMIqEowJFBNb0DCZQFMZhWIAu0BzOEdqCA0FGBwSGAEVEYUYkR2ejJAQCtG/RhhxRTQAAAAABJRU5ErkJggg==\"},a4af:function(e,t,n){\"use strict\";var a=n(\"4f2b\");n.n(a).a},cbb5:function(e,t,n){}}]);","extractedComments":[]}