{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/weekly/weeklyFoodslist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/weekly/weeklyFoodslist.vue","mtime":1645178321124},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC9wcmFjdGljZS9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG9yZGVyQ29udGVudEZvclBhZ2UgfSBmcm9tICcuLi8uLi9hcGkvd2Vla2x5L2luZGV4LmpzJzsKaW1wb3J0IHsgZm9ybWF0ZURhdGUgfSBmcm9tICcuLi8uLi9wbHVnaW5zL2NvbW1vbi91dGlscy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnd2Vla2x5TGlzdCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdGVEYXRlOiBmb3JtYXRlRGF0ZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgZG93bkxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgcXVlcnk6IHsKICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgZ3JhZGVJZDogJycsCiAgICAgICAgbGltaXQ6IDEwIC8v5q+P6aG15p2h5pWwCgogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucXVlcnkuZ3JhZGVJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmdyYWRlSWQ7CgogICAgaWYgKHRoaXMucXVlcnkuZ3JhZGVJZCkgewogICAgICB0aGlzLmdldEZvb2RzTGlzdCgpOwogICAgICB0aGlzLmRvd25Mb2FkaW5nID0gdHJ1ZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvRGV0YWlsOiBmdW5jdGlvbiBnb0RldGFpbChpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnd2Vla2x5Rm9vZERldGFpbCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGlkOiBpdGVtLm1lbnVJZCwKICAgICAgICAgIHRpbWU6IGl0ZW0uc2VuZFRpbWUsCiAgICAgICAgICBzY2hvb2xOYW1lOiBpdGVtLnNjaG9vbE5hbWUsCiAgICAgICAgICBtZW51TmFtZTogaXRlbS5tZW51TmFtZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Rm9vZHNMaXN0OiBmdW5jdGlvbiBnZXRGb29kc0xpc3QoYXBwZW5kKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwoKICAgICAgdmFyIHF1ZXJ5ID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5xdWVyeSk7CgogICAgICBvcmRlckNvbnRlbnRGb3JQYWdlKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygn5YiX6KGoJywgcmVzLmRhdGEucmVjb3Jkcyk7CgogICAgICAgIGlmIChhcHBlbmQpIHsKICAgICAgICAgIF90aGlzLmxpc3QgPSBfdGhpcy5saXN0LmNvbmNhdChyZXMuZGF0YS5yZWNvcmRzIHx8IFtdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMubGlzdCA9IHJlcy5kYXRhLnJlY29yZHMgfHwgW107CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMuZG93bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLmRhdGEucmVjb3Jkcy5sZW5ndGggPCBfdGhpcy5xdWVyeS5saW1pdCkgewogICAgICAgICAgX3RoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMuZG93bkxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKICAgICAgICBfdGhpcy4kdG9hc3QoZS5tZXNzYWdlKTsKICAgICAgfSk7CiAgICB9LAogICAgb25SZWZyZXNoOiBmdW5jdGlvbiBvblJlZnJlc2goKSB7CiAgICAgIHRoaXMucmVzZXRJbmZvKCk7CiAgICAgIHRoaXMuZ2V0Rm9vZHNMaXN0KCk7CiAgICB9LAogICAgcmVzZXRJbmZvOiBmdW5jdGlvbiByZXNldEluZm8oKSB7CiAgICAgIHRoaXMucXVlcnkub2Zmc2V0ID0gMDsKICAgICAgdGhpcy5kb3duTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTsKICAgIH0sCiAgICBvbkxvYWRMaXN0OiBmdW5jdGlvbiBvbkxvYWRMaXN0KCkgewogICAgICB0aGlzLnF1ZXJ5Lm9mZnNldCA9IHRoaXMucXVlcnkubGltaXQgKyB0aGlzLnF1ZXJ5Lm9mZnNldDsKICAgICAgdGhpcy5nZXRGb29kc0xpc3QoMSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["weeklyFoodslist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"weekly-foods\">\n    <van-pull-refresh v-model=\"downLoading\" @refresh=\"onRefresh\">\n      <van-list\n        class=\"section\"\n        :immediate-check=\"false\"\n        :offset=\"10\"\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoadList\"\n      >\n        <div\n          class=\"foods-box\"\n          v-for=\"item in list\"\n          :key=\"item.id\"\n          @click=\"goDetail(item)\"\n        >\n          <div class=\"foods-box-one\">\n            <p>{{ item.sendTime.slice(0, -3) }}</p>\n            <p>查看详情<van-icon name=\"arrow\" /></p>\n          </div>\n          <div class=\"foods-box-two\">\n            <p>{{ item.menuName }}</p>\n            <p>{{ item.schoolName }}</p>\n          </div>\n        </div>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n<script>\nimport { orderContentForPage } from '../../api/weekly/index.js';\nimport { formateDate } from '../../plugins/common/utils.js';\nexport default {\n  name: 'weeklyList',\n  data() {\n    return {\n      formateDate,\n      loading: false,\n      finished: false,\n      downLoading: false,\n      list: [],\n      query: {\n        offset: 0,\n        gradeId: '',\n        limit: 10 //每页条数\n      }\n    };\n  },\n  created() {\n    this.query.gradeId = this.$route.query.gradeId;\n    if (this.query.gradeId) {\n      this.getFoodsList();\n      this.downLoading = true;\n    }\n  },\n  methods: {\n    goDetail(item) {\n      this.$router.push({\n        name: 'weeklyFoodDetail',\n        query: {\n          id: item.menuId,\n          time: item.sendTime,\n          schoolName: item.schoolName,\n          menuName: item.menuName\n        }\n      });\n    },\n    getFoodsList(append) {\n      this.loading = true;\n      const query = {\n        ...this.query\n      };\n      orderContentForPage(query)\n        .then(res => {\n          console.log('列表', res.data.records);\n          if (append) {\n            this.list = this.list.concat(res.data.records || []);\n          } else {\n            this.list = res.data.records || [];\n          }\n          this.loading = false;\n          this.downLoading = false;\n          this.finished = false;\n          if (res.data.records.length < this.query.limit) {\n            this.finished = true;\n          }\n        })\n        .catch(e => {\n          this.loading = false;\n          this.downLoading = false;\n          this.finished = false;\n          this.$toast(e.message);\n        });\n    },\n    onRefresh() {\n      this.resetInfo();\n      this.getFoodsList();\n    },\n    resetInfo() {\n      this.query.offset = 0;\n      this.downLoading = true;\n      this.finished = false;\n    },\n    onLoadList() {\n      this.query.offset = this.query.limit + this.query.offset;\n      this.getFoodsList(1);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.weekly-foods {\n  background: #f5f5f5;\n  padding: 15px;\n}\n.foods-box {\n  border-radius: 5px;\n  background: #fafafa;\n  box-shadow: 0px 1px 5px 0px rgba(217, 217, 217, 0.5);\n  overflow: hidden;\n  border-radius: 5px;\n  margin-bottom: 15px;\n  .foods-box-one {\n    display: flex;\n    padding: 14px 15px;\n    font-size: 15px;\n    background-color: #ffffff;\n    justify-content: space-between;\n    > p:nth-child(2) {\n      color: #49c5c9;\n    }\n    /deep/ .van-icon {\n      font-weight: 500;\n      color: #49c5c9;\n      margin-left: 9px;\n    }\n  }\n  .foods-box-two {\n    padding: 15px;\n    > p:nth-child(1) {\n      margin-bottom: 8px;\n      font-size: 15px;\n      color: rgba(0, 0, 0, 0.85);\n    }\n    > p:nth-child(2) {\n      font-size: 13px;\n      color: rgba(0, 0, 0, 0.65);\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/pages/catering-h5/views/weekly"}]}