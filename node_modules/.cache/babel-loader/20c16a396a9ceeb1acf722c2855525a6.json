{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/approval-price-detail/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/approval-price-detail/index.vue","mtime":1645176309703},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgc2lDaGFuZ2VQcmljZUJhc2VJbmZvIGFzIF9zaUNoYW5nZVByaWNlQmFzZUluZm8sIGFwcHJvdmVQcmljZURldGFpbCwgYXBwcm92ZVByaWNlIGFzIF9hcHByb3ZlUHJpY2UgfSBmcm9tICcuLy4uLy4uL2FwaS9vcmRlcic7CmltcG9ydCB7IGZvcm1hdGVEYXRlIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9jb21tb24vdXRpbHMuanMnOwppbXBvcnQgcmVmcmVzaExpc3QgZnJvbSAnLi8uLi9yZWZyZXNoLWxpc3QnOwppbXBvcnQgcHJpY2VJbmdyZWRpZW50Q2FyZCBmcm9tICcuL3ByaWNlLWluZ3JlZGllbnQtY2FyZCc7CnZhciBjbGFzc09iaiA9IHsKICAnMzAyMDEwMCc6ICdncmVlbicsCiAgJzMwMTAwMDAnOiAnb3JhbmdlJywKICAnMzAxNTEwMCc6ICdncmF5Jwp9Owp2YXIgc3RhdHVzT2JqID0gewogICczMDIwMTAwJzogJ+W3sueUn+aViCcsCiAgJzMwMTAwMDAnOiAn5b6F5a6h5qC4JywKICAnMzAxNTEwMCc6ICflt7LpqbPlm54nCn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYXBwcm92YWwtcHJpY2UtZGV0YWlsJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXBwbHlJZDogbnVsbCwKICAgICAgb3JkZXJJbmZvOiB7fSwKICAgICAgc2hvd1Bhc3M6IGZhbHNlLAogICAgICBzaG93RGVueTogZmFsc2UsCiAgICAgIGRlbnlSZWFzb246ICcnLAogICAgICBjbGFzc09iajogY2xhc3NPYmosCiAgICAgIHN0YXR1c09iajogc3RhdHVzT2JqCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgcmVmcmVzaExpc3Q6IHJlZnJlc2hMaXN0LAogICAgcHJpY2VJbmdyZWRpZW50Q2FyZDogcHJpY2VJbmdyZWRpZW50Q2FyZAogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuYXBwbHlJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmFwcGx5SWQ7CiAgICB0aGlzLnNpQ2hhbmdlUHJpY2VCYXNlSW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgc2lDaGFuZ2VQcmljZUJhc2VJbmZvOiBmdW5jdGlvbiBzaUNoYW5nZVByaWNlQmFzZUluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfc2lDaGFuZ2VQcmljZUJhc2VJbmZvKHsKICAgICAgICBhcHBseUlkOiB0aGlzLmFwcGx5SWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMub3JkZXJJbmZvID0gcmVzLmRhdGEgfHwge307CiAgICAgIH0pOwogICAgfSwKICAgIHBhc3M6IGZ1bmN0aW9uIHBhc3MoKSB7CiAgICAgIHRoaXMuc2hvd1Bhc3MgPSB0cnVlOwogICAgfSwKICAgIGRlbnk6IGZ1bmN0aW9uIGRlbnkoKSB7CiAgICAgIHRoaXMuc2hvd0RlbnkgPSB0cnVlOwogICAgfSwKICAgIHBhc3NBcHByb3ZhbDogZnVuY3Rpb24gcGFzc0FwcHJvdmFsKCkgewogICAgICB0aGlzLmFwcHJvdmVQcmljZSgnMzAyMDEwMCcpOwogICAgfSwKICAgIGRlbnlBcHByb3ZhbDogZnVuY3Rpb24gZGVueUFwcHJvdmFsKCkgewogICAgICBpZiAoIXRoaXMuZGVueVJlYXNvbi50cmltKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuYXBwcm92ZVByaWNlKCczMDE1MTAwJyk7CiAgICB9LAogICAgZGlhbG9nU3RvcENsb3NlOiBmdW5jdGlvbiBkaWFsb2dTdG9wQ2xvc2UoYWN0aW9uLCBkb25lKSB7CiAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtJykgewogICAgICAgIGlmICghdGhpcy5kZW55UmVhc29uLnRyaW0oKSkgewogICAgICAgICAgcmV0dXJuIGRvbmUoZmFsc2UpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRvbmUoKTsKICAgIH0sCiAgICAvL+WuoeaJueiuouWNle+8iDMwMTAw77yaIOmAmui/h+WuoeaJue+8myAtMTAyMDDvvJrpqbPlm57vvIkKICAgIGFwcHJvdmVQcmljZTogZnVuY3Rpb24gYXBwcm92ZVByaWNlKGNvZGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBfYXBwcm92ZVByaWNlKHsKICAgICAgICBpZDogdGhpcy5hcHBseUlkLAogICAgICAgIHJlbWFyazogdGhpcy5kZW55UmVhc29uLAogICAgICAgIGNvZGU6IGNvZGUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLiR0b2FzdCgn5a6h5qC45a6M5oiQJyk7CgogICAgICAgIF90aGlzMi4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgcGF0aDogJy9hcHByb3ZhbC1wcmljZS1saXN0JwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMi4kdG9hc3QoZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbERlbnk6IGZ1bmN0aW9uIGNhbmNlbERlbnkoKSB7CiAgICAgIHRoaXMuZGVueVJlYXNvbiA9ICcnOwogICAgfSwKICAgIGFwcHJvdmVQcmljZURldGFpbDogYXBwcm92ZVByaWNlRGV0YWlsLAogICAgZm9ybWF0ZURhdGU6IGZvcm1hdGVEYXRlCiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"approval-price-detail\">\n    <div class=\"detail-top\">\n      <div class=\"item-head\">\n        <div><i></i>{{ orderInfo.applyItem }}</div>\n        <div class=\"operation-tab\" :class=\"classObj[orderInfo.status]\">\n          {{ statusObj[orderInfo.status + ''] }}\n        </div>\n      </div>\n      <div class=\"detail-item\">\n        <span class=\"title\">调价生效时间：</span\n        >{{ formateDate(orderInfo.priceEffectDate, 4) }}\n        {{ orderInfo.priceEffectDate ? '00:00' : '' }}\n      </div>\n      <div class=\"detail-item\">\n        <span class=\"title\">申请人：</span>{{ orderInfo.creatorName }}\n      </div>\n      <div class=\"detail-item\" v-if=\"orderInfo.status == '3015100'\">\n        <span class=\"title\">驳回原因：</span>{{ orderInfo.remarks }}\n      </div>\n    </div>\n    <div class=\"detail-content\">\n      <div class=\"item-head ingredient-head\">\n        <div><i></i>食材信息</div>\n      </div>\n      <refresh-list\n        :getListData=\"approvePriceDetail\"\n        :otherParams=\"{\n          applyId: applyId\n        }\"\n        :needStatus=\"true\"\n      >\n        <template slot-scope=\"{ item }\">\n          <price-ingredient-card\n            class=\"price-ingredient-item\"\n            :item=\"item\"\n          ></price-ingredient-card>\n        </template>\n        <!-- <orderCard name=\"item\"></orderCard> -->\n      </refresh-list>\n    </div>\n    <div class=\"detail-bottom\" v-if=\"orderInfo.status == '3010000'\">\n      <span class=\"button\" @click=\"deny\">驳回</span>\n      <span class=\"button\" @click=\"pass\">审核通过</span>\n    </div>\n    <van-dialog\n      v-model=\"showPass\"\n      message=\"你确定要通过审核吗？\"\n      show-cancel-button\n      confirm-button-color=\"#51D0BC\"\n      @confirm=\"passApproval\"\n    >\n    </van-dialog>\n    <van-dialog\n      v-model=\"showDeny\"\n      title=\"驳回原因\"\n      show-cancel-button\n      :confirm-button-color=\"\n        denyReason.trim() ? '#51D0BC' : 'rgba(81, 208, 188,0.5)'\n      \"\n      :before-close=\"dialogStopClose\"\n      @confirm=\"denyApproval\"\n      @cancel=\"cancelDeny\"\n    >\n      <van-field\n        v-model=\"denyReason\"\n        class=\"deny-reason\"\n        placeholder=\"请输入驳回原因\"\n        type=\"textarea\"\n        rows=\"4\"\n        border\n        maxlength=\"200\"\n      />\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  siChangePriceBaseInfo,\n  approvePriceDetail,\n  approvePrice\n} from './../../api/order';\nimport { formateDate } from '../../plugins/common/utils.js';\nimport refreshList from './../refresh-list';\nimport priceIngredientCard from './price-ingredient-card';\nconst classObj = {\n  '3020100': 'green',\n  '3010000': 'orange',\n  '3015100': 'gray'\n};\nconst statusObj = {\n  '3020100': '已生效',\n  '3010000': '待审核',\n  '3015100': '已驳回'\n};\nexport default {\n  name: 'approval-price-detail',\n  data() {\n    return {\n      applyId: null,\n      orderInfo: {},\n      showPass: false,\n      showDeny: false,\n      denyReason: '',\n      classObj,\n      statusObj\n    };\n  },\n  components: {\n    refreshList,\n    priceIngredientCard\n  },\n  created() {\n    this.applyId = this.$route.query.applyId;\n    this.siChangePriceBaseInfo();\n  },\n  methods: {\n    siChangePriceBaseInfo() {\n      siChangePriceBaseInfo({ applyId: this.applyId }).then(res => {\n        this.orderInfo = res.data || {};\n      });\n    },\n    pass() {\n      this.showPass = true;\n    },\n    deny() {\n      this.showDeny = true;\n    },\n\n    passApproval() {\n      this.approvePrice('3020100');\n    },\n    denyApproval() {\n      if (!this.denyReason.trim()) {\n        return;\n      }\n      this.approvePrice('3015100');\n    },\n    dialogStopClose(action, done) {\n      if (action === 'confirm') {\n        if (!this.denyReason.trim()) {\n          return done(false);\n        }\n      }\n      return done();\n    },\n    //审批订单（30100： 通过审批； -10200：驳回）\n    approvePrice(code) {\n      approvePrice({ id: this.applyId, remark: this.denyReason, code })\n        .then(res => {\n          this.$toast('审核完成');\n          this.$router.replace({\n            path: '/approval-price-list'\n          });\n        })\n        .catch(e => {\n          this.$toast(e);\n        });\n    },\n    cancelDeny() {\n      this.denyReason = '';\n    },\n    approvePriceDetail,\n    formateDate\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.detail-top {\n  background: #fff;\n  padding: 14px 0 20px 0;\n}\n.item-head {\n  position: relative;\n  line-height: 20px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.85);\n  padding: 0 34px 0 12px;\n  i {\n    display: inline-block;\n    width: 2px;\n    height: 11px;\n    background: #51d0bc;\n    border-radius: 1px;\n    margin-right: 4px;\n  }\n}\n.ingredient-head {\n  line-height: 48px;\n  border-bottom: 1px solid #dedede;\n}\n.operation-tab {\n  position: absolute;\n  right: 0;\n  top: 0px;\n  width: 44px;\n  height: 19.5px;\n  line-height: 19.5px;\n  background-repeat: no-repeat;\n  background-position: center left;\n  background-size: 100% 100%;\n  color: #fff;\n  font-size: 11px;\n  text-align: center;\n  &.green {\n    background-image: url('../../assets/images/operation-green.png');\n  }\n  &.orange {\n    background-image: url('../../assets/images/operation-orange1.png');\n  }\n  &.orange2 {\n    width: 66px;\n    background-image: url('../../assets/images/operation-orange2.png');\n  }\n  &.gray {\n    background-image: url('../../assets/images/operation-gray.png');\n  }\n}\n.detail-item {\n  .clearfix;\n  margin-top: 5px;\n  padding: 0 12px;\n  word-break: break-all;\n  line-height: 18px;\n  font-weight: 400;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.85);\n  .title {\n    color: rgba(0, 0, 0, 0.65);\n    float: left;\n  }\n}\n.detail-content {\n  margin-top: 10px;\n  background: #fff;\n}\n.deny-reason {\n  /deep/textarea {\n    border-radius: 4px;\n    border: 1px solid #dedede;\n    line-height: 24px;\n    padding: 10px;\n  }\n}\n.detail-bottom {\n  height: 133px;\n  position: fixed;\n  width: 100%;\n  text-align: center;\n  bottom: 0;\n  padding: 30px 12px 0px 12px;\n  box-sizing: border-box;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 255, 255, 0) 0%,\n    rgba(255, 255, 255, 0.9) 0%,\n    #ffffff 100%\n  );\n}\n.button {\n  display: inline-block;\n  width: 158px;\n  height: 49px;\n  line-height: 49px;\n  text-align: center;\n  border: 1px solid #51d0bc;\n  border-radius: 3px;\n  color: #fff;\n  background: #51d0bc;\n}\n.button:first-child {\n  margin-right: 11px;\n  color: #51d0bc;\n  background: #fff;\n}\n.approval-price-detail {\n  padding: 0 0 133px 0;\n}\n.price-ingredient-item {\n  border-bottom: 1px solid #dedede;\n  padding: 0 12px 12px 12px;\n}\n.price-ingredient-item:last-child {\n  border-bottom: 0px;\n}\n/deep/.order-list {\n  padding: 0;\n}\n</style>\n"],"sourceRoot":"src/pages/catering-h5/views/approval-price-detail"}]}