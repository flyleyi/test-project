{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/store/modules/user.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/store/modules/user.js","mtime":1627979214366},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBnZXRJbmZvIGFzIF9nZXRJbmZvIH0gZnJvbSAnLi4vLi4vYXBpL3VzZXIvaW5kZXgnOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC9wbHVnaW5zL2NvcmUvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnLi4vLi4vcm91dGVyJzsKaW1wb3J0IGF2YXRhckdpZiBmcm9tICcuLi8uLi9hc3NldHMvaW1hZ2VzL2F2YXRhci5naWYnOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogYXZhdGFyR2lmLAogICAgc3RhZmZDb2RlOiAnJywKICAgIC8vIOW3peWPtwogICAgc3RhZmZOYW1lOiAnJyAvLyDnlKjmiLflkI0KCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1NUQUZGX0NPREU6IGZ1bmN0aW9uIFNFVF9TVEFGRl9DT0RFKHN0YXRlLCBzdGFmZkNvZGUpIHsKICAgIHN0YXRlLnN0YWZmQ29kZSA9IHN0YWZmQ29kZTsKICB9LAogIFNFVF9TVEFGRl9OQU1FOiBmdW5jdGlvbiBTRVRfU1RBRkZfTkFNRShzdGF0ZSwgc3RhZmZOYW1lKSB7CiAgICBzdGF0ZS5zdGFmZk5hbWUgPSBzdGFmZk5hbWU7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CgogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgICBhdmF0YXIgPSBkYXRhLmF2YXRhciwKICAgICAgICAgICAgc3RhZmZOYW1lID0gZGF0YS5zdGFmZk5hbWUsCiAgICAgICAgICAgIHN0YWZmQ29kZSA9IGRhdGEuc3RhZmZDb2RlOyAvLyBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgICAgLy8gY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKCiAgICAgICAgY29tbWl0KCdTRVRfU1RBRkZfQ09ERScsIHN0YWZmQ29kZSk7CiAgICAgICAgY29tbWl0KCdTRVRfU1RBRkZfTkFNRScsIHN0YWZmTmFtZSk7CiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICByZXNldFJvdXRlcigpOwogICAgY29tbWl0KCdSRVNFVF9TVEFURScpOyAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgLy8gICBsb2dvdXQoc3RhdGUudG9rZW4pCiAgICAvLyAgICAgLnRoZW4oKCkgPT4gewogICAgLy8gICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgLy8gICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgIC8vICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgIC8vICAgICAgIHJlc29sdmUoKTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAvLyAgICAgICByZWplY3QoZXJyb3IpOwogICAgLy8gICAgIH0pOwogICAgLy8gfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-admin/store/modules/user.js"],"names":["getInfo","getToken","setToken","removeToken","resetRouter","avatarGif","getDefaultState","token","name","avatar","staffCode","staffName","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_STAFF_CODE","SET_STAFF_NAME","actions","commit","Promise","resolve","reject","then","response","data","catch","error","logout","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { getInfo } from '../../api/user/index';\nimport { getToken, setToken, removeToken } from '@/plugins/core/auth';\nimport { resetRouter } from '../../router';\nimport avatarGif from '../../assets/images/avatar.gif';\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: avatarGif,\n    staffCode: '', // 工号\n    staffName: '' // 用户名\n  };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n  RESET_STATE: state => {\n    Object.assign(state, getDefaultState());\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_NAME: (state, name) => {\n    state.name = name;\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar;\n  },\n  SET_STAFF_CODE: (state, staffCode) => {\n    state.staffCode = staffCode;\n  },\n  SET_STAFF_NAME: (state, staffName) => {\n    state.staffName = staffName;\n  }\n};\n\nconst actions = {\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token)\n        .then(response => {\n          const { data } = response;\n\n          if (!data) {\n            return reject('Verification failed, please Login again.');\n          }\n\n          const { name, avatar, staffName, staffCode } = data;\n\n          // commit('SET_NAME', name);\n          // commit('SET_AVATAR', avatar);\n          commit('SET_STAFF_CODE', staffCode);\n          commit('SET_STAFF_NAME', staffName);\n          resolve(data);\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    removeToken(); // must remove  token  first\n    resetRouter();\n    commit('RESET_STATE');\n    // return new Promise((resolve, reject) => {\n    //   logout(state.token)\n    //     .then(() => {\n    //       removeToken(); // must remove  token  first\n    //       resetRouter();\n    //       commit('RESET_STATE');\n    //       resolve();\n    //     })\n    //     .catch(error => {\n    //       reject(error);\n    //     });\n    // });\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken(); // must remove  token  first\n      commit('RESET_STATE');\n      resolve();\n    });\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};\n"]}]}