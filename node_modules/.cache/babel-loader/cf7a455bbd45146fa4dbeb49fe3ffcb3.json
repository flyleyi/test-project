{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/common/api-tools.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/common/api-tools.js","mtime":1627979214416},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC9wcmFjdGljZS9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC9wcmFjdGljZS9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCBhcGksIHsgc2V0VXJsIH0gZnJvbSAnQC9wbHVnaW5zL2NvbW1vbi9hcGknOwovKioKICogQHR5cGUge3N0cmluZ30KICogQGRlc2NyaXB0aW9uIOm7mOiupOacjeWKoeWZqOWcsOWdgAogKi8KCnZhciBERUZBVUxUX0FQSSA9IF9vYmplY3RTcHJlYWQoe30sIGFwaSk7Ci8qKgogKiBAdHlwZSB7c3RyaW5nfQogKiBAZGVzY3JpcHRpb24g5pyN5Yqh5Zmo5Zyw5Z2AY29va2ll6ZSu5YC8CiAqLwoKCnZhciBDT09LSUVfQVBJX1VSTF9LRVkgPSAnQ09PS0lFX0FQSV9VUkxfS0VZJzsKLyoqCiAqIOWtmOWCqOWIsGNvb2tpZeS4rQogKiBAcGFyYW0ge3N0cmluZ30gc2VydmVyQ29kZSDmnI3liqFjb2RlCiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwg5pyN5Yqh5Zmo5Zyw5Z2ACiAqLwoKZnVuY3Rpb24gc2V0Q2FjaGUoc2VydmVyQ29kZSwgdXJsKSB7CiAgaWYgKHNlcnZlckNvZGUgPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ+e8uuWwkXNlcnZlckNvZGXlj4LmlbAnKTsKICB2YXIganNvbiA9IGdldENhY2hlSlNPTigpOwogIGpzb25bc2VydmVyQ29kZV0gPSB1cmw7CiAgQ29va2llcy5zZXQoQ09PS0lFX0FQSV9VUkxfS0VZLCBqc29uKTsKfQovKioKICog6I635Y+W57yT5a2YanNvbuWvueixoQogKiBAcGFyYW0ge3N0cmluZ30gc2VydmVyQ29kZSDmnI3liqFjb2RlCiAqLwoKCmZ1bmN0aW9uIGdldENhY2hlKHNlcnZlckNvZGUpIHsKICB2YXIganNvbiA9IGdldENhY2hlSlNPTigpOwogIGlmIChzZXJ2ZXJDb2RlID09IHVuZGVmaW5lZCkgcmV0dXJuIGpzb247CiAgcmV0dXJuIGpzb24gJiYganNvbltzZXJ2ZXJDb2RlXTsKfQovKioKICog6I635Y+W57yT5a2YanNvbuWvueixoQogKiBAcGFyYW0ge3N0cmluZ30gc2VydmVyQ29kZSDmnI3liqFjb2RlCiAqLwoKCmZ1bmN0aW9uIGNsZWFyQ2FjaGUoc2VydmVyQ29kZSkgewogIC8vIOayoeS8oHNlcnZlckNvZGXmuIXpmaTlhajpg6gKICBpZiAoc2VydmVyQ29kZSA9PSB1bmRlZmluZWQpIHsKICAgIENvb2tpZXMucmVtb3ZlKENPT0tJRV9BUElfVVJMX0tFWSk7CiAgICByZXR1cm47CiAgfQoKICB2YXIganNvbiA9IGdldENhY2hlSlNPTigpOwogIGRlbGV0ZSBqc29uW3NlcnZlckNvZGVdOwogIENvb2tpZXMuc2V0KENPT0tJRV9BUElfVVJMX0tFWSwganNvbik7Cn0KLyoqCiAqIOiOt+WPlue8k+WtmGpzb27lr7nosaEKICogQHJldHVybiB7T2JqZWN0fQogKi8KCgpmdW5jdGlvbiBnZXRDYWNoZUpTT04oKSB7CiAgdmFyIGpzb24gPSBDb29raWVzLmdldEpTT04oQ09PS0lFX0FQSV9VUkxfS0VZKTsKICBfdHlwZW9mKGpzb24pICE9PSAnb2JqZWN0JyAmJiAoanNvbiA9IHt9KTsKICByZXR1cm4ganNvbjsKfQovKioKICog6K6+572u5pyN5Yqh5Zmo5Zyw5Z2ACiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2ZXJDb2RlIOacjeWKoWNvZGUKICogQHBhcmFtIHtzdHJpbmd9IHVybCDmnI3liqHlmajlnLDlnYAKICovCgoKZXhwb3J0IGZ1bmN0aW9uIHNldFNlcnZlclVybChzZXJ2ZXJDb2RlLCB1cmwpIHsKICBpZiAoc2VydmVyQ29kZSA9PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcign57y65bCRc2VydmVyQ29kZeWPguaVsCcpOwogIHZhciBkZWZhdWx0VXJsID0gZ2V0U2VydmVyRGVmYXVsdFVybChzZXJ2ZXJDb2RlKTsgLy8g6buY6K6k5Zyw5Z2ACgogIHNldENhY2hlKHNlcnZlckNvZGUsIHVybCB8fCBkZWZhdWx0VXJsKTsKICBzZXRVcmwoc2VydmVyQ29kZSwgdXJsIHx8IGRlZmF1bHRVcmwpOwp9Ci8qKgogKiDojrflj5bmnI3liqHlmajlnLDlnYAKICogQHBhcmFtIHtzdHJpbmd9IHNlcnZlckNvZGUg5pyN5YqhY29kZQogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlclVybChzZXJ2ZXJDb2RlKSB7CiAgdmFyIGRlZmF1bHRVcmwgPSBnZXRTZXJ2ZXJEZWZhdWx0VXJsKHNlcnZlckNvZGUpOyAvLyDpu5jorqTlnLDlnYAKCiAgcmV0dXJuIGdldENhY2hlKHNlcnZlckNvZGUpIHx8IGRlZmF1bHRVcmw7Cn0KLyoqCiAqIOiOt+WPlum7mOiupOacjeWKoeWZqOWcsOWdgAogKiBAcGFyYW0ge3N0cmluZ30gc2VydmVyQ29kZSDmnI3liqFjb2RlCiAqIEByZXR1cm4ge3N0cmluZ30KICovCgpleHBvcnQgZnVuY3Rpb24gZ2V0U2VydmVyRGVmYXVsdFVybChzZXJ2ZXJDb2RlKSB7CiAgaWYgKHNlcnZlckNvZGUgPT0gdW5kZWZpbmVkKSByZXR1cm4gREVGQVVMVF9BUEk7CiAgcmV0dXJuIERFRkFVTFRfQVBJICYmIERFRkFVTFRfQVBJW3NlcnZlckNvZGVdOwp9Ci8qKgogKiDmuIXpmaTmnI3liqHlmajlnLDlnYAKICogQHBhcmFtIHtzdHJpbmd9IHNlcnZlckNvZGUg5pyN5YqhY29kZQogKi8KCmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlcnZlclVybChzZXJ2ZXJDb2RlKSB7CiAgY2xlYXJDYWNoZShzZXJ2ZXJDb2RlKTsKICBzZXRVcmwoc2VydmVyQ29kZSwgZ2V0U2VydmVyRGVmYXVsdFVybChzZXJ2ZXJDb2RlKSk7Cn0KLyoqCiAqIOWIneWni+WMluacjeWKoeWZqOWcsOWdgAogKi8KCmV4cG9ydCBmdW5jdGlvbiBpbml0U2VydmVyVXJsKCkgewogIHZhciBqc29uID0gZ2V0U2VydmVyVXJsKCk7CiAgT2JqZWN0LmtleXMoanNvbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICBzZXRVcmwoa2V5LCBqc29uW2tleV0pOwogIH0pOwp9"},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/common/api-tools.js"],"names":["Cookies","api","setUrl","DEFAULT_API","COOKIE_API_URL_KEY","setCache","serverCode","url","undefined","Error","json","getCacheJSON","set","getCache","clearCache","remove","getJSON","setServerUrl","defaultUrl","getServerDefaultUrl","getServerUrl","clearServerUrl","initServerUrl","Object","keys","forEach","key"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\nimport api, { setUrl } from '@/plugins/common/api';\n\n/**\n * @type {string}\n * @description 默认服务器地址\n */\nconst DEFAULT_API = { ...api };\n\n/**\n * @type {string}\n * @description 服务器地址cookie键值\n */\nconst COOKIE_API_URL_KEY = 'COOKIE_API_URL_KEY';\n\n/**\n * 存储到cookie中\n * @param {string} serverCode 服务code\n * @param {string} url 服务器地址\n */\nfunction setCache(serverCode, url) {\n  if (serverCode == undefined) throw new Error('缺少serverCode参数');\n  let json = getCacheJSON();\n  json[serverCode] = url;\n  Cookies.set(COOKIE_API_URL_KEY, json);\n}\n\n/**\n * 获取缓存json对象\n * @param {string} serverCode 服务code\n */\nfunction getCache(serverCode) {\n  let json = getCacheJSON();\n  if (serverCode == undefined) return json;\n  return json && json[serverCode];\n}\n\n/**\n * 获取缓存json对象\n * @param {string} serverCode 服务code\n */\nfunction clearCache(serverCode) {\n  // 没传serverCode清除全部\n  if (serverCode == undefined) {\n    Cookies.remove(COOKIE_API_URL_KEY);\n    return;\n  }\n  let json = getCacheJSON();\n  delete json[serverCode];\n  Cookies.set(COOKIE_API_URL_KEY, json);\n}\n\n/**\n * 获取缓存json对象\n * @return {Object}\n */\nfunction getCacheJSON() {\n  let json = Cookies.getJSON(COOKIE_API_URL_KEY);\n  typeof json !== 'object' && (json = {});\n  return json;\n}\n\n/**\n * 设置服务器地址\n * @param {string} serverCode 服务code\n * @param {string} url 服务器地址\n */\nexport function setServerUrl(serverCode, url) {\n  if (serverCode == undefined) throw new Error('缺少serverCode参数');\n  let defaultUrl = getServerDefaultUrl(serverCode); // 默认地址\n  setCache(serverCode, url || defaultUrl);\n  setUrl(serverCode, url || defaultUrl);\n}\n\n/**\n * 获取服务器地址\n * @param {string} serverCode 服务code\n * @return {string}\n */\nexport function getServerUrl(serverCode) {\n  let defaultUrl = getServerDefaultUrl(serverCode); // 默认地址\n  return getCache(serverCode) || defaultUrl;\n}\n\n/**\n * 获取默认服务器地址\n * @param {string} serverCode 服务code\n * @return {string}\n */\nexport function getServerDefaultUrl(serverCode) {\n  if (serverCode == undefined) return DEFAULT_API;\n  return DEFAULT_API && DEFAULT_API[serverCode];\n}\n\n/**\n * 清除服务器地址\n * @param {string} serverCode 服务code\n */\nexport function clearServerUrl(serverCode) {\n  clearCache(serverCode);\n  setUrl(serverCode, getServerDefaultUrl(serverCode));\n}\n\n/**\n * 初始化服务器地址\n */\nexport function initServerUrl() {\n  let json = getServerUrl();\n  Object.keys(json).forEach(key => {\n    setUrl(key, json[key]);\n  });\n}\n"]}]}