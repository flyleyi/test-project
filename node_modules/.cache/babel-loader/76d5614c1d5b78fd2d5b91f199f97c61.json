{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/plugins/core/permission.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/plugins/core/permission.js","mtime":1645176309827},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3ByYWN0aWNlL211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9Mb2FkaW5nMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9sb2FkaW5nLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0xvYWRpbmcgZnJvbSAiZWxlbWVudC11aS9saWIvbG9hZGluZyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3ByYWN0aWNlL211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHJvdXRlciwgeyBnZW5lcmF0ZVJvdXRlcyB9IGZyb20gJy4uLy4uL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi9zdG9yZSc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsgLy8gcHJvZ3Jlc3MgYmFyCgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCgppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvcGx1Z2lucy9jb3JlL2F1dGgnOyAvLyBnZXQgdG9rZW4gZnJvbSBjb29raWUKLy9pbXBvcnQgeyBwb3N0bG9naW5Mb2cgfSBmcm9tICdAL3BhZ2VzL3NoYXJlLXBsYXRmb3JtLWZyb250L2FwaS91c2VyJzsKCk5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KCnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbicsICcvc3NvL2F1dGgnXTsgLy8gbm8gcmVkaXJlY3Qgd2hpdGVsaXN0Cgpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBoYXNUb2tlbiwgaGFzQXBwRGF0YUxvYWRlZCwgbG9hZGluZywgaXNDaGFuZ2VMb2dpbiwgaXNGaXJzdExvZ2luLCBpc1NldExvZywgaXNGaXJzdE5leHQ7CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIKICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIHNldCBwYWdlIHRpdGxlCgogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRvLm1ldGEudGl0bGUgfHwgc3RvcmUuc3RhdGUuc2V0dGluZ3MudGl0bGU7IC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSB1c2VyIGhhcyBsb2dnZWQgaW4KCiAgICAgICAgICAgIGhhc1Rva2VuID0gZ2V0VG9rZW4oKTsKCiAgICAgICAgICAgIGlmICghaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT09ICcvbG9naW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpZiBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgcGF0aDogJy8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOyAvLyBoYWNrOiBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9wdWxsLzI5MzkKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgb2J0YWluZWQgaGlzIHBlcm1pc3Npb24gcm9sZXMgdGhyb3VnaCBnZXRJbmZvCiAgICAgICAgICAgIC8vIGNvbnN0IGhhc1JvbGVzID0gc3RvcmUuZ2V0dGVycy5yb2xlcyAmJiBzdG9yZS5nZXR0ZXJzLnJvbGVzLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIGhhc0FwcERhdGFMb2FkZWQgPSAhIXN0b3JlLmdldHRlcnMuaGFzQXBwRGF0YUxvYWRlZDsKCiAgICAgICAgICAgIGlmICghaGFzQXBwRGF0YUxvYWRlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGxvYWRpbmcgPSBfTG9hZGluZy5zZXJ2aWNlKHsKICAgICAgICAgICAgICB0ZXh0OiAn5Yqq5Yqb5Yqg6L295pWw5o2u5LitLi4uJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJyk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2RpY3QvYWpheEdldERhdGEnKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAvLyDliqDovb3mlbDmja7lrZflhbgKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhcHAvRklOSVNIX0RBVEFfTE9BRCcpOyAvLyDmlbDmja7liqDovb3lrozmiJAKICAgICAgICAgICAgLy8gaGFjayBtZXRob2QgdG8gZW5zdXJlIHRoYXQgYWRkUm91dGVzIGlzIGNvbXBsZXRlCiAgICAgICAgICAgIC8vIHNldCB0aGUgcmVwbGFjZTogdHJ1ZSwgc28gdGhlIG5hdmlnYXRpb24gd2lsbCBub3QgbGVhdmUgYSBoaXN0b3J5IHJlY29yZAoKICAgICAgICAgICAgaXNDaGFuZ2VMb2dpbiA9IHN0b3JlLmdldHRlcnMuaXNDaGFuZ2VMb2dpbjsgLy/mmK/lkKbmnInkvIHkuJrlj7cKCiAgICAgICAgICAgIGlzRmlyc3RMb2dpbiA9IHN0b3JlLmdldHRlcnMuaXNGaXJzdExvZ2luOyAvL+aYr+WQpuesrOS4gOasoeeZu+W9lQoKICAgICAgICAgICAgaXNTZXRMb2cgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNTZXRMb2cnKTsKICAgICAgICAgICAgaXNGaXJzdE5leHQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNGaXJzdE5leHQnKTsgLy8g5piv5ZCm56ys5LiA5qyh6L+b5YWlCgogICAgICAgICAgICBpZiAoIWlzRmlyc3ROZXh0ICYmIGlzQ2hhbmdlTG9naW4gPT09IDApIHsKICAgICAgICAgICAgICAvL+ayoeacieS8geS4muWPt++8jOebtOaOpei/m+WFpXNlYXJjaOmhtQogICAgICAgICAgICAgIC8vIGlmIChpc1NldExvZyA9PT0gMCkgewogICAgICAgICAgICAgIC8vICAgcG9zdGxvZ2luTG9nKCcxJykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygn5peg5LyB5Lia5Y+355m75b2V5oiQ5Yqf6K6w5b2V5pel5b+XOicsICcxJyk7CiAgICAgICAgICAgICAgLy8gICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc1NldExvZycsIDEwMCk7CiAgICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FjY291bnRUeXBlJywgJzEnKTsKICAgICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICAgIG5hbWU6ICdTZWFyY2gnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHBvc3Rsb2dpbkxvZzogMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0ZpcnN0TmV4dCcsIGlzRmlyc3RMb2dpbiA9PT0gMCA/IDEgOiAyKTsgLy8g6K6w5b2V5bey57uP5Yik5pat6L+H5LiA5qyhCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ0OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTUpOwogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7IC8vIHJlbW92ZSB0b2tlbiBhbmQgZ28gdG8gbG9naW4gcGFnZSB0byByZS1sb2dpbgoKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzMzsKICAgICAgICAgICAgLy8gYXdhaXQgTWVzc2FnZUJveC5jb25maXJtKAogICAgICAgICAgICAvLyAgICflvZPliY3mlbDmja7liqDovb3kuI3nqLPlrprvvIzor7fmgqjnqI3lkI7ph43or5UnLAogICAgICAgICAgICAvLyAgICfplJnor68nLAogICAgICAgICAgICAvLyAgIHsKICAgICAgICAgICAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw5Yqg6L295pWw5o2uJywKICAgICAgICAgICAgLy8gICAgIGNhbmNlbEJ1dHRvblRleHQ6ICfnmbvlvZXpobXpnaInLAogICAgICAgICAgICAvLyAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLAogICAgICAgICAgICAvLyAgICAgY2xvc2VPblByZXNzRXNjYXBlOiBmYWxzZSwKICAgICAgICAgICAgLy8gICAgIHNob3dDbG9zZTogZmFsc2UKICAgICAgICAgICAgLy8gICB9CiAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNrgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM3OwogICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDMzKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignZScsIF9jb250ZXh0LnQxKTsgLy8g55m75Ye6CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDI7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJyk7CgogICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgbmV4dCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKCiAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgIC8qIGhhcyBubyB0b2tlbiovCiAgICAgICAgICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAvLyBpbiB0aGUgZnJlZSBsb2dpbiB3aGl0ZWxpc3QsIGdvIGRpcmVjdGx5CiAgICAgICAgICAgICAgLy8g5aaC5p6c5pivL3Nzby9hdXRo6Lev55Sx5riF6Zmk56ys5LiA5qyh6L+b5Y6755qE5qCH5b+X5L2NCiAgICAgICAgICAgICAgaWYgKHRvLnBhdGggPT09ICcvc3NvL2F1dGgnKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNGaXJzdE5leHQnLCAyKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBvdGhlciBwYWdlcyB0aGF0IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIGFyZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBwYWdlLgogICAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxNSwgMjldLCBbMzMsIDM3XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7CiAgLy8gZmluaXNoIHByb2dyZXNzIGJhcgogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/plugins/core/permission.js"],"names":["router","generateRoutes","store","NProgress","getToken","configure","showSpinner","whiteList","beforeEach","to","from","next","start","document","title","meta","state","settings","hasToken","path","done","hasAppDataLoaded","getters","loading","service","text","dispatch","commit","isChangeLogin","isFirstLogin","isSetLog","window","sessionStorage","getItem","isFirstNext","setItem","name","params","postloginLog","replace","close","console","error","indexOf","afterEach"],"mappings":"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","sourcesContent":["import router, { generateRoutes } from '../../router';\nimport store from '../../store';\nimport { MessageBox, Loading } from 'element-ui';\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\nimport { getToken } from '@/plugins/core/auth'; // get token from cookie\n//import { postloginLog } from '@/pages/share-platform-front/api/user';\n\nNProgress.configure({ showSpinner: false }); // NProgress Configuration\n\nconst whiteList = ['/login', '/sso/auth']; // no redirect whitelist\nrouter.beforeEach(async (to, from, next) => {\n  // start progress bar\n  NProgress.start();\n\n  // set page title\n  document.title = to.meta.title || store.state.settings.title;\n\n  // determine whether the user has logged in\n\n  const hasToken = getToken();\n  if (hasToken) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' });\n      NProgress.done(); // hack: https://github.com/PanJiaChen/vue-element-admin/pull/2939\n    } else {\n      // determine whether the user has obtained his permission roles through getInfo\n      // const hasRoles = store.getters.roles && store.getters.roles.length > 0;\n      const hasAppDataLoaded = !!store.getters.hasAppDataLoaded;\n      if (hasAppDataLoaded) {\n        next();\n      } else {\n        let loading = Loading.service({\n          text: '努力加载数据中...'\n        });\n        try {\n          // get user info\n          // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\n          await store.dispatch('user/getInfo'); // 加载用户信息\n\n          await store.dispatch('dict/ajaxGetData'); // 加载数据字典\n\n          store.commit('app/FINISH_DATA_LOAD'); // 数据加载完成\n          // hack method to ensure that addRoutes is complete\n          // set the replace: true, so the navigation will not leave a history record\n\n          const isChangeLogin = store.getters.isChangeLogin; //是否有企业号\n          const isFirstLogin = store.getters.isFirstLogin; //是否第一次登录\n          let isSetLog = window.sessionStorage.getItem('isSetLog');\n          let isFirstNext = window.sessionStorage.getItem('isFirstNext'); // 是否第一次进入\n\n          if (!isFirstNext && isChangeLogin === 0) {\n            //没有企业号，直接进入search页\n            // if (isSetLog === 0) {\n            //   postloginLog('1').then(res => {\n            //     console.log('无企业号登录成功记录日志:', '1');\n            //     window.sessionStorage.setItem('isSetLog', 100);\n            //   });\n            // }\n\n            window.sessionStorage.setItem('accountType', '1');\n\n            next({ name: 'Search', params: { postloginLog: 1 } });\n\n            window.sessionStorage.setItem(\n              'isFirstNext',\n              isFirstLogin === 0 ? 1 : 2\n            ); // 记录已经判断过一次\n          } else {\n            next({ ...to, replace: true });\n          }\n          loading.close();\n        } catch (error) {\n          loading.close();\n          // remove token and go to login page to re-login\n          console.error(error);\n          try {\n            // await MessageBox.confirm(\n            //   '当前数据加载不稳定，请您稍后重试',\n            //   '错误',\n            //   {\n            //     confirmButtonText: '重新加载数据',\n            //     cancelButtonText: '登录页面',\n            //     closeOnClickModal: false,\n            //     closeOnPressEscape: false,\n            //     showClose: false\n            //   }\n            // );\n            // 重新加载数据\n            next();\n          } catch (e) {\n            console.error('e', e);\n            // 登出\n            await store.dispatch('user/resetToken');\n            next(`/login?redirect=${to.path}`);\n            NProgress.done();\n          }\n        }\n      }\n    }\n  } else {\n    /* has no token*/\n\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      // 如果是/sso/auth路由清除第一次进去的标志位\n      if (to.path === '/sso/auth') {\n        window.sessionStorage.setItem('isFirstNext', 2);\n      }\n      next();\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      next(`/login?redirect=${to.path}`);\n      NProgress.done();\n    }\n  }\n});\n\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done();\n});\n"]}]}