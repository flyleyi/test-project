{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/ArrivalCompany.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/my-visitor/components/ArrivalCompany.vue","mtime":1646020538184},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGV2ZW50QnVzIGZyb20gJ0AvcGFnZXMvdmlzaXRvci1oNS9wbHVnaW5zL2NvbW1vbi9ldmVudEJ1cy5qcyc7CmltcG9ydCB0cmVlTm9kZSBmcm9tICcuL1RyZWVOb2RlLnZ1ZSc7CmltcG9ydCB7IGdldENvbXBhbnlMaXN0IGFzIF9nZXRDb21wYW55TGlzdCB9IGZyb20gJ0AvcGFnZXMvdmlzaXRvci1oNS9hcGkvbXlWaXNpdG9yJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHRyZWVOb2RlOiB0cmVlTm9kZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhbXB1c09iajoge30sCiAgICAgIGNvbXBhbnlJbmZvOiB7fSwKICAgICAgY2FtcHVzTGlzdDogW10sCiAgICAgIC8vIGFjdGl2ZUxpc3Q6IFtdLCAvL+iuvue9rum7mOiupOmAieS4reWFpeWPowogICAgICAvLyBhY3RpdmVOYW1lTGlzdDogW10sCiAgICAgIGFjdGl2ZTogJycsCiAgICAgIGFjdGl2ZU5hbWU6ICcnLAogICAgICBjb21wYW55TmFtZTogJycsCiAgICAgIHNob3dEb29yRGlhbG9nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvbXBhbnlMaXN0OiBmdW5jdGlvbiBnZXRDb21wYW55TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF9nZXRDb21wYW55TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmNhbXB1c0xpc3QgPSByZXMuZGF0YTsKICAgICAgICBfdGhpcy5hY3RpdmVMaXN0ID0gX3RoaXMuY2FtcHVzTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmRvb3JMaXN0WzBdLmlkOwogICAgICAgIH0pOwogICAgICAgIF90aGlzLmFjdGl2ZU5hbWVMaXN0ID0gX3RoaXMuY2FtcHVzTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmRvb3JMaXN0WzBdLmRvb3I7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdERvb3I6IGZ1bmN0aW9uIHNlbGVjdERvb3IoaXRlbSwgaW5kZXgpIHsKICAgICAgLy8gdGhpcy4kc2V0KHRoaXMuYWN0aXZlTGlzdCwgaW5kZXgsIGl0ZW0uaWQpOwogICAgICAvLyB0aGlzLiRzZXQodGhpcy5hY3RpdmVOYW1lTGlzdCwgaW5kZXgsIGl0ZW0uZG9vcik7CiAgICAgIHRoaXMuYWN0aXZlID0gaXRlbS5pZDsKICAgICAgdGhpcy5hY3RpdmVOYW1lID0gaXRlbS5kb29yOwogICAgICBldmVudEJ1cy4kZW1pdCgnc2V0QXJyaXZhbENvbXBhbnknLCB0aGlzLmNhbXB1c09iaiwgdGhpcy5jb21wYW55SW5mbywgdGhpcy5hY3RpdmVOYW1lLCB0aGlzLmNvbXBhbnlOYW1lLCB0aGlzLmFjdGl2ZSk7CiAgICAgIGV2ZW50QnVzLiRlbWl0KCdzZXRjdXJUeXBlJywgdGhpcy4kcm91dGUucXVlcnkudHlwZSk7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgc2V0Q29tcGFueTogZnVuY3Rpb24gc2V0Q29tcGFueShpdGVtLCBjYW1wdXNPYmosIGluZGV4KSB7CiAgICAgIHRoaXMuY29tcGFueUluZm8gPSBpdGVtOwogICAgICB0aGlzLmNhbXB1c09iaiA9IGNhbXB1c09iajsKCiAgICAgIGlmIChpdGVtLmdyb3VwRGVwdER0b0xpc3QgJiYgaXRlbS5ncm91cERlcHREdG9MaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLiRub3RpZnkoJ+ivt+mAieaLqeacgOWQjuS4gOe6p+WNleS9jScpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGl0ZW0ubGV2ZWwgIT0gMikgewogICAgICAgIHRoaXMuY29tcGFueU5hbWUgPSBpdGVtLmRlcHROYW1lIHx8IGl0ZW0ubmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBhbnlOYW1lID0gdGhpcy5nZXRDb21wYW55TmFtZShpdGVtLnBhcmVudElkLCBjYW1wdXNPYmouZ3JvdXBEZXB0RHRvTGlzdCk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0SW5mbyhpbmRleCk7CiAgICB9LAogICAgZ2V0Q29tcGFueU5hbWU6IGZ1bmN0aW9uIGdldENvbXBhbnlOYW1lKGlkLCBhcnJheSkgewogICAgICB2YXIgYXJyID0gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uZGVwdElkID09IGlkOwogICAgICB9KTsKICAgICAgcmV0dXJuIGFyclswXS5kZXB0TmFtZTsKICAgIH0sCiAgICBzZXRJbmZvOiBmdW5jdGlvbiBzZXRJbmZvKGluZGV4KSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmNvbXBhbnlJbmZvKS5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuJG5vdGlmeSgn6K+36YCJ5oup5Yiw6K6/6YOo6Zeo77yBJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnNob3dEb29yRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuc2hvd0Rvb3JEaWFsb2cgPSBmYWxzZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENvbXBhbnlMaXN0KCk7CiAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lmd1ZXN0RG9vcklkOwogIH0KfTs="},{"version":3,"sources":["ArrivalCompany.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-wrapper\">\n    <ul>\n      <li\n        class=\"campus-item\"\n        v-for=\"(campusObj, index) in campusList\"\n        :key=\"campusObj.id\"\n        @click.stop=\"setCompany(campusObj, campusObj, index)\"\n      >\n        <div class=\"sum-info\">\n          <div class=\"campus-name\">{{ campusObj.deptName }}</div>\n          <!--  <ul class=\"door-list\">\n            <li\n              v-for=\"item in campusObj.doorList\"\n              :key=\"item.id\"\n              :class=\"item.id == activeList[index] ? 'active' : ''\"\n              @click.stop=\"selectDoor(item, index)\"\n            >\n              {{ item.door }}\n            </li>\n          </ul> -->\n          <div class=\"address\">{{ campusObj.address }}</div>\n        </div>\n        <div class=\"detail-info\">\n          <tree-node\n            :initActive=\"$route.query.guestDeptId\"\n            :data=\"campusObj.groupDeptDtoList\"\n            @setCompany=\"setCompany($event, campusObj, index)\"\n          ></tree-node>\n        </div>\n      </li>\n    </ul>\n\n    <!-- <van-dialog\n      class=\"door-dialog\"\n      v-model=\"showDoorDialog\"\n      title=\"请选择访客到达门岗\"\n      :showConfirmButton=\"false\"\n      show-cancel-button\n      @cancel=\"onCancel\"\n    >\n     -->\n    <van-popup\n      :style=\"{ height: '40%' }\"\n      closeable\n      :close-on-click-overlay=\"false\"\n      v-model=\"showDoorDialog\"\n      round\n      position=\"bottom\"\n    >\n      <div class=\"door-wrapper\">\n        <div class=\"title\">请选择访客到达门岗</div>\n        <div>\n          {{ this.campusObj.deptName + ' ' + this.campusObj.address }}\n        </div>\n        <ul class=\"door-list\">\n          <li\n            v-for=\"item in this.campusObj.doorList\"\n            :key=\"item.id\"\n            :class=\"item.id == active ? 'active' : ''\"\n            @click.stop=\"selectDoor(item)\"\n          >\n            {{ item.door }}\n          </li>\n        </ul>\n      </div>\n    </van-popup>\n    <!-- </van-dialog> -->\n  </div>\n</template>\n\n<script>\nimport eventBus from '@/pages/visitor-h5/plugins/common/eventBus.js';\nimport treeNode from './TreeNode.vue';\nimport { getCompanyList } from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  components: { treeNode },\n  data() {\n    return {\n      campusObj: {},\n      companyInfo: {},\n      campusList: [],\n      // activeList: [], //设置默认选中入口\n      // activeNameList: [],\n      active: '',\n      activeName: '',\n      companyName: '',\n      showDoorDialog: false\n    };\n  },\n  methods: {\n    getCompanyList() {\n      getCompanyList().then(res => {\n        this.campusList = res.data;\n        this.activeList = this.campusList.map(item => {\n          return item.doorList[0].id;\n        });\n        this.activeNameList = this.campusList.map(item => {\n          return item.doorList[0].door;\n        });\n      });\n    },\n    selectDoor(item, index) {\n      // this.$set(this.activeList, index, item.id);\n      // this.$set(this.activeNameList, index, item.door);\n      this.active = item.id;\n      this.activeName = item.door;\n\n      eventBus.$emit(\n        'setArrivalCompany',\n        this.campusObj,\n        this.companyInfo,\n        this.activeName,\n        this.companyName,\n        this.active\n      );\n      eventBus.$emit('setcurType', this.$route.query.type);\n      this.$router.go(-1);\n    },\n    setCompany(item, campusObj, index) {\n      this.companyInfo = item;\n      this.campusObj = campusObj;\n      if (item.groupDeptDtoList && item.groupDeptDtoList.length > 0) {\n        this.$notify('请选择最后一级单位');\n        return;\n      }\n      if (item.level != 2) {\n        this.companyName = item.deptName || item.name;\n      } else {\n        this.companyName = this.getCompanyName(\n          item.parentId,\n          campusObj.groupDeptDtoList\n        );\n      }\n      this.setInfo(index);\n    },\n    getCompanyName(id, array) {\n      let arr = array.filter(item => {\n        return item.deptId == id;\n      });\n      return arr[0].deptName;\n    },\n\n    setInfo(index) {\n      if (Object.keys(this.companyInfo).length == 0) {\n        this.$notify('请选择到访部门！');\n        return;\n      }\n      this.showDoorDialog = true;\n    },\n    onCancel() {\n      this.showDoorDialog = false;\n    }\n  },\n  created() {\n    this.getCompanyList();\n    this.active = this.$route.query.guestDoorId;\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.app-wrapper {\n  padding: 15px 18px;\n}\n.campus-item {\n  margin-bottom: 15px;\n\n  .sum-info {\n    background: #ffffff;\n    box-shadow: 0px 1px 10px 0px rgba(94, 94, 94, 0.08);\n    padding: 12px;\n    .campus-name {\n      font-size: 17px;\n      font-family: PingFangSC-Medium, PingFang SC;\n      font-weight: 500;\n      color: rgba(0, 0, 0, 0.85);\n      line-height: 24px;\n      margin-bottom: 10px;\n      span {\n        font-size: 12px;\n      }\n    }\n  }\n  .detail-info {\n    background: #fbfbfc;\n  }\n}\n.door-list {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 20px 0;\n  // margin-bottom: 11px;\n  li {\n    padding: 5px 14px;\n    margin-right: 12px;\n    margin-bottom: 10px;\n    border-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.65);\n    font-size: 12px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.65);\n    &.active {\n      border: 1px solid transparent;\n      // border: none;\n      background: #3388ff;\n      color: #fff;\n    }\n  }\n}\n\n.door-wrapper {\n  padding: 20px;\n  .title {\n    margin-bottom: 20px;\n    text-align: center;\n  }\n}\n</style>\n"],"sourceRoot":"src/pages/visitor-h5/views/my-visitor/components"}]}