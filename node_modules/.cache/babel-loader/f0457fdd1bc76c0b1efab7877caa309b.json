{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/store/modules/user.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/store/modules/user.js","mtime":1645176309827},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBnZXRJbmZvIGFzIF9nZXRJbmZvIH0gZnJvbSAnLi4vLi4vYXBpL3VzZXIvaW5kZXgnOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC9wbHVnaW5zL2NvcmUvYXV0aCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9wYWdlcy9zaGFyZS1wbGF0Zm9ybS1mcm9udC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIHN0YWZmQ29kZTogJycsCiAgICAvLyDlt6Xlj7cKICAgIHN0YWZmTmFtZTogJycsCiAgICAvLyDnlKjmiLflkI0KICAgIGlzQ2hhbmdlTG9naW46ICcnLAogICAgLy/mmK/lkKbmnInkvIHkuJrlj7cKICAgIGlzRmlyc3RMb2dpbjogJycgLy/mmK/lkKbpppbmrKHnmbvlvZUKCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1NUQUZGX0NPREU6IGZ1bmN0aW9uIFNFVF9TVEFGRl9DT0RFKHN0YXRlLCBzdGFmZkNvZGUpIHsKICAgIHN0YXRlLnN0YWZmQ29kZSA9IHN0YWZmQ29kZTsKICB9LAogIFNFVF9TVEFGRl9OQU1FOiBmdW5jdGlvbiBTRVRfU1RBRkZfTkFNRShzdGF0ZSwgc3RhZmZOYW1lKSB7CiAgICBzdGF0ZS5zdGFmZk5hbWUgPSBzdGFmZk5hbWU7CiAgfSwKICBJU19DSEFOR0VfTE9HSU46IGZ1bmN0aW9uIElTX0NIQU5HRV9MT0dJTihzdGF0ZSwgaXNDaGFuZ2VMb2dpbikgewogICAgc3RhdGUuaXNDaGFuZ2VMb2dpbiA9IGlzQ2hhbmdlTG9naW47CiAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNDaGFuZ2VMb2dpbicsIHN0YXRlLmlzQ2hhbmdlTG9naW4pOwogIH0sCiAgSVNfRklSU1RfTE9HSU46IGZ1bmN0aW9uIElTX0ZJUlNUX0xPR0lOKHN0YXRlLCBpc0ZpcnN0TG9naW4pIHsKICAgIHN0YXRlLmlzRmlyc3RMb2dpbiA9IGlzRmlyc3RMb2dpbjsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmV0dXJuIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyLAogICAgICAgICAgICBzdGFmZk5hbWUgPSBkYXRhLnN0YWZmTmFtZSwKICAgICAgICAgICAgc3RhZmZDb2RlID0gZGF0YS5zdGFmZkNvZGUsCiAgICAgICAgICAgIGlzQ2hhbmdlTG9naW4gPSBkYXRhLmlzQ2hhbmdlTG9naW4sCiAgICAgICAgICAgIGlzRmlyc3RMb2dpbiA9IGRhdGEuaXNGaXJzdExvZ2luOyAvLyBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgICAgLy8gY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKCiAgICAgICAgY29tbWl0KCdTRVRfU1RBRkZfQ09ERScsIHN0YWZmQ29kZSk7CiAgICAgICAgY29tbWl0KCdTRVRfU1RBRkZfTkFNRScsIHN0YWZmTmFtZSk7CiAgICAgICAgY29tbWl0KCdJU19DSEFOR0VfTE9HSU4nLCBpc0NoYW5nZUxvZ2luKTsKICAgICAgICBjb21taXQoJ0lTX0ZJUlNUX0xPR0lOJywgaXNGaXJzdExvZ2luKTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJy9sb2dpbj9yZWRpcmVjdC9ob21lJwogICAgICAgICAgfSk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFRvdXInLCAxKTsgLy8gcmVzZXRSb3V0ZXIoKTsKCiAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7IC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAvLyAgIGxvZ291dChzdGF0ZS50b2tlbikKICAgIC8vICAgICAudGhlbigoKSA9PiB7CiAgICAvLyAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAvLyAgICAgICByZXNldFJvdXRlcigpOwogICAgLy8gICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgLy8gICAgICAgcmVzb2x2ZSgpOwogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgIC8vICAgICAgIHJlamVjdChlcnJvcik7CiAgICAvLyAgICAgfSk7CiAgICAvLyB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/share-platform-front/store/modules/user.js"],"names":["getInfo","getToken","setToken","removeToken","router","getDefaultState","token","name","staffCode","staffName","isChangeLogin","isFirstLogin","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","avatar","SET_STAFF_CODE","SET_STAFF_NAME","IS_CHANGE_LOGIN","window","sessionStorage","setItem","IS_FIRST_LOGIN","actions","commit","Promise","resolve","reject","then","response","data","catch","error","setTimeout","push","logout","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { getInfo } from '../../api/user/index';\nimport { getToken, setToken, removeToken } from '@/plugins/core/auth';\nimport router from '@/pages/share-platform-front/router';\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    staffCode: '', // 工号\n    staffName: '', // 用户名\n    isChangeLogin: '', //是否有企业号\n    isFirstLogin: '' //是否首次登录\n  };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n  RESET_STATE: state => {\n    Object.assign(state, getDefaultState());\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_NAME: (state, name) => {\n    state.name = name;\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar;\n  },\n  SET_STAFF_CODE: (state, staffCode) => {\n    state.staffCode = staffCode;\n  },\n  SET_STAFF_NAME: (state, staffName) => {\n    state.staffName = staffName;\n  },\n  IS_CHANGE_LOGIN: (state, isChangeLogin) => {\n    state.isChangeLogin = isChangeLogin;\n    window.sessionStorage.setItem('isChangeLogin', state.isChangeLogin);\n  },\n  IS_FIRST_LOGIN: (state, isFirstLogin) => {\n    state.isFirstLogin = isFirstLogin;\n  }\n};\n\nconst actions = {\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token)\n        .then(response => {\n          const { data } = response;\n\n          if (!data) {\n            return reject('Verification failed, please Login again.');\n          }\n\n          const {\n            name,\n            avatar,\n            staffName,\n            staffCode,\n            isChangeLogin,\n            isFirstLogin\n          } = data;\n\n          // commit('SET_NAME', name);\n          // commit('SET_AVATAR', avatar);\n          commit('SET_STAFF_CODE', staffCode);\n          commit('SET_STAFF_NAME', staffName);\n          commit('IS_CHANGE_LOGIN', isChangeLogin);\n          commit('IS_FIRST_LOGIN', isFirstLogin);\n          resolve(data);\n        })\n        .catch(error => {\n          removeToken(); // must remove  token  first\n          commit('RESET_STATE');\n          setTimeout(() => {\n            router.push({\n              name: '/login?redirect/home'\n            });\n          }, 1000);\n          reject(error);\n        });\n    });\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    removeToken(); // must remove  token  first\n    window.sessionStorage.setItem('currentTour', 1);\n    // resetRouter();\n    commit('RESET_STATE');\n    // return new Promise((resolve, reject) => {\n    //   logout(state.token)\n    //     .then(() => {\n    //       removeToken(); // must remove  token  first\n    //       resetRouter();\n    //       commit('RESET_STATE');\n    //       resolve();\n    //     })\n    //     .catch(error => {\n    //       reject(error);\n    //     });\n    // });\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken(); // must remove  token  first\n      commit('RESET_STATE');\n      resolve();\n    });\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};\n"]}]}