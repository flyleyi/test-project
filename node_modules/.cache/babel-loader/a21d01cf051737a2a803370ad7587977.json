{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/components/common/CDynamicForm/mixins/df-options-mixin.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/components/common/CDynamicForm/mixins/df-options-mixin.js","mtime":1627979214237},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC95anktcHJvamVjdHMvbXVsdGktcHJvamVjdC9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgZGZNaXhpbiBmcm9tICcuL2RmLW1peGluJzsKLyoqCiAqIOaYr+WQpuaYr+epuuWAvAogKiDnqbrlgLwKICogLSBbXQogKiAtICcnCiAqIC0gbnVsbAogKiAtIHVuZGVmaW5lZAogKiBAcGFyYW0geyp9IHZhbHVlIOWAvAogKi8KCnZhciBpc0VtcHR5VmFsdWUgPSBmdW5jdGlvbiBpc0VtcHR5VmFsdWUodmFsdWUpIHsKICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7CiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmICF2YWx1ZS5sZW5ndGgpIHJldHVybiB0cnVlOwogIGlmICh2YWx1ZSA9PT0gJycpIHJldHVybiB0cnVlOwogIHJldHVybiBmYWxzZTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtkZk1peGluXSwKICBpbmplY3Q6IFsnQ0R5bmFtaWNGb3JtJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlbW90ZU9wdGlvbkxpc3Q6IFtdLAogICAgICAvLyDov5znqIvpgInpobnliJfooagKICAgICAgbGFzdFJlcXVlc3RTeW1ib2w6IG51bGwgLy8g5pyA5ZCO5LiA5qyh6K+35rGC5ZSv5LiA5qCH6K+GCgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvKioKICAgICAqIOagh+etvmtleQogICAgICovCiAgICBsYWJlbEtleTogZnVuY3Rpb24gbGFiZWxLZXkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5sYWJlbEtleSB8fCAnbGFiZWwnOwogICAgfSwKCiAgICAvKioKICAgICAqIOWAvGtleQogICAgICovCiAgICB2YWx1ZUtleTogZnVuY3Rpb24gdmFsdWVLZXkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy52YWx1ZUtleSB8fCAndmFsdWUnOwogICAgfSwKCiAgICAvKioKICAgICAqIOmAiemhueWIl+ihqOaVsOaNrgogICAgICovCiAgICBvcHRpb25MaXN0OiBmdW5jdGlvbiBvcHRpb25MaXN0KCkgewogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuY29uZmlnLm9wdGlvbnM7CiAgICAgIHZhciBvcHRpb25MaXN0ID0gdGhpcy5pc0FqYXggPyB0aGlzLnJlbW90ZU9wdGlvbkxpc3QgOiBvcHRpb25zOwogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvcHRpb25MaXN0KSA/IG9wdGlvbkxpc3QgOiBbXTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDmmK/lkKZhamF46K+35rGC5pWw5o2uCiAgICAgKi8KICAgIGlzQWpheDogZnVuY3Rpb24gaXNBamF4KCkgewogICAgICB2YXIgYWpheCA9IHRoaXMuY29uZmlnLmFqYXg7CiAgICAgIHJldHVybiBhamF4ICYmIHR5cGVvZiBhamF4ID09PSAnZnVuY3Rpb24nOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog5Yid5aeL5YyWCiAgICAgKi8KICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcGFyZW50UHJvcCwgdW53YXRjaDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzLkNEeW5hbWljRm9ybSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnvLrlsJFDRHluYW1pY0Zvcm3nu4Tku7bljIXoo7knKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcGFyZW50UHJvcCA9IF90aGlzLmNvbmZpZy5wYXJlbnRQcm9wOwoKICAgICAgICAgICAgICAgIGlmIChwYXJlbnRQcm9wKSB7CiAgICAgICAgICAgICAgICAgIC8vIOS4iue6p+iBlOWKqAogICAgICAgICAgICAgICAgICB1bndhdGNoID0gX3RoaXMuQ0R5bmFtaWNGb3JtLiR3YXRjaCgibW9kZWwuIi5jb25jYXQocGFyZW50UHJvcCksIF90aGlzLmNoYW5nZVBhcmVudFZhbHVlKTsgLy8g6Kej57uRCgogICAgICAgICAgICAgICAgICBfdGhpcy4kb24oJ2hvb2s6ZGVzdHJveWVkJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHVud2F0Y2goKTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5DRHluYW1pY0Zvcm0ubW9kZWxbcGFyZW50UHJvcF0gJiYgX3RoaXMuYWpheE9wdGlvbkxpc3QoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmFqYXhPcHRpb25MaXN0KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDkuIrnuqflhYPntKDmlbDmja7mlLnlj5gKICAgICAqLwogICAgY2hhbmdlUGFyZW50VmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVBhcmVudFZhbHVlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi52YWwgPSBBcnJheS5pc0FycmF5KF90aGlzMi52YWwpID8gW10gOiAnJzsKICAgICAgfSk7CiAgICAgIHRoaXMuYWpheE9wdGlvbkxpc3QoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBhamF46K+35rGC6YCJ6aG55pWw5o2uCiAgICAgKi8KICAgIGFqYXhPcHRpb25MaXN0OiBmdW5jdGlvbiBhamF4T3B0aW9uTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzMyRjb25maWcsIGFqYXgsIHBhcmVudFByb3AsIHN5bWJvbCwgcmVzOwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMyRjb25maWcgPSBfdGhpczMuY29uZmlnLCBhamF4ID0gX3RoaXMzJGNvbmZpZy5hamF4LCBwYXJlbnRQcm9wID0gX3RoaXMzJGNvbmZpZy5wYXJlbnRQcm9wOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuaXNBamF4KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZiAoIShwYXJlbnRQcm9wICYmIGlzRW1wdHlWYWx1ZShfdGhpczMuQ0R5bmFtaWNGb3JtLm1vZGVsW3BhcmVudFByb3BdKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX3RoaXMzLnJlbW90ZU9wdGlvbkxpc3QgPSBbXSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHN5bWJvbCA9IFN5bWJvbChfdGhpczMuY29uZmlnLnByb3ApOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwoKICAgICAgICAgICAgICAgIF90aGlzMy4kZW1pdCgnYWpheC1zdGFydCcsIHN5bWJvbCk7CgogICAgICAgICAgICAgICAgX3RoaXMzLmxhc3RSZXF1ZXN0U3ltYm9sID0gc3ltYm9sOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBhamF4KF90aGlzMy5DRHluYW1pY0Zvcm0ubW9kZWwsIF90aGlzMy52YWwsIF90aGlzMy5jb25maWcucHJvcCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IEFycmF5LmlzQXJyYXkocmVzKSA/IHJlcyA6IFtdOyAvLyDpmLLmraLlkI7pnaLnmoTor7fmsYLlhYjov5Tlm57lr7zoh7TmlbDmja7kuI3lh4bnoa4KCiAgICAgICAgICAgICAgICBfdGhpczMubGFzdFJlcXVlc3RTeW1ib2wgPT09IHN5bWJvbCAmJiAoX3RoaXMzLnJlbW90ZU9wdGlvbkxpc3QgPSByZXMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICAgIF90aGlzMy5yZW1vdGVPcHRpb25MaXN0ID0gW107CiAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIwOwoKICAgICAgICAgICAgICAgIF90aGlzMy4kZW1pdCgnYWpheC1lbmQnLCBzeW1ib2wpOwoKICAgICAgICAgICAgICAgIF90aGlzMy5sYXN0UmVxdWVzdFN5bWJvbCA9IG51bGw7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgyMCk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNiwgMTYsIDIwLCAyNF1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/components/common/CDynamicForm/mixins/df-options-mixin.js"],"names":["dfMixin","isEmptyValue","value","undefined","Array","isArray","length","mixins","inject","data","remoteOptionList","lastRequestSymbol","computed","labelKey","config","valueKey","optionList","options","isAjax","ajax","created","mounted","init","methods","CDynamicForm","Error","parentProp","unwatch","$watch","changeParentValue","$on","model","ajaxOptionList","newVal","oldVal","$nextTick","val","symbol","Symbol","prop","$emit","res"],"mappings":"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","sourcesContent":["import dfMixin from './df-mixin';\n\n/**\n * 是否是空值\n * 空值\n * - []\n * - ''\n * - null\n * - undefined\n * @param {*} value 值\n */\nconst isEmptyValue = value => {\n  if (value === undefined || value === null) return true;\n  if (Array.isArray(value) && !value.length) return true;\n  if (value === '') return true;\n  return false;\n};\n\nexport default {\n  mixins: [dfMixin],\n  inject: ['CDynamicForm'],\n  data() {\n    return {\n      remoteOptionList: [], // 远程选项列表\n      lastRequestSymbol: null // 最后一次请求唯一标识\n    };\n  },\n  computed: {\n    /**\n     * 标签key\n     */\n    labelKey() {\n      return this.config.labelKey || 'label';\n    },\n    /**\n     * 值key\n     */\n    valueKey() {\n      return this.config.valueKey || 'value';\n    },\n    /**\n     * 选项列表数据\n     */\n    optionList() {\n      let { options } = this.config;\n      let optionList = this.isAjax ? this.remoteOptionList : options;\n      return Array.isArray(optionList) ? optionList : [];\n    },\n    /**\n     * 是否ajax请求数据\n     */\n    isAjax() {\n      let { ajax } = this.config;\n      return ajax && typeof ajax === 'function';\n    }\n  },\n  created() {},\n  mounted() {\n    this.init();\n  },\n  methods: {\n    /**\n     * 初始化\n     */\n    async init() {\n      // 校验是否有表单元素包裹\n      if (!this.CDynamicForm) throw new Error('缺少CDynamicForm组件包裹');\n      let { parentProp } = this.config;\n      if (parentProp) {\n        // 上级联动\n        let unwatch = this.CDynamicForm.$watch(\n          `model.${parentProp}`,\n          this.changeParentValue\n        );\n        // 解绑\n        this.$on('hook:destroyed', () => {\n          unwatch();\n        });\n        this.CDynamicForm.model[parentProp] && this.ajaxOptionList();\n      } else {\n        this.ajaxOptionList();\n      }\n    },\n    /**\n     * 上级元素数据改变\n     */\n    changeParentValue(newVal, oldVal) {\n      this.$nextTick(() => {\n        this.val = Array.isArray(this.val) ? [] : '';\n      });\n      this.ajaxOptionList();\n    },\n    /**\n     * ajax请求选项数据\n     */\n    async ajaxOptionList() {\n      let { ajax, parentProp } = this.config;\n      if (!this.isAjax) return;\n      // fix：校验空数组、null、空字符串、undefined\n      if (parentProp && isEmptyValue(this.CDynamicForm.model[parentProp]))\n        return (this.remoteOptionList = []);\n      let symbol = Symbol(this.config.prop);\n      try {\n        this.$emit('ajax-start', symbol);\n        this.lastRequestSymbol = symbol;\n        let res = await ajax(\n          this.CDynamicForm.model,\n          this.val,\n          this.config.prop\n        );\n        res = Array.isArray(res) ? res : [];\n        // 防止后面的请求先返回导致数据不准确\n        this.lastRequestSymbol === symbol && (this.remoteOptionList = res);\n      } catch (e) {\n        this.remoteOptionList = [];\n        throw e;\n      } finally {\n        this.$emit('ajax-end', symbol);\n        this.lastRequestSymbol = null;\n      }\n    }\n  }\n};\n"]}]}