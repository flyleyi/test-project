{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/catering/views/meals/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/catering/views/meals/index.vue","mtime":1645178321128},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC95anktcHJvamVjdHMvbXVsdGktcHJvamVjdC9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9mdXl1ZXlpL0Rlc2t0b3AveWp5LXByb2plY3RzL211bHRpLXByb2plY3QvbXV0aWx3YXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9mdXl1ZXlpL0Rlc2t0b3AveWp5LXByb2plY3RzL211bHRpLXByb2plY3QvbXV0aWx3YXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9zZWxlY3QyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL3NlbGVjdC5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9zZWxlY3QgZnJvbSAiZWxlbWVudC11aS9saWIvc2VsZWN0IjsKaW1wb3J0IF9UYWcyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL3RhZy5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9UYWcgZnJvbSAiZWxlbWVudC11aS9saWIvdGFnIjsKaW1wb3J0IF9TY3JvbGxiYXIyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL3Njcm9sbGJhci5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9TY3JvbGxiYXIgZnJvbSAiZWxlbWVudC11aS9saWIvc2Nyb2xsYmFyIjsKaW1wb3J0IF9UYWJsZUNvbHVtbjIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvdGFibGUtY29sdW1uLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX1RhYmxlQ29sdW1uIGZyb20gImVsZW1lbnQtdWkvbGliL3RhYmxlLWNvbHVtbiI7CmltcG9ydCBfVGFibGUyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL3RhYmxlLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX1RhYmxlIGZyb20gImVsZW1lbnQtdWkvbGliL3RhYmxlIjsKaW1wb3J0IF9Gb3JtSXRlbTIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvZm9ybS1pdGVtLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0Zvcm1JdGVtIGZyb20gImVsZW1lbnQtdWkvbGliL2Zvcm0taXRlbSI7CmltcG9ydCBfRm9ybTIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvZm9ybS5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9Gb3JtIGZyb20gImVsZW1lbnQtdWkvbGliL2Zvcm0iOwppbXBvcnQgX1NlbGVjdDIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvc2VsZWN0LmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX1NlbGVjdCBmcm9tICJlbGVtZW50LXVpL2xpYi9zZWxlY3QiOwppbXBvcnQgX0NvbDIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvY29sLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0NvbCBmcm9tICJlbGVtZW50LXVpL2xpYi9jb2wiOwppbXBvcnQgX1JvdzIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvcm93LmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX1JvdyBmcm9tICJlbGVtZW50LXVpL2xpYi9yb3ciOwppbXBvcnQgX1RyZWUyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL3RyZWUuY3NzIjsKaW1wb3J0ICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9iYXNlLmNzcyI7CmltcG9ydCBfVHJlZSBmcm9tICJlbGVtZW50LXVpL2xpYi90cmVlIjsKaW1wb3J0IF9DYXJkMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9jYXJkLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0NhcmQgZnJvbSAiZWxlbWVudC11aS9saWIvY2FyZCI7CmltcG9ydCBfSW5wdXQyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2lucHV0LmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0lucHV0IGZyb20gImVsZW1lbnQtdWkvbGliL2lucHV0IjsKaW1wb3J0IF9PcHRpb24yIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL29wdGlvbi5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9PcHRpb24gZnJvbSAiZWxlbWVudC11aS9saWIvb3B0aW9uIjsKaW1wb3J0IF9UYWJQYW5lMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay90YWItcGFuZS5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9UYWJQYW5lIGZyb20gImVsZW1lbnQtdWkvbGliL3RhYi1wYW5lIjsKaW1wb3J0IF9UYWJzMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay90YWJzLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX1RhYnMgZnJvbSAiZWxlbWVudC11aS9saWIvdGFicyI7CmltcG9ydCBfRGlhbG9nMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9kaWFsb2cuY3NzIjsKaW1wb3J0ICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9iYXNlLmNzcyI7CmltcG9ydCBfRGlhbG9nIGZyb20gImVsZW1lbnQtdWkvbGliL2RpYWxvZyI7CmltcG9ydCBfTG9hZGluZzIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvbG9hZGluZy5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9Mb2FkaW5nIGZyb20gImVsZW1lbnQtdWkvbGliL2xvYWRpbmciOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3lqeS1wcm9qZWN0cy9tdWx0aS1wcm9qZWN0L211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwoKdmFyIF9jb21wb25lbnRzOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgQ1N2Z0ljb24gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DU3ZnSWNvbic7CmltcG9ydCBCVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2J1c2luZXNzL0JUYWJsZSc7CmltcG9ydCBDRHluYW1pY0Zvcm0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9DRHluYW1pY0Zvcm0vaW5kZXgnOwppbXBvcnQgQ1RhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ1RhYmxlJzsKaW1wb3J0IEJJbXBvcnREYXRhIGZyb20gJ0AvcGFnZXMvY2F0ZXJpbmcvY29tcG9uZW50cy9CSW1wb3J0RGF0YVBhbmVsJzsKaW1wb3J0IHB1c2hQYW5lbCBmcm9tICcuL1B1c2hQYW5lbCc7CmltcG9ydCB7IElzc3VlLCBBZGRNZW51IH0gZnJvbSAnLi9jb21wb25lbnRzJzsKaW1wb3J0IGFyZWEgZnJvbSAnLi4vLi4vYXBpL2FyZWEnOwppbXBvcnQgdXRpbHMgZnJvbSAnQC9wbHVnaW5zL2NvbW1vbi91dGlscyc7CmltcG9ydCB7IGhhbmRsZU1lYWxEYXRhIH0gZnJvbSAnQC9wYWdlcy9jYXRlcmluZy9wbHVnaW5zL2NvbW1vbi91dGlscyc7CmltcG9ydCB7IGZvcm1hdElucHV0IH0gZnJvbSAnLi4vQmFzaWNEYXRhL3V0aWxzLmpzJzsKaW1wb3J0IE1lbnUsIHsgc3VwcGxpZXJJbmdyZWRpZW50UGFnZSwgc2F2ZVN1cHBsaWVySW5ncmVkaWVudCwgZGVsZXRlU3VwcGxpZXJJbmdyZWRpZW50QnlJZHMsIHVwZGF0ZVN1cHBsaWVySW5ncmVkaWVudFN0YXR1c0J5SWRzLCBxdWVyeWluZ3JlZGllbnRQYWdlLCBzYXZlSW5ncmVkaWVudCwgZGVsZXRlSW5ncmVkaWVudEJ5SWRzLCB1cGRhdGVJbmdyZWRpZW50U3RhdHVzQnlJZHMsIHF1ZXJ5Q3V0TWF0Y2hTdGFuZGFyZFBhZ2V0LCBzYXZlQ3V0TWF0Y2hTdGFuZGFyZCwgZGVsZXRlQ3V0TWF0Y2hTdGFuZGFyZEJ5SWRzLCB1cGRhdGVTdGF0dXNCeUlkcywgcXVlcnlDb29raW5nU3R5bGVQYWdlLCBzYXZlQ29va2luZ1N0eWxlLCBkZWxldGVDb29raW5nU3R5bGVCeUlkcywgdXBkYXRlQ29va2luZ1N0YXR1c0J5SWRzLCBxdWVyeURpc2hlc1BhZ2UsIHNhdmVEaXNoZXNTdXBlciwgZGVsZXRlRGlzaGVzQnlJZHMsIHVwZGF0ZURpc2hlc1N0YXR1c0J5SWRzLCBxdWVyeWNyb3dkUGFnZSwgc2F2ZUNyb3dkLCBkZWxldGVDcm93ZEJ5SWRzLCB1cGRhdGVDcm93ZFN0YXR1c0J5SWRzLCBkaXNoZXNMaXN0UGFnZSwgc2F2ZURpc2hlc0xpc3QsIGJhdGNoRGVsZXRlRGlzaGVzTGlzdCwgY3Jvd2RMaXN0LCBjb29raW5nU3R5bGVMaXN0LCBpbmdyZWRpZW50TGlzdCwgZ2V0RGlzaGVzQ29udGVudExpc3RCeURpc2hlc0lkLCBjdXRNYXRjaFN0YW5kYXJkTGlzdCwgYWRkVG9NeU1lbnUgYXMgX2FkZFRvTXlNZW51LCBkaXNoZXNMaXN0RGV0YWlsLCBpbXBvcnRFeGNlbCwgY2hpbGREaWN0aW9uYXJ5IH0gZnJvbSAnLi4vLi4vYXBpL2Nyb3dkJzsKdmFyIGFwaSA9IHsKICBwcm92aWRlSW5ncmVkaWVudHM6IHNhdmVTdXBwbGllckluZ3JlZGllbnQsCiAgaW5ncmVkaWVudHM6IHNhdmVJbmdyZWRpZW50LAogIHJ1bGVzOiBzYXZlQ3V0TWF0Y2hTdGFuZGFyZCwKICBjdWlzaW5lOiBzYXZlQ29va2luZ1N0eWxlLAogIGRpc2hlczogc2F2ZURpc2hlc1N1cGVyLAogIG1lbnU6IHNhdmVEaXNoZXNMaXN0LAogIGNyb3dkOiBzYXZlQ3Jvd2QKfTsKdmFyIHF1ZXJ5QXBpID0gewogIHByb3ZpZGVJbmdyZWRpZW50czogc3VwcGxpZXJJbmdyZWRpZW50UGFnZSwKICBpbmdyZWRpZW50czogcXVlcnlpbmdyZWRpZW50UGFnZSwKICBydWxlczogcXVlcnlDdXRNYXRjaFN0YW5kYXJkUGFnZXQsCiAgY3Vpc2luZTogcXVlcnlDb29raW5nU3R5bGVQYWdlLAogIGRpc2hlczogcXVlcnlEaXNoZXNQYWdlLAogIG1lbnU6IGRpc2hlc0xpc3RQYWdlLAogIGNyb3dkOiBxdWVyeWNyb3dkUGFnZQp9Owp2YXIgZGVsQXBpID0gewogIHByb3ZpZGVJbmdyZWRpZW50czogZGVsZXRlU3VwcGxpZXJJbmdyZWRpZW50QnlJZHMsCiAgaW5ncmVkaWVudHM6IGRlbGV0ZUluZ3JlZGllbnRCeUlkcywKICBydWxlczogZGVsZXRlQ3V0TWF0Y2hTdGFuZGFyZEJ5SWRzLAogIGN1aXNpbmU6IGRlbGV0ZUNvb2tpbmdTdHlsZUJ5SWRzLAogIGRpc2hlczogZGVsZXRlRGlzaGVzQnlJZHMsCiAgbWVudTogYmF0Y2hEZWxldGVEaXNoZXNMaXN0LAogIGNyb3dkOiBkZWxldGVDcm93ZEJ5SWRzCn07CnZhciBzdGF0dXNBcGkgPSB7CiAgcHJvdmlkZUluZ3JlZGllbnRzOiB1cGRhdGVTdXBwbGllckluZ3JlZGllbnRTdGF0dXNCeUlkcywKICBpbmdyZWRpZW50czogdXBkYXRlSW5ncmVkaWVudFN0YXR1c0J5SWRzLAogIHJ1bGVzOiB1cGRhdGVTdGF0dXNCeUlkcywKICBjdWlzaW5lOiB1cGRhdGVDb29raW5nU3RhdHVzQnlJZHMsCiAgZGlzaGVzOiB1cGRhdGVEaXNoZXNTdGF0dXNCeUlkcywKICBtZW51OiBxdWVyeUN1dE1hdGNoU3RhbmRhcmRQYWdldCwKICBjcm93ZDogdXBkYXRlQ3Jvd2RTdGF0dXNCeUlkcwp9OwoKZnVuY3Rpb24gZGVsZXRlT3JGaW5kQXJyKGFyckRhdGEsIG9iaiwgY2hpbGRyZW4sIF9hbGwsIGZpbmQsIHJlcGxhY2VBcnIpIHsKICAvL+WIoOmZpOaIluafpeaJvuaVsOe7hOS4reacieafkOS4quWvueixoeeahOWFg+e0oC4gX2FsbOS7o+ihqOaYr+WQpuWFqOmDqOWIoOmZpAogIGNoaWxkcmVuID0gY2hpbGRyZW4gfHwgJ2NoaWxkcmVuJzsgLy9vYmrlj6/ku6XmmK/ln7rmnKzmlbDmja7nsbvlnosucmVwbGFjZUFycuWcqOWIoOmZpOeahOS9jee9rua3u+WKoOeahOaVsOaNrgoKICBpZiAoIU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmaW5kKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgZmluZCA9IGZpbmQgPyBbXSA6IGZpbmQ7CiAgfQoKICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyckRhdGEpID09PSAnW29iamVjdCBBcnJheV0nKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyckRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG0gPSBhcnJEYXRhW2ldLAogICAgICAgICAgZmxnID0gMTsKCiAgICAgIGlmIChvYmogJiYgX3R5cGVvZihvYmopID09ICdvYmplY3QnKSB7CiAgICAgICAgZm9yICh2YXIgaiBpbiBvYmopIHsKICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2pdID09ICdmdW5jdGlvbicgPyAhb2JqW2pdKGosIG1bal0sIG0sIGFyckRhdGEsIGkpIDogbVtqXSAhPSBvYmpbal0pIHsKICAgICAgICAgICAgZmxnID0gMDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChtICE9IG9iaikgewogICAgICAgICAgZmxnID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmbGcpIHsKICAgICAgICBpZiAoZmluZCkgewogICAgICAgICAgZmluZC5wdXNoKG0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VBcnIgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICByZXBsYWNlQXJyID0gcmVwbGFjZUFycihpLCBtLCBhcnJEYXRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXBsYWNlQXJyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHJlcGxhY2VBcnIpID09ICdbb2JqZWN0IEFycmF5XScgPyByZXBsYWNlQXJyIDogcmVwbGFjZUFyciB8fCBbXTsKICAgICAgICAgIGFyckRhdGEuc3BsaWNlLmFwcGx5KGFyckRhdGEsIFtpLCAxXS5jb25jYXQocmVwbGFjZUFycikpOwogICAgICAgICAgaS0tOwogICAgICAgICAgX2FsbCAmJiAoaSA9IGkgKyByZXBsYWNlQXJyLmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIV9hbGwpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgb2JqICYmIF90eXBlb2Yob2JqKSA9PSAnb2JqZWN0JyAmJiBkZWxldGVPckZpbmRBcnIobSwgb2JqLCBjaGlsZHJlbiwgX2FsbCwgZmluZCwgcmVwbGFjZUFycik7CiAgICB9CiAgfSBlbHNlIGlmIChhcnJEYXRhICYmIF90eXBlb2YoYXJyRGF0YSkgPT0gJ29iamVjdCcpIHsKICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnJEYXRhW2NoaWxkcmVuXSkgPT09ICdbb2JqZWN0IEFycmF5XScgJiYgZGVsZXRlT3JGaW5kQXJyKGFyckRhdGFbY2hpbGRyZW5dLCBvYmosIGNoaWxkcmVuLCBfYWxsLCBmaW5kLCByZXBsYWNlQXJyKTsKICB9CgogIHJldHVybiBmaW5kOwp9CgpWdWUudXNlKF9Mb2FkaW5nKTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IChfY29tcG9uZW50cyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9EaWFsb2cubmFtZSwgX0RpYWxvZyksIF9kZWZpbmVQcm9wZXJ0eShfY29tcG9uZW50cywgX1RhYnMubmFtZSwgX1RhYnMpLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9UYWJQYW5lLm5hbWUsIF9UYWJQYW5lKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfT3B0aW9uLm5hbWUsIF9PcHRpb24pLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9JbnB1dC5uYW1lLCBfSW5wdXQpLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9DYXJkLm5hbWUsIF9DYXJkKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfVHJlZS5uYW1lLCBfVHJlZSksIF9kZWZpbmVQcm9wZXJ0eShfY29tcG9uZW50cywgX1Jvdy5uYW1lLCBfUm93KSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfQ29sLm5hbWUsIF9Db2wpLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9JbnB1dC5uYW1lLCBfSW5wdXQpLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9TZWxlY3QubmFtZSwgX1NlbGVjdCksIF9kZWZpbmVQcm9wZXJ0eShfY29tcG9uZW50cywgX0Zvcm0ubmFtZSwgX0Zvcm0pLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9Gb3JtSXRlbS5uYW1lLCBfRm9ybUl0ZW0pLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIENTdmdJY29uLm5hbWUsIENTdmdJY29uKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfVGFibGUubmFtZSwgX1RhYmxlKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfVGFibGVDb2x1bW4ubmFtZSwgX1RhYmxlQ29sdW1uKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCBfU2Nyb2xsYmFyLm5hbWUsIF9TY3JvbGxiYXIpLCBfZGVmaW5lUHJvcGVydHkoX2NvbXBvbmVudHMsIF9UYWcubmFtZSwgX1RhZyksIF9kZWZpbmVQcm9wZXJ0eShfY29tcG9uZW50cywgX3NlbGVjdC5uYW1lLCBfc2VsZWN0KSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCAiQlRhYmxlIiwgQlRhYmxlKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCAiSXNzdWUiLCBJc3N1ZSksIF9kZWZpbmVQcm9wZXJ0eShfY29tcG9uZW50cywgIkFkZE1lbnUiLCBBZGRNZW51KSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCAiQ0R5bmFtaWNGb3JtIiwgQ0R5bmFtaWNGb3JtKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCAiQ1RhYmxlIiwgQ1RhYmxlKSwgX2RlZmluZVByb3BlcnR5KF9jb21wb25lbnRzLCAicHVzaFBhbmVsIiwgcHVzaFBhbmVsKSwgX2NvbXBvbmVudHMpLAogIC8vIOWumuS5ieWxnuaApwogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcmVhOiBhcmVhLAogICAgICByb2xlOiAwLAogICAgICB0eXBlOiAwLAogICAgICBtZW51RGV0YWlsOiB7fSwKICAgICAgYWN0aXZlOiAncnVsZXMnLAogICAgICBpc01lbnVEZXRhaWw6IGZhbHNlLAogICAgICBpbm5lclZpc2libGU6IGZhbHNlLAogICAgICBjdXRNYXRjaFN0YW5kYXJkTGlzdDogW10sCiAgICAgIHF1ZXJ5QXBpOiBxdWVyeUFwaSwKICAgICAgb3B0aW9uczogW10sCiAgICAgIHdlZWtMaXN0OiBbJ+aYn+acn+S4gCcsICfmmJ/mnJ/kuownLCAn5pif5pyf5LiJJywgJ+aYn+acn+WbmycsICfmmJ/mnJ/kupQnLCAn5pif5pyf5YWtJywgJ+aYn+acn+aXpSddLAogICAgICB0YWJzTGFiZWw6IHsKICAgICAgICBwcm92aWRlSW5ncmVkaWVudHM6IHsKICAgICAgICAgIG5hbWU6ICfpo5/mnZAnLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsncHJvdmlkZUluZ3JlZGllbnRzLXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIGluZ3JlZGllbnRzOiB7CiAgICAgICAgICBuYW1lOiAn6aOf5p2QJywKICAgICAgICAgIGhpZGRlbjogIXRoaXMuJGhhcyhbJ2luZ3JlZGllbnRzLXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICBuYW1lOiAn5YiH6YWN5qCH5YeGJywKICAgICAgICAgIGhpZGRlbjogIXRoaXMuJGhhcyhbJ3J1bGVzLXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIC8vIGN1aXNpbmU6IHsKICAgICAgICAvLyAgIG5hbWU6ICfoj5zns7snLAogICAgICAgIC8vICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnY3Vpc2luZS1yb2xlJ10pCiAgICAgICAgLy8gfSwKICAgICAgICBkaXNoZXM6IHsKICAgICAgICAgIG5hbWU6ICfoj5zlk4EnLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnZGlzaGVzLXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIGNyb3dkOiB7CiAgICAgICAgICBuYW1lOiAn5Lq6576kJywKICAgICAgICAgIGhpZGRlbjogIXRoaXMuJGhhcyhbJ2Nyb3dkLXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIG1lbnU6IHsKICAgICAgICAgIG5hbWU6ICfmoIflh4boj5zosLEnLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnbWVudS1yb2xlJ10pCiAgICAgICAgfQogICAgICB9LAogICAgICBzdWJBY3RpdmU6ICdncm91cE1lbnUnLAogICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgc2VhcmNoTmFtZTogJycsCiAgICAgICAgc3RhdHVzOiAnJwogICAgICB9LAogICAgICBidG5zOiBbewogICAgICAgIGxhYmVsOiAn57yW6L6RJywKICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgc2l6ZTogJ21pbmknLAogICAgICAgIGNsaWNrOiB0aGlzLmVkaXRDcm93ZAogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICfnpoHnlKgnLAogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBzaXplOiAnbWluaScsCiAgICAgICAgY2xpY2s6IHRoaXMuZGlzYWJsZWRDcm93ZAogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICflkK/nlKgnLAogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBzaXplOiAnbWluaScsCiAgICAgICAgY2xpY2s6IHRoaXMuYWJsZWRDcm93ZAogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICfliKDpmaQnLAogICAgICAgIGhpZGRlbjogdHJ1ZSwKICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgc2l6ZTogJ21pbmknLAogICAgICAgIGNsaWNrOiB0aGlzLmRlbENyb3dkCiAgICAgIH1dLAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nRm9ybTogewogICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgICAgLy8g6KGo5Y2V5o+Q5Lqk5LitCiAgICAgICAgbG9hZGluZzogZmFsc2UKICAgICAgfSwKICAgICAgY3VycmVudFBhZ2U6ICcwJywKICAgICAgdG90YWw6IDAsCiAgICAgIGNvbHVtbkRhdGE6IFtdLAogICAgICB0b29sYmFyczogW3sKICAgICAgICBsYWJlbDogJ+aWsOWinicsCiAgICAgICAgY2xpY2s6IHRoaXMub25BZGQKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn5om56YeP5Yig6ZmkJywKICAgICAgICBjbGljazogdGhpcy5iYXRjaERlbAogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICfmibnph4/npoHnlKgnLAogICAgICAgIGNsaWNrOiB0aGlzLmJhdGNoT2ZmCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+aJuemHj+WQr+eUqCcsCiAgICAgICAgY2xpY2s6IHRoaXMuYmF0Y2hPbgogICAgICB9XSwKICAgICAgYWxsTWVudUl0ZW1zOiB7CiAgICAgICAgZ3JvdXBNZW51OiB7CiAgICAgICAgICB2YWx1ZTogJ+mbhuWbouiPnOiwsScsCiAgICAgICAgICBidG5zOiBbewogICAgICAgICAgICBsYWJlbDogJ+afpeeciycsCiAgICAgICAgICAgIGNsaWNrOiB0aGlzLmNoZWNrTWVudQogICAgICAgICAgfSwgewogICAgICAgICAgICBsYWJlbDogJ+S4i+WPkScsCiAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRvd25NZW51CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxhYmVsOiAn57yW6L6RJywKICAgICAgICAgICAgY2xpY2s6IHRoaXMuZWRpdE1lbnUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6ICfliKDpmaQnLAogICAgICAgICAgICBjbGljazogdGhpcy5kZWxDcm93ZAogICAgICAgICAgfV0sCiAgICAgICAgICB0eXBlOiAxLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnZ3JvdXBNZW51LXJvbGUnXSkKICAgICAgICB9LAogICAgICAgIE15TWVudTogewogICAgICAgICAgdmFsdWU6ICfmiJHnmoToj5zosLEnLAogICAgICAgICAgYnRuczogW3sKICAgICAgICAgICAgbGFiZWw6ICfmn6XnnIsnLAogICAgICAgICAgICBjbGljazogdGhpcy5jaGVja01lbnUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6ICfmjqjpgIHoh7Plrrbplb8nLAogICAgICAgICAgICBjbGljazogdGhpcy5wdXNoVG9QYXJlbnQKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6ICfnvJbovpEnLAogICAgICAgICAgICBjbGljazogdGhpcy5lZGl0TWVudQogICAgICAgICAgfSwgewogICAgICAgICAgICBsYWJlbDogJ+WIoOmZpCcsCiAgICAgICAgICAgIGNsaWNrOiB0aGlzLmRlbENyb3dkCiAgICAgICAgICB9XSwKICAgICAgICAgIHR5cGU6IDIsCiAgICAgICAgICBoaWRkZW46ICF0aGlzLiRoYXMoWydNeU1lbnUtcm9sZSddKQogICAgICAgIH0sCiAgICAgICAgZ3JvdXBEb3duTWVudTogewogICAgICAgICAgdmFsdWU6ICfpm4blm6LkuIvlj5HnmoToj5zosLEnLAogICAgICAgICAgYnRuczogW3sKICAgICAgICAgICAgbGFiZWw6ICfmn6XnnIsnLAogICAgICAgICAgICBjbGljazogdGhpcy5jaGVja01lbnUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbGFiZWw6ICfliqDlhaXmiJHnmoToj5zosLEnLAogICAgICAgICAgICBjbGljazogdGhpcy5hZGRUb015TWVudQogICAgICAgICAgfV0sCiAgICAgICAgICB0eXBlOiAzLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy4kaGFzKFsnZ3JvdXBEb3duTWVudS1yb2xlJ10pCiAgICAgICAgfQogICAgICB9LAogICAgICAvL+W8ueeql+ihqOWNlem7mOiupOWAvO+8iOe8lui+keaXtuS8oOWFpe+8iQogICAgICBkaWFsb2dGb3JtRGF0YToge30sCiAgICAgIC8vIOmAieS4reaVsOaNrgogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICAvLyDooajljZXpobnliJfooagKICAgICAgZm9ybUF0dHJzOiB7CiAgICAgICAgc2l6ZTogJ3NtYWxsJywKICAgICAgICBydWxlczogewogICAgICAgICAgY2xhc3NDb2RlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ePree6p+acquWhq+WGmScKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZvcm1EYXRhOiB7fSwKICAgICAgLy/lvLnnqpfooajljZXpu5jorqTlgLzvvIjnvJbovpHml7bkvKDlhaXvvIkKICAgICAgZGlhbG9nRm9ybUF0dHJzOiB7CiAgICAgICAgJ2xhYmVsLXBvc2l0aW9uJzogJ3JpZ2h0JywKICAgICAgICBydWxlczogewogICAgICAgICAgaW5ncmVkaWVudElkOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemjn+adkOWQjeensCcKICAgICAgICAgIH0sCiAgICAgICAgICBkaXNoZXNTdHlsZUlkOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeiPnOezuycKICAgICAgICAgIH0sCiAgICAgICAgICBjcm93ZElkOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeS6uue+pCcKICAgICAgICAgIH0sCiAgICAgICAgICBkaWN0aW9uYXJ5SWQ6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6aOf5p2Q5ZCN56ewJwogICAgICAgICAgfSwKICAgICAgICAgIHByb3ZpbmNlQ29kZTogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnnIHku70nCiAgICAgICAgICB9LAogICAgICAgICAgY2l0eUNvZGU6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Zyw57qn5biCJwogICAgICAgICAgfSwKICAgICAgICAgIGRpc3RyaWN0Q29kZTogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXljLov5Y6/JwogICAgICAgICAgfSwKICAgICAgICAgIG9yaWdpbmFsVmVnZXRhYmxlUHJpY2U6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5q+b6I+cJwogICAgICAgICAgfSwKICAgICAgICAgIGNsZWFuVmVnZXRhYmxlUHJpY2U6IHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5YeA6I+cJwogICAgICAgICAgfSwKICAgICAgICAgIGNsZWFuVmVnZXRhYmxlUmF0aW86IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgcGF0dGVybjogL14xMDAkfF4oWzEtOV18WzEtOV1cZCkkfF4oWzEtOV18WzEtOV1cZHwwKSsoPzpcLlxkezEsMn0pJC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaUw77yI5LiN5ZCr77yJ5YiwMTAw55qE5pWw5a2X77yM5bCP5pWw54K55pyA5aSa5L+d55WZMuS9jScKICAgICAgICAgIH1dLAogICAgICAgICAgdHlwZTogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6npo5/mnZDnsbvlnosnCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZCN56ewJwogICAgICAgICAgfSwgewogICAgICAgICAgICBtaW46IDEsCiAgICAgICAgICAgIG1heDogMjAsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMjAg5Liq5a2X56ymJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9XSwKICAgICAgICAgIGxlbmd0aDogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBwYXR0ZXJuOiAvXigwfChbMS05XVswLTldezAsM30pfCgoWzBdXC5cZHsxLDJ9fFsxLTldWzAtOV0qXC5cZHsxLDJ9KSkpJC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlgLzkuI3nrYnkuo4w5LiU5LiN5aSn5LqOOTk5OS45OeWwj+aVsOS9jeacgOWkmuS4uuS4pOS9jeeahOmVv+W6picKICAgICAgICAgIH1dLAogICAgICAgICAgd2lkdGg6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgcGF0dGVybjogL14oMHwoWzEtOV1bMC05XXswLDN9KXwoKFswXVwuXGR7MSwyfXxbMS05XVswLTldKlwuXGR7MSwyfSkpKSQvLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWlMOWIsDk5OTkuOTnlsI/mlbDkvY3mnIDlpJrkuLrkuKTkvY3nmoTlrr3luqYnCiAgICAgICAgICB9XSwKICAgICAgICAgIGhlaWdodDogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgICBwYXR0ZXJuOiAvXigwfChbMS05XVswLTldezAsM30pfCgoWzBdXC5cZHsxLDJ9fFsxLTldWzAtOV0qXC5cZHsxLDJ9KSkpJC8sCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaUw5YiwOTk5OS45OeWwj+aVsOS9jeacgOWkmuS4uuS4pOS9jeeahOmrmOW6picKICAgICAgICAgIH1dLAogICAgICAgICAgcHJpY2U6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgcGF0dGVybjogL14oKFsxLTldWzAtOV17MCw1fSl8KChbMF1cLlxkezEsMn18WzEtOV1bMC05XSpcLlxkezEsMn0pKSkkLywKICAgICAgICAgICAgbWVzc2FnZTogJ+WUruS7t+W6lOWkp+S6jjDkuJTkuI3otoXov4c5OTk5OTkuOTknCiAgICAgICAgICB9XSwKICAgICAgICAgIG1lbnVOYW1lOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeiPnOiwseWQjeensCcKICAgICAgICAgIH0sCiAgICAgICAgICBhcHBsaWNhYmxlUGVvcGxlOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemAgueUqOS6uue+pCcKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICB9LAogICAgICAvLyDpo5/mnZDliIbphY0KICAgICAgcm9sZU5hbWU6ICcnLAogICAgICBsaXN0TG9hZGluZzogZmFsc2UsCiAgICAgIGN1aXNpbmU6IHsKICAgICAgICAvL+W3suWIhumFjemjn+adkAogICAgICAgIHBhZ2luOiB7CiAgICAgICAgICByb2xlSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJvbGVJZCwKICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICB9LAogICAgICAgIHN0YWZmTmFtZTogJycsCiAgICAgICAgLy/mkJzntKLlrZfmrrUKICAgICAgICBjaGVja2VkOiBbXSwKICAgICAgICBsaXN0OiBbXQogICAgICB9LAogICAgICBpbmdyZWRpZW50OiB7CiAgICAgICAgLy/mnKrliIbphY3po5/mnZAKICAgICAgICBwYWdpbjogewogICAgICAgICAgcm9sZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlSWQsCiAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgb2Zmc2V0OiAwCiAgICAgICAgfSwKICAgICAgICBuYW1lT3JQaW55aW5IZWFkZXI6ICcnLAogICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgIGxpc3Q6IFsvLyB7IGlkOiAxLCBuYW1lOiAi5byg5LiJIiwgbnVtYmVyOiAiMTAwMDExIiB9CiAgICAgICAgXSwKICAgICAgICBmaWx0ZXJMaXN0OiBbXQogICAgICB9LAogICAgICBzYXZlRGF0YTogewogICAgICAgIC8v5bey5YiG6YWN55So5oi3CiAgICAgICAgYWRkOiBbXSwKICAgICAgICAvL+a3u+WKoOS6hgogICAgICAgIHJlbW92ZTogW10gLy/np7vpmaTkuoYKCiAgICAgIH0sCiAgICAgIHBpY2tlck9wdGlvbnM6IHsKICAgICAgICBkaXNhYmxlZERhdGU6IGZ1bmN0aW9uIGRpc2FibGVkRGF0ZSh0aW1lKSB7CiAgICAgICAgICByZXR1cm4gdGltZS5nZXRUaW1lKCkgPCBEYXRlLm5vdygpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY3Vpc2luZUxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDliIbphY3kuK0KICAgICAgdW5jdWlzaW5lTG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOWPlua2iOWIhumFjeS4rQogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5Yqg6L295LitCiAgICAgIHB1c2hQYW5lbFZpc2libGU6IGZhbHNlLAogICAgICBtZW51SWQ6ICcnCiAgICB9OwogIH0sCiAgLy8g6K6h566X5bGe5oCn77yM5Lya55uR5ZCs5L6d6LWW5bGe5oCn5YC86ZqP5LmL5Y+Y5YyWCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ3JvbGVUeXBlJ10pKSwge30sIHsKICAgIGNhblB1c2g6IGZ1bmN0aW9uIGNhblB1c2goKSB7CiAgICAgIHJldHVybiB0aGlzLmFsbE1lbnVMaXN0LmluY2x1ZGVzKCcvc2V0dGluZy9wdXNoUmVjb3JkcycpOwogICAgfSwKICAgIGFsbE1lbnVMaXN0OiBmdW5jdGlvbiBhbGxNZW51TGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMubWVudUxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0udXJsOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBtZW51KCkgewogICAgLy8gICByZXR1cm4gTWVudS5nZXRNZW51KCk7CiAgICAvLyB9LAogICAgd2Vla0hlYWRlcnM6IGZ1bmN0aW9uIHdlZWtIZWFkZXJzKCkgewogICAgICB2YXIgbGlzdCA9IHRoaXMud2Vla0xpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiBpdGVtLAogICAgICAgICAgcHJvcDogaXRlbSwKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGxpc3QudW5zaGlmdCh7CiAgICAgICAgbGFiZWw6ICcnLAogICAgICAgIHByb3A6ICdtZWFsVHlwZVN0cmluZycKICAgICAgfSk7CiAgICAgIHJldHVybiBsaXN0OwogICAgfSwKICAgIGxhYmVsV2lkdGg6IGZ1bmN0aW9uIGxhYmVsV2lkdGgoKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gJ2luZ3JlZGllbnRzJykgewogICAgICAgIHJldHVybiAnMTUwcHgnOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAncnVsZXMnKSB7CiAgICAgICAgcmV0dXJuICcxMjBweCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICc2MHB4JzsKICAgICAgfQogICAgfSwKICAgIGRpYWxvZ1dpZHRoOiBmdW5jdGlvbiBkaWFsb2dXaWR0aCgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAnbWVudScpIHsKICAgICAgICByZXR1cm4gJzkwMHB4JzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZSA9PT0gJ2Rpc2hlcycpIHsKICAgICAgICByZXR1cm4gJzEwNDVweCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICc1NjBweCc7CiAgICAgIH0KICAgIH0sCiAgICBoZWFkZXJzOiBmdW5jdGlvbiBoZWFkZXJzKCkgewogICAgICAvLyDliJfooajmiYDmnInliJfooajpobkKICAgICAgdmFyIGFsbEhlYWRlcnMgPSB7CiAgICAgICAgcHJvdmlkZUluZ3JlZGllbnRzOiBbewogICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLnNlbGVjdGFibGUgLy8g5piv5ZCm56aB6YCJCgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn566A5ou8JywKICAgICAgICAgIHByb3A6ICdpbmdyZWRpZW50UGlueWluSGVhZGVyJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn6aOf5p2Q5ZCN56ewJywKICAgICAgICAgIHByb3A6ICdpbmdyZWRpZW50TmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+ecgeS7vScsCiAgICAgICAgICBwcm9wOiAncHJvdmluY2VOYW1lJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5Zyw57qn5biCJywKICAgICAgICAgIHByb3A6ICdjaXR5TmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+WMui/ljr8nLAogICAgICAgICAgcHJvcDogJ2Rpc3RyaWN0TmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+avm+iPnO+8iOWFgy9rZ++8iScsCiAgICAgICAgICBwcm9wOiAnb3JpZ2luYWxWZWdldGFibGVQcmljZScsCiAgICAgICAgICB3aWR0aDogMTIwIC8vIGFsaWduOiAncmlnaHQnCgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5YeA6I+c77yI5YWDL2tn77yJJywKICAgICAgICAgIHByb3A6ICdjbGVhblZlZ2V0YWJsZVByaWNlJywKICAgICAgICAgIHdpZHRoOiAxMjAgLy8gYWxpZ246ICdyaWdodCcKCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfmk43kvZwnLAogICAgICAgICAgLy8gY29sVHlwZTogJ2J0bnMnLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICB3aWR0aDogJzEyMHB4JywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdvcGVyYXRpb24nCiAgICAgICAgfV0sCiAgICAgICAgaW5ncmVkaWVudHM6IFt7CiAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywKICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkKCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfnroDmi7wnLAogICAgICAgICAgcHJvcDogJ3BpbnlpbkhlYWRlcicKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+mjn+adkOWQjeensCcsCiAgICAgICAgICBwcm9wOiAnaW5ncmVkaWVudE5hbWUnCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflh4Dmr5voj5zovazljJbmr5TvvIgl77yJJywKICAgICAgICAgIHByb3A6ICdjbGVhblZlZ2V0YWJsZVJhdGlvJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn6aOf5p2Q57G75Z6LJywKICAgICAgICAgIHByb3A6ICdpbmdyZWRpZW50VHlwZScsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIGZpeGVkOiAncmlnaHQnLAogICAgICAgICAgd2lkdGg6ICcxMjBweCcsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywKICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucwogICAgICAgIH1dLAogICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICBzZWxlY3RhYmxlOiBmdW5jdGlvbiBzZWxlY3RhYmxlKHJvdykgewogICAgICAgICAgICAvLyDmmK/lkKbnpoHpgIkKICAgICAgICAgICAgaWYgKHJvdy5jYW5FZGl0KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5ZCN56ewJywKICAgICAgICAgIHByb3A6ICduYW1lJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn6ZW/77yI5Y6Y57Gz77yJJywKICAgICAgICAgIHByb3A6ICdsZW5ndGgnCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflrr3vvIjljpjnsbPvvIknLAogICAgICAgICAgcHJvcDogJ3dpZHRoJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn6auY77yI5Y6Y57Gz77yJJywKICAgICAgICAgIHByb3A6ICdoZWlnaHQnCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfmk43kvZwnLAogICAgICAgICAgLy8gY29sVHlwZTogJ2J0bnMnLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICB3aWR0aDogJzEyMHB4JywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdvcGVyYXRpb24nLAogICAgICAgICAgYnRuczogdGhpcy5idG5zCiAgICAgICAgfV0sCiAgICAgICAgZGlzaGVzOiBbewogICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLnNlbGVjdGFibGUgLy8g5piv5ZCm56aB6YCJCgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn566A5ou8JywKICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflkI3np7AnLAogICAgICAgICAgcHJvcDogJ25hbWUnCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfoj5zns7snLAogICAgICAgICAgcHJvcDogJ2Rpc2hlc1N0eWxlTmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+S6uue+pCcsCiAgICAgICAgICBwcm9wOiAnY3Jvd2ROYW1lJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5ZSu5Lu377yI5YWD77yJJywKICAgICAgICAgIHByb3A6ICdwcmljZScsCiAgICAgICAgICB3aWR0aDogMTIwIC8vIGFsaWduOiAncmlnaHQnCgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIGZpeGVkOiAncmlnaHQnLAogICAgICAgICAgd2lkdGg6ICcxMzBweCcsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywKICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucwogICAgICAgIH1dLAogICAgICAgIGNyb3dkOiBbewogICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLnNlbGVjdGFibGUgLy8g5piv5ZCm56aB6YCJCgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn566A5ou8JywKICAgICAgICAgIHByb3A6ICdwaW55aW5IZWFkZXInCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflkI3np7AnLAogICAgICAgICAgcHJvcDogJ25hbWUnCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfmk43kvZwnLAogICAgICAgICAgLy8gY29sVHlwZTogJ2J0bnMnLAogICAgICAgICAgZml4ZWQ6ICdyaWdodCcsCiAgICAgICAgICB3aWR0aDogJzEyMHB4JywKICAgICAgICAgIGNvbFR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgc2xvdE5hbWU6ICdvcGVyYXRpb24nLAogICAgICAgICAgYnRuczogdGhpcy5idG5zCiAgICAgICAgfV0sCiAgICAgICAgY3Vpc2luZTogW3sKICAgICAgICAgIHR5cGU6ICdzZWxlY3Rpb24nLAogICAgICAgICAgc2VsZWN0YWJsZTogdGhpcy5zZWxlY3RhYmxlIC8vIOaYr+WQpuemgemAiQoKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+eugOaLvCcsCiAgICAgICAgICBwcm9wOiAncGlueWluSGVhZGVyJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5ZCN56ewJywKICAgICAgICAgIHByb3A6ICduYW1lJwogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIGZpeGVkOiAncmlnaHQnLAogICAgICAgICAgd2lkdGg6ICcxMjBweCcsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywKICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucwogICAgICAgIH1dLAogICAgICAgIG1lbnU6IFt7CiAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywKICAgICAgICAgIHNlbGVjdGFibGU6IHRoaXMuc2VsZWN0YWJsZSAvLyDmmK/lkKbnpoHpgIkKCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfnroDmi7wnLAogICAgICAgICAgcHJvcDogJ3BpbnlpbkhlYWRlcicKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+iPnOiwseWQjeensCcsCiAgICAgICAgICBwcm9wOiAnbmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+mAgueUqOS6uue+pCcsCiAgICAgICAgICBwcm9wOiAnY3Jvd2ROYW1lcycsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnY3Jvd2ROYW1lcycsCiAgICAgICAgICAnc2hvdy1vdmVyZmxvdy10b29sdGlwJzogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIGZpeGVkOiAncmlnaHQnLAogICAgICAgICAgd2lkdGg6ICcxODBweCcsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJywKICAgICAgICAgIGJ0bnM6IHRoaXMuYnRucwogICAgICAgIH1dCiAgICAgIH07CiAgICAgIHJldHVybiBhbGxIZWFkZXJzOwogICAgfSwKICAgIG1lbnVMaXN0OiBmdW5jdGlvbiBtZW51TGlzdCgpIHsKICAgICAgdmFyIHNob3cgPSB7fTsKCiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmFsbE1lbnVJdGVtcykgewogICAgICAgIGlmICghdGhpcy5hbGxNZW51SXRlbXNba2V5XS5oaWRkZW4pIHsKICAgICAgICAgIHNob3dba2V5XSA9IHRoaXMuYWxsTWVudUl0ZW1zW2tleV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gc2hvdzsKICAgIH0sCiAgICBmb3JtSXRlbXM6IGZ1bmN0aW9uIGZvcm1JdGVtcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBhbGxGb3JtSXRlbXMgPSBbW3sKICAgICAgICBsYWJlbDogJ+ivt+i+k+WFpScsCiAgICAgICAgcHJvcDogJ25hbWVPclBpbnlpbkhlYWRlcicsCiAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICBhdHRyczogewogICAgICAgICAgbWF4bGVuZ3RoOiAzMCwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAn5ZCN56ew44CB566A5ou8JwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn54q25oCBJywKICAgICAgICBwcm9wOiAnc3RhdHVzJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbewogICAgICAgICAgdmFsdWU6ICcxJywKICAgICAgICAgIGxhYmVsOiAn5ZCv55SoJwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbHVlOiAnLTEnLAogICAgICAgICAgbGFiZWw6ICfnpoHnlKgnCiAgICAgICAgfV0KICAgICAgfV0sIFt7CiAgICAgICAgbGFiZWw6ICfor7fovpPlhaUnLAogICAgICAgIHByb3A6ICduYW1lT3JQaW55aW5IZWFkZXInLAogICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIG1heGxlbmd0aDogMzAsCiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+WQjeensOOAgeeugOaLvCcKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+eKtuaAgScsCiAgICAgICAgcHJvcDogJ3N0YXR1cycsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgIHZhbHVlOiAnMScsCiAgICAgICAgICBsYWJlbDogJ+WQr+eUqCcKICAgICAgICB9LCB7CiAgICAgICAgICB2YWx1ZTogJy0xJywKICAgICAgICAgIGxhYmVsOiAn56aB55SoJwogICAgICAgIH1dCiAgICAgIH1dLCBbewogICAgICAgIGxhYmVsOiAn6K+36L6T5YWlJywKICAgICAgICBwcm9wOiAnbmFtZU9yUGlueWluSGVhZGVyJywKICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICBtYXhsZW5ndGg6IDMwLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICflkI3np7DjgIHnroDmi7wnCiAgICAgICAgfQogICAgICB9XV07CiAgICAgIHZhciBvdGhlckl0ZW0gPSBbewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGxhYmVsOiAn55yB5Lu9JywKICAgICAgICBwcm9wOiAncHJvdmluY2VDb2RlJywKICAgICAgICAvLyB2YWx1ZUtleTogJ2lkJywKICAgICAgICAvLyBsYWJlbEtleTogJ25hbWUnLAogICAgICAgIGxhYmVsUHJvcDogJ3Byb3ZpbmNlTmFtZScsCiAgICAgICAgaGlkZGVuOiAhdGhpcy5hcmVhLmFyZWFMaXN0Lmxlbmd0aCwKICAgICAgICAvLyBvcHRpb25zOiB0aGlzLmFyZWFMaXN0CiAgICAgICAgYWpheDogZnVuY3Rpb24gYWpheCgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5hcmVhLmdldFByb3ZpbmNlTGlzdCgpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIGxhYmVsOiAn5Zyw57qn5biCJywKICAgICAgICBwcm9wOiAnY2l0eUNvZGUnLAogICAgICAgIHBhcmVudFByb3A6ICdwcm92aW5jZUNvZGUnLAogICAgICAgIGxhYmVsUHJvcDogJ2NpdHlOYW1lJywKICAgICAgICAvLyB2YWx1ZUtleTogJ2NvZGUnLAogICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsCiAgICAgICAgLy8gb3B0aW9uczogdGhpcy5jaXR5TGlzdAogICAgICAgIGhpZGRlbjogIXRoaXMuYXJlYS5hcmVhTGlzdC5sZW5ndGgsCiAgICAgICAgYWpheDogZnVuY3Rpb24gYWpheChtb2RlbCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmFyZWEuZ2V0Q2l0eUxpc3QobW9kZWwucHJvdmluY2VDb2RlKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBsYWJlbDogJ+WMui/ljr8nLAogICAgICAgIHByb3A6ICdkaXN0cmljdENvZGUnLAogICAgICAgIHBhcmVudFByb3A6ICdjaXR5Q29kZScsCiAgICAgICAgLy8gbGFiZWxQcm9wOiAnZGlzdHJpY3ROYW1lJywKICAgICAgICAvLyBvcHRpb25zOiB0aGlzLmRpc3RyaWN0TGlzdCwKICAgICAgICAvLyB2YWx1ZUtleTogJ2NvZGUnLAogICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScKICAgICAgICBoaWRkZW46ICF0aGlzLmFyZWEuYXJlYUxpc3QubGVuZ3RoLAogICAgICAgIGFqYXg6IGZ1bmN0aW9uIGFqYXgobW9kZWwpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5hcmVhLmdldENvdW50eUxpc3QobW9kZWwuY2l0eUNvZGUpOwogICAgICAgIH0KICAgICAgfV07CgogICAgICBpZiAoIXRoaXMucm9sZVR5cGUuaW5jbHVkZXMoNykpIHsKICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGFsbEZvcm1JdGVtc1swXSwgWzEsIDBdLmNvbmNhdChvdGhlckl0ZW0pKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFsbEZvcm1JdGVtczsKICAgIH0sCiAgICBkaWFsb2dGb3JtSXRlbXM6IGZ1bmN0aW9uIGRpYWxvZ0Zvcm1JdGVtcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gewogICAgICAgIHByb3ZpZGVJbmdyZWRpZW50czogW3sKICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgbGFiZWw6ICfpo5/mnZDlkI3np7AnLAogICAgICAgICAgcHJvcDogJ2RpY3Rpb25hcnlJZCcsCiAgICAgICAgICBsYWJlbFByb3A6ICdpbmdyZWRpZW50TmFtZScsCiAgICAgICAgICB2YWx1ZUtleTogJ2RpY3Rpb25hcnlJZCcsCiAgICAgICAgICBsYWJlbEtleTogJ2RpY3Rpb25hcnlUZXh0JywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGZpbHRlcmFibGU6IHRydWUsCiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmFjdGl2ZSA9PT0gJ3Byb3ZpZGVJbmdyZWRpZW50cycgJiYgdGhpcy5kaWFsb2dGb3JtLmlzRWRpdCA9PT0gdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGFqYXg6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hamF4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICB2YXIgaXRlbXMsIHJlc3VsdDsKICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkRGljdGlvbmFyeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBpdGVtcyk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBmdW5jdGlvbiBhamF4KCkgewogICAgICAgICAgICAgIHJldHVybiBfYWpheC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gYWpheDsKICAgICAgICAgIH0oKQogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgbGFiZWw6ICfnnIHku70nLAogICAgICAgICAgcHJvcDogJ3Byb3ZpbmNlQ29kZScsCiAgICAgICAgICAvLyB2YWx1ZUtleTogJ2lkJywKICAgICAgICAgIC8vIGxhYmVsS2V5OiAnbmFtZScsCiAgICAgICAgICBsYWJlbFByb3A6ICdwcm92aW5jZU5hbWUnLAogICAgICAgICAgaGlkZGVuOiAhdGhpcy5hcmVhLmFyZWFMaXN0Lmxlbmd0aCwKICAgICAgICAgIC8vIG9wdGlvbnM6ICF0aGlzLmFyZWEuZ2V0UHJvdmluY2VMaXN0KCksCiAgICAgICAgICBhamF4OiBmdW5jdGlvbiBhamF4KCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmFyZWEuZ2V0UHJvdmluY2VMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICBsYWJlbDogJ+WcsOe6p+W4gicsCiAgICAgICAgICBwcm9wOiAnY2l0eUNvZGUnLAogICAgICAgICAgcGFyZW50UHJvcDogJ3Byb3ZpbmNlQ29kZScsCiAgICAgICAgICBsYWJlbFByb3A6ICdjaXR5TmFtZScsCiAgICAgICAgICAvLyB2YWx1ZUtleTogJ2NvZGUnLAogICAgICAgICAgLy8gbGFiZWxLZXk6ICduYW1lJywKICAgICAgICAgIC8vIG9wdGlvbnM6IHRoaXMuY2l0eUxpc3QKICAgICAgICAgIGhpZGRlbjogIXRoaXMuYXJlYS5hcmVhTGlzdC5sZW5ndGgsCiAgICAgICAgICBhamF4OiBmdW5jdGlvbiBhamF4KG1vZGVsKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuYXJlYS5nZXRDaXR5TGlzdChtb2RlbC5wcm92aW5jZUNvZGUpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgbGFiZWw6ICfljLov5Y6/JywKICAgICAgICAgIHByb3A6ICdkaXN0cmljdENvZGUnLAogICAgICAgICAgcGFyZW50UHJvcDogJ2NpdHlDb2RlJywKICAgICAgICAgIC8vIGxhYmVsUHJvcDogJ2Rpc3RyaWN0TmFtZScsCiAgICAgICAgICAvLyBvcHRpb25zOiB0aGlzLmRpc3RyaWN0TGlzdCwKICAgICAgICAgIC8vIHZhbHVlS2V5OiAnY29kZScsCiAgICAgICAgICAvLyBsYWJlbEtleTogJ25hbWUnCiAgICAgICAgICBoaWRkZW46ICF0aGlzLmFyZWEuYXJlYUxpc3QubGVuZ3RoLAogICAgICAgICAgYWpheDogZnVuY3Rpb24gYWpheChtb2RlbCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmFyZWEuZ2V0Q291bnR5TGlzdChtb2RlbC5jaXR5Q29kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICAgIGxhYmVsOiAn5q+b6I+c77yI5YWDL2tn77yJJywKICAgICAgICAgIHByb3A6ICdvcmlnaW5hbFZlZ2V0YWJsZVByaWNlJwogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WHgOiPnO+8iOWFgy9rZ++8iScsCiAgICAgICAgICBwcm9wOiAnY2xlYW5WZWdldGFibGVQcmljZScsCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5pON5L2cJywKICAgICAgICAgIC8vIGNvbFR5cGU6ICdidG5zJywKICAgICAgICAgIGZpeGVkOiAncmlnaHQnLAogICAgICAgICAgd2lkdGg6ICcxMDBweCcsCiAgICAgICAgICBjb2xUeXBlOiAnY29sdW1uJywKICAgICAgICAgIHNsb3ROYW1lOiAnb3BlcmF0aW9uJwogICAgICAgIH1dLAogICAgICAgIGluZ3JlZGllbnRzOiBbewogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICBsYWJlbDogJ+mjn+adkOWQjeensCcsCiAgICAgICAgICBwcm9wOiAnZGljdGlvbmFyeUlkJywKICAgICAgICAgIGxhYmVsUHJvcDogJ2luZ3JlZGllbnROYW1lJywKICAgICAgICAgIHZhbHVlS2V5OiAnZGljdGlvbmFyeUlkJywKICAgICAgICAgIGxhYmVsS2V5OiAnZGljdGlvbmFyeVRleHQnLAogICAgICAgICAgaW5pdENvdW50OiAna2VlcCcsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLAogICAgICAgICAgICAnZmlsdGVyLW1ldGhvZCc6IHRoaXMuZGF0YUZpbHRlcigpLAogICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5hY3RpdmUgPT09ICdpbmdyZWRpZW50cycgJiYgdGhpcy5kaWFsb2dGb3JtLmlzRWRpdCA9PT0gdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyAvLyBhamF4OiBhc3luYyAoKSA9PiB7CiAgICAgICAgICAvLyAgIGxldCBpdGVtcyA9IFtdOwogICAgICAgICAgLy8gICBsZXQgcmVzdWx0ID0gYXdhaXQgY2hpbGREaWN0aW9uYXJ5KCkudGhlbihyZXMgPT4gewogICAgICAgICAgLy8gICAgIGl0ZW1zID0gcmVzLmRhdGE7CiAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgLy8gICByZXR1cm4gaXRlbXM7CiAgICAgICAgICAvLyB9CgogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WHgOavm+iPnOi9rOWMluavlO+8iCXvvIknLAogICAgICAgICAgcHJvcDogJ2NsZWFuVmVnZXRhYmxlUmF0aW8nCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICBsYWJlbDogJ+mjn+adkOexu+WeiycsCiAgICAgICAgICBwcm9wOiAndHlwZScsCiAgICAgICAgICBvcHRpb25zOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuJEQoJ0lOR1JFRElFTlRfVFlQRScpKSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBOdW1iZXIoaXRlbS52YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgfSkKICAgICAgICB9XSwKICAgICAgICBydWxlczogW3sKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WQjeensCcsCiAgICAgICAgICBwcm9wOiAnbmFtZScKICAgICAgICB9LCB7CiAgICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgICAgbGFiZWw6ICfplb/luqbvvIjljpjnsbPvvIknLAogICAgICAgICAgcHJvcDogJ2xlbmd0aCcKICAgICAgICB9LCB7CiAgICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgICAgbGFiZWw6ICflrr3luqbvvIjljpjnsbPvvIknLAogICAgICAgICAgcHJvcDogJ3dpZHRoJwogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+mrmOW6pu+8iOWOmOexs++8iScsCiAgICAgICAgICBwcm9wOiAnaGVpZ2h0JwogICAgICAgIH1dLAogICAgICAgIGRpc2hlczogW3sKICAgICAgICAgIC8vIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WQjeensCcsCiAgICAgICAgICB0eXBlOiAnY3VzdG9tJywKICAgICAgICAgIHByb3A6ICduYW1lJywKICAgICAgICAgIHNsb3ROYW1lOiAnY3VzdG9tfG5hbWUnCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICBsYWJlbDogJ+iPnOezuycsCiAgICAgICAgICBwcm9wOiAnZGlzaGVzU3R5bGVJZCcsCiAgICAgICAgICB2YWx1ZUtleTogJ2lkJywKICAgICAgICAgIGxhYmVsS2V5OiAnbmFtZScsCiAgICAgICAgICBhamF4OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYWpheDIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgICAgICB2YXIgaXRlbTsKICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb29raW5nU3R5bGVMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGFqYXgoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9hamF4Mi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gYWpheDsKICAgICAgICAgIH0oKQogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgbGFiZWw6ICfkurrnvqQnLAogICAgICAgICAgcHJvcDogJ2Nyb3dkSWQnLAogICAgICAgICAgdmFsdWVLZXk6ICdpZCcsCiAgICAgICAgICBsYWJlbEtleTogJ25hbWUnLAogICAgICAgICAgYWpheDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2FqYXgzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgdmFyIGl0ZW07CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gW107CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Jvd2RMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgaXRlbSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGFqYXgoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9hamF4My5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gYWpheDsKICAgICAgICAgIH0oKQogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WUruS7t++8iOWFg++8iScsCiAgICAgICAgICBwcm9wOiAncHJpY2UnLAogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBhdHRyczogey8vIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICAvLyBuYW1lOiAnbnVtYmVyLWlucHV0JwogICAgICAgICAgfQogICAgICAgIH1dLAogICAgICAgIG1lbnU6IFt7CiAgICAgICAgICB0eXBlOiAnaW5wdXQnLAogICAgICAgICAgbGFiZWw6ICfoj5zosLHlkI3np7AnLAogICAgICAgICAgcHJvcDogJ21lbnVOYW1lJywKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICAgIGxhYmVsOiAn6YCC55So5Lq6576kJywKICAgICAgICAgIHByb3A6ICdhcHBsaWNhYmxlUGVvcGxlJywKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgY3Vpc2luZTogW3sKICAgICAgICAgIHR5cGU6ICdpbnB1dCcsCiAgICAgICAgICBsYWJlbDogJ+WQjeensCcsCiAgICAgICAgICBwcm9wOiAnbmFtZScsCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGNyb3dkOiBbewogICAgICAgICAgdHlwZTogJ2lucHV0JywKICAgICAgICAgIGxhYmVsOiAn5ZCN56ewJywKICAgICAgICAgIHByb3A6ICduYW1lJywKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfV0KICAgICAgfTsKICAgIH0sCiAgICB0YWJzOiBmdW5jdGlvbiB0YWJzKCkgewogICAgICB2YXIgdGFic0FsbEl0ZW1zID0gWydwcm92aWRlSW5ncmVkaWVudHMnLCAvLyAnaW5ncmVkaWVudHMnLAogICAgICAncnVsZXMnLCAvLyAnY3Vpc2luZScsCiAgICAgICdkaXNoZXMnLCAnY3Jvd2QnLCAnbWVudSddOyAvLyByZXR1cm4gdGFic0FsbEl0ZW1zLmZpbHRlcihpdGVtID0+ICF0aGlzLnRhYnNMYWJlbFtpdGVtXS5oaWRkZW4pOwoKICAgICAgcmV0dXJuIHRhYnNBbGxJdGVtczsKICAgIH0KICB9KSwKICAvLyDnm5HmjqdkYXRh5Lit55qE5pWw5o2u5Y+Y5YyWCiAgd2F0Y2g6IHsKICAgIGlubmVyVmlzaWJsZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwgJiYgIXRoaXMuaW5ncmVkaWVudC5saXN0Lmxlbmd0aCAmJiAhdGhpcy5jdWlzaW5lLmxpc3QubGVuZ3RoKSB7CiAgICAgICAgICBQcm9taXNlLmFsbChbdGhpcy5nZXRVbmRpc3QoKSwgdGhpcy5nZXREaXN0KCldKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5nZXRVbmRpc3QoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhY3RpdmU6IGZ1bmN0aW9uIGFjdGl2ZShuZXh0LCBwcmV2KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKG5leHQgPT09ICdkaXNoZXMnICYmIHByZXYgIT09ICdkaXNoZXMnKSB7CiAgICAgICAgY3V0TWF0Y2hTdGFuZGFyZExpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMy5jdXRNYXRjaFN0YW5kYXJkTGlzdCA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgJ2RpYWxvZ0Zvcm0udmlzaWJsZSc6IGZ1bmN0aW9uIGRpYWxvZ0Zvcm1WaXNpYmxlKG5leHQsIHByZXYpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAobmV4dCAmJiB0aGlzLmFjdGl2ZSA9PT0gJ2luZ3JlZGllbnRzJykgewogICAgICAgIGNoaWxkRGljdGlvbmFyeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM0Lm9wdGlvbnMgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgLy8g5pa55rOV6ZuG5ZCICiAgbWV0aG9kczogewogICAgZm9ybWF0SW5wdXQ6IGZvcm1hdElucHV0LAogICAgLy8g6L+H5ruk6aOf5p2Q5ZCN56ewCiAgICBkYXRhRmlsdGVyOiBmdW5jdGlvbiBkYXRhRmlsdGVyKHZhbCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiB1dGlscy5kZWJvdW5jZShmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgY2hpbGREaWN0aW9uYXJ5KHsKICAgICAgICAgIG5hbWVPclBpbnlpbkhlYWRlcjogdmFsCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczUub3B0aW9ucyA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICAvLyDliqDlhaXmiJHnmoToj5zljZUKICAgIGFkZFRvTXlNZW51OiBmdW5jdGlvbiBhZGRUb015TWVudShyb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsKCiAgICAgIF9hZGRUb015TWVudShyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgX3RoaXM2LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfliqDlhaXmiJDlip8hJwogICAgICAgIH0pOyAvLyDmm7TmlrBiVGFibGUKCgogICAgICAgIF90aGlzNi5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy/or7fmsYJ0YWJsZeaVsOaNrgogICAgYWpheEdldERhdGE6IGZ1bmN0aW9uIGFqYXhHZXREYXRhKHBhcmFtcykgewogICAgICAvLyBjb25zb2xlLmxvZygncGFyYW1zOicsIHBhcmFtcyk7CiAgICAgIHJldHVybiBxdWVyeUFwaVt0aGlzLmFjdGl2ZV0ocGFyYW1zKTsKICAgIH0sCiAgICByZWZyZXNoVGFibGU6IGZ1bmN0aW9uIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM3LiRyZWZzLmJUYWJsZVswXSA/IF90aGlzNy4kcmVmcy5iVGFibGVbMF0ub25SZWZyZXNoVGFibGUoKSA6IF90aGlzNy4kcmVmcy5iVGFibGUub25SZWZyZXNoVGFibGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgYWpheEdldFRhYmxlRGF0YUJ5UGFnZTogZnVuY3Rpb24gYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzOC5hY3RpdmUgIT09ICdtZW51JykgewogICAgICAgICAgX3RoaXM4LiRyZWZzLmJUYWJsZVswXSA/IF90aGlzOC4kcmVmcy5iVGFibGVbMF0uYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpIDogX3RoaXM4LiRyZWZzLmJUYWJsZS5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzOC4kcmVmcy5zdWJCVGFibGVbMF0uYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lr7zlhaVleGNlbGluZGV4CiAgICBvbkNsaWNrSW1wb3J0OiBmdW5jdGlvbiBvbkNsaWNrSW1wb3J0KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIEJJbXBvcnREYXRhKHsKICAgICAgICB0ZW1wbGF0ZVVybDogJy9jYXRlcmluZy1hZG1pbicgKyB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5ncy5tZWFsc1VybFt0aGlzLmFjdGl2ZV0udG1wbCwKICAgICAgICBhamF4SW1wb3J0OiBmdW5jdGlvbiBhamF4SW1wb3J0KGZvcm1EYXRhKSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2V4cG9ydFR5cGUnLCAyKTsgLy8yPeWvvOWHuumUmeivr+aKpeWRigoKICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIHJldHVybiBpbXBvcnRFeGNlbChfdGhpczkuJHN0b3JlLnN0YXRlLnNldHRpbmdzLm1lYWxzVXJsW190aGlzOS5hY3RpdmVdLmltcG9ydFVybCwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzOS5yZWZyZXNoVGFibGUoKTsKCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJlc29sdmUoZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSgpIHt9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZSgpIHt9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSgpIHt9LAogICAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMC4kcmVmc1snZWxGb3JtJ10gJiYgX3RoaXMxMC4kcmVmc1snZWxGb3JtJ10uaW5pdCgpOwogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gJ2Rpc2hlcycpIHsKICAgICAgICB0aGlzLmdldFVuZGlzdCgpOwogICAgICAgIHRoaXMuaW5uZXJWaXNpYmxlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOe8lui+kQogICAgZWRpdENyb3dkOiBmdW5jdGlvbiBlZGl0Q3Jvd2Qocm93KSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3cpOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2dGb3JtLnZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNMb29rID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczExLiRyZWZzWydlbEZvcm0nXSAmJiBfdGhpczExLiRyZWZzWydlbEZvcm0nXS5pbml0KCk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAnZGlzaGVzJykgewogICAgICAgIHRoaXMuZ2V0RGlzdCgpOwogICAgICAgIHRoaXMuaW5uZXJWaXNpYmxlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOafpeeciwogICAgb25Mb29rOiBmdW5jdGlvbiBvbkxvb2socm93KSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3cpOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc0xvb2sgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTIuJHJlZnNbJ2VsRm9ybSddICYmIF90aGlzMTIuJHJlZnNbJ2VsRm9ybSddLmluaXQoKTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5hY3RpdmUgPT09ICdkaXNoZXMnKSB7CiAgICAgICAgdGhpcy5nZXREaXN0KCk7CiAgICAgICAgdGhpcy5pbm5lclZpc2libGUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgZGlzYWJsZWRDcm93ZDogZnVuY3Rpb24gZGlzYWJsZWRDcm93ZChyb3cpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWU7CiAgICAgIHN0YXR1c0FwaVt0aGlzLmFjdGl2ZV0oewogICAgICAgIHN0YXR1czogLTEsCiAgICAgICAgaWRzOiBbcm93LmlkXQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKCiAgICAgICAgX3RoaXMxMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn56aB55So5oiQ5YqfIScKICAgICAgICB9KTsgLy8g5pu05pawYlRhYmxlCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcmVmcy5iVGFibGVbMF0pOwoKCiAgICAgICAgX3RoaXMxMy5hamF4R2V0VGFibGVEYXRhQnlQYWdlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWQr+eUqAogICAgYWJsZWRDcm93ZDogZnVuY3Rpb24gYWJsZWRDcm93ZChyb3cpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWU7CiAgICAgIHN0YXR1c0FwaVt0aGlzLmFjdGl2ZV0oewogICAgICAgIHN0YXR1czogMSwKICAgICAgICBpZHM6IFtyb3cuaWRdCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwoKICAgICAgICBfdGhpczE0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICflkK/nlKjmiJDlip8hJwogICAgICAgIH0pOyAvLyDmm7TmlrBiVGFibGUKCgogICAgICAgIF90aGlzMTQuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxNC5jb25maXJtTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGRlbENyb3dkOiBmdW5jdGlvbiBkZWxDcm93ZChyb3cpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgn5Yig6Zmk5ZCO5LiN5Y+v5oGi5aSN77yM56Gu5a6a5Yig6Zmk77yfJywgJ+WIoOmZpOehruiupCcsIHsKICAgICAgICBjdXN0b21DbGFzczogJ2JveC1kYW5nZXInLAogICAgICAgIGNlbnRlcjogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE1LmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgZGVsQXBpW190aGlzMTUuYWN0aXZlXShbcm93LmlkXSkudGhlbihmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjQuZGF0YTsKCiAgICAgICAgICBfdGhpczE1LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pOyAvLyDlhbPpl63oj5zljZXnmoTlvLnnqpcKCgogICAgICAgICAgX3RoaXMxNS5kaWFsb2dGb3JtLnZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczE1Lm9uU2F2ZU1lbnUoKTsgLy8g5pu05pawYlRhYmxlCgoKICAgICAgICAgIF90aGlzMTUuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTUuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTUuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaW5pdERpYWxvZ0Zvcm1EYXRhOiBmdW5jdGlvbiBpbml0RGlhbG9nRm9ybURhdGEoKSB7CiAgICAgIHZhciBpdGVtcyA9IHsKICAgICAgICBwcm92aWRlSW5ncmVkaWVudHM6IHsKICAgICAgICAgIGRpY3Rpb25hcnlJZDogJycsCiAgICAgICAgICBwcm92aW5jZUNvZGU6ICcnLAogICAgICAgICAgY2l0eUNvZGU6ICcnLAogICAgICAgICAgZGlzdHJpY3RDb2RlOiAnJywKICAgICAgICAgIG9yaWdpbmFsVmVnZXRhYmxlUHJpY2U6ICcnLAogICAgICAgICAgY2xlYW5WZWdldGFibGVQcmljZTogJycKICAgICAgICB9LAogICAgICAgIGluZ3JlZGllbnRzOiB7CiAgICAgICAgICBkaWN0aW9uYXJ5SWQ6ICcnLAogICAgICAgICAgY2xlYW5WZWdldGFibGVSYXRpbzogJycKICAgICAgICB9LAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIGxlbmd0aDogJycsCiAgICAgICAgICB3aWR0aDogJycsCiAgICAgICAgICBoZWlnaHQ6ICcnCiAgICAgICAgfSwKICAgICAgICBkaXNoZXM6IHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgZGlzaGVzU3R5bGVJZDogJycsCiAgICAgICAgICBjcm93ZElkOiAnJywKICAgICAgICAgIHByaWNlOiAnJywKICAgICAgICAgIGRpc2hlc0NvbnRlbnRMaXN0OiBbXQogICAgICAgIH0sCiAgICAgICAgY3Vpc2luZTogewogICAgICAgICAgbmFtZTogJycKICAgICAgICB9LAogICAgICAgIGNyb3dkOiB7CiAgICAgICAgICBsb2dvZ3JhbTogJycsCiAgICAgICAgICBuYW1lOiAnJwogICAgICAgIH0sCiAgICAgICAgbWVudTogewogICAgICAgICAgbG9nb2dyYW06ICcnLAogICAgICAgICAgbWVudU5hbWU6ICcnLAogICAgICAgICAgYXBwbGljYWJsZVBlb3BsZTogJycKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMubWVudURldGFpbC53ZWVrVGFibGVEYXRhID0gdGhpcy5oYW5kbGVNZWFsRGF0YShbXSk7CiAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEgPSBpdGVtc1t0aGlzLmFjdGl2ZV07CiAgICB9LAogICAgLy/ooajljZXlhbPpl63liY3muIXpmaTmoKHpqozlubbph43nva7mlbDmja4KICAgIG9uQ2xvc2VGb3JtOiBmdW5jdGlvbiBvbkNsb3NlRm9ybSgpIHsKICAgICAgdGhpcy5pbml0RGlhbG9nRm9ybURhdGEoKTsKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10gJiYgdGhpcy4kcmVmc1snZWxGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5jdWlzaW5lID0gewogICAgICAgIC8v5bey5YiG6YWN6aOf5p2QCiAgICAgICAgcGFnaW46IHsKICAgICAgICAgIHJvbGVJZDogdGhpcy4kcm91dGUucXVlcnkucm9sZUlkLAogICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgcGFnZTogMSwKICAgICAgICAgIG9mZnNldDogMAogICAgICAgIH0sCiAgICAgICAgc3RhZmZOYW1lOiAnJywKICAgICAgICAvL+aQnOe0ouWtl+autQogICAgICAgIGNoZWNrZWQ6IFtdLAogICAgICAgIGxpc3Q6IFtdCiAgICAgIH07CiAgICAgIHRoaXMuaW5ncmVkaWVudCA9IHsKICAgICAgICAvL+acquWIhumFjemjn+adkAogICAgICAgIHBhZ2luOiB7CiAgICAgICAgICByb2xlSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnJvbGVJZCwKICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICB9LAogICAgICAgIG5hbWVPclBpbnlpbkhlYWRlcjogJycsCiAgICAgICAgY2hlY2tlZDogW10sCiAgICAgICAgbGlzdDogWy8vIHsgaWQ6IDEsIG5hbWU6ICLlvKDkuIkiLCBudW1iZXI6ICIxMDAwMTEiIH0KICAgICAgICBdLAogICAgICAgIGZpbHRlckxpc3Q6IFtdCiAgICAgIH07CiAgICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gW107CiAgICAgIHRoaXMuaW5uZXJWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgLy/mj5DkuqTooajljZUKICAgIG9uU3VibWl0Rm9ybTogZnVuY3Rpb24gb25TdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICAvLyDmoKHpqozooajljZUKICAgICAgdGhpcy4kcmVmc1snZWxGb3JtJ10udmFsaWRhdGUoKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGZsYWc7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyDmoKHpqozmiJDlip8KICAgICAgICAgICAgICAgIF90aGlzMTYuZGlhbG9nRm9ybS5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczE2LmFjdGl2ZSA9PSAnZGlzaGVzJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNi5vblN1Ym1pdElubmVyRm9ybSgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBmbGFnID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGZsYWcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBhcGlbX3RoaXMxNi5hY3RpdmVdKF90aGlzMTYuZGlhbG9nRm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczE2LiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpOyAvLyDmm7TmlrDlvLnnqpfmlbDmja4KCgogICAgICAgICAgICAgICAgICAvLyDmm7TmlrDlvLnnqpfmlbDmja4KICAgICAgICAgICAgICAgICAgX3RoaXMxNi5pbml0RGlhbG9nRm9ybURhdGEoKTsgLy8g5YWz6Zet56qX5Y+jCgoKICAgICAgICAgICAgICAgICAgLy8g5YWz6Zet56qX5Y+jCiAgICAgICAgICAgICAgICAgIF90aGlzMTYuZGlhbG9nRm9ybS52aXNpYmxlID0gZmFsc2U7IC8vIOabtOaWsGJUYWJsZQoKICAgICAgICAgICAgICAgICAgLy8g5pu05pawYlRhYmxlCiAgICAgICAgICAgICAgICAgIF90aGlzMTYuYWpheEdldFRhYmxlRGF0YUJ5UGFnZSgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5zYXZlRGF0YS5hZGQgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5zYXZlRGF0YS5yZW1vdmUgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5pbmdyZWRpZW50Lmxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5jdWlzaW5lLmxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgX3RoaXMxNi5pbmdyZWRpZW50Lm5hbWVPclBpbnlpbkhlYWRlciA9ICcnOwogICAgICAgICAgICAgICAgICBfdGhpczE2LmlubmVyVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTYuZGlhbG9nRm9ybS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKTsKICAgIH0sCiAgICAvLyDmj5DkuqToj5zlk4Hor6bmg4UKICAgIG9uU3VibWl0SW5uZXJGb3JtOiBmdW5jdGlvbiBvblN1Ym1pdElubmVyRm9ybSgpIHsKICAgICAgaWYgKHRoaXMuY3Vpc2luZS5saXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+iHs+Wwkea3u+WKoOS4gOadoemjn+adkCcpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY3Vpc2luZS5saXN0LmZpbHRlcihmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgICB2YXIgY2xlYW5WZWdldGFibGUgPSBfcmVmNi5jbGVhblZlZ2V0YWJsZSwKICAgICAgICAgICAgY3V0TWF0Y2hTdGFuZGFyZElkID0gX3JlZjYuY3V0TWF0Y2hTdGFuZGFyZElkLAogICAgICAgICAgICBpbmdyZWRpZW50SWQgPSBfcmVmNi5pbmdyZWRpZW50SWQ7CiAgICAgICAgcmV0dXJuIGNsZWFuVmVnZXRhYmxlICYmIGN1dE1hdGNoU3RhbmRhcmRJZCAmJiBpbmdyZWRpZW50SWQ7CiAgICAgIH0pLmxlbmd0aCA9PT0gdGhpcy5jdWlzaW5lLmxpc3QubGVuZ3RoICYmIHRoaXMuZGlhbG9nRm9ybURhdGEubmFtZSkgewogICAgICAgIHRoaXMuZGlhbG9nRm9ybURhdGEuZGlzaGVzQ29udGVudExpc3QgPSB0aGlzLmN1aXNpbmUubGlzdDsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1aXNpbmUubGlzdCk7CiAgICAgICAgdGhpcy5pbm5lclZpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmluZ3JlZGllbnQubmFtZU9yUGlueWluSGVhZGVyID0gJyc7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn5Y+C5pWw5LiN5a6M5pW05ZmificpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG9uQ2hhbmdlTW9kZWw6IGZ1bmN0aW9uIG9uQ2hhbmdlTW9kZWwobW9kZWwpIHt9LAogICAgYmF0Y2hEZWw6IGZ1bmN0aW9uIGJhdGNoRGVsKHJvd3MpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6K+36Iez5bCR6YCJ5oup5LiA5p2h5pWw5o2uJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRjb25maXJtKCfmgqjljbPlsIbmibnph4/liKDpmaQnICsgcm93cy5sZW5ndGggKyAn5p2h5pWw5o2u77yM5piv5ZCm57un57ut77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gW107CiAgICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBkYXRhLnB1c2goaXRlbS5pZCk7CiAgICAgICAgfSk7CgogICAgICAgIGRlbEFwaVtfdGhpczE3LmFjdGl2ZV0oZGF0YSkudGhlbihmdW5jdGlvbiAoX3JlZjcpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjcuZGF0YTsKCiAgICAgICAgICBfdGhpczE3LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5YqfIScKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMTcucmVmcmVzaFRhYmxlKCk7CiAgICAgICAgfSk7IC8vIGJhdGNoVXBncmFkZUNoZWNrKHJvd3MpLnRoZW4oKCkgPT4gewogICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIC8vICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgIC8vICAgbWVzc2FnZTogJ+aIkOWKnyEnCiAgICAgICAgLy8gfSk7CiAgICAgICAgLy8gdGhpcy5yZWZyZXNoVGFibGUoKTsKICAgICAgICAvLyB9KTsKCiAgICAgIH0pOwogICAgfSwKICAgIGJhdGNoT2ZmOiBmdW5jdGlvbiBiYXRjaE9mZihyb3dzKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+ivt+iHs+WwkemAieaLqeS4gOadoeaVsOaNricpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kY29uZmlybSgn5oKo5Y2z5bCG5om56YeP56aB55SoJyArIHJvd3MubGVuZ3RoICsgJ+adoeaVsOaNru+8jOaYr+WQpue7p+e7re+8nycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZGF0YSA9IFtdOwogICAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgZGF0YS5wdXNoKGl0ZW0uaWQpOwogICAgICAgIH0pOwoKICAgICAgICBzdGF0dXNBcGlbX3RoaXMxOC5hY3RpdmVdKHsKICAgICAgICAgIHN0YXR1czogLTEsCiAgICAgICAgICBpZHM6IGRhdGEKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmOCkgewogICAgICAgICAgdmFyIGRhdGEgPSBfcmVmOC5kYXRhOwoKICAgICAgICAgIF90aGlzMTguJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmiJDlip8hJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMxOC5yZWZyZXNoVGFibGUoKTsKICAgICAgICB9KTsgLy8gYmF0Y2hVcGdyYWRlQ2hlY2socm93cykudGhlbigoKSA9PiB7CiAgICAgICAgLy8gICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAvLyAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgIC8vICAgICBtZXNzYWdlOiAn5oiQ5YqfIScKICAgICAgICAvLyAgIH0pOwogICAgICAgIC8vICAgdGhpcy5yZWZyZXNoVGFibGUoKTsKICAgICAgICAvLyB9KTsKCiAgICAgIH0pOwogICAgfSwKICAgIGJhdGNoT246IGZ1bmN0aW9uIGJhdGNoT24ocm93cykgewogICAgICB2YXIgX3RoaXMxOSA9IHRoaXM7CgogICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKCfor7foh7PlsJHpgInmi6nkuIDmnaHmlbDmja4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aCqOWNs+WwhuaJuemHj+WQr+eUqCcgKyByb3dzLmxlbmd0aCArICfmnaHmlbDmja7vvIzmmK/lkKbnu6fnu63vvJ8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGRhdGEucHVzaChpdGVtLmlkKTsKICAgICAgICB9KTsKCiAgICAgICAgc3RhdHVzQXBpW190aGlzMTkuYWN0aXZlXSh7CiAgICAgICAgICBzdGF0dXM6IDEsCiAgICAgICAgICBpZHM6IGRhdGEKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmOSkgewogICAgICAgICAgdmFyIGRhdGEgPSBfcmVmOS5kYXRhOwoKICAgICAgICAgIF90aGlzMTkuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmiJDlip8hJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMxOS5yZWZyZXNoVGFibGUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2Nyb2xsOiBmdW5jdGlvbiBzY3JvbGwoZXYsIHR5cGUpIHsKICAgICAgLy90eXBlOjDmnKrliIbphY0KICAgICAgdmFyIGVsID0gZXYudGFyZ2V0IHx8IGV2LnNyY0VsZW1lbnQ7CiAgICAgIHZhciBtYXggPSBlbC5zY3JvbGxIZWlnaHQgLSBNYXRoLm1heChlbC5jbGllbnRIZWlnaHQsIGVsLm9mZnNldEhlaWdodCk7IC8vIGNvbnNvbGUubG9nKG1heCxlbC5zY3JvbGxUb3ApOwoKICAgICAgaWYgKG1heCAtIGVsLnNjcm9sbFRvcCA8PSAxMCkgewogICAgICAgIGlmICh0aGlzWydfbG9jaycgKyB0eXBlXSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpc1snX2xvY2snICsgdHlwZV0gPSB0cnVlOwogICAgICAgIHRoaXMuX2VsID0gZWw7CiAgICAgICAgdGhpcy5fc2Nyb2xsVG9wID0gZWwuc2Nyb2xsVG9wOwogICAgICAgIHR5cGUgPyB0aGlzLmN1aXNpbmUucGFnaW4ucGFnZSsrIDogdGhpcy5pbmdyZWRpZW50LnBhZ2luLnBhZ2UrKzsKICAgICAgICB0eXBlID8gdGhpcy5jdWlzaW5lLnBhZ2luLm9mZnNldCA9ICh0aGlzLmN1aXNpbmUucGFnaW4ucGFnZSAtIDEpICogdGhpcy5jdWlzaW5lLnBhZ2luLmxpbWl0IDogdGhpcy5pbmdyZWRpZW50LnBhZ2luLm9mZnNldCA9ICh0aGlzLmluZ3JlZGllbnQucGFnaW4ucGFnZSAtIDEpICogdGhpcy5pbmdyZWRpZW50LnBhZ2luLmxpbWl0OwogICAgICAgIHR5cGUgPyB0aGlzLmdldERpc3QoKSA6IHRoaXMuZ2V0VW5kaXN0KCk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coTWF0aC5yYW5kb20oKSk7CgogICAgfSwKICAgIGxvY2s6IGZ1bmN0aW9uIGxvY2sodHlwZSkgewogICAgICB2YXIgX3RoaXMyMCA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIwWydfbG9jaycgKyB0eXBlXSA9IGZhbHNlOwogICAgICB9LCA1MCk7CiAgICB9LAogICAgZ2V0VW5kaXN0OiBmdW5jdGlvbiBnZXRVbmRpc3Qoa2V5KSB7CiAgICAgIHZhciBfdGhpczIxID0gdGhpczsKCiAgICAgIHZhciBmaWx0ZXJEYXRhID0gdGhpcy5zYXZlRGF0YS5yZW1vdmUucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1ciwgaW5kZXgpIHsKICAgICAgICB2YXIgaWR4ID0gc3VtLmluZGV4T2YoY3VyKTsKICAgICAgICAhfmlkeCAmJiBzdW0uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICByZXR1cm4gc3VtOwogICAgICB9LCB0aGlzLnNhdmVEYXRhLmFkZCk7IC8v5pyq5YiG6YWNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW5ncmVkaWVudC5wYWdpbi5vZmZzZXQpOwoKICAgICAgcmV0dXJuIGluZ3JlZGllbnRMaXN0KHsKICAgICAgICBuYW1lT3JQaW55aW5IZWFkZXI6IHRoaXMuaW5ncmVkaWVudC5uYW1lT3JQaW55aW5IZWFkZXIsCiAgICAgICAgdHlwZTogdGhpcy5hY3RpdmUsCiAgICAgICAgaWQ6IHRoaXMuZGlhbG9nRm9ybURhdGEuaWQsCiAgICAgICAgc3RhdHVzOiAxCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgW107CiAgICAgICAgZGF0YSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gIWZpbHRlckRhdGEuaW5jbHVkZXMoaXRlbS5pZCk7CiAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwaW55aW5IZWFkZXI6IGl0ZW0ucGlueWluSGVhZGVyLAogICAgICAgICAgICBpbmdyZWRpZW50SWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIGluZ3JlZGllbnROYW1lOiBpdGVtLmluZ3JlZGllbnROYW1lLAogICAgICAgICAgICBjdXRNYXRjaFN0YW5kYXJkSWQ6ICcnLAogICAgICAgICAgICBjbGVhblZlZ2V0YWJsZTogJycKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMyMS5pbmdyZWRpZW50Lmxpc3QgPSBkYXRhOwogICAgICAgIF90aGlzMjEuX2VsICYmIChfdGhpczIxLl9lbC5zY3JvbGxUb3AgPSBfdGhpczIxLl9zY3JvbGxUb3ApOwoKICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT0gX3RoaXMyMS5pbmdyZWRpZW50LnBhZ2luLmxpbWl0KSB7CiAgICAgICAgICBfdGhpczIxLmxvY2soMCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7Ly90aGlzLmxvY2soMCkKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGlzdDogZnVuY3Rpb24gZ2V0RGlzdChrZXkpIHsKICAgICAgdmFyIF90aGlzMjIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuZGlhbG9nRm9ybS5pc0VkaXQgfHwgdGhpcy5kaWFsb2dGb3JtLmlzTG9vaykgewogICAgICAgIHJldHVybiBnZXREaXNoZXNDb250ZW50TGlzdEJ5RGlzaGVzSWQoewogICAgICAgICAgZGlzaGVzSWQ6IHRoaXMuZGlhbG9nRm9ybURhdGEuaWQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgW107IC8vIHRoaXMuY3Vpc2luZS5saXN0ID0gdGhpcy5jdWlzaW5lLmxpc3QuY29uY2F0KGRhdGEpOwoKICAgICAgICAgIF90aGlzMjIuY3Vpc2luZS5saXN0ID0gX3RoaXMyMi5kaWFsb2dGb3JtRGF0YS5kaXNoZXNDb250ZW50TGlzdCA9IGRhdGE7IC8vIHRoaXMuZGlhbG9nRm9ybURhdGEuZGlzaGVzQ29udGVudExpc3QgPSB0aGlzLmN1aXNpbmUubGlzdDsKCiAgICAgICAgICBfdGhpczIyLl9lbCAmJiAoX3RoaXMyMi5fZWwuc2Nyb2xsVG9wID0gX3RoaXMyMi5fc2Nyb2xsVG9wKTsKCiAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT0gX3RoaXMyMi5jdWlzaW5lLnBhZ2luLmxpbWl0KSB7CiAgICAgICAgICAgIF90aGlzMjIubG9jaygxKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7Ly8gdGhpcy5sb2NrKDEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goZXYsIHR5cGUpIHsKICAgICAgaWYgKGV2LndoaWNoID09IDEzKSB7CiAgICAgICAgdGhpcy5pbmdyZWRpZW50LnBhZ2luLnBhZ2UgPSAxOwogICAgICAgIHRoaXMuaW5ncmVkaWVudC5wYWdpbi5vZmZzZXQgPSAwOwoKICAgICAgICBpZiAodHlwZSA9PT0gMSkgewogICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRpYWxvZ0Zvcm1EYXRhLmRpc2hlc0NvbnRlbnRMaXN0OwoKICAgICAgICAgIGlmIChldi50YXJnZXQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5jdWlzaW5lLmxpc3QgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBpdGVtLnBpbnlpbkhlYWRlci50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKGV2LnRhcmdldC52YWx1ZS50b1VwcGVyQ2FzZSgpKSB8fCBpdGVtLmluZ3JlZGllbnROYW1lLmluY2x1ZGVzKGV2LnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jdWlzaW5lLmxpc3QgPSBkYXRhOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmluZ3JlZGllbnQubGlzdCA9IFtdOwogICAgICAgICAgdGhpcy5nZXRVbmRpc3QoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmluZ3JlZGllbnQuY2hlY2tlZCk7CiAgICAgIGlmICghKHRoaXMuaW5ncmVkaWVudC5jaGVja2VkICYmIHRoaXMuaW5ncmVkaWVudC5jaGVja2VkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5p2h6aOf5p2QJyk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5pbmdyZWRpZW50LmNoZWNrZWQpIHsKICAgICAgICB2YXIgbSA9IHRoaXMuaW5ncmVkaWVudC5jaGVja2VkW2ldOwogICAgICAgIHRoaXMuY3Vpc2luZS5saXN0LnVuc2hpZnQobSk7CiAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuaW5ncmVkaWVudC5saXN0LCBtLCAnJywgMCk7CiAgICAgICAgZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEucmVtb3ZlLCBtLmluZ3JlZGllbnRJZCwgJycsIDApOyAvLyB2YXIgcmVzID0gZGVsZXRlT3JGaW5kQXJyKHRoaXMuc2F2ZURhdGEuYWRkLCBtLmluZ3JlZGllbnRJZCwgJycsIDAsIDEpOwogICAgICAgIC8vIGlmIChyZXMubGVuZ3RoIDwgMSkgewoKICAgICAgICB0aGlzLnNhdmVEYXRhLmFkZC5wdXNoKG0uaWQpOyAvLyB9CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgaWYgKCEodGhpcy5jdWlzaW5lLmNoZWNrZWQgJiYgdGhpcy5jdWlzaW5lLmNoZWNrZWQubGVuZ3RoID4gMCkpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7foh7PlsJHpgInmi6nkuIDmnaHpo5/mnZAnKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmN1aXNpbmUuY2hlY2tlZCkgewogICAgICAgIHZhciBtID0gdGhpcy5jdWlzaW5lLmNoZWNrZWRbaV07CiAgICAgICAgdGhpcy5pbmdyZWRpZW50Lmxpc3QudW5zaGlmdChtKTsKICAgICAgICBkZWxldGVPckZpbmRBcnIodGhpcy5jdWlzaW5lLmxpc3QsIG0sICcnLCAwKTsKICAgICAgICBkZWxldGVPckZpbmRBcnIodGhpcy5zYXZlRGF0YS5hZGQsIG0uaWQsICcnLCAwKTsgLy8gdmFyIHJlcyA9IGRlbGV0ZU9yRmluZEFycih0aGlzLnNhdmVEYXRhLnJlbW92ZSwgbS5pZCwgJycsIDAsIDEpOwogICAgICAgIC8vIGlmIChyZXMubGVuZ3RoIDwgMSkgewoKICAgICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZS5wdXNoKG0uaWQpOyAvLyB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICog5pu05paw5YiG6YWN5pWw5o2uDQogICAgICogQHBhcmFtIHtBcnJheX0gYWRkIOa3u+WKoOWIhumFjQ0KICAgICAqIEBwYXJhbSB7QXJyYXl9IHJlbW92ZSDnp7vpmaTliIbphY0NCiAgICAgKi8KICAgIC8vIHVwZGF0ZUN1aXNpbmVEYXRhKGFkZCwgcmVtb3ZlKSB7CiAgICAvLyAgIGlmIChhZGQubGVuZ3RoKSB7CiAgICAvLyAgICAgY29uc3QgYWRkSXRlbSA9IHRoaXMuaW5ncmVkaWVudC5saXN0CiAgICAvLyAgICAgICAuZmlsdGVyKGl0ZW0gPT4gYWRkLmluY2x1ZGVzKGl0ZW0uZGljdGlvbmFyeUlkKSkKICAgIC8vICAgICAgIC5tYXAoaXRlbSA9PiAoewogICAgLy8gICAgICAgICBwaW55aW5IZWFkZXI6IGl0ZW0ucGlueWluSGVhZGVyLAogICAgLy8gICAgICAgICBpbmdyZWRpZW50SWQ6IGl0ZW0uZGljdGlvbmFyeUlkLAogICAgLy8gICAgICAgICBpbmdyZWRpZW50TmFtZTogaXRlbS5pbmdyZWRpZW50TmFtZSwKICAgIC8vICAgICAgICAgY3V0TWF0Y2hTdGFuZGFyZElkOiAnJywKICAgIC8vICAgICAgICAgY2xlYW5WZWdldGFibGU6ICcnCiAgICAvLyAgICAgICB9KSk7CiAgICAvLyAgICAgdGhpcy5jdWlzaW5lLmxpc3QgPSB0aGlzLmN1aXNpbmUubGlzdC5jb25jYXQoYWRkSXRlbSk7CiAgICAvLyAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdWlzaW5lLmxpc3QsIGFkZEl0ZW0sICdjdWlzaW5lLmxpc3QnKTsKICAgIC8vICAgICB0aGlzLmluZ3JlZGllbnQubGlzdCA9IHRoaXMuaW5ncmVkaWVudC5saXN0LmZpbHRlcigKICAgIC8vICAgICAgIGl0ZW0gPT4gIWFkZC5pbmNsdWRlcyhpdGVtLmRpY3Rpb25hcnlJZCkKICAgIC8vICAgICApOwogICAgLy8gICAgIHRoaXMuc2F2ZURhdGEuYWRkID0gW107CiAgICAvLyAgICAgdGhpcy5jdWlzaW5lTG9hZGluZyA9IGZhbHNlOwogICAgLy8gICB9CiAgICAvLyAgIGlmIChyZW1vdmUubGVuZ3RoKSB7CiAgICAvLyAgICAgY29uc3QgcmVtb3ZlSXRlbSA9IHRoaXMuY3Vpc2luZS5saXN0LmZpbHRlcihpdGVtID0+CiAgICAvLyAgICAgICByZW1vdmUuaW5jbHVkZXMoaXRlbS5pZCkKICAgIC8vICAgICApOwogICAgLy8gICAgIHRoaXMuaW5ncmVkaWVudC5saXN0ID0gdGhpcy5pbmdyZWRpZW50Lmxpc3QuY29uY2F0KHJlbW92ZUl0ZW0pOwogICAgLy8gICAgIHRoaXMuY3Vpc2luZS5saXN0ID0gdGhpcy5jdWlzaW5lLmxpc3QuZmlsdGVyKAogICAgLy8gICAgICAgaXRlbSA9PiAhcmVtb3ZlLmluY2x1ZGVzKGl0ZW0uaWQpCiAgICAvLyAgICAgKTsKICAgIC8vICAgICB0aGlzLnNhdmVEYXRhLnJlbW92ZSA9IFtdOwogICAgLy8gICAgIHRoaXMuaW5ncmVkaWVudExvYWRpbmcgPSBmYWxzZTsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIGRvd25NZW51OiBmdW5jdGlvbiBkb3duTWVudShyb3cpIHsKICAgICAgdmFyIG5ld1F1ZXJ5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiRyb3V0ZS5xdWVyeSkpOwogICAgICBuZXdRdWVyeS5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgIHF1ZXJ5OiBuZXdRdWVyeQogICAgICB9KTsKICAgICAgdGhpcy4kcmVmcy5pc3N1ZS50b2dnbGVWaXNpYmxlKCk7IC8vIHRoaXMuJHJvdXRlci5wdXNoKHsgcXVyZXk6IHsgaWQ6IHJvdy5pZCB9IH0pOwogICAgfSwKICAgIC8vIOafpeeciwogICAgY2hlY2tNZW51OiBmdW5jdGlvbiBjaGVja01lbnUocm93LCBpbmRleCkgewogICAgICB0aGlzLm9uTG9vaygpOwogICAgICB0aGlzLmdldERpc2hlc0xpc3REZXRhaWwocm93LmlkKTsKICAgICAgdGhpcy5tZW51SWQgPSByb3cuaWQ7CiAgICB9LAogICAgZ2V0RGlzaGVzTGlzdERldGFpbDogZnVuY3Rpb24gZ2V0RGlzaGVzTGlzdERldGFpbChpZCkgewogICAgICB2YXIgX3RoaXMyMyA9IHRoaXM7CgogICAgICByZXR1cm4gZGlzaGVzTGlzdERldGFpbChpZCB8fCB0aGlzLiRyb3V0ZS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyMy5tZW51RGV0YWlsID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXMuZGF0YSksIHt9LCB7CiAgICAgICAgICBjcm93ZElkczogcmVzLmRhdGEuY3Jvd2RJZHNbMF0sCiAgICAgICAgICB3ZWVrVGFibGVEYXRhOiBfdGhpczIzLmhhbmRsZU1lYWxEYXRhKHJlcy5kYXRhLm1lYWxEYXlMaXN0KQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0TWVudURldGFpbDogZnVuY3Rpb24gaW5pdE1lbnVEZXRhaWwoKSB7CiAgICAgIHZhciBpbml0RGF0YSA9IHsKICAgICAgICBjcm93ZElkczogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdHlwZTogdGhpcy5hbGxNZW51SXRlbXNbdGhpcy5zdWJBY3RpdmVdICYmIHRoaXMuYWxsTWVudUl0ZW1zW3RoaXMuc3ViQWN0aXZlXS50eXBlLAogICAgICAgIG1lYWxEYXlMaXN0OiBbewogICAgICAgICAgbWVhbERheTogMSwKICAgICAgICAgIG1lYWxEYXlTdHJpbmc6ICfmmJ/mnJ/kuIAnLAogICAgICAgICAgbWVhbFR5cGVMaXN0OiBbewogICAgICAgICAgICBtZWFsVHlwZTogMSwKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1lYWxUeXBlOiAyLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVhbFR5cGU6IDMsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfV0KICAgICAgICB9LCB7CiAgICAgICAgICBtZWFsRGF5OiAyLAogICAgICAgICAgbWVhbERheVN0cmluZzogJ+aYn+acn+S6jCcsCiAgICAgICAgICBtZWFsVHlwZUxpc3Q6IFt7CiAgICAgICAgICAgIG1lYWxUeXBlOiAxLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVhbFR5cGU6IDIsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfSwgewogICAgICAgICAgICBtZWFsVHlwZTogMywKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9XQogICAgICAgIH0sIHsKICAgICAgICAgIG1lYWxEYXk6IDMsCiAgICAgICAgICBtZWFsRGF5U3RyaW5nOiAn5pif5pyf5LiJJywKICAgICAgICAgIG1lYWxUeXBlTGlzdDogW3sKICAgICAgICAgICAgbWVhbFR5cGU6IDEsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfSwgewogICAgICAgICAgICBtZWFsVHlwZTogMiwKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1lYWxUeXBlOiAzLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbWVhbERheTogNCwKICAgICAgICAgIG1lYWxEYXlTdHJpbmc6ICfmmJ/mnJ/lm5snLAogICAgICAgICAgbWVhbFR5cGVMaXN0OiBbewogICAgICAgICAgICBtZWFsVHlwZTogMSwKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1lYWxUeXBlOiAyLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVhbFR5cGU6IDMsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfV0KICAgICAgICB9LCB7CiAgICAgICAgICBtZWFsRGF5OiA1LAogICAgICAgICAgbWVhbERheVN0cmluZzogJ+aYn+acn+S6lCcsCiAgICAgICAgICBtZWFsVHlwZUxpc3Q6IFt7CiAgICAgICAgICAgIG1lYWxUeXBlOiAxLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVhbFR5cGU6IDIsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfSwgewogICAgICAgICAgICBtZWFsVHlwZTogMywKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9XQogICAgICAgIH0sIHsKICAgICAgICAgIG1lYWxEYXk6IDYsCiAgICAgICAgICBtZWFsRGF5U3RyaW5nOiAn5pif5pyf5YWtJywKICAgICAgICAgIG1lYWxUeXBlTGlzdDogW3sKICAgICAgICAgICAgbWVhbFR5cGU6IDEsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfSwgewogICAgICAgICAgICBtZWFsVHlwZTogMiwKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1lYWxUeXBlOiAzLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbWVhbERheTogNywKICAgICAgICAgIG1lYWxEYXlTdHJpbmc6ICfmmJ/mnJ/ml6UnLAogICAgICAgICAgbWVhbFR5cGVMaXN0OiBbewogICAgICAgICAgICBtZWFsVHlwZTogMSwKICAgICAgICAgICAgY29udGVudExpc3Q6IFtdCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG1lYWxUeXBlOiAyLAogICAgICAgICAgICBjb250ZW50TGlzdDogW10KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgbWVhbFR5cGU6IDMsCiAgICAgICAgICAgIGNvbnRlbnRMaXN0OiBbXQogICAgICAgICAgfV0KICAgICAgICB9XQogICAgICB9OwogICAgICB0aGlzLm1lbnVEZXRhaWwgPSB0aGlzLmRpYWxvZ0Zvcm0uaXNFZGl0ID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLm1lbnVEZXRhaWwpLCBpbml0RGF0YSkgOiBpbml0RGF0YTsKICAgIH0sCiAgICBpbml0TWVhbERheUxpc3Q6IGZ1bmN0aW9uIGluaXRNZWFsRGF5TGlzdChwYXJhbXMpIHsKICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIHRoaXMubWVudURldGFpbC5jcm93ZElkcyA9IHBhcmFtczsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfdGhpcyRtZW51RGV0YWlsID0gdGhpcy5tZW51RGV0YWlsLAogICAgICAgICAgY3Jvd2RJZHMgPSBfdGhpcyRtZW51RGV0YWlsLmNyb3dkSWRzLAogICAgICAgICAgbmFtZSA9IF90aGlzJG1lbnVEZXRhaWwubmFtZSwKICAgICAgICAgIHR5cGUgPSBfdGhpcyRtZW51RGV0YWlsLnR5cGU7CiAgICAgIHZhciBfb2JqID0gewogICAgICAgIGNyb3dkSWRzOiBjcm93ZElkcywKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHR5cGU6IHR5cGUKICAgICAgfTsKICAgICAgdGhpcy5pbml0TWVudURldGFpbCgpOwogICAgICB0aGlzLm1lbnVEZXRhaWwgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMubWVudURldGFpbCksIF9vYmopOwogICAgfSwKICAgIGVkaXRNZW51OiBmdW5jdGlvbiBlZGl0TWVudShyb3csIGlzQWRkKSB7CiAgICAgIHZhciBfdGhpczI0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgbmV3UXVlcnk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZXdRdWVyeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMyNC4kcm91dGUucXVlcnkpKTsKICAgICAgICAgICAgICAgIG5ld1F1ZXJ5LmlkID0gaXNBZGQgPyAnJyA6IHJvdy5pZDsKICAgICAgICAgICAgICAgIG5ld1F1ZXJ5LnR5cGUgPSBfdGhpczI0LmFsbE1lbnVJdGVtc1tfdGhpczI0LnN1YkFjdGl2ZV0udHlwZTsKCiAgICAgICAgICAgICAgICBfdGhpczI0LiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBuZXdRdWVyeQogICAgICAgICAgICAgICAgfSk7IC8vIOW8ueahhgoKCiAgICAgICAgICAgICAgICBfdGhpczI0LmRpYWxvZ0Zvcm0uaXNFZGl0ID0gaXNBZGQgPT09IHRydWUgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpczI0LmRpYWxvZ0Zvcm0udmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMyNC5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyNC5kaWFsb2dGb3JtLmlzRWRpdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjQuZ2V0RGlzaGVzTGlzdERldGFpbChyb3cuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczI0LmluaXRNZW51RGV0YWlsKCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbWVudURldGFpbDE6JywgdGhpcy5tZW51RGV0YWlsKTsKICAgICAgICAgICAgICAgIC8vIG1lbnXmiY3mnInov5nkuKoKICAgICAgICAgICAgICAgIF90aGlzMjQuaXNNZW51RGV0YWlsID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOS/neWtmOiPnOWNlQogICAgb25TYXZlTWVudTogZnVuY3Rpb24gb25TYXZlTWVudSgpIHsKICAgICAgdGhpcy5pbml0TWVudURldGFpbCgpOwogICAgICB0aGlzLmlzTWVudURldGFpbCA9IGZhbHNlOwogICAgICB0aGlzLmFqYXhHZXRUYWJsZURhdGFCeVBhZ2UoKTsKICAgIH0sCiAgICAvL+WkhOeQhuiPnOWNleaVsOaNrgogICAgaGFuZGxlTWVhbERhdGE6IGhhbmRsZU1lYWxEYXRhLAogICAgcHVzaFRvUGFyZW50OiBmdW5jdGlvbiBwdXNoVG9QYXJlbnQocm93KSB7CiAgICAgIGlmICh0aGlzLmRpYWxvZ0Zvcm0uaXNMb29rKSB7CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzTG9vayA9IGZhbHNlOwogICAgICAgIHRoaXMuZGlhbG9nRm9ybS52aXNpYmxlID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMucHVzaFBhbmVsVmlzaWJsZSA9IHRydWU7CgogICAgICBpZiAocm93LmlkKSB7CiAgICAgICAgdGhpcy5tZW51SWQgPSByb3cuaWQ7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDbG9zZUZvcm06IGZ1bmN0aW9uIGhhbmRsZUNsb3NlRm9ybSgpIHsKICAgICAgdGhpcy5wdXNoUGFuZWxWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgZ290b1B1c2hSZWNvcmQ6IGZ1bmN0aW9uIGdvdG9QdXNoUmVjb3JkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NldHRpbmcvcHVzaFJlY29yZHMnKTsKICAgIH0KICB9LAogIC8vIOeUn+WRveWRqOacnyAtIOWIm+W7uuWujOaIkO+8iOWPr+S7peiuv+mXruW9k+WJjXRoaXPlrp7kvovvvIkKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMjUgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgdmFyIGlkeCwga2V5OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcmVhLmFyZWFMaXN0KTsKICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7IHF1ZXJ5OiB7IGlkOiAnJyB9IH0pOwogICAgICAgICAgICAgIC8vIOWIneWni+WMluadg+mZkAogICAgICAgICAgICAgIC8vIGlmICh0aGlzLnJvbGVUeXBlLmluY2x1ZGVzKDYpIHx8IHRoaXMucm9sZVR5cGUuaW5jbHVkZXMoNykpIHsKICAgICAgICAgICAgICAvLyAgIHRoaXMuYWN0aXZlID0gJ3Byb3ZpZGVJbmdyZWRpZW50cyc7CiAgICAgICAgICAgICAgLy8gICB0aGlzLnJvbGUgPSAxOwogICAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gICB0aGlzLmFjdGl2ZSA9ICdpbmdyZWRpZW50cyc7CiAgICAgICAgICAgICAgLy8gICB0aGlzLnJvbGUgPSAwOwogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAvLyB0aGlzLmFjdGl2ZSA9ICdwcm92aWRlSW5ncmVkaWVudHMnOwogICAgICAgICAgICAgIC8vIHRoaXMucm9sZSA9IDE7CiAgICAgICAgICAgICAgLy8g5Yid5aeL5YyW5pWw5o2uCiAgICAgICAgICAgICAgaWR4ID0gMDsKCiAgICAgICAgICAgICAgZm9yIChrZXkgaW4gX3RoaXMyNS5tZW51TGlzdCkgewogICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBfdGhpczI1LnN1YkFjdGl2ZSA9IGtleTsKICAgICAgICAgICAgICAgICAgaWR4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpczI1LmluaXREaWFsb2dGb3JtRGF0YSgpOwoKICAgICAgICAgICAgICBjdXRNYXRjaFN0YW5kYXJkTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXMyNS5jdXRNYXRjaFN0YW5kYXJkTGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTYpOwogICAgfSkpKCk7CiAgfSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDmjILovb3lrozmiJDvvIjlj6/ku6Xorr/pl65ET03lhYPntKDvvIkKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30KfTs="},null]}