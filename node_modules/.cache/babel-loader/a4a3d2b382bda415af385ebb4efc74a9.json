{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/DingLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/catering-h5/views/DingLogin.vue","mtime":1645176309702},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL2RpYWxvZy9zdHlsZSI7CmltcG9ydCBfRGlhbG9nIGZyb20gInZhbnQvZXMvZGlhbG9nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGluZy1sb2dpbicsCiAgcHJvcHM6IHsKICAgIC8qKgogICAgICog55m75b2V5oiQ5Yqf6YeN5a6a5ZCR5Zyw5Z2ACiAgICAgKi8KICAgIHJlZGlyZWN0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByb2xlVHlwZTogJycsCiAgICAgIGRldGFpbElkOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdmFyIF90aGlzJCRyb3V0ZSRxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LAogICAgICAgIHJvbGVUeXBlID0gX3RoaXMkJHJvdXRlJHF1ZXJ5LnJvbGVUeXBlLAogICAgICAgIGlkID0gX3RoaXMkJHJvdXRlJHF1ZXJ5LmlkOwogICAgdGhpcy5yb2xlVHlwZSA9IHJvbGVUeXBlOwogICAgdGhpcy5kZXRhaWxJZCA9IGlkOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIOajgOa1i+eOr+WigwogICAgICBpZiAoIXRoaXMuJGRkLnZlcnNpb24pIHsKICAgICAgICBfRGlhbG9nLmFsZXJ0KHsKICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fkvb/nlKjpkonpkonmiZPlvIAnCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDmmL7npLrnmbvlvZXkuK0KCgogICAgICB2YXIgbG9hZGluZyA9IHRoaXMuJHRvYXN0LmxvYWRpbmcoewogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgIGxvYWRpbmdUeXBlOiAnc3Bpbm5lcicKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL0RETG9naW4nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvL+S4jeWQjOadg+mZkOi3s+i9rOS4jeWQjOmhtemdou+8jOWkmumHjei6q+S7veWIneWni+WMluWFiOmAieaLqei6q+S7vQogICAgICAgIHZhciByb2xlVHlwZSA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyd1c2VyL3JvbGVUeXBlSW5pdCddIHx8IHt9OwogICAgICAgIHZhciByb2xlRGV0YWlsUGF0aCA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyd1c2VyL3JvbGVEZXRhaWxQYXRoJ10gfHwge307CgogICAgICAgIGlmICghcm9sZVR5cGUubGVuZ3RoIHx8IF90aGlzLnJvbGVUeXBlICYmICFyb2xlVHlwZS5pbmNsdWRlcyhOdW1iZXIoX3RoaXMucm9sZVR5cGUpKSkgewogICAgICAgICAgX0RpYWxvZy5hbGVydCh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfmmoLml6DmnYPpmZAnCiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAocm9sZVR5cGUubGVuZ3RoID4gMSAmJiAhX3RoaXMucmVkaXJlY3QpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICcvY2hvb3NlLWlkZW50aXR5JwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6IF90aGlzLiRzdG9yZS5nZXR0ZXJzWyd1c2VyL3JvbGVQYXRoJ11bcm9sZVR5cGVbMF1dCiAgICAgICAgICB9KTsKICAgICAgICB9IC8v6ZKJ6ZKJ5raI5oGv6Lez6L2sCgoKICAgICAgICBpZiAoX3RoaXMucmVkaXJlY3QpIHsKICAgICAgICAgIF90aGlzLiRkZC5iaXoubmF2aWdhdGlvbi5zZXRSaWdodCh7CiAgICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgICAvL+aOp+WItuaMiemSruaYvuekuu+8jCB0cnVlIOaYvuekuu+8jCBmYWxzZSDpmpDol4/vvIwg6buY6K6kdHJ1ZQogICAgICAgICAgICBjb250cm9sOiB0cnVlLAogICAgICAgICAgICAvL+aYr+WQpuaOp+WItueCueWHu+S6i+S7tu+8jHRydWUg5o6n5Yi277yMZmFsc2Ug5LiN5o6n5Yi277yMIOm7mOiupGZhbHNlCiAgICAgICAgICAgIHRleHQ6ICfliIfmjaLop5LoibInLAogICAgICAgICAgICAvL+aOp+WItuaYvuekuuaWh+acrO+8jOepuuWtl+espuS4suihqOekuuaYvuekuum7mOiupOaWh+acrAogICAgICAgICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHsKICAgICAgICAgICAgICAvL+WmguaenGNvbnRyb2zkuLp0cnVl77yM5YiZb25TdWNjZXNz5bCG5Zyo5Y+R55Sf5oyJ6ZKu54K55Ye75LqL5Lu26KKr5Zue6LCDCgogICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAge30KICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOiAnL2Nob29zZS1pZGVudGl0eScKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25GYWlsOiBmdW5jdGlvbiBvbkZhaWwoZXJyKSB7fQogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIHF1ZXJ5ID0gewogICAgICAgICAgICBvcmRlcklkOiBfdGhpcy5kZXRhaWxJZAogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAoX3RoaXMucm9sZVR5cGUgPT0gJzgnKSB7CiAgICAgICAgICAgIHF1ZXJ5ID0gewogICAgICAgICAgICAgIG9yZGVySWQ6IF90aGlzLmRldGFpbElkCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnJvbGVUeXBlID09ICc5JykgewogICAgICAgICAgICBxdWVyeSA9IHsKICAgICAgICAgICAgICBhcHBseUlkOiBfdGhpcy5kZXRhaWxJZAogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6IHJvbGVEZXRhaWxQYXRoW190aGlzLnJvbGVUeXBlXSwKICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgICAgdGl0bGU6ICfmjojmnYPnmbvlvZXlpLHotKUnLAogICAgICAgICAgbWVzc2FnZTogZXJyb3IuZXJyb3JNZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOaOiOadgycKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLmluaXQoKTsKICAgICAgICB9KTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9hZGluZy5jbGVhcigpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["DingLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- 钉钉免登 -->\n  <div></div>\n</template>\n\n<script>\nimport { Dialog, Toast } from 'vant';\nexport default {\n  name: 'ding-login',\n  props: {\n    /**\n     * 登录成功重定向地址\n     */\n    redirect: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      roleType: '',\n      detailId: null\n    };\n  },\n  created() {\n    this.init();\n    const { roleType, id } = this.$route.query;\n    this.roleType = roleType;\n    this.detailId = id;\n  },\n  methods: {\n    init() {\n      // 检测环境\n      if (!this.$dd.version) {\n        Dialog.alert({\n          title: '提示',\n          message: '请使用钉钉打开'\n        });\n        return;\n      }\n      // 显示登录中\n      const loading = this.$toast.loading({\n        message: '加载中...',\n        forbidClick: true,\n        loadingType: 'spinner'\n      });\n      this.$store\n        .dispatch('user/DDLogin')\n        .then(() => {\n          //不同权限跳转不同页面，多重身份初始化先选择身份\n          const roleType = this.$store.getters['user/roleTypeInit'] || {};\n          const roleDetailPath =\n            this.$store.getters['user/roleDetailPath'] || {};\n          if (\n            !roleType.length ||\n            (this.roleType && !roleType.includes(Number(this.roleType)))\n          ) {\n            Dialog.alert({\n              message: '暂无权限'\n            });\n            return;\n          }\n          if (roleType.length > 1 && !this.redirect) {\n            this.$router.replace({\n              path: '/choose-identity'\n            });\n          } else {\n            this.$router.push({\n              path: this.$store.getters['user/rolePath'][roleType[0]]\n            });\n          }\n          //钉钉消息跳转\n          if (this.redirect) {\n            this.$dd.biz.navigation.setRight({\n              show: false, //控制按钮显示， true 显示， false 隐藏， 默认true\n              control: true, //是否控制点击事件，true 控制，false 不控制， 默认false\n              text: '切换角色', //控制显示文本，空字符串表示显示默认文本\n              onSuccess: result => {\n                //如果control为true，则onSuccess将在发生按钮点击事件被回调\n                /*\n                {}\n                */\n                this.$router.push({\n                  path: '/choose-identity'\n                });\n              },\n              onFail: function(err) {}\n            });\n            let query = { orderId: this.detailId };\n            if (this.roleType == '8') {\n              query = {\n                orderId: this.detailId\n              };\n            } else if (this.roleType == '9') {\n              query = {\n                applyId: this.detailId\n              };\n            }\n            this.$router.replace({\n              path: roleDetailPath[this.roleType],\n              query\n            });\n          }\n        })\n        .catch(error => {\n          this.$dialog\n            .alert({\n              title: '授权登录失败',\n              message: error.errorMessage || error.message,\n              confirmButtonText: '重新授权'\n            })\n            .then(() => {\n              this.init();\n            });\n        })\n        .finally(() => {\n          loading.clear();\n        });\n    }\n  }\n};\n</script>\n\n<style></style>\n"],"sourceRoot":"src/pages/catering-h5/views"}]}