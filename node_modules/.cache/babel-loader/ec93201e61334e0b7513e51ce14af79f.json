{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/plugins/core/permission.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/plugins/core/permission.js","mtime":1645176309686},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX01lc3NhZ2VCb3gyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL21lc3NhZ2UtYm94LmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2VCb3ggZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZS1ib3giOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3lqeS1wcm9qZWN0cy9tdWx0aS1wcm9qZWN0L211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9Mb2FkaW5nMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9sb2FkaW5nLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0xvYWRpbmcgZnJvbSAiZWxlbWVudC11aS9saWIvbG9hZGluZyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3lqeS1wcm9qZWN0cy9tdWx0aS1wcm9qZWN0L211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHJvdXRlciwgeyBnZW5lcmF0ZVJvdXRlcyB9IGZyb20gJy4uLy4uL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi9zdG9yZSc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsgLy8gcHJvZ3Jlc3MgYmFyCgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCgppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJy4uLy4uLy4uLy4uL3BsdWdpbnMvY29yZS9hdXRoJzsgLy8gZ2V0IHRva2VuIGZyb20gY29va2llCgpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7IC8vIE5Qcm9ncmVzcyBDb25maWd1cmF0aW9uCgp2YXIgd2hpdGVMaXN0ID0gWycvbG9naW4nLCAnL3Nzby9hdXRoJ107IC8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaGFzVG9rZW4sIGhhc0FwcERhdGFMb2FkZWQsIGxvYWRpbmcsIF95aWVsZCRzdG9yZSRkaXNwYXRjaCwgbWVudUxpc3QsIGFjY2Vzc1JvdXRlczsKCiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIKICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIHNldCBwYWdlIHRpdGxlCgogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRvLm1ldGEudGl0bGUgfHwgc3RvcmUuc3RhdGUuc2V0dGluZ3MudGl0bGU7IC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSB1c2VyIGhhcyBsb2dnZWQgaW4KCiAgICAgICAgICAgIGhhc1Rva2VuID0gZ2V0VG9rZW4oKTsKCiAgICAgICAgICAgIGlmICghaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT09ICcvbG9naW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpZiBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgcGF0aDogJy8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOyAvLyBoYWNrOiBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9wdWxsLzI5MzkKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgb2J0YWluZWQgaGlzIHBlcm1pc3Npb24gcm9sZXMgdGhyb3VnaCBnZXRJbmZvCiAgICAgICAgICAgIC8vIGNvbnN0IGhhc1JvbGVzID0gc3RvcmUuZ2V0dGVycy5yb2xlcyAmJiBzdG9yZS5nZXR0ZXJzLnJvbGVzLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIGhhc0FwcERhdGFMb2FkZWQgPSAhIXN0b3JlLmdldHRlcnMuaGFzQXBwRGF0YUxvYWRlZDsKCiAgICAgICAgICAgIGlmICghaGFzQXBwRGF0YUxvYWRlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGxvYWRpbmcgPSBfTG9hZGluZy5zZXJ2aWNlKHsKICAgICAgICAgICAgICB0ZXh0OiAn5Yqq5Yqb5Yqg6L295pWw5o2u5LitLi4uJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJyk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2F1dGgvZ2V0QXV0aERhdGEnKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBfeWllbGQkc3RvcmUkZGlzcGF0Y2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBtZW51TGlzdCA9IF95aWVsZCRzdG9yZSRkaXNwYXRjaC5tZW51TGlzdDsKICAgICAgICAgICAgLy8g6I635Y+W5p2D6ZmQ5pWw5o2uCiAgICAgICAgICAgIC8vIGdlbmVyYXRlIGFjY2Vzc2libGUgcm91dGVzIG1hcCBiYXNlZCBvbiByb2xlcwogICAgICAgICAgICAvLyBjb25zdCBhY2Nlc3NSb3V0ZXMgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaCgKICAgICAgICAgICAgLy8gICAnYXV0aC9nZW5lcmF0ZVJvdXRlcycsCiAgICAgICAgICAgIC8vICAgbWVudUxpc3QKICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgYWNjZXNzUm91dGVzID0gZ2VuZXJhdGVSb3V0ZXMobWVudUxpc3QpOyAvLyDnlJ/miJDlhYHorrjorr/pl67nmoTot6/nlLEKICAgICAgICAgICAgLy8gZHluYW1pY2FsbHkgYWRkIGFjY2Vzc2libGUgcm91dGVzCgogICAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcyk7CiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnYXBwL0ZJTklTSF9EQVRBX0xPQUQnKTsgLy8g5pWw5o2u5Yqg6L295a6M5oiQCiAgICAgICAgICAgIC8vIGhhY2sgbWV0aG9kIHRvIGVuc3VyZSB0aGF0IGFkZFJvdXRlcyBpcyBjb21wbGV0ZQogICAgICAgICAgICAvLyBzZXQgdGhlIHJlcGxhY2U6IHRydWUsIHNvIHRoZSBuYXZpZ2F0aW9uIHdpbGwgbm90IGxlYXZlIGEgaGlzdG9yeSByZWNvcmQKCiAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTUpOwogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7IC8vIHJlbW92ZSB0b2tlbiBhbmQgZ28gdG8gbG9naW4gcGFnZSB0byByZS1sb2dpbgoKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzMzsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICByZXR1cm4gX01lc3NhZ2VCb3guY29uZmlybSgn5b2T5YmN5pWw5o2u5Yqg6L295LiN56iz5a6a77yM6K+35oKo6YeN5paw55m75b2V5oiW6YeN5paw5Yqg6L29JywgJ+mUmeivrycsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOWKoOi9veaVsOaNricsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+eZu+W9lemhtemdoicsCiAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrTW9kYWw6IGZhbHNlLAogICAgICAgICAgICAgIGNsb3NlT25QcmVzc0VzY2FwZTogZmFsc2UsCiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNrgogICAgICAgICAgICBuZXh0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG8pLCB7fSwgewogICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOTsKICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgzMyk7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDEpOyAvLyDnmbvlh7oKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKTsKCiAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwoKICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgLyogaGFzIG5vIHRva2VuKi8KICAgICAgICAgICAgaWYgKHdoaXRlTGlzdC5pbmRleE9mKHRvLnBhdGgpICE9PSAtMSkgewogICAgICAgICAgICAgIC8vIGluIHRoZSBmcmVlIGxvZ2luIHdoaXRlbGlzdCwgZ28gZGlyZWN0bHkKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gb3RoZXIgcGFnZXMgdGhhdCBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyBhcmUgcmVkaXJlY3RlZCB0byB0aGUgbG9naW4gcGFnZS4KICAgICAgICAgICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTUsIDI5XSwgWzMzLCAzOV1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIC8vIGZpbmlzaCBwcm9ncmVzcyBiYXIKICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTs="},{"version":3,"sources":["/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/bonus-tool-admin/plugins/core/permission.js"],"names":["router","generateRoutes","store","NProgress","getToken","configure","showSpinner","whiteList","beforeEach","to","from","next","start","document","title","meta","state","settings","hasToken","path","done","hasAppDataLoaded","getters","loading","service","text","dispatch","menuList","accessRoutes","addRoutes","commit","replace","close","console","error","confirm","confirmButtonText","cancelButtonText","closeOnClickModal","closeOnPressEscape","showClose","type","indexOf","afterEach"],"mappings":"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","sourcesContent":["import router, { generateRoutes } from '../../router';\nimport store from '../../store';\nimport { MessageBox, Loading } from 'element-ui';\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\nimport { getToken } from '../../../../plugins/core/auth'; // get token from cookie\n\nNProgress.configure({ showSpinner: false }); // NProgress Configuration\n\nconst whiteList = ['/login', '/sso/auth']; // no redirect whitelist\n\nrouter.beforeEach(async (to, from, next) => {\n  // start progress bar\n  NProgress.start();\n\n  // set page title\n  document.title = to.meta.title || store.state.settings.title;\n\n  // determine whether the user has logged in\n  const hasToken = getToken();\n  if (hasToken) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' });\n      NProgress.done(); // hack: https://github.com/PanJiaChen/vue-element-admin/pull/2939\n    } else {\n      // determine whether the user has obtained his permission roles through getInfo\n      // const hasRoles = store.getters.roles && store.getters.roles.length > 0;\n      const hasAppDataLoaded = !!store.getters.hasAppDataLoaded;\n      if (hasAppDataLoaded) {\n        next();\n      } else {\n        let loading = Loading.service({\n          text: '努力加载数据中...'\n        });\n        try {\n          // get user info\n          // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\n          await store.dispatch('user/getInfo'); // 加载用户信息\n\n          // todo await store.dispatch('dict/ajaxGetData'); // 加载数据字典\n\n          let { menuList } = await store.dispatch('auth/getAuthData'); // 获取权限数据\n\n          // generate accessible routes map based on roles\n          // const accessRoutes = await store.dispatch(\n          //   'auth/generateRoutes',\n          //   menuList\n          // );\n          const accessRoutes = generateRoutes(menuList); // 生成允许访问的路由\n          // dynamically add accessible routes\n          router.addRoutes(accessRoutes);\n\n          store.commit('app/FINISH_DATA_LOAD'); // 数据加载完成\n\n          // hack method to ensure that addRoutes is complete\n          // set the replace: true, so the navigation will not leave a history record\n          next({ ...to, replace: true });\n          loading.close();\n        } catch (error) {\n          loading.close();\n          // remove token and go to login page to re-login\n          console.error(error);\n          try {\n            await MessageBox.confirm(\n              '当前数据加载不稳定，请您重新登录或重新加载',\n              '错误',\n              {\n                confirmButtonText: '重新加载数据',\n                cancelButtonText: '登录页面',\n                closeOnClickModal: false,\n                closeOnPressEscape: false,\n                showClose: false,\n                type: 'error'\n              }\n            );\n            // 重新加载数据\n            next({\n              ...to,\n              replace: true\n            });\n          } catch (e) {\n            console.error(e);\n            // 登出\n            await store.dispatch('user/resetToken');\n            next(`/login?redirect=${to.path}`);\n            NProgress.done();\n          }\n        }\n      }\n    }\n  } else {\n    /* has no token*/\n\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next();\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      next(`/login?redirect=${to.path}`);\n      NProgress.done();\n    }\n  }\n});\n\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done();\n});\n"]}]}