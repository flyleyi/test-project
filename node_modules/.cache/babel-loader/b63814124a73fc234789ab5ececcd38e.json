{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/homework-admin/api/upload/index.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/homework-admin/api/upload/index.js","mtime":1646020538155},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC9wcmFjdGljZS9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnQC9wbHVnaW5zL2F4aW9zJzsKaW1wb3J0IGF4aW9zMiBmcm9tICdheGlvcyc7CmltcG9ydCB1cmwgZnJvbSAndXJsJzsKZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZFN1Y2Nlc3NMaXN0KCkgewogIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogIHJldHVybiBheGlvcyh7CiAgICB1cmw6ICcvaG9tZXdvcmsvdXBsb2FkL3N1Y2Nlc3MnLAogICAgbWV0aG9kOiAnR0VUJywKICAgIHBhcmFtczogcGFyYW1zCiAgfSwgJ2hsLWhvbWV3b3JrJyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZEZhaWxlZExpc3QoKSB7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgcmV0dXJuIGF4aW9zKHsKICAgIHVybDogJy9ob21ld29yay91cGxvYWQvZmFpbCcsCiAgICBtZXRob2Q6ICdHRVQnLAogICAgcGFyYW1zOiBwYXJhbXMKICB9LCAnaGwtaG9tZXdvcmsnKTsKfQpleHBvcnQgZnVuY3Rpb24gdXBsb2FkTGlzdCgpIHsKICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICByZXR1cm4gYXhpb3MoewogICAgdXJsOiAnL2hvbWV3b3JrL3VwbG9hZC9wYWdlJywKICAgIG1ldGhvZDogJ0dFVCcsCiAgICBwYXJhbXM6IHBhcmFtcwogIH0sICdobC1ob21ld29yaycpOwp9CmV4cG9ydCBmdW5jdGlvbiBmaW5pc2hVcGxvYWQoKSB7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgcmV0dXJuIGF4aW9zKHsKICAgIHVybDogJy9ob21ld29yay91cGxvYWQvZmluaXNoJywKICAgIG1ldGhvZDogJ1BPU1QnLAogICAgZGF0YTogcGFyYW1zCiAgfSwgJ2hsLWhvbWV3b3JrJyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFVwbG9hZFBhcmFtZXRlcigpIHsKICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICByZXR1cm4gYXhpb3MoewogICAgdXJsOiAnL2hvbWV3b3JrL3VwbG9hZC9wZXJTaWduJywKICAgIG1ldGhvZDogJ1BPU1QnLAogICAgZGF0YTogcGFyYW1zCiAgfSwgJ2hsLWhvbWV3b3JrJyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHVwbG9hZFBpYyhfeCwgX3gyKSB7CiAgcmV0dXJuIF91cGxvYWRQaWMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3VwbG9hZFBpYygpIHsKICBfdXBsb2FkUGljID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShmaWxlLCBkYXRhKSB7CiAgICB2YXIgZm9ybURhdGEsIGtleSwgcmVzLCBmaWxlVXJsOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygncmVzND09PT09JywgcmVzLmRhdGEpOwogICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBrZXkgPSBkYXRhLmRpciArIGRhdGEuZmlsZU5hbWUgKyBob21ld29ya0dldEZpbGVTdWZmaXgoZmlsZS5uYW1lKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCBrZXkpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3BvbGljeScsIGRhdGEucG9saWN5KTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdPU1NBY2Nlc3NLZXlJZCcsIGRhdGEuT1NTQWNjZXNzS2V5SWQpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3N1Y2Nlc3NfYWN0aW9uX3N0YXR1cycsICcyMDAnKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdzaWduYXR1cmUnLCBkYXRhLlNpZ25hdHVyZSk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBheGlvczIoewogICAgICAgICAgICAgIHVybDogZGF0YS5ob3N0LAogICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGhvbWV3b3JrR2V0RmlsZVN1ZmZpeChmaWxlLm5hbWUpOwogICAgICAgICAgICBmaWxlVXJsID0gZGF0YS5kaXIgKyBkYXRhLmZpbGVOYW1lICsgaG9tZXdvcmtHZXRGaWxlU3VmZml4KGZpbGUubmFtZSk7CiAgICAgICAgICAgIHJlcy5kYXRhID0gdXJsLnJlc29sdmUoZGF0YS5ob3N0LCBmaWxlVXJsKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlczM9PT09PScsIHJlcy5kYXRhKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX3VwbG9hZFBpYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBob21ld29ya0dldEZpbGVTdWZmaXgoZmlsZW5hbWUpIHsKICB2YXIgcG9zID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTsKICB2YXIgc3VmZml4ID0gJyc7CgogIGlmIChwb3MgIT0gLTEpIHsKICAgIHN1ZmZpeCA9IGZpbGVuYW1lLnN1YnN0cmluZyhwb3MpOwogIH0KCiAgcmV0dXJuIHN1ZmZpeDsKfSAvLyB1cGxvYWRQaWMoCi8vICAgICB7Ci8vICAgICAgIGtleToga2V5LAovLyAgICAgICBwb2xpY3k6IHJlcy5kYXRhLnBvbGljeSwKLy8gICAgICAgT1NTQWNjZXNzS2V5SWQ6IHJlcy5kYXRhLk9TU0FjY2Vzc0tleUlkLAovLyAgICAgICBzdWNjZXNzX2FjdGlvbl9zdGF0dXM6IDIwMCwKLy8gICAgICAgc2lnbmF0dXJlOiByZXMuZGF0YS5TaWduYXR1cmUsCi8vICAgICAgIGZpbGU6IGZpbGUuZmlsZQovLyAgICAgfSwKLy8gICAgIHJlcy5kYXRhLmhvc3QKLy8gICApLnRoZW4ocmVzID0+IHsKLy8gICAgIGlmIChyZXMuc3VjY2VzcykgewovLyAgICAgfQovLyAgIH0pOwovLyBjb25zdCBhY3Rpb25zID0gewovLyAgIGdldFVwbG9hZFBhcmFtZXRlcihwYXJhbXMgPSB7fSkgewovLyAgICAgcmV0dXJuIGF4aW9zKHsKLy8gICAgICAgdXJsOiAnaHR0cDovLzEwLjMwLjUuNTI6ODEwMS9ob21ld29yay91cGxvYWQvcGVyU2lnbicsCi8vICAgICAgIG1ldGhvZDogJ1BPU1QnLAovLyAgICAgICBkYXRhOiBwYXJhbXMKLy8gICAgIH0pOwovLyAgIH0KLy8gfTsKLy8gZXhwb3J0IGRlZmF1bHQgYWN0aW9uczs="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/homework-admin/api/upload/index.js"],"names":["axios","axios2","url","uploadSuccessList","params","method","uploadFailedList","uploadList","finishUpload","data","getUploadParameter","uploadPic","file","formData","FormData","key","dir","fileName","homeworkGetFileSuffix","name","append","policy","OSSAccessKeyId","Signature","host","res","fileUrl","resolve","console","log","filename","pos","lastIndexOf","suffix","substring"],"mappings":"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","sourcesContent":["import axios from '@/plugins/axios';\nimport axios2 from 'axios';\nimport url from 'url';\n\nexport function uploadSuccessList(params = {}) {\n  return axios(\n    {\n      url: '/homework/upload/success',\n      method: 'GET',\n      params: params\n    },\n    'hl-homework'\n  );\n}\n\nexport function uploadFailedList(params = {}) {\n  return axios(\n    {\n      url: '/homework/upload/fail',\n      method: 'GET',\n      params: params\n    },\n    'hl-homework'\n  );\n}\n\nexport function uploadList(params = {}) {\n  return axios(\n    {\n      url: '/homework/upload/page',\n      method: 'GET',\n      params: params\n    },\n    'hl-homework'\n  );\n}\n\nexport function finishUpload(params = {}) {\n  return axios(\n    {\n      url: '/homework/upload/finish',\n      method: 'POST',\n      data: params\n    },\n    'hl-homework'\n  );\n}\n\nexport function getUploadParameter(params = {}) {\n  return axios(\n    {\n      url: '/homework/upload/perSign',\n      method: 'POST',\n      data: params\n    },\n    'hl-homework'\n  );\n}\n\nexport async function uploadPic(file, data) {\n  //   console.log('res4=====', res.data);\n\n  const formData = new FormData();\n  let key = data.dir + data.fileName + homeworkGetFileSuffix(file.name);\n  formData.append('key', key);\n  formData.append('policy', data.policy);\n  formData.append('OSSAccessKeyId', data.OSSAccessKeyId);\n  formData.append('success_action_status', '200');\n  formData.append('signature', data.Signature);\n  formData.append('file', file);\n\n  const res = await axios2({\n    url: data.host,\n    method: 'POST',\n    data: formData\n  });\n\n  homeworkGetFileSuffix(file.name);\n  const fileUrl = data.dir + data.fileName + homeworkGetFileSuffix(file.name);\n  res.data = url.resolve(data.host, fileUrl);\n  console.log('res3=====', res.data);\n  return res;\n}\n\nfunction homeworkGetFileSuffix(filename) {\n  let pos = filename.lastIndexOf('.');\n  let suffix = '';\n  if (pos != -1) {\n    suffix = filename.substring(pos);\n  }\n  return suffix;\n}\n// uploadPic(\n//     {\n//       key: key,\n//       policy: res.data.policy,\n//       OSSAccessKeyId: res.data.OSSAccessKeyId,\n//       success_action_status: 200,\n//       signature: res.data.Signature,\n//       file: file.file\n//     },\n//     res.data.host\n//   ).then(res => {\n//     if (res.success) {\n\n//     }\n//   });\n\n// const actions = {\n//   getUploadParameter(params = {}) {\n//     return axios({\n//       url: 'http://10.30.5.52:8101/homework/upload/perSign',\n//       method: 'POST',\n//       data: params\n//     });\n//   }\n// };\n\n// export default actions;\n"]}]}