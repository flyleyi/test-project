{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/plugins/common/utils.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/plugins/common/utils.js","mtime":1627979214410},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL25vdGlmeS9zdHlsZSI7CmltcG9ydCBfTm90aWZ5IGZyb20gInZhbnQvZXMvbm90aWZ5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vcm91dGVyL2luZGV4LmpzJzsKVnVlLnVzZShfTm90aWZ5KTsKZXhwb3J0IGZ1bmN0aW9uIHRvUHJldmlldyhpdGVtKSB7CiAgaWYgKGl0ZW0udHlwZSA9PSAncGRmJyB8fCBpdGVtLnR5cGUgPT09ICdQREYnKSB7CiAgICB2YXIgdXJscyA9ICIvcGRmLXByZXZpZXcvd2ViL3ZpZXdlci5odG1sP2ZpbGU9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50RmlsZShpdGVtKSk7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdjb3Vyc2VSZXNlYXJjaFByZXZpZXcnLAogICAgICBxdWVyeTogewogICAgICAgIHVybDogdXJscywKICAgICAgICB0aXRsZTogaXRlbS5uYW1lCiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSBpZiAoWydkb2MnLCAnZG9jeCcsICd4bHMnLCAneGxzeCcsICdwcHQnLCAncHB0eCddLmluY2x1ZGVzKGl0ZW0udHlwZS50b0xvd2VyQ2FzZSgpKSkgewogICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICBjb25zb2xlLmxvZygndXNlckFnZW50JywgdXNlckFnZW50KTsKICAgIHZhciBpc0FuZHJvaWQgPSB1c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCcpID4gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoJ0FkcicpID4gLTE7IC8vYW5kcm9pZOe7iOerrwoKICAgIHZhciBpc2lPUyA9ICEhdXNlckFnZW50Lm1hdGNoKC9cKGlbXjtdKzsoIFU7KT8gQ1BVLitNYWMgT1MgWC8pOyAvL2lvc+e7iOerrwoKICAgIGlmIChpc0FuZHJvaWQpIHsKICAgICAgX05vdGlmeSh7CiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgIG1lc3NhZ2U6ICfogIHluIjmgqjlpb3vvIzpkonpkonnp7vliqjnq6/nm67liY3kuI3mlK/mjIHlnKjnur/pooTop4h3b3Jk44CBcHB05ZKMZXhjZWzmoLzlvI/mlofku7bvvIzor7fliLDnlLXohJHnq6/mn6XnnIvvvIEnCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93Lm9wZW4oImh0dHBzOi8vdmlldy5vZmZpY2VhcHBzLmxpdmUuY29tL29wL3ZpZXcuYXNweD9zcmM9Ii5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50RmlsZShpdGVtKSkpOwogICAgfQogIH0KfQpleHBvcnQgZnVuY3Rpb24gZW5jb2RlVVJJQ29tcG9uZW50RmlsZShpdGVtKSB7CiAgdHJ5IHsKICAgIGlmIChpdGVtLnVybCAmJiBpdGVtLm5hbWUpIHsKICAgICAgdmFyIHVybCA9IGl0ZW0udXJsLnN1YnN0cmluZygwLCBpdGVtLnVybC5pbmRleE9mKGl0ZW0ubmFtZSkpOwogICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHVybCArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLm5hbWUpKTsKICAgIH0gZWxzZSBpZiAoaXRlbS51cmwpIHsKICAgICAgdmFyIHVybDEgPSBpdGVtLnVybC5zdWJzdHJpbmcoMCwgaXRlbS51cmwubGFzdEluZGV4T2YoJy8nKSArIDEpOwogICAgICB2YXIgZmlsZVVybCA9IGl0ZW0udXJsLnN1YnN0cmluZyhpdGVtLnVybC5sYXN0SW5kZXhPZignLycpICsgMSwgaXRlbS51cmwubGVuZ3RoKTsKICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh1cmwxICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICB9IGNhdGNoIChlcnJvcikgewogICAgcmV0dXJuICcnOwogIH0KfQ=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/teaching-points-h5/plugins/common/utils.js"],"names":["Vue","router","use","toPreview","item","type","urls","encodeURIComponentFile","push","name","query","url","title","includes","toLowerCase","userAgent","navigator","console","log","isAndroid","indexOf","isiOS","match","message","window","open","substring","encodeURIComponent","url1","lastIndexOf","fileUrl","length","error"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AAEAD,GAAG,CAACE,GAAJ;AACA,OAAO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,MAAIA,IAAI,CAACC,IAAL,IAAa,KAAb,IAAsBD,IAAI,CAACC,IAAL,KAAc,KAAxC,EAA+C;AAC7C,QAAIC,IAAI,+CAAwCC,sBAAsB,CACpEH,IADoE,CAA9D,CAAR;AAGAH,IAAAA,MAAM,CAACO,IAAP,CAAY;AACVC,MAAAA,IAAI,EAAE,uBADI;AAEVC,MAAAA,KAAK,EAAE;AACLC,QAAAA,GAAG,EAAEL,IADA;AAELM,QAAAA,KAAK,EAAER,IAAI,CAACK;AAFP;AAFG,KAAZ;AAOD,GAXD,MAWO,IACL,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,MAAvB,EAA+B,KAA/B,EAAsC,MAAtC,EAA8CI,QAA9C,CACET,IAAI,CAACC,IAAL,CAAUS,WAAV,EADF,CADK,EAIL;AACA,QAAIC,SAAS,GAAGC,SAAS,CAACD,SAA1B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,SAAzB;AACA,QAAII,SAAS,GACXJ,SAAS,CAACK,OAAV,CAAkB,SAAlB,IAA+B,CAAC,CAAhC,IAAqCL,SAAS,CAACK,OAAV,CAAkB,KAAlB,IAA2B,CAAC,CADnE,CAHA,CAIsE;;AACtE,QAAIC,KAAK,GAAG,CAAC,CAACN,SAAS,CAACO,KAAV,CAAgB,+BAAhB,CAAd,CALA,CAKgE;;AAChE,QAAIH,SAAJ,EAAe;AACb,cAAO;AACLd,QAAAA,IAAI,EAAE,SADD;AAELkB,QAAAA,OAAO,EACL;AAHG,OAAP;AAKD,KAND,MAMO;AACLC,MAAAA,MAAM,CAACC,IAAP,6DACuDlB,sBAAsB,CACzEH,IADyE,CAD7E;AAKD;AACF;AACF;AAED,OAAO,SAASG,sBAAT,CAAgCH,IAAhC,EAAsC;AAC3C,MAAI;AACF,QAAIA,IAAI,CAACO,GAAL,IAAYP,IAAI,CAACK,IAArB,EAA2B;AACzB,UAAIE,GAAG,GAAGP,IAAI,CAACO,GAAL,CAASe,SAAT,CAAmB,CAAnB,EAAsBtB,IAAI,CAACO,GAAL,CAASS,OAAT,CAAiBhB,IAAI,CAACK,IAAtB,CAAtB,CAAV;AACA,aAAOkB,kBAAkB,CAAChB,GAAG,GAAGgB,kBAAkB,CAACvB,IAAI,CAACK,IAAN,CAAzB,CAAzB;AACD,KAHD,MAGO,IAAIL,IAAI,CAACO,GAAT,EAAc;AACnB,UAAIiB,IAAI,GAAGxB,IAAI,CAACO,GAAL,CAASe,SAAT,CAAmB,CAAnB,EAAsBtB,IAAI,CAACO,GAAL,CAASkB,WAAT,CAAqB,GAArB,IAA4B,CAAlD,CAAX;AACA,UAAIC,OAAO,GAAG1B,IAAI,CAACO,GAAL,CAASe,SAAT,CACZtB,IAAI,CAACO,GAAL,CAASkB,WAAT,CAAqB,GAArB,IAA4B,CADhB,EAEZzB,IAAI,CAACO,GAAL,CAASoB,MAFG,CAAd;AAIA,aAAOJ,kBAAkB,CAACC,IAAI,GAAGD,kBAAkB,CAACG,OAAD,CAA1B,CAAzB;AACD,KAPM,MAOA;AACL,aAAO,EAAP;AACD;AACF,GAdD,CAcE,OAAOE,KAAP,EAAc;AACd,WAAO,EAAP;AACD;AACF","sourcesContent":["import Vue from 'vue';\r\nimport router from '../../router/index.js';\r\nimport { Notify } from 'vant';\r\nVue.use(Notify);\r\nexport function toPreview(item) {\r\n  if (item.type == 'pdf' || item.type === 'PDF') {\r\n    let urls = `/pdf-preview/web/viewer.html?file=${encodeURIComponentFile(\r\n      item\r\n    )}`;\r\n    router.push({\r\n      name: 'courseResearchPreview',\r\n      query: {\r\n        url: urls,\r\n        title: item.name\r\n      }\r\n    });\r\n  } else if (\r\n    ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx'].includes(\r\n      item.type.toLowerCase()\r\n    )\r\n  ) {\r\n    var userAgent = navigator.userAgent;\r\n    console.log('userAgent', userAgent);\r\n    var isAndroid =\r\n      userAgent.indexOf('Android') > -1 || userAgent.indexOf('Adr') > -1; //android终端\r\n    var isiOS = !!userAgent.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\r\n    if (isAndroid) {\r\n      Notify({\r\n        type: 'warning',\r\n        message:\r\n          '老师您好，钉钉移动端目前不支持在线预览word、ppt和excel格式文件，请到电脑端查看！'\r\n      });\r\n    } else {\r\n      window.open(\r\n        `https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponentFile(\r\n          item\r\n        )}`\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport function encodeURIComponentFile(item) {\r\n  try {\r\n    if (item.url && item.name) {\r\n      let url = item.url.substring(0, item.url.indexOf(item.name));\r\n      return encodeURIComponent(url + encodeURIComponent(item.name));\r\n    } else if (item.url) {\r\n      let url1 = item.url.substring(0, item.url.lastIndexOf('/') + 1);\r\n      let fileUrl = item.url.substring(\r\n        item.url.lastIndexOf('/') + 1,\r\n        item.url.length\r\n      );\r\n      return encodeURIComponent(url1 + encodeURIComponent(fileUrl));\r\n    } else {\r\n      return '';\r\n    }\r\n  } catch (error) {\r\n    return '';\r\n  }\r\n}\r\n"]}]}