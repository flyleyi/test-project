{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serve/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/executive-serve/views/Home.vue","mtime":1627979214295},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9naW4sIGdldEF1dGggYXMgX2dldEF1dGgsIGdldFBsYXRlTGlzdCBhcyBfZ2V0UGxhdGVMaXN0IH0gZnJvbSAnLi8uLi9hcGkvdXNlcic7CmltcG9ydCBjb25maWcgZnJvbSAnLi8uLi9jb25maWcnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGF0ZUlkOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHN0YWZmQ29kZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnN0YWZmQ29kZTsKICAgIHRoaXMucGxhdGVJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBsYXRlSWQgfHwgbnVsbDsKCiAgICBpZiAodGhpcy5wbGF0ZUlkKSB7CiAgICAgIHRoaXMuZ2V0QXV0aCgpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHVzZXJuYW1lOwoKICAgICAgaWYgKGNvbmZpZy5OT0RFX0VOViA9PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB1c2VybmFtZSA9IHN0YWZmQ29kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1c2VybmFtZSA9IHN0YWZmQ29kZSBeIDEwMDAwMDAwMDE7CiAgICAgIH0KCiAgICAgIGxvZ2luKHVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5nZXRBdXRoKCk7IC8vIHRoaXMuZ2V0UGxhdGVMaXN0KCkKICAgICAgICAvLyAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8gICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YSB8fCBbXTsKICAgICAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BsYXRlTGlzdCcsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgICAvLyAgICAgdGhpcy5nZXRBdXRoKCk7CiAgICAgICAgLy8gICB9KQogICAgICAgIC8vICAgLmNhdGNoKGUgPT4gewogICAgICAgIC8vICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGxhdGVMaXN0JywgW10pOwogICAgICAgIC8vICAgfSk7CgogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsICcnKTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKCiAgICAgICAgX3RoaXMud2FybmluZygn5pqC5pyq5byA6YCa5p2D6ZmQJyk7CiAgICAgIH0pOwogICAgfSAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeSh1c2VySW5mbykpOwogICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgLy8gICBwYXRoOiAnL2ZpbGwnCiAgICAvLyB9KTsKCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQbGF0ZUxpc3Q6IGZ1bmN0aW9uIGdldFBsYXRlTGlzdCgpIHsKICAgICAgcmV0dXJuIF9nZXRQbGF0ZUxpc3QoKTsKICAgIH0sCiAgICBnZXRBdXRoOiBmdW5jdGlvbiBnZXRBdXRoKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIGxldCBwbGF0ZUlkID0gbnVsbDsKICAgICAgLy8gaWYgKHRoaXMucGxhdGVJZCkgewogICAgICAvLyAgIHBsYXRlSWQgPSB0aGlzLnBsYXRlSWQ7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgbGV0IHBsYXRlTGlzdCA9CiAgICAgIC8vICAgICAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXRlTGlzdCcpICYmCiAgICAgIC8vICAgICAgIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXRlTGlzdCcpKSkgfHwKICAgICAgLy8gICAgIFtdOwogICAgICAvLyAgIHBsYXRlSWQgPSAocGxhdGVMaXN0WzBdICYmIHBsYXRlTGlzdFswXS5pZCkgfHwgJyc7CiAgICAgIC8vIH0KICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BsYXRlSWQnLCBwbGF0ZUlkKTsKICAgICAgX2dldEF1dGgoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIHZhciByb2xlcyA9IGRhdGEucm9sZXM7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwoKICAgICAgICBfdGhpczIuZ2V0RGVmYXVsdFBhZ2UoKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGVmYXVsdFBhZ2U6IGZ1bmN0aW9uIGdldERlZmF1bHRQYWdlKCkgewogICAgICB2YXIgdXNlckluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKSAmJiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW5mbycpKSB8fCB7fTsKICAgICAgdmFyIHJvbGVzID0gdXNlckluZm8ucm9sZXMgfHwgW107CgogICAgICBpZiAocm9sZXMuaW5jbHVkZXMoJ+Whq+aKpeS6uicpKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgcGF0aDogJy9maWxsJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHJvbGVzLmluY2x1ZGVzKCflrqHmoLjkuronKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgIHBhdGg6ICcvY2hlY2snCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocm9sZXMuaW5jbHVkZXMoJ+WkhOeQhuS6uicpIHx8IHJvbGVzLmluY2x1ZGVzKCfnm5HnnaPkuronKSkgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgIHBhdGg6ICcvc3VwZXJ2aXNlJwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgd2FybmluZzogZnVuY3Rpb24gd2FybmluZyhtc2cpIHsKICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICd3YXJuaW5nJzsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogbXNnLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"home\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { login, getAuth, getPlateList } from './../api/user';\r\nimport config from './../config';\r\nexport default {\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      plateId: null\r\n    };\r\n  },\r\n  created() {\r\n    let staffCode = this.$route.query.staffCode;\r\n    this.plateId = this.$route.query.plateId || null;\r\n    if (this.plateId) {\r\n      this.getAuth();\r\n    } else {\r\n      let username;\r\n      if (config.NODE_ENV == 'production') {\r\n        username = staffCode;\r\n      } else {\r\n        username = staffCode ^ 1000000001;\r\n      }\r\n      login(username)\r\n        .then(res => {\r\n          this.getAuth();\r\n          // this.getPlateList()\r\n          //   .then(res => {\r\n          //     const data = res.data || [];\r\n          //     localStorage.setItem('plateList', JSON.stringify(data));\r\n          //     this.getAuth();\r\n          //   })\r\n          //   .catch(e => {\r\n          //     localStorage.setItem('plateList', []);\r\n          //   });\r\n        })\r\n        .catch(e => {\r\n          localStorage.setItem('userInfo', '');\r\n          console.log(e);\r\n          this.warning('暂未开通权限');\r\n        });\r\n    }\r\n\r\n    // localStorage.setItem('userInfo', JSON.stringify(userInfo));\r\n    // this.$router.replace({\r\n    //   path: '/fill'\r\n    // });\r\n  },\r\n  methods: {\r\n    getPlateList() {\r\n      return getPlateList();\r\n    },\r\n    getAuth() {\r\n      // let plateId = null;\r\n      // if (this.plateId) {\r\n      //   plateId = this.plateId;\r\n      // } else {\r\n      //   let plateList =\r\n      //     (localStorage.getItem('plateList') &&\r\n      //       JSON.parse(localStorage.getItem('plateList'))) ||\r\n      //     [];\r\n      //   plateId = (plateList[0] && plateList[0].id) || '';\r\n      // }\r\n      // localStorage.setItem('plateId', plateId);\r\n      getAuth().then(res => {\r\n        const { data } = res;\r\n        const { roles } = data;\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n        this.getDefaultPage();\r\n      });\r\n    },\r\n    getDefaultPage() {\r\n      const userInfo =\r\n        (localStorage.getItem('userInfo') &&\r\n          JSON.parse(localStorage.getItem('userInfo'))) ||\r\n        {};\r\n      const roles = userInfo.roles || [];\r\n      if (roles.includes('填报人')) {\r\n        this.$router.replace({\r\n          path: '/fill'\r\n        });\r\n      } else if (roles.includes('审核人')) {\r\n        this.$router.replace({\r\n          path: '/check'\r\n        });\r\n      } else if (roles.includes('处理人') || roles.includes('监督人')) {\r\n        this.$router.replace({\r\n          path: '/supervise'\r\n        });\r\n      }\r\n    },\r\n    warning(msg, type = 'warning') {\r\n      this.$message({\r\n        message: msg,\r\n        type: type,\r\n        showClose: true\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.home {\r\n  .triangletest {\r\n    .triangle(T);\r\n  }\r\n  .border {\r\n    position: relative;\r\n    width: 100px;\r\n    height: 100px;\r\n    .border(R, #0f0);\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/pages/executive-serve/views"}]}