{"remainingRequest":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/src/pages/jx-questionnaire-h5/views/Home.vue","mtime":1646020479970},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/yjy-projects/multi-project/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Z1eXVleWkvRGVza3RvcC95anktcHJvamVjdHMvbXVsdGktcHJvamVjdC9tdXRpbHdhcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7Ci8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHBhcnNpbmdUb2tlbiBhcyBfcGFyc2luZ1Rva2VuIH0gZnJvbSAnLi4vYXBpL3N1cnZleSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgndXNlcicsIFsnd2VjaGF0VXNlcklkJywgJ2NsYXNzSWQnLCAncm9sZSddKSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucGFyc2luZ1Rva2VuKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blsI/nqIvluo/ot7PovazmiYDluKbnmoR0b2tlbgogICAgZ2V0UXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdldFF1ZXJ5U3RyaW5nKHBhcmFtcykgewogICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKF58JiknICsgcGFyYW1zICsgJz0oW14mXSopKCZ8JCknLCAnaScpOyAvLyDop6PmnpB1cmzlnLDlnYAKCiAgICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTsKCiAgICAgIGlmIChyICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJbMl0pOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICAvLyDop6PmnpB0b2tlbgogICAgcGFyc2luZ1Rva2VuOiBmdW5jdGlvbiBwYXJzaW5nVG9rZW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFF1ZXJ5U3RyaW5nKCd0b2tlbicpOwoKICAgICAgaWYgKHRoaXMud2VjaGF0VXNlcklkKSB7CiAgICAgICAgaWYgKHRoaXMucm9sZSA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICcvc3VydmV5LXRlYWNoZXInCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAnL3N1cnZleS1wYXJlbnQnCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgX3BhcnNpbmdUb2tlbih0b2tlbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgIHdlY2hhdFVzZXJJZDogcmVzLmRhdGEud2VjaGF0VXNlcklkLAogICAgICAgICAgY2xhc3NJZDogcmVzLmRhdGEuY2xhc3NJZCwKICAgICAgICAgIHJvbGU6IHJlcy5kYXRhLnJvbGUsCiAgICAgICAgICAvLyAw5a626ZW/IDHnj63kuLvku7sKICAgICAgICAgIHN0dWRlbnRJZDogcmVzLmRhdGEuY2hpbGRJbmZvLnN0dWRlbnRJZCA/IHJlcy5kYXRhLmNoaWxkSW5mby5zdHVkZW50SWQgOiAnJwogICAgICAgIH07CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnd2VjaGF0VXNlcklkJywgb2JqLndlY2hhdFVzZXJJZCk7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY2xhc3NJZCcsIG9iai5jbGFzc0lkKTsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdyb2xlJywgb2JqLnJvbGUpOwogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3N0dWRlbnRJZCcsIG9iai5zdHVkZW50SWQpOwoKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCd1c2VyL1NBVkVfVVNFUklORk8nLCB7CiAgICAgICAgICB3ZWNoYXRVc2VySWQ6IHJlcy5kYXRhLndlY2hhdFVzZXJJZCwKICAgICAgICAgIGNsYXNzSWQ6IHJlcy5kYXRhLmNsYXNzSWQsCiAgICAgICAgICByb2xlOiByZXMuZGF0YS5yb2xlLAogICAgICAgICAgLy8gMOWutumVvyAx54+t5Li75Lu7CiAgICAgICAgICBzdHVkZW50SWQ6IHJlcy5kYXRhLnJvbGUgPyAnJyA6IHJlcy5kYXRhLmNoaWxkSW5mby5zdHVkZW50SWQKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG9iai5yb2xlID09IDEpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICcvc3VydmV5LXRlYWNoZXInCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgcGF0aDogJy9zdXJ2ZXktcGFyZW50JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMuJHRvYXN0KGVyci5tc2cpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"home\" id=\"launch-btn\"></div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { parsingToken } from '../api/survey';\nexport default {\n  name: 'Home',\n  components: {},\n  data() {\n    return {};\n  },\n  computed: {\n    // 选项列表\n    ...mapState('user', ['wechatUserId', 'classId', 'role'])\n  },\n  created() {\n    this.parsingToken();\n  },\n  methods: {\n    // 获取小程序跳转所带的token\n    getQueryString(params) {\n      var reg = new RegExp('(^|&)' + params + '=([^&]*)(&|$)', 'i'); // 解析url地址\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) {\n        return decodeURIComponent(r[2]);\n      }\n      return null;\n    },\n    // 解析token\n    parsingToken() {\n      let token = this.getQueryString('token');\n      if (this.wechatUserId) {\n        if (this.role == 1) {\n          this.$router.replace({\n            path: '/survey-teacher'\n          });\n        } else {\n          this.$router.replace({\n            path: '/survey-parent'\n          });\n        }\n        return;\n      }\n      parsingToken(token)\n        .then(res => {\n          let obj = {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.childInfo.studentId\n              ? res.data.childInfo.studentId\n              : ''\n          };\n          sessionStorage.setItem('wechatUserId', obj.wechatUserId);\n          sessionStorage.setItem('classId', obj.classId);\n          sessionStorage.setItem('role', obj.role);\n          sessionStorage.setItem('studentId', obj.studentId);\n          this.$store.commit('user/SAVE_USERINFO', {\n            wechatUserId: res.data.wechatUserId,\n            classId: res.data.classId,\n            role: res.data.role, // 0家长 1班主任\n            studentId: res.data.role ? '' : res.data.childInfo.studentId\n          });\n          if (obj.role == 1) {\n            this.$router.replace({\n              path: '/survey-teacher'\n            });\n          } else {\n            this.$router.replace({\n              path: '/survey-parent'\n            });\n          }\n        })\n        .catch(err => {\n          this.$toast(err.msg);\n        });\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.home {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n"],"sourceRoot":"src/pages/jx-questionnaire-h5/views"}]}