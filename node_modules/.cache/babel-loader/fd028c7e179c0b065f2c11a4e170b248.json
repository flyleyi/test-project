{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/core/sso.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/core/sso.js","mtime":1627979214416},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0IHVybCBmcm9tICd1cmwnOwppbXBvcnQgeyBzZXRUb2tlbiB9IGZyb20gJy4vYXV0aC5qcyc7IC8vIOWNleeCueeZu+W9lQovLyDlhaXlj6PlnLDlnYDmn6Xor6IKCnRyeSB7CiAgdmFyIHBhdGhSZWcgPSAvXC9zc29cL2F1dGgkLzsgLy8g56ym5ZCI5Y2V54K555m75b2V5o6I5p2D5Zyw5Z2ACgogIHZhciBkYXRhID0gdXJsLnBhcnNlKGxvY2F0aW9uLmhyZWYsIHRydWUpOwoKICBpZiAocGF0aFJlZy50ZXN0KGxvY2F0aW9uLnBhdGhuYW1lKSAmJiBkYXRhLnF1ZXJ5ICYmIGRhdGEucXVlcnkuQXV0aG9yaXphdGlvbikgewogICAgdmFyIHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YS5xdWVyeSk7CiAgICBkZWxldGUgcXVlcnkuQXV0aG9yaXphdGlvbjsKICAgIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggPSB1cmwuZm9ybWF0KHsKICAgICAgcXVlcnk6IHF1ZXJ5CiAgICB9KTsgLy8g5Yig6ZmkcXVlcnnlj4LmlbAKCiAgICBpZiAoZGF0YS5xdWVyeSAmJiBkYXRhLnF1ZXJ5LkF1dGhvcml6YXRpb24pIHNldFRva2VuKGRhdGEucXVlcnkuQXV0aG9yaXphdGlvbik7CiAgfQp9IGNhdGNoIChlcnJvcikgewogIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwp9"},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/plugins/core/sso.js"],"names":["url","setToken","pathReg","data","parse","location","href","test","pathname","query","Authorization","Object","assign","window","search","format","error","console"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SAASC,QAAT,QAAyB,WAAzB,C,CACA;AACA;;AACA,IAAI;AACF,MAAMC,OAAO,GAAG,cAAhB,CADE,CAEF;;AACA,MAAMC,IAAI,GAAGH,GAAG,CAACI,KAAJ,CAAUC,QAAQ,CAACC,IAAnB,EAAyB,IAAzB,CAAb;;AACA,MACEJ,OAAO,CAACK,IAAR,CAAaF,QAAQ,CAACG,QAAtB,KACAL,IAAI,CAACM,KADL,IAEAN,IAAI,CAACM,KAAL,CAAWC,aAHb,EAIE;AACA,QAAMD,KAAK,GAAGE,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,IAAI,CAACM,KAAvB,CAAd;AACA,WAAOA,KAAK,CAACC,aAAb;AACAG,IAAAA,MAAM,CAACR,QAAP,CAAgBS,MAAhB,GAAyBd,GAAG,CAACe,MAAJ,CAAW;AAClCN,MAAAA,KAAK,EAALA;AADkC,KAAX,CAAzB,CAHA,CAKI;;AACJ,QAAIN,IAAI,CAACM,KAAL,IAAcN,IAAI,CAACM,KAAL,CAAWC,aAA7B,EACET,QAAQ,CAACE,IAAI,CAACM,KAAL,CAAWC,aAAZ,CAAR;AACH;AACF,CAjBD,CAiBE,OAAOM,KAAP,EAAc;AACdC,EAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD","sourcesContent":["import url from 'url';\r\nimport { setToken } from './auth.js';\r\n// 单点登录\r\n// 入口地址查询\r\ntry {\r\n  const pathReg = /\\/sso\\/auth$/;\r\n  // 符合单点登录授权地址\r\n  const data = url.parse(location.href, true);\r\n  if (\r\n    pathReg.test(location.pathname) &&\r\n    data.query &&\r\n    data.query.Authorization\r\n  ) {\r\n    const query = Object.assign({}, data.query);\r\n    delete query.Authorization;\r\n    window.location.search = url.format({\r\n      query\r\n    }); // 删除query参数\r\n    if (data.query && data.query.Authorization)\r\n      setToken(data.query.Authorization);\r\n  }\r\n} catch (error) {\r\n  console.error(error);\r\n}\r\n"]}]}