{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/components/ImageUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/visitor-h5/views/verify-visitor/components/ImageUpload.vue","mtime":1645178321204},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBscnogZnJvbSAnbHJ6JzsKaW1wb3J0IHsgZ2V0VXBsb2FkIH0gZnJvbSAnQC9wYWdlcy92aXNpdG9yLWg1L2FwaS9teVZpc2l0b3InOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2ltYWdlLXVwbG9hZCcsCiAgcHJvcHM6IHsKICAgIGltYWdlU2hvd0xpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZGVkOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWxlTGlzdDogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5pbWFnZVNob3dMaXN0IHx8IFtdOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHt9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblJlYWQ6IGZ1bmN0aW9uIG9uUmVhZChmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDkuIrkvKDlm77niYfliLDlm77niYfmnI3liqHlmagKICAgICAgdGhpcy5hZGRlZCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuaW1hZ2VTaG93TGlzdC5sZW5ndGggPj0gNikgewogICAgICAgIHJldHVybiB0aGlzLiR0b2FzdCgn5pyA5aSa5Y+q6IO96YCJ5oupNuW8oOWbvueJhycpOwogICAgICB9CgogICAgICBpZiAoZmlsZS5maWxlLnNpemUgPiAxMDQ4NTc2MDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kdG9hc3QoJ+WbvueJh+mcgOWwj+S6jjEwME3vvIzor7fph43mlrDkuIrkvKAnKTsKICAgICAgfQoKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLiR0b2FzdC5sb2FkaW5nKHsKICAgICAgICBtZXNzYWdlOiAn5byA5aeL5Y6L57yp5LiK5LygJywKICAgICAgICBtYXNrOiB0cnVlCiAgICAgIH0pOwogICAgICBscnooZmlsZS5maWxlKS50aGVuKGZ1bmN0aW9uIChyc3QpIHsKICAgICAgICBnZXRVcGxvYWQocnN0LmZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICBfdGhpcy5hZGRlZCA9IHRydWU7CgogICAgICAgICAgICBfdGhpcy5maWxlTGlzdC5wdXNoKHJlcy5kYXRhKTsKCiAgICAgICAgICAgIF90aGlzLiRlbWl0KCdiYWNrVXJsRGF0YScsIF90aGlzLmZpbGVMaXN0KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgICBfdGhpcy4kdG9hc3QoJ+S4iuS8oOWksei0pScpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9hZGluZy5jbGVhcigpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9hZGluZy5jbGVhcigpOwoKICAgICAgICBfdGhpcy4kdG9hc3QoJ+WOi+e8qeWksei0pScpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxJbWc6IGZ1bmN0aW9uIGRlbEltZyhpbmRleCkgewogICAgICAvLyDliKDpmaTmjIflrprkuIvmoIfnmoTlm77niYflr7nosaEKICAgICAgaWYgKGlzTmFOKGluZGV4KSB8fCBpbmRleCA+PSB0aGlzLmltYWdlU2hvd0xpc3QubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLmZpbGVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuJGVtaXQoJ2JhY2tVcmxEYXRhJywgdGhpcy5maWxlTGlzdCk7CiAgICB9LAogICAgcHJldmlld0ltZzogZnVuY3Rpb24gcHJldmlld0ltZyhlLCBpdGVtKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gdGhpcy5zaG93ID0gdHJ1ZTsKCiAgICAgIHRoaXMuJGRkLmJpei51dGlsLnByZXZpZXdJbWFnZSh7CiAgICAgICAgdXJsczogW2l0ZW1dLAogICAgICAgIC8v5Zu+54mH5Zyw5Z2A5YiX6KGoCiAgICAgICAgY3VycmVudDogaXRlbSwKICAgICAgICAvL+W9k+WJjeaYvuekuueahOWbvueJh+mTvuaOpQogICAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkgewogICAgICAgICAgLyoqLwogICAgICAgIH0sCiAgICAgICAgb25GYWlsOiBmdW5jdGlvbiBvbkZhaWwoZXJyKSB7fQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ImageUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"upload\">\n    <div class=\"flex flex-w upload-list\">\n      <template v-for=\"(item, i) in fileList\">\n        <div class=\"upload-item\" :key=\"i\" v-if=\"i < 6\">\n          <img\n            :src=\"item\"\n            alt=\"图片\"\n            @click=\"previewImg($event, item)\"\n            class=\"van-uploader__preview-image\"\n          />\n          <div class=\"upload-close\" @click=\"delImg(i)\">\n            <img src=\"@/pages/visitor-h5/assets/images/my-visitor/delete.png\" />\n          </div>\n        </div>\n      </template>\n      <van-uploader\n        preview-image\n        :max-count=\"3\"\n        :accept=\"'image/*'\"\n        :after-read=\"onRead\"\n        v-if=\"imageShowList.length < 3\"\n      >\n        <img\n          src=\"@/pages/visitor-h5/assets/images/icon/pic_add4@2x.png\"\n          class=\"upload-add-image\"\n        />\n      </van-uploader>\n    </div>\n  </div>\n</template>\n<script>\nimport lrz from 'lrz';\nimport { getUpload } from '@/pages/visitor-h5/api/myVisitor';\nexport default {\n  name: 'image-upload',\n  props: {\n    imageShowList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      added: false\n    };\n  },\n  computed: {\n    fileList: {\n      get: function() {\n        return this.imageShowList || [];\n      },\n      set: function() {}\n    }\n  },\n  methods: {\n    onRead(file) {\n      // 上传图片到图片服务器\n      this.added = false;\n      if (this.imageShowList.length >= 6) {\n        return this.$toast('最多只能选择6张图片');\n      }\n      if (file.file.size > 104857600) {\n        return this.$toast('图片需小于100M，请重新上传');\n      }\n      const loading = this.$toast.loading({\n        message: '开始压缩上传',\n        mask: true\n      });\n      lrz(file.file)\n        .then(rst => {\n          getUpload(rst.formData)\n            .then(res => {\n              if (res.status == 200) {\n                this.added = true;\n                this.fileList.push(res.data);\n                this.$emit('backUrlData', this.fileList);\n              }\n            })\n            .catch(error => {\n              console.log(error);\n              this.$toast('上传失败');\n            })\n            .finally(() => {\n              loading.clear();\n            });\n        })\n        .catch(() => {\n          loading.clear();\n          this.$toast('压缩失败');\n        });\n    },\n    delImg(index) {\n      // 删除指定下标的图片对象\n      if (isNaN(index) || index >= this.imageShowList.length) {\n        return false;\n      }\n      this.fileList.splice(index, 1);\n      this.$emit('backUrlData', this.fileList);\n    },\n    previewImg(e, item) {\n      e.preventDefault();\n      // this.show = true;\n      this.$dd.biz.util.previewImage({\n        urls: [item], //图片地址列表\n        current: item, //当前显示的图片链接\n        onSuccess: function(result) {\n          /**/\n        },\n        onFail: function(err) {}\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.upload {\n  text-align: left;\n  .upload-title {\n    height: 20px;\n    font-size: 14px;\n    font-family: PingFang-SC-Medium, PingFang-SC;\n    font-weight: 500;\n    color: rgba(30, 30, 30, 1);\n    line-height: 20px;\n    margin: 0 0 10px 3px;\n  }\n  .upload-item {\n    width: calc((100% - 18px) / 3);\n    max-width: 105px;\n    height: 108px;\n    margin: 0 3px 6px;\n    position: relative;\n  }\n  .upload-close {\n    position: absolute;\n    top: -8px;\n    right: -8px;\n    width: 18px;\n    height: 18px;\n    // background: rgba(15, 15, 15, 0.36);\n    text-align: center;\n    line-height: 18px;\n    img {\n      width: 16px;\n      height: 16px;\n    }\n  }\n  .upload-add-image {\n    width: 108px;\n    height: 108px;\n  }\n  /deep/.van-uploader {\n    width: 108px;\n    height: 108px;\n    margin: 0 0 6px 3px;\n  }\n  /deep/.van-uploader__input {\n    width: 108px;\n    height: 108px;\n  }\n  /deep/.van-uploader__input-wrapper {\n    width: 108px;\n    height: 108px;\n  }\n  /deep/.van-uploader__preview-image {\n    width: 100%;\n    height: 108px;\n    border-radius: 0 !important;\n  }\n}\n.upload-list {\n  flex-wrap: wrap;\n}\n</style>\n"],"sourceRoot":"src/pages/visitor-h5/views/verify-visitor/components"}]}