{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/core/permission.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/core/permission.js","mtime":1627979214385},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX01lc3NhZ2VCb3gyIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL21lc3NhZ2UtYm94LmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2VCb3ggZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZS1ib3giOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3ByYWN0aWNlL211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9Mb2FkaW5nMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9sb2FkaW5nLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX0xvYWRpbmcgZnJvbSAiZWxlbWVudC11aS9saWIvbG9hZGluZyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvZnV5dWV5aS9EZXNrdG9wL3ByYWN0aWNlL211dGlsd2FwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHJvdXRlciwgeyBnZW5lcmF0ZVJvdXRlcyB9IGZyb20gJy4uLy4uL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi9zdG9yZSc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsgLy8gcHJvZ3Jlc3MgYmFyCgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCgppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJy4uLy4uLy4uLy4uL3BsdWdpbnMvY29yZS9hdXRoJzsgLy8gZ2V0IHRva2VuIGZyb20gY29va2llCgppbXBvcnQgeyBsb2FkQXJlYU1hcCB9IGZyb20gJy4uL2NvbW1vbi9hcmVhJzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyBOUHJvZ3Jlc3MgQ29uZmlndXJhdGlvbgoKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJywgJy9zc28vYXV0aCddOyAvLyBubyByZWRpcmVjdCB3aGl0ZWxpc3QKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIGhhc1Rva2VuLCBoYXNBcHBEYXRhTG9hZGVkLCBsb2FkaW5nLCBfeWllbGQkc3RvcmUkZGlzcGF0Y2gsIG1lbnVMaXN0LCBhY2Nlc3NSb3V0ZXM7CgogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8gc3RhcnQgcHJvZ3Jlc3MgYmFyCiAgICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpOyAvLyBzZXQgcGFnZSB0aXRsZQoKICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSB0by5tZXRhLnRpdGxlIHx8IHN0b3JlLnN0YXRlLnNldHRpbmdzLnRpdGxlOyAvLyBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgbG9nZ2VkIGluCgogICAgICAgICAgICBoYXNUb2tlbiA9IGdldFRva2VuKCk7CgogICAgICAgICAgICBpZiAoIWhhc1Rva2VuKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoISh0by5wYXRoID09PSAnL2xvZ2luJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gaWYgaXMgbG9nZ2VkIGluLCByZWRpcmVjdCB0byB0aGUgaG9tZSBwYWdlCiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsgLy8gaGFjazogaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWVsZW1lbnQtYWRtaW4vcHVsbC8yOTM5CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9idGFpbmVkIGhpcyBwZXJtaXNzaW9uIHJvbGVzIHRocm91Z2ggZ2V0SW5mbwogICAgICAgICAgICAvLyBjb25zdCBoYXNSb2xlcyA9IHN0b3JlLmdldHRlcnMucm9sZXMgJiYgc3RvcmUuZ2V0dGVycy5yb2xlcy5sZW5ndGggPiAwOwogICAgICAgICAgICBoYXNBcHBEYXRhTG9hZGVkID0gISFzdG9yZS5nZXR0ZXJzLmhhc0FwcERhdGFMb2FkZWQ7CgogICAgICAgICAgICBpZiAoIWhhc0FwcERhdGFMb2FkZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBsb2FkaW5nID0gX0xvYWRpbmcuc2VydmljZSh7CiAgICAgICAgICAgICAgdGV4dDogJ+WKquWKm+WKoOi9veaVsOaNruS4rS4uLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0SW5mbycpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdkaWN0L2FqYXhHZXREYXRhJyk7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2F1dGgvZ2V0QXV0aERhdGEnKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfeWllbGQkc3RvcmUkZGlzcGF0Y2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBtZW51TGlzdCA9IF95aWVsZCRzdG9yZSRkaXNwYXRjaC5tZW51TGlzdDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICByZXR1cm4gbG9hZEFyZWFNYXAoKTsKCiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAvLyDliqDovb3ooYzmlL/ljLrln5/nvJbnoIHmlbDmja4KICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYWNjZXNzaWJsZSByb3V0ZXMgbWFwIGJhc2VkIG9uIHJvbGVzCiAgICAgICAgICAgIC8vIGNvbnN0IGFjY2Vzc1JvdXRlcyA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKAogICAgICAgICAgICAvLyAgICdhdXRoL2dlbmVyYXRlUm91dGVzJywKICAgICAgICAgICAgLy8gICBtZW51TGlzdAogICAgICAgICAgICAvLyApOwogICAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBnZW5lcmF0ZVJvdXRlcyhtZW51TGlzdCk7IC8vIOeUn+aIkOWFgeiuuOiuv+mXrueahOi3r+eUsQogICAgICAgICAgICAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKCiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhcHAvRklOSVNIX0RBVEFfTE9BRCcpOyAvLyDmlbDmja7liqDovb3lrozmiJAKICAgICAgICAgICAgLy8gaGFjayBtZXRob2QgdG8gZW5zdXJlIHRoYXQgYWRkUm91dGVzIGlzIGNvbXBsZXRlCiAgICAgICAgICAgIC8vIHNldCB0aGUgcmVwbGFjZTogdHJ1ZSwgc28gdGhlIG5hdmlnYXRpb24gd2lsbCBub3QgbGVhdmUgYSBoaXN0b3J5IHJlY29yZAoKICAgICAgICAgICAgbmV4dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzMzsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxNSk7CiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsgLy8gcmVtb3ZlIHRva2VuIGFuZCBnbyB0byBsb2dpbiBwYWdlIHRvIHJlLWxvZ2luCgogICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM3OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgIHJldHVybiBfTWVzc2FnZUJveC5jb25maXJtKCflvZPliY3mlbDmja7liqDovb3kuI3nqLPlrprvvIzor7fmgqjph43mlrDnmbvlvZXmiJbph43mlrDliqDovb0nLCAn6ZSZ6K+vJywgewogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw5Yqg6L295pWw5o2uJywKICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn55m75b2V6aG16Z2iJywKICAgICAgICAgICAgICBjbG9zZU9uQ2xpY2tNb2RhbDogZmFsc2UsCiAgICAgICAgICAgICAgY2xvc2VPblByZXNzRXNjYXBlOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93Q2xvc2U6IGZhbHNlLAogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgLy8g6YeN5paw5Yqg6L295pWw5o2uCiAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1MDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQzOwogICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDM3KTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MSk7IC8vIOeZu+WHugoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ4OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRUb2tlbicpOwoKICAgICAgICAgIGNhc2UgNDg6CiAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CgogICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAvKiBoYXMgbm8gdG9rZW4qLwogICAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBvdGhlciBwYWdlcyB0aGF0IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIGFyZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBwYWdlLgogICAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgNTM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxNSwgMzNdLCBbMzcsIDQzXV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7CiAgLy8gZmluaXNoIHByb2dyZXNzIGJhcgogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/core/permission.js"],"names":["router","generateRoutes","store","NProgress","getToken","loadAreaMap","configure","showSpinner","whiteList","beforeEach","to","from","next","start","document","title","meta","state","settings","hasToken","path","done","hasAppDataLoaded","getters","loading","service","text","dispatch","menuList","accessRoutes","addRoutes","commit","replace","close","console","error","confirm","confirmButtonText","cancelButtonText","closeOnClickModal","closeOnPressEscape","showClose","type","indexOf","afterEach"],"mappings":"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","sourcesContent":["import router, { generateRoutes } from '../../router';\nimport store from '../../store';\nimport { MessageBox, Loading } from 'element-ui';\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\nimport { getToken } from '../../../../plugins/core/auth'; // get token from cookie\nimport { loadAreaMap } from '../common/area';\n\nNProgress.configure({ showSpinner: false }); // NProgress Configuration\n\nconst whiteList = ['/login', '/sso/auth']; // no redirect whitelist\n\nrouter.beforeEach(async (to, from, next) => {\n  // start progress bar\n  NProgress.start();\n\n  // set page title\n  document.title = to.meta.title || store.state.settings.title;\n\n  // determine whether the user has logged in\n  const hasToken = getToken();\n\n  if (hasToken) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' });\n      NProgress.done(); // hack: https://github.com/PanJiaChen/vue-element-admin/pull/2939\n    } else {\n      // determine whether the user has obtained his permission roles through getInfo\n      // const hasRoles = store.getters.roles && store.getters.roles.length > 0;\n      const hasAppDataLoaded = !!store.getters.hasAppDataLoaded;\n      if (hasAppDataLoaded) {\n        next();\n      } else {\n        let loading = Loading.service({\n          text: '努力加载数据中...'\n        });\n        try {\n          // get user info\n          // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\n          await store.dispatch('user/getInfo'); // 加载用户信息\n\n          await store.dispatch('dict/ajaxGetData'); // 加载数据字典\n\n          let { menuList } = await store.dispatch('auth/getAuthData'); // 获取权限数据\n\n          await loadAreaMap(); // 加载行政区域编码数据\n\n          // generate accessible routes map based on roles\n          // const accessRoutes = await store.dispatch(\n          //   'auth/generateRoutes',\n          //   menuList\n          // );\n          const accessRoutes = generateRoutes(menuList); // 生成允许访问的路由\n          // dynamically add accessible routes\n          router.addRoutes(accessRoutes);\n\n          store.commit('app/FINISH_DATA_LOAD'); // 数据加载完成\n\n          // hack method to ensure that addRoutes is complete\n          // set the replace: true, so the navigation will not leave a history record\n          next({ ...to, replace: true });\n          loading.close();\n        } catch (error) {\n          loading.close();\n          // remove token and go to login page to re-login\n          console.error(error);\n          try {\n            await MessageBox.confirm(\n              '当前数据加载不稳定，请您重新登录或重新加载',\n              '错误',\n              {\n                confirmButtonText: '重新加载数据',\n                cancelButtonText: '登录页面',\n                closeOnClickModal: false,\n                closeOnPressEscape: false,\n                showClose: false,\n                type: 'error'\n              }\n            );\n            // 重新加载数据\n            next({\n              ...to,\n              replace: true\n            });\n          } catch (e) {\n            console.error(e);\n            // 登出\n            await store.dispatch('user/resetToken');\n            next(`/login?redirect=${to.path}`);\n            NProgress.done();\n          }\n        }\n      }\n    }\n  } else {\n    /* has no token*/\n\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next();\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      next(`/login?redirect=${to.path}`);\n      NProgress.done();\n    }\n  }\n});\n\nrouter.afterEach(() => {\n  // finish progress bar\n  NProgress.done();\n});\n"]}]}