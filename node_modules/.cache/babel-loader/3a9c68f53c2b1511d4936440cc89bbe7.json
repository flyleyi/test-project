{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/store/modules/user.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/store/modules/user.js","mtime":1627979214287},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBsb2dpbiwgbG9nb3V0IH0gZnJvbSAnLi4vLi4vYXBpL3VzZXIvaW5kZXgnOwppbXBvcnQgeyBnZXRUb2tlbiwgZ2V0VXNlck5hbWUsIHNldFRva2VuLCBnZXRVc2VySWQsIHJlbW92ZVRva2VuIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGx1Z2lucy9jb3JlL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJy4uLy4uL3JvdXRlcic7CmltcG9ydCBhdmF0YXJHaWYgZnJvbSAnLi4vLi4vYXNzZXRzL2ltYWdlcy9hdmF0YXIuZ2lmJzsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogZ2V0VXNlck5hbWUoKSwKICAgIHVzZXJJZDogZ2V0VXNlcklkKCksCiAgICBhdmF0YXI6IGF2YXRhckdpZiwKICAgIHN0YWZmQ29kZTogJycsCiAgICAvLyDlt6Xlj7cKICAgIHN0YWZmTmFtZTogJycgLy8g55So5oi35ZCNCgogIH07Cn07Cgp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfVVNFUl9JRDogZnVuY3Rpb24gU0VUX1VTRVJfSUQoc3RhdGUsIHVzZXJJZCkgewogICAgc3RhdGUudXNlcklkID0gdXNlcklkOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfU1RBRkZfQ09ERTogZnVuY3Rpb24gU0VUX1NUQUZGX0NPREUoc3RhdGUsIHN0YWZmQ29kZSkgewogICAgc3RhdGUuc3RhZmZDb2RlID0gc3RhZmZDb2RlOwogIH0sCiAgU0VUX1NUQUZGX05BTUU6IGZ1bmN0aW9uIFNFVF9TVEFGRl9OQU1FKHN0YXRlLCBzdGFmZk5hbWUpIHsKICAgIHN0YXRlLnN0YWZmTmFtZSA9IHN0YWZmTmFtZTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oX3JlZiwgdG9rZW4pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgdG9rZW4pOwogIH0sCiAgc2V0TmFtZTogZnVuY3Rpb24gc2V0TmFtZShfcmVmMiwgbmFtZSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICB9LAogIHNldFVzZXJJZDogZnVuY3Rpb24gc2V0VXNlcklkKF9yZWYzLCBpZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIGNvbW1pdCgnU0VUX1VTRVJfSUQnLCBpZCk7CiAgfSwKICAvLyBsb2dpbih7IGNvbW1pdCB9LCB1c2VySW5mbykgewogIC8vICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHVzZXJJbmZvOwogIC8vICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAvLyAgICAgbG9naW4oeyB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLCBwYXNzd29yZDogcGFzc3dvcmQgfSkKICAvLyAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgLy8gICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlOwogIC8vICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBgQmVhcmVyZSAke2RhdGEudG9rZW59YCk7CiAgLy8gICAgICAgICBzZXRUb2tlbihgQmVhcmVyZSAke2RhdGEudG9rZW59YCk7CiAgLy8gICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogIC8vICAgICAgICAgICByZXNvbHZlKCk7CiAgLy8gICAgICAgICB9LCAyMDAwKTsKICAvLyAgICAgICAgIHJlc29sdmUoKTsKICAvLyAgICAgICB9KQogIC8vICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgLy8gICAgICAgICByZWplY3QoZXJyb3IpOwogIC8vICAgICAgIH0pOwogIC8vICAgfSk7CiAgLy8gfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgLy8gZ2V0SW5mbyh7IGNvbW1pdCwgc3RhdGUgfSkgewogIC8vICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAvLyAgICAgZ2V0SW5mbyhzdGF0ZS50b2tlbikKICAvLyAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgLy8gICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlOwogIC8vICAgICAgICAgaWYgKCFkYXRhKSB7CiAgLy8gICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAvLyAgICAgICAgIH0KICAvLyAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXZhdGFyLCByb2xlTmFtZSwgcm9sZUlkIH0gPSBkYXRhWzBdOwogIC8vICAgICAgICAgY29uc29sZS5sb2cocm9sZUlkLCBkYXRhKTsKICAvLyAgICAgICAgIC8vIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAvLyAgICAgICAgIC8vIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcik7CiAgLy8gICAgICAgICBjb21taXQoJ1NFVF9TVEFGRl9DT0RFJywgcm9sZUlkKTsKICAvLyAgICAgICAgIGNvbW1pdCgnU0VUX1NUQUZGX05BTUUnLCByb2xlTmFtZSk7CiAgLy8gICAgICAgICByZXNvbHZlKGRhdGEpOwogIC8vICAgICAgIH0pCiAgLy8gICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAvLyAgICAgICAgIHJlamVjdChlcnJvcik7CiAgLy8gICAgICAgfSk7CiAgLy8gICB9KTsKICAvLyB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICByZXNldFJvdXRlcigpOwogICAgY29tbWl0KCdSRVNFVF9TVEFURScpOyAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgLy8gICBsb2dvdXQoc3RhdGUudG9rZW4pCiAgICAvLyAgICAgLnRoZW4oKCkgPT4gewogICAgLy8gICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgLy8gICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgIC8vICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgIC8vICAgICAgIHJlc29sdmUoKTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAvLyAgICAgICByZWplY3QoZXJyb3IpOwogICAgLy8gICAgIH0pOwogICAgLy8gfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/charity-foundation/store/modules/user.js"],"names":["login","logout","getToken","getUserName","setToken","getUserId","removeToken","resetRouter","avatarGif","getDefaultState","token","name","userId","avatar","staffCode","staffName","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_USER_ID","SET_AVATAR","SET_STAFF_CODE","SET_STAFF_NAME","actions","commit","setName","setUserId","id","resetToken","Promise","resolve","namespaced"],"mappings":"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","sourcesContent":["import { login, logout } from '../../api/user/index';\nimport {\n  getToken,\n  getUserName,\n  setToken,\n  getUserId,\n  removeToken\n} from '../../../../plugins/core/auth';\nimport { resetRouter } from '../../router';\nimport avatarGif from '../../assets/images/avatar.gif';\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: getUserName(),\n    userId: getUserId(),\n    avatar: avatarGif,\n    staffCode: '', // 工号\n    staffName: '' // 用户名\n  };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n  RESET_STATE: state => {\n    Object.assign(state, getDefaultState());\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_NAME: (state, name) => {\n    state.name = name;\n  },\n  SET_USER_ID: (state, userId) => {\n    state.userId = userId;\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar;\n  },\n  SET_STAFF_CODE: (state, staffCode) => {\n    state.staffCode = staffCode;\n  },\n  SET_STAFF_NAME: (state, staffName) => {\n    state.staffName = staffName;\n  }\n};\n\nconst actions = {\n  // user login\n  setToken({ commit }, token) {\n    commit('SET_TOKEN', token);\n  },\n  setName({ commit }, name) {\n    commit('SET_NAME', name);\n  },\n  setUserId({ commit }, id) {\n    commit('SET_USER_ID', id);\n  },\n  // login({ commit }, userInfo) {\n  //   const { username, password } = userInfo;\n  //   return new Promise((resolve, reject) => {\n  //     login({ username: username.trim(), password: password })\n  //       .then(response => {\n  //         const { data } = response;\n  //         commit('SET_TOKEN', `Bearere ${data.token}`);\n  //         setToken(`Bearere ${data.token}`);\n  //         setTimeout(function() {\n  //           resolve();\n  //         }, 2000);\n  //         resolve();\n  //       })\n  //       .catch(error => {\n  //         reject(error);\n  //       });\n  //   });\n  // },\n\n  // get user info\n  // getInfo({ commit, state }) {\n  //   return new Promise((resolve, reject) => {\n  //     getInfo(state.token)\n  //       .then(response => {\n  //         const { data } = response;\n\n  //         if (!data) {\n  //           return reject('Verification failed, please Login again.');\n  //         }\n\n  //         const { name, avatar, roleName, roleId } = data[0];\n  //         console.log(roleId, data);\n  //         // commit('SET_NAME', name);\n  //         // commit('SET_AVATAR', avatar);\n  //         commit('SET_STAFF_CODE', roleId);\n  //         commit('SET_STAFF_NAME', roleName);\n  //         resolve(data);\n  //       })\n  //       .catch(error => {\n  //         reject(error);\n  //       });\n  //   });\n  // },\n\n  // user logout\n  logout({ commit, state }) {\n    removeToken(); // must remove  token  first\n    resetRouter();\n    commit('RESET_STATE');\n    // return new Promise((resolve, reject) => {\n    //   logout(state.token)\n    //     .then(() => {\n    //       removeToken(); // must remove  token  first\n    //       resetRouter();\n    //       commit('RESET_STATE');\n    //       resolve();\n    //     })\n    //     .catch(error => {\n    //       reject(error);\n    //     });\n    // });\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken(); // must remove  token  first\n      commit('RESET_STATE');\n      resolve();\n    });\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};\n"]}]}