{"remainingRequest":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js!/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js??ref--13-0!/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/directives/v-menu.js","dependencies":[{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/directives/v-menu.js","mtime":1627979214385},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/fuyueyi/Desktop/practice/mutilwap/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIOiPnOWNleadg+mZkOaMh+S7pCDmjInpkq7moLnmja7oj5zljZXmmK/lkKblkK/nlKjorr7nva7lr7nlupTmnYPpmZAKICog5qC55o2udnVleOS4i+eahGF1dGjmqKHlnZfnmoRtZW51TGlzdOWIpOaWrQogKi8KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vc3RvcmUnOwppbXBvcnQgY29uZmlnIGZyb20gJy4uLy4uL2NvbmZpZyc7Ci8qKgogKiDmoKHpqozmmK/lkKbmnInmnYPpmZDvvIzml6DmnYPpmZDliKDpmaRkb23oioLngrkKICogQHBhcmFtIHsqfSBlbCBkb23lhYPntKAKICogQHBhcmFtIHsqfSBiaW5kaW5nIOe7keWumuaVsOaNrgogKi8KCmZ1bmN0aW9uIGhhcyhlbCwgYmluZGluZykgewogIC8vIOS4jeWQr+eUqOaMiemSruadg+mZkOWKn+iDvQogIGlmICghY29uZmlnLmVuYWJsZWRCdXR0b25BdXRoKSByZXR1cm47CiAgdmFyIHZhbHVlID0gYmluZGluZy52YWx1ZTsKICB2YXIgbWVudUxpc3QgPSBzdG9yZS5nZXR0ZXJzICYmIHN0b3JlLmdldHRlcnMubWVudUxpc3QgfHwgW107CgogIGlmICh2YWx1ZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHZhbHVlLmxlbmd0aCA+IDApIHsKICAgIHZhciBwZXJtaXNzaW9ucnVsZXMgPSB2YWx1ZTsKICAgIHZhciBoYXNQZXJtaXNzaW9uID0gbWVudUxpc3Quc29tZShmdW5jdGlvbiAocm9sZSkgewogICAgICByZXR1cm4gcGVybWlzc2lvbnJ1bGVzLmluZGV4T2Yocm9sZS5tZW51SWQgKyAnJykgPj0gMDsgLy/nu5/kuIDlrZfnrKbkuLLljLnphY0KICAgIH0pOwoKICAgIGlmICghaGFzUGVybWlzc2lvbiAmJiB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGgpIHsKICAgICAgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTsKICAgIH0KICB9Cn0KCnZhciBtZW51ID0gewogIGluc2VydGVkOiBoYXMsCiAgdXBkYXRlOiBoYXMKfTsKCnZhciBpbnN0YWxsID0gZnVuY3Rpb24gaW5zdGFsbChWdWUpIHsKICBWdWUuZGlyZWN0aXZlKCdtZW51JywgbWVudSk7Cn07CgpWdWUudXNlKGluc3RhbGwpOw=="},{"version":3,"sources":["/Users/fuyueyi/Desktop/practice/mutilwap/src/pages/sims/plugins/directives/v-menu.js"],"names":["Vue","store","config","has","el","binding","enabledButtonAuth","value","menuList","getters","Array","length","permissionrules","hasPermission","some","role","indexOf","menuId","parentNode","removeChild","menu","inserted","update","install","directive","use"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASC,GAAT,CAAaC,EAAb,EAAiBC,OAAjB,EAA0B;AACxB;AACA,MAAI,CAACH,MAAM,CAACI,iBAAZ,EAA+B;AAC/B,MAAQC,KAAR,GAAkBF,OAAlB,CAAQE,KAAR;AACA,MAAMC,QAAQ,GAAIP,KAAK,CAACQ,OAAN,IAAiBR,KAAK,CAACQ,OAAN,CAAcD,QAAhC,IAA6C,EAA9D;;AACA,MAAID,KAAK,IAAIA,KAAK,YAAYG,KAA1B,IAAmCH,KAAK,CAACI,MAAN,GAAe,CAAtD,EAAyD;AACvD,QAAMC,eAAe,GAAGL,KAAxB;AACA,QAAMM,aAAa,GAAGL,QAAQ,CAACM,IAAT,CAAc,UAAAC,IAAI,EAAI;AAC1C,aAAOH,eAAe,CAACI,OAAhB,CAAwBD,IAAI,CAACE,MAAL,GAAc,EAAtC,KAA6C,CAApD,CAD0C,CACa;AACxD,KAFqB,CAAtB;;AAIA,QAAI,CAACJ,aAAD,IAAkBN,KAAlB,IAA2BA,KAAK,CAACI,MAArC,EAA6C;AAC3CP,MAAAA,EAAE,CAACc,UAAH,IAAiBd,EAAE,CAACc,UAAH,CAAcC,WAAd,CAA0Bf,EAA1B,CAAjB;AACD;AACF;AACF;;AAED,IAAIgB,IAAI,GAAG;AACTC,EAAAA,QAAQ,EAAElB,GADD;AAETmB,EAAAA,MAAM,EAAEnB;AAFC,CAAX;;AAKA,IAAMoB,OAAO,GAAG,SAAVA,OAAU,CAASvB,GAAT,EAAc;AAC5BA,EAAAA,GAAG,CAACwB,SAAJ,CAAc,MAAd,EAAsBJ,IAAtB;AACD,CAFD;;AAIApB,GAAG,CAACyB,GAAJ,CAAQF,OAAR","sourcesContent":["/**\n * 菜单权限指令 按钮根据菜单是否启用设置对应权限\n * 根据vuex下的auth模块的menuList判断\n */\nimport Vue from 'vue';\nimport store from '../../store';\nimport config from '../../config';\n\n/**\n * 校验是否有权限，无权限删除dom节点\n * @param {*} el dom元素\n * @param {*} binding 绑定数据\n */\nfunction has(el, binding) {\n  // 不启用按钮权限功能\n  if (!config.enabledButtonAuth) return;\n  const { value } = binding;\n  const menuList = (store.getters && store.getters.menuList) || [];\n  if (value && value instanceof Array && value.length > 0) {\n    const permissionrules = value;\n    const hasPermission = menuList.some(role => {\n      return permissionrules.indexOf(role.menuId + '') >= 0; //统一字符串匹配\n    });\n\n    if (!hasPermission && value && value.length) {\n      el.parentNode && el.parentNode.removeChild(el);\n    }\n  }\n}\n\nlet menu = {\n  inserted: has,\n  update: has\n};\n\nconst install = function(Vue) {\n  Vue.directive('menu', menu);\n};\n\nVue.use(install);\n"]}]}