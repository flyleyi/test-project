(window.webpackJsonp=window.webpackJsonp||[]).push([["catering-crowd"],{"05f4":function(t,e,a){"use strict";var n=(a("5466"),a("450d"),a("ecdf")),o=a.n(n),s=(a("38a0"),a("ad41")),i=a.n(s),c=(a("1951"),a("eedf")),r=a.n(c),l=(a("a9e3"),{headers:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},height:{type:[Number,String]},maxHeight:{type:[Number,String]},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},size:{type:String,default:"medium"},fit:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},currentRowKey:{type:[String,Number]},rowClassName:{type:[Function,String]},rowStyle:{type:[Function,Object]},cellClassName:{type:[Function,String]},cellStyle:{type:[Function,Object]},headerRowClassName:{type:[Function,String]},headerRowStyle:{type:[Function,Object]},headerCellClassName:{type:[Function,String]},headerCellStyle:{type:[Function,Object]},rowKey:{type:[Function,String]},emptyText:{type:String,default:"暂无数据"},defaultExpandAll:{type:Boolean,default:!1},expandRowKeys:{type:Array},defaultSort:{type:Object},tooltipEffect:{type:String},showSummary:{type:Boolean,default:!1},sumText:{type:String,default:"合计"},summaryMethod:{type:Function},spanMethod:{type:Function},selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},lazy:{type:Boolean},load:{type:Function},treeProps:{type:Object}}),u={name:"CTable",components:{ElButton:r.a,ElTable:i.a,ElTableColumn:o.a},props:l,activated:function(){this.doLayout()},methods:{doLayout:function(){var t=this;this.$nextTick((function(){t.$refs.table&&t.$refs.table.doLayout()}))},isShowButton:function(t,e,a){var n=a.hidden;return"function"==typeof n?!n(t,e,a):!n}}},d=(a("b032"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-table"},[a("el-table",t._g(t._b({ref:"table"},"el-table",t.$props,!1),t.$listeners),[t._l(t.headers,(function(e,n){return["btns"!=e.colType||e.hidden?"column"!=e.colType||e.hidden?e.hidden?t._e():a("el-table-column",t._b({key:n},"el-table-column",e,!1)):a("el-table-column",t._b({key:n,scopedSlots:t._u([{key:"default",fn:function(a){return[t._t("column|"+(e.slotName||e.prop),null,{row:a.row,$index:a.$index})]}}],null,!0)},"el-table-column",e,!1)):a("el-table-column",t._b({key:n,scopedSlots:t._u([{key:"default",fn:function(n){return t._l(e.btns,(function(e,o){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowButton(n.row,n.$index,e),expression:"isShowButton(scope.row, scope.$index, btn)"}],key:o,attrs:{size:e.size,type:e.type},on:{click:function(t){return t.stopPropagation(),e.click(n.row,n.$index,o)}}},[t._v(t._s(e.label))])}))}}],null,!0)},"el-table-column",e,!1))]}))],2)],1)}),[],!1,null,"5ed8e428",null);e.a=m.exports},"0802":function(t,e,a){"use strict";var n=a("e644");a.n(n).a},"111c":function(t,e,a){},"1f5a":function(t,e,a){"use strict";a.r(e);var n,o=a("5530"),s=a("ade3"),i=(a("1951"),a("450d"),a("eedf")),c=a.n(i),r=(a("fd71"),a("a447")),l=a.n(r),u=(a("b0c0"),a("ac1f"),a("1276"),a("d3b7"),a("05f4")),d=a("e6d4"),m=a("2f62"),f={neme:"TaskList",components:(n={},Object(s.a)(n,l.a.name,l.a),Object(s.a)(n,c.a.name,c.a),Object(s.a)(n,"CTable",u.a),n),filters:{formatterTime:function(t){return t?t.split("T")[0]:"-"}},data:function(){return{tableData:[],headers:[{label:"序号",type:"index",width:80},{label:"任务名称",prop:"taskName",colType:"column",slotName:"link"},{label:"提交时间",prop:"createTime",colType:"column",slotName:"time"},{label:"进程",colType:"column",slotName:"btns",align:"center",prop:"name",btns:[{label:"办结",size:"small",type:"text",click:function(t,e,a){}},{label:"已办结",size:"small",type:"text",hidden:!0}]}],loading:!0}},computed:Object(o.a)({},Object(m.mapGetters)(["staffName"])),watch:{},methods:{manageGetTaskList:function(){var t=this;Object(d.d)().then((function(e){var a=e.data;t.tableData=a})).finally((function(){t.loading=!1}))},onCompelete:function(t){var e=this;t.taskName?this.$confirm("确定办结该任务？<br>办结后未提交学校单位将无法提交","提醒",{confirmButtonText:"确认",cancelButtonText:"取消",center:!0,showClose:!1,dangerouslyUseHTMLString:!0}).then((function(){Object(d.a)({taskName:t.taskName}).then((function(){e.manageGetTaskList(),e.$message({type:"success",message:"操作成功!"})}))})):this.$message({message:"任务名称不存在，请联系管理员",type:"warning"})},onClickNewTask:function(){var t=this;this.$prompt("","新建任务",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/^.{1,20}$/,inputErrorMessage:"任务名称需在1-20位",inputPlaceholder:"请输入任务名称",center:!0,showClose:!1}).then((function(e){var a=e.value;Object(d.c)({taskName:a}).then((function(e){e.data?t.$message({message:"任务名称已存在，请重新填写",type:"warning"}):t.$router.push({path:"/new-task/index",query:{taskName:a}})}))}))},onJump:function(t){"0"===t.status?this.$router.push({path:"/task-detial/not-complete",query:{taskName:t.taskName}}):"1"===t.status&&this.$router.push({path:"/task-detial/complete",query:{taskName:t.taskName}})}},created:function(){this.manageGetTaskList()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},b=(a("efff"),a("2877")),h=Object(b.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"common-title"},[t._v("任务列表")]),n("div",{staticClass:"common-container"},[n("div",{staticClass:"common-header"},[n("div",{staticClass:"common-header-left"},[n("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.onClickNewTask}},[t._v(" 新增任务 ")])],1),n("div",{staticClass:"common-header-right"})]),t.tableData.length>0?n("div",[n("c-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{headers:t.headers,data:t.tableData,border:""},scopedSlots:t._u([{key:"column|time",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("formatterTime")(a.createTime))+" ")]}},{key:"column|link",fn:function(e){var a=e.row;return[n("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.onJump(a)}}},[t._v(t._s(a.taskName))])]}},{key:"column|btns",fn:function(e){var a=e.row;return["0"===a.status?n("el-button",{staticClass:"btn-blue",attrs:{type:"primary",plain:""},on:{click:function(e){return t.onCompelete(a)}}},[t._v("办结")]):t._e(),"1"===a.status?n("span",{staticClass:"btn-red"},[t._v("已办结")]):t._e()]}}],null,!1,2910227501)})],1):n("div",{staticClass:"empty"},[n("img",{staticClass:"empty-task",attrs:{src:a("ffef"),alt:"",srcset:""}}),n("span",[t._v("暂无数据~")])])])])}),[],!1,null,"229ee4a8",null);e.default=h.exports},"221f":function(t,e,a){"use strict";var n=a("3a97");a.n(n).a},2801:function(t,e,a){},"2eab":function(t,e,a){},"3a97":function(t,e,a){},"50f5":function(t,e,a){"use strict";var n=a("7ff2");a.n(n).a},5177:function(t,e,a){"use strict";var n=a("ec0f");a.n(n).a},"51c5":function(t,e,a){},5428:function(t,e,a){"use strict";a.r(e);var n,o=a("ade3"),s=(a("1951"),a("450d"),a("eedf")),i=a.n(s),c=(a("10cb"),a("f3ad")),r=a.n(c),l=(a("fd71"),a("a447")),u=a.n(l),d=(a("b0c0"),a("d3b7"),a("d81d"),a("a15b"),a("05f4")),m=a("5fa0"),f=a("bdbd"),b={name:"CompleteList",components:(n={},Object(o.a)(n,u.a.name,u.a),Object(o.a)(n,r.a.name,r.a),Object(o.a)(n,i.a.name,i.a),Object(o.a)(n,"CTable",d.a),n),props:{},data:function(){return{loading:!0,headers:[{type:"selection"},{label:"序号",type:"index",width:70,fixed:"left"},{label:"校方名称",prop:"schoolName",colType:"column",slotName:"link",fixed:"left"},{label:"奖金池额度",prop:"bonus",fixed:"left",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前10% 匹配度",prop:"matchedDegree10",fit:!0},{label:"前10% max年薪",prop:"max10",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前10% min年薪",prop:"min10",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前10% ave年薪",prop:"ave10",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前10% ave系数",prop:"aveFactor10"},{label:"前20% 匹配度",prop:"matchedDegree20"},{label:"前20% max年薪",prop:"max20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前20% min年薪",prop:"min20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前20% ave年薪",prop:"ave20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前20% ave系数",prop:"aveFactor20"},{label:"前30% 匹配度",prop:"matchedDegree30"},{label:"前30% max年薪",prop:"max30",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前30% min年薪",prop:"min30",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前30% ave年薪",prop:"ave30",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"前30% ave系数",prop:"aveFactor30"},{label:"后20% 匹配度",prop:"matchedDegreeAfter20"},{label:"后20% max年薪",prop:"maxAfter20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"后20% min年薪",prop:"minAfter20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"后20% ave年薪",prop:"aveAfter20",formatter:function(t,e,a){return a?Object(m.a)(a):Object(m.b)(a)}},{label:"后20% ave系数",prop:"aveFactorAfter20"}],tableData:[],selectedRows:[],schoolName:""}},computed:{taskName:function(){return this.$route.query.taskName},params:function(){return{schoolNames:"",taskName:this.taskName}}},watch:{},created:function(){this.getTaskDetailList()},mounted:function(){},methods:{getTaskDetailList:function(){var t=this;Object(f.d)({taskName:this.taskName}).then((function(e){var a=e.data;t.tableData=a})).finally((function(){t.loading=!1}))},onJump:function(t){this.$router.push({path:"/task-detial/single",query:{taskName:t.taskName,schoolName:t.schoolName,bonus:t.bonus}})},onSelectionChange:function(t){this.selectedRows=t},getParams:function(){var t=this.selectedRows.map((function(t){return t.schoolName}));this.params.schoolNames=t.join(",")},onExport:function(){if(0===this.selectedRows.length)this.$alert("请选择任一条目进行操作！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1});else{this.getParams();var t=Object(f.c)(this.params);window.open(t)}},onDownload:function(){if(0===this.selectedRows.length)this.$alert("请选择任一条目进行操作！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1});else{this.getParams();var t=Object(f.a)(this.params);window.open(t)}},onSearchSchool:function(){var t=this;this.schoolName&&Object(f.f)({taskName:this.taskName,schoolName:this.schoolName}).then((function(e){var a=e.data,n=t.$refs["school"+a.id],o=n.getAttribute("data-index");n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),t.$refs.cTable.$refs.table.setCurrentRow(t.tableData[o])})).catch((function(e){t.$message({message:e.message,type:"warning"})}))}}},h=(a("ae8c"),a("2877")),p=Object(h.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"common-title"},[t._v(t._s(t.taskName))]),a("div",{staticClass:"common-container"},[a("div",{staticClass:"common-header"},[a("div",{staticClass:"common-header-left"},[a("el-input",{staticClass:"search-box",attrs:{type:"text",size:"medium",placeholder:"请输入要查询的学校名称","prefix-icon":"el-icon-search"},model:{value:t.schoolName,callback:function(e){t.schoolName=e},expression:"schoolName"}},[a("el-button",{attrs:{slot:"append",type:"primary",size:"medium",loading:t.loading},on:{click:t.onSearchSchool},slot:"append"},[t._v("查询")])],1),a("el-button",{staticClass:"common-btn",attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.onExport}},[t._v("导出")]),a("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.onDownload}},[t._v("下载")])],1)]),a("p",{staticClass:"common-tips"},[t._v("实际年薪内收入（已发年薪内+分配奖金）计")]),a("c-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"cTable",attrs:{border:"",headers:t.headers,data:t.tableData,"highlight-current-row":!0},on:{"selection-change":t.onSelectionChange},scopedSlots:t._u([{key:"column|link",fn:function(e){var n=e.row,o=e.$index;return[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.onJump(n)}}},[a("span",{ref:"school"+n.id,attrs:{"data-index":o}},[t._v(t._s(n.schoolName))])])]}}])})],1)])}),[],!1,null,"50e7a87a",null);e.default=p.exports},"560b":function(t,e,a){},"57d7":function(t,e,a){},"59b4":function(t,e,a){"use strict";var n=a("111c");a.n(n).a},"66f2":function(t,e,a){"use strict";var n=a("2eab");a.n(n).a},"7ff2":function(t,e,a){},"829d":function(t,e,a){"use strict";var n=a("57d7");a.n(n).a},8476:function(t,e,a){"use strict";a.r(e);var n,o=a("ade3"),s=(a("a7cc"),a("450d"),a("df33")),i=a.n(s),c=(a("1951"),a("eedf")),r=a.n(c),l=(a("b0c0"),a("d3b7"),a("05f4")),u=a("bdbd"),d=a("5fa0"),m={name:"NotCompleteList",components:(n={},Object(o.a)(n,r.a.name,r.a),Object(o.a)(n,"CTable",l.a),Object(o.a)(n,i.a.name,i.a),n),props:{},data:function(){var t={0:"未提交",1:"已提交",2:"已打回"};return{formatNullValue:d.b,formatAmountValue:d.a,loading:!0,headers:[{label:"序号",type:"index",width:80},{label:"校方名称",prop:"schoolName"},{label:"奖金池额度",prop:"bonus",colType:"column",slotName:"bonus"},{label:"当前进度",prop:"taskProgress",formatter:function(e){return t[e.taskProgress]}},{label:"操作",prop:"handle",colType:"column",slotName:"btns"}],tableData:[],dialogVisible:!1,bonus:0,currentId:""}},computed:{taskName:function(){return this.$route.query.taskName}},watch:{},created:function(){this.getTaskDetailList()},mounted:function(){},methods:{bonusChange:function(t){""!==t?/^[1-9]\d*$/.test(t)&&(this.bonus=t):this.bonus=""},onUpdateBonus:function(){var t=this;Object(u.h)({id:this.currentId,bonus:this.bonus}).then((function(e){200===e.status&&(t.dialogVisible=!1,t.$message.success(e.message),t.getTaskDetailList())}))},onEdit:function(t){1==t.taskProgress?this.$message.warning("该校已提交任务，请打回后修改奖金池额度！"):(this.dialogVisible=!0,this.bonus=t.bonus,this.currentId=t.id)},getTaskDetailList:function(){var t=this;Object(u.d)({taskName:this.taskName}).then((function(e){var a=e.data;t.tableData=a})).finally((function(){t.loading=!1}))},onRepulse:function(t){var e=this;this.$confirm("打回后，用户需重新提交！","提醒",{confirmButtonText:"确认",cancelButtonText:"取消",center:!0,showClose:!1}).then((function(){Object(u.e)({taskId:t.id}).then((function(){e.getTaskDetailList(),e.$message({type:"success",message:"操作成功!"})}))}))},onJump:function(t){this.$router.push({path:"/task-detial/single",query:{taskName:t.name,schoolName:t.schoolName,bonus:t.bonus}})}}},f=(a("5177"),a("2877")),b=Object(f.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container not-completeList"},[a("div",{staticClass:"common-title"},[t._v(t._s(t.taskName))]),a("div",{staticClass:"common-container"},[a("c-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{headers:t.headers,data:t.tableData,border:""},scopedSlots:t._u([{key:"column|btns",fn:function(e){var n=e.row;return["1"===n.taskProgress?a("el-button",{attrs:{size:"small",type:"blue",icon:"custom-check-icon"},on:{click:function(e){return t.onJump(n)}}},[t._v("查看")]):t._e(),"1"===n.taskProgress?a("el-button",{attrs:{size:"small",type:"red",icon:"custom-repulse-icon"},on:{click:function(e){return t.onRepulse(n)}}},[t._v("打回")]):t._e(),"1"!==n.taskProgress?a("span",[t._v("-")]):t._e()]}},{key:"column|bonus",fn:function(e){var n=e.row;return[a("div",{staticClass:"bonus-box",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("span",[t._v(t._s(n.bonus?t.formatAmountValue(n.bonus):t.formatNullValue(n.bonus)))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onEdit(n)}}},[t._v("修改")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"奖金池额度修改为：",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{value:t.bonus,maxlength:9,placeholder:"请输入内容"},on:{input:t.bonusChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onUpdateBonus()}}},[t._v("确 定")])],1)],1)],1)}),[],!1,null,null,null);e.default=b.exports},ae8c:function(t,e,a){"use strict";var n=a("51c5");a.n(n).a},b032:function(t,e,a){"use strict";var n=a("f166");a.n(n).a},b69e:function(t,e,a){"use strict";a.r(e);var n,o,s=a("5530"),i=a("ade3"),c=(a("10cb"),a("450d"),a("f3ad")),r=a.n(c),l=(a("eca7"),a("3787")),u=a.n(l),d=(a("425f"),a("4105")),m=a.n(d),f=(a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("5319"),a("99af"),a("d3b7"),a("25f0"),a("05f4")),b=(a("d4df"),a("7fc1")),h=a.n(b),p=(a("560b"),a("dcdc")),v=a.n(p),g=(a("1951"),a("eedf")),k=a.n(g),y=(a("a7cc"),a("df33")),_=a.n(y),N=(a("d81d"),a("4de4"),a("e6d4")),w={name:"ChooseRole",components:(n={},Object(i.a)(n,_.a.name,_.a),Object(i.a)(n,k.a.name,k.a),Object(i.a)(n,v.a.name,v.a),Object(i.a)(n,h.a.name,h.a),n),props:{taskName:{type:String,required:!0}},data:function(){return{visible:!1,loading:!1,dataLoading:!1,checkAll:!1,checkedSchools:[],allSchools:[],isIndeterminate:!0,schoolList:[],checkedSchoolList:[]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{initData:function(){this.checkedSchools=[],this.allSchools=[],this.schoolList=[],this.checkedSchoolList=[]},getSchools:function(){var t=this;Object(N.b)().then((function(e){var a=e.data;for(var n in a)a[n],t.schoolList.push({schoolName:n,associatedAccount:a[n]}),t.allSchools.push(a[n])}))},handleCheckAllChange:function(t){this.checkedSchools=t?this.allSchools:[],this.isIndeterminate=!1},onCheckedSchoolsChange:function(t){var e=t.length;this.checkAll=e===this.allSchools.length,this.checkAll,this.isIndeterminate=e>0&&e<this.allSchools.length},show:function(){this.initData(),this.getSchools(),this.visible=!0},hide:function(){this.visible=!1},getSchoolList:function(){var t=this;this.checkedSchoolList=this.schoolList.filter((function(e){return-1!==t.checkedSchools.indexOf(e.associatedAccount)})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{taskName:t.taskName,bonus:null})}))},onConfirm:function(){this.hide(),this.getSchoolList(),this.$emit("checkedSchool",this.checkedSchoolList)}}},O=(a("59b4"),a("2877")),j=Object(O.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,title:"参与角色选择",center:""},on:{"update:visible":function(e){t.visible=e}}},[a("div",{staticClass:"checkbox-box"},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全部")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:t.onCheckedSchoolsChange},model:{value:t.checkedSchools,callback:function(e){t.checkedSchools=e},expression:"checkedSchools"}},t._l(t.schoolList,(function(e,n){return a("el-checkbox",{key:n,attrs:{label:e.associatedAccount}},[t._v(t._s(e.schoolName))])})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",loading:t.loading||t.dataLoading},on:{click:function(e){t.visible=!1}}},[t._v(" 取消 ")]),a("el-button",{attrs:{size:"small",loading:t.loading||t.dataLoading,type:"primary"},on:{click:t.onConfirm}},[t._v(" 确定 ")])],1)])}),[],!1,null,"520d3cbe",null).exports,C={name:"NewTask",components:(o={},Object(i.a)(o,m.a.name,m.a),Object(i.a)(o,u.a.name,u.a),Object(i.a)(o,r.a.name,r.a),Object(i.a)(o,"ChooseRole",j),Object(i.a)(o,"CTable",f.a),o),props:{},data:function(){return{dataLoading:!1,formData:{},isReleased:!1,headers:[{label:"序号",type:"index",width:80},{label:"校方名称",prop:"schoolName"},{label:"关联账号",prop:"associatedAccount"},{label:"奖金池额度",prop:"bonus",colType:"column",slotName:"bonus"}]}},computed:{taskName:function(){return this.$route.query.taskName}},watch:{},created:function(){},mounted:function(){},methods:{onChooseRole:function(){this.isReleased?this.$alert("已发布，不可重复操作！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1}):this.$refs.chooseRole.show()},getCheckedSchool:function(t){this.$set(this.formData,"tableData",t)},onRelease:function(){var t=this;if(this.formData.tableData&&this.formData.tableData.length>0){var e=/^(0|[1-9][0-9]{0,8})$/,a=[];this.formData.tableData.every((function(n){if(null===n.bonus||"string"==typeof n.bonus&&0===n.bonus.length)return t.$alert("奖金池额度不可为空！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1}),!1;var o=Number(t.delcommafy(n.bonus));return e.test(o)?(a.push(Object(s.a)(Object(s.a)({},n),{},{bonus:o})),!0):(t.$alert("奖金池额度需在0-99,999,999之间！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1}),!1)}))&&this.$confirm("确定发布该任务至各单位？<br>发布后奖金池额度将无法修改","提醒",{confirmButtonText:"确认",cancelButtonText:"取消",center:!0,showClose:!1,dangerouslyUseHTMLString:!0}).then((function(){t.dataLoading=!0,Object(N.e)(a).then((function(){t.$message({type:"success",message:"发布成功!"}),t.dataLoading=!1,t.isReleased=!0}))}))}else this.$alert("请先选择参与角色！","提醒",{cancelButtonText:"确定",center:!0,showClose:!1})},comdify:function(t){if(!t)return t;var e=t.split("."),a=e[0].replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,");return e.length>1&&e[1]?"".concat(a,".").concat(e[1]):"".concat(a)},delcommafy:function(t){return t?t=(t=t.toString()).replace(/,/gi,""):t},blurInput:function(t,e,a){var n=t.target.value||"";this.formData.tableData[a].bonus=this.comdify(this.delcommafy(n))},foucusInput:function(t,e,a){var n=t.target.value||"";this.formData.tableData[a].bonus=this.delcommafy(n)}}},x=(a("0802"),Object(O.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"app-container"},[a("div",{staticClass:"common-title"},[t._v(t._s(t.taskName))]),a("div",{staticClass:"common-container"},[a("div",{staticClass:"common-header"},[a("div",{staticClass:"common-header-left"},[a("el-button",{staticClass:"common-btn my-btn",attrs:{type:"primary",size:"medium"},on:{click:t.onChooseRole}},[t._v(" 参与角色选择 ")]),a("el-button",{attrs:{type:"primary",size:"medium",disabled:t.isReleased},on:{click:t.onRelease}},[t._v(" 发布 ")])],1),a("div",{staticClass:"common-header-right"})]),a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}],ref:"elForm",attrs:{model:t.formData,size:"mini"}},[a("c-table",{attrs:{headers:t.headers,data:t.formData.tableData,border:""},scopedSlots:t._u([{key:"column|bonus",fn:function(e){var n=e.row,o=e.$index;return[a("el-form-item",{key:"tableData."+o+".bonus",attrs:{prop:"tableData."+o+".bonus"}},[a("el-input",{attrs:{maxlength:"8",placeholder:"手动输入",disabled:t.isReleased},on:{blur:function(e){return t.blurInput(e,n,o)},focus:function(e){return t.foucusInput(e,n,o)}},model:{value:n.bonus,callback:function(e){t.$set(n,"bonus",e)},expression:"row.bonus"}})],1)]}}])})],1)],1)]),a("choose-role",{ref:"chooseRole",attrs:{"task-name":t.taskName},on:{checkedSchool:t.getCheckedSchool}})],1)])}),[],!1,null,"1be9a056",null));e.default=x.exports},bdbd:function(t,e,a){"use strict";a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"a",(function(){return m})),a.d(e,"b",(function(){return f})),a.d(e,"h",(function(){return b}));var n=a("be3b"),o=a("4328"),s=a.n(o),i=a("c12e");function c(t){return Object(n.b)({url:"/task/TaskDetails",method:"GET",params:t},"bonus-be")}function r(t){return Object(n.b)({url:"/task/repulseTask",method:"POST",data:t},"bonus-be")}function l(t){return Object(n.b)({url:"/task/selectTaskDetailsBySchool",method:"GET",params:t},"bonus-be")}function u(t){return Object(n.b)({url:"/task/taskDetailsOne",method:"GET",params:t},"bonus-be")}function d(t){return i.a["bonus-be"]+"/task/exportForData"+"?"+s.a.stringify(t)}function m(t){return i.a["bonus-be"]+"/task/downloadDataForZip"+"?"+s.a.stringify(t)}function f(t){return i.a["bonus-be"]+"/task/downloadData"+"?"+s.a.stringify(t)}function b(t){return Object(n.b)({url:"/task/updateBonus",method:"GET",params:t},"bonus-be")}a("b49e")},c3ec:function(t,e,a){"use strict";a.r(e);var n,o=a("ade3"),s=(a("1951"),a("450d"),a("eedf")),i=a.n(s),c=(a("b0c0"),a("a9e3"),a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("c-table",{attrs:{headers:t.headers,data:t.data,border:"","max-height":t.cHeight-320},scopedSlots:t._u([{key:"column|ranking",fn:function(e){var n=e.row;return[a("span",{class:{red:1==n.warning}},[t._v(t._s(n.realizedIncomeRanking))])]}}])})}),r={name:"RankingPanel",components:{CTable:a("05f4").a},props:{data:{type:Array}},data:function(){function t(t){return"number"!=typeof t||isNaN(t)?"-":t.toLocaleString()}return{headers:[{label:"绩效排名",prop:"performanceRanking",width:50},{label:"姓名",prop:"teacherName"},{label:"工号",prop:"teacherNum",width:90},{label:"年薪",prop:"salary",formatter:function(e){return t(e.salary)}},{label:"已发年薪内收入",prop:"plannedIncome",formatter:function(e){return t(e.plannedIncome)}},{label:"已发年薪外收入",prop:"unplannedIncome",formatter:function(e){return t(e.unplannedIncome)}},{label:"分配奖金",prop:"bonus",formatter:function(e){return t(e.bonus)}},{label:"实际年薪内收入(已发年薪内+奖金)",width:140,prop:"realizedIncome",formatter:function(e){return t(e.realizedIncome)}},{label:"实际年薪内收入排名",prop:"realizedIncomeRanking",slotName:"ranking",colType:"column",width:100},{label:"备注",prop:"note","show-overflow-tooltip":!0}]}},computed:{cHeight:function(){var t=document.documentElement.clientHeight||document.body.clientHeight;return t>820?t:820}},watch:{},created:function(){},mounted:function(){},methods:{}},l=(a("221f"),a("2877")),u=Object(l.a)(r,c,[],!1,null,"609baff8",null).exports,d={name:"SalaryPanel",props:{data:{type:Object}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},m=(a("829d"),Object(l.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",[t._m(0),a("tr",[a("td",[t._v("前10%")]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.max10))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.min10))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.ave10))))]),a("td",[t._v(t._s(t.data.aveFactor10))])]),a("tr",[a("td",[t._v("前20%")]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.max20))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.min20))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.ave20))))]),a("td",[t._v(t._s(t.data.aveFactor20))])]),a("tr",[a("td",[t._v("前30%")]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.max30))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.min30))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.ave30))))]),a("td",[t._v(t._s(t.data.aveFactor30))])]),a("tr",[a("td",[t._v("后20%")]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.maxAfter20))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.minAfter20))))]),a("td",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.data.aveAfter20))))]),a("td",[t._v(t._s(t.data.aveFactorAfter20))])])]),a("p",{staticClass:"common-tips"},[t._v("实际年薪内收入（已发年薪内+分配奖金）计")])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("max年薪")]),a("th",[t._v("min年薪")]),a("th",[t._v("ave年薪")]),a("th",[t._v("ave系数")])])}],!1,null,"319c42ad",null)).exports,f={name:"MatchPanel",components:{},props:{data:{type:Object}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},b=(a("66f2"),Object(l.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("匹配度")]),a("li",[t._v("前10%——"+t._s(t.data.matchedDegree10))]),a("li",[t._v("前20%——"+t._s(t.data.matchedDegree20))]),a("li",[t._v("前30%——"+t._s(t.data.matchedDegree30))]),a("li",[t._v("后20%——"+t._s(t.data.matchedDegreeAfter20))])])}),[],!1,null,"107d9fdd",null)).exports,h=a("bdbd"),p={name:"SingleDetail",components:(n={},Object(o.a)(n,i.a.name,i.a),Object(o.a)(n,"RankingPanel",u),Object(o.a)(n,"SalaryPanel",m),Object(o.a)(n,"MatchPanel",b),n),props:{},data:function(){return{loading:!0,tableData:[],data:{}}},computed:{taskName:function(){return this.$route.query.taskName},schoolName:function(){return this.$route.query.schoolName},bonus:function(){return Number(this.$route.query.bonus)}},watch:{},created:function(){this.taskDetailsOne()},mounted:function(){},methods:{taskDetailsOne:function(){var t=this;Object(h.g)({taskName:this.taskName,schoolName:this.schoolName}).then((function(e){var a=e.data;t.tableData=a,t.data=a.length>0?a[0]:{}})).finally((function(){t.loading=!1}))},onDownload:function(){var t=Object(h.b)({taskName:this.taskName,schoolName:this.schoolName});window.open(t)}}},v=(a("50f5"),Object(l.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[a("div",{staticClass:"school-info"},[a("h1",[t._v(t._s(t.taskName))]),a("p",[a("span",[t._v("校方："+t._s(t.schoolName))]),a("span",[t._v("奖金池额度："),a("b",[t._v(t._s(t._f("formatAmountValue")(t._f("formatNullValue")(t.bonus))))])])])]),a("div",{staticClass:"common-container container-wrap"},[a("el-button",{staticClass:"btn-download",attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.onDownload()}}},[t._v("下载")]),a("div",{staticClass:"school-main"},[a("div",{staticClass:"main-left"},[a("ranking-panel",{attrs:{data:t.tableData}})],1),a("div",{staticClass:"main-right"},[a("div",{staticClass:"main-right-top"},[a("match-panel",{attrs:{data:t.data}})],1),a("div",{staticClass:"main-right-bottom"},[a("salary-panel",{attrs:{data:t.data}})],1)])])],1)])}),[],!1,null,"7aa1493f",null));e.default=v.exports},d4df:function(t,e,a){},e644:function(t,e,a){},e6d4:function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return i})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return r}));var n=a("be3b");function o(t){return Object(n.b)({url:"/task/list",method:"GET",params:t},"bonus-be")}function s(t){return Object(n.b)({url:"/task/complete",method:"POST",data:t},"bonus-be")}function i(t){return Object(n.b)({url:"/task/addTask",method:"POST",data:t},"bonus-be")}function c(){return Object(n.b)({url:"/task/findAllSchool",method:"GET"},"bonus-be")}function r(t){return Object(n.b)({url:"/task/isHaveTaskName",method:"GET",params:t},"bonus-be")}},ec0f:function(t,e,a){},efff:function(t,e,a){"use strict";var n=a("2801");a.n(n).a},f166:function(t,e,a){},ffef:function(t,e,a){t.exports=a.p+"img/empty.23c0e2c4.png"}}]);
//# sourceMappingURL=catering-crowd.266f2eb3.js.map